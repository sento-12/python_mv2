/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2024 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const e="PING_IFRAME_BLOCK";const o=0,t="PRINT_IN_BACKGROUND",s={NONE:0,INFO:1,ERROR:2,WARN:3,DEBUG:4,ALL_IN_BACKGROUND:99},n=1,i=2,c=3,r=4,l={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},a={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};const d=new class{constructor(){this.storageChecked=!1,this.logLevel=null,this.queue=[];const e="MCLOGLEVEL";chrome?.storage?.local.get([e]).then((t=>{const n=Object.values(s).includes(t[e]);this.logLevel=n?t[e]:o,this.logLevel!==s.NONE&&this.queue.forEach((({callback:e,message:o,processType:t})=>{e(o,t)})),this.queue=[],this.storageChecked=!0}))}log(e,o=null){this.storageChecked?this.processLog(e,n,o,this.logLevel):this.queue.push({callback:this.log.bind(this),message:e,processType:o})}error(e,o=null){this.storageChecked?this.processLog(e,i,o,this.logLevel):this.queue.push({callback:this.error.bind(this),message:e,processType:o})}warn(e,o=null){this.storageChecked?this.processLog(e,c,o,this.logLevel):this.queue.push({callback:this.warn.bind(this),message:e,processType:o})}debug(e,o=null){this.storageChecked?this.processLog(e,r,o,this.logLevel):this.queue.push({callback:this.debug.bind(this),message:e,processType:o})}processLog(e,o,n,c){if(c===s.NONE)return;let r="chrome-extension:"===location.protocol?l.BACKGROUND:l.CONTENT;n&&l[n]&&(r=n);const a=new Date,d=o===i?e:`%c[${r} ${a.toLocaleString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}]: %c${e}`;r===l.CONTENT&&this.logLevel===s.ALL_IN_BACKGROUND&&chrome.runtime.sendMessage({command:t,logMessage:d,processType:r,logType:o,logLevel:c}),this.printLog(d,r,o,c)}printLog(e,o,t,l){const d=a.DEFAULT,h=a[o]||d;if(l>=s.ERROR&&t===i&&console.error(e),l>=s.INFO&&t===n&&console.log(e,h,d),l>=s.WARN&&t===c){const o="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${e}`,o,h,d)}if(l>=s.DEBUG&&t===r){const o="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${e}`,o,h,d)}}};class h{constructor(e){this.pingCommand=e,this.basePingListener(),this.addIdentifier()}basePingListener(e=null){((e,o=null,t)=>{"function"==typeof t?chrome.runtime.onMessage.addListener(((s,n,i)=>{if(n.id===chrome.runtime.id&&"object"==typeof s&&!Array.isArray(s)&&s?.ipcId===e)return t({promises:o,request:s,sender:n,sendResponse:i})})):d.error("Provided with invalid callback function")})("WA",null,(({request:o,sendResponse:t})=>{const{command:s}=o;if(s===this.pingCommand)return d.debug(`File Injection [pinged]: Received ${s} command`),t({content:!0}),"function"==typeof e&&e(),!0}))}addIdentifier(){var e;e=()=>{const e=document.createElement("span");e.id=this.pingCommand,e.style.cssText="display:none",document.body.appendChild(e)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e))}}(new class extends h{constructor(){super(e),this.routeToBP=this.routeToBlockPage.bind(this)}main(){this.basePingListener(this.routeToBP)}getIFrameBlockPageUrl(){return chrome.runtime.getURL("html/iframe_block_page.html")}routeToBlockPage(){const e=this.getIFrameBlockPageUrl();window.location.replace(e)}}).main()})();
//# sourceMappingURL=../sourceMap/chrome/scripts/iframe_block.js.map