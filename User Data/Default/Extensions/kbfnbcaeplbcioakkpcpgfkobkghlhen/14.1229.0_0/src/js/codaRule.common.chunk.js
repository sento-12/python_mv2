(self.webpackChunk=self.webpackChunk||[]).push([[6011],{99264:(e,t,i)=>{i.d(t,{Ao:()=>l,CW:()=>r,Hq:()=>s,Vt:()=>d,YH:()=>n,ZD:()=>a,Zw:()=>o,wE:()=>u});const n={zIndex:i(50899).op,position:"absolute",top:0,left:0,width:"100%",pointerEvents:"all"},o="vBarsFeedbackForm",a="grammarly-extension-vBars-feedback-form",r="vBars",l="grammarly-extension-vBars",d="vBarCard",s="grammarly-extension-vBar-cad",u="vBarCardPositionReference"},9696:(e,t,i)=>{i.r(t),i.d(t,{Coda:()=>n,getHideGrammarlyWhenTextFieldIsUnderAnimationSub:()=>N,getInjectionLayoutForGButtonForDocument:()=>D,injectIntegrationRootForMainCanvasOnly:()=>O,isMainCanvas:()=>P});var n,o=i(84714),a=i(44071),r=i(64271),l=i(59179),d=i(24666),s=i(90572),u=i(63532),c=i(20161),p=i(18827),m=i(14969),g=i(94592),f=i(12901),h=i(13391),b=i(99264),C=i(4798),E=i(57935),v=i(80831),y=i(70874),T=i(16703),x=i(87234),B=i(38684),I=i(72779),A=i(65384),R=i(82133),S=i(75629),k=i(59898),w=i(21220),U=i(87086),G=i(6088),_=i(5614),H=i(37094),F=i(23070),M=i(55793);!function(e){function t({changes:e,deltaChange:t}){return e.length>0||t.delta.ops.length>0}function i(i){const n=(0,U.B)(i.field),o=i.experimentClient.isGateEnabled(C.K.CodaUseCSSTransformTranslateForUnderlinePosition),a=i.experimentClient.isGateEnabled(C.K.CodaPositionGbuttonIntoFixedContainer);let r={};if(a){const e=document.querySelector('[data-coda-ui-id="help-button"]');(null==e?void 0:e.parentElement)&&P(i.field)&&(r={...r,...D(e.parentElement)}),r={...r,injectIntegrationRoot:t=>{O(t,e)}}}const s=[],u=h.h.create(!1),c=i.experimentClient.isGateEnabled(C.K.CodaHideUnderlineWhenAnimated),p=i.field.firstElementChild,m=y.S.sec1.pipe((0,l.U)((()=>{var e;for(const t of document.querySelectorAll("span[role=button]"))if("Suggesting edits"===(null===(e=t.textContent)||void 0===e?void 0:e.trim()))return!0;return!1})),(0,d.x)(((e,t)=>e===t)));return{createLayout:()=>(s.push(m.subscribe(g.wW(u))),c&&p&&s.push(N(p)),new B.A7(i.field,{...r,createGbuttonShiftBehavior:()=>u.view((e=>e?{top:self.innerHeight,left:self.innerWidth}:{top:0,left:0})),getFieldSize:(e,t)=>{if(u.get())return{width:0,height:0};const i=o&&e.firstElementChild?(0,I.Bi)(self.getComputedStyle(e.firstElementChild)):void 0;return{width:t.width-((null==i?void 0:i.x)||0),height:t.height-((null==i?void 0:i.y)||0)}}})),createSelectionSource:()=>n,createTextObserver:()=>new _.j(i.field,A.k.fromDiff,n,void 0,e.createTextMapWithoutCodeBlocks,t),extraCondition:()=>v.T.isSupported(),createReplacementService:e=>new R.V0({eventTarget:i.field,textObserver:e,asyncReplaceDelay:100,deletionEvent:"paste",experimentClient:i.experimentClient}),validationRules:[...k.u,(0,w.Uo)(20,135)],onDispose:()=>{s.forEach((e=>e.unsubscribe()))}}}e.MIX_MIN_TEXTAREA_HEIGHT_FOR_GBUTTON=35,e.TEXTAREA_CODA_UI_IDS=["page-title","page-subtitle","page-list-item-title","hyperlink-builder-text-input"],e.isNonEmptyChange=t,e.createTextMapWithoutCodeBlocks=e=>G.Z.create(e,{andFilterNode:(e,t)=>!e.classList.contains("kr-code-block")}),e.shouldHideGButtonInTextarea=t=>{const i=t.editorElement.getAttribute("data-coda-ui-id"),n=t.editorElement.getBoundingClientRect().height;return i&&e.TEXTAREA_CODA_UI_IDS.includes(i)||n<e.MIX_MIN_TEXTAREA_HEIGHT_FOR_GBUTTON},e.getContentIntegrationConfigure=i,e.validateElementByCodaUiId=(e,t)=>({ruleName:e,match:(e,i)=>i.field.getAttribute("data-coda-ui-id")!==t}),e.content=S.T.contentEditable("CodaIO.content",i),e.textareaRule=S.T.textarea("generic",(t=>{const i=t.experimentClient.isGateEnabled(C.K.CodaHideGbuttonForDocumentTitle);return{gbuttonMinimizeState:(0,o.of)(!0),createLayout:()=>new B.A7(t.field,{injectIntegrationRoot:t=>{"gbutton"===t.grammarlyPart&&i&&e.shouldHideGButtonInTextarea(t)||(0,B.Ry)(t)}}),validationRules:[...k.u,(0,w.Uo)(20,45),e.validateElementByCodaUiId("skipTableTitle","tableTitle"),e.validateElementByCodaUiId("skipSharingDialogEmailInput","sharing-dialog-email-input"),e.validateElementByCodaUiId("skipEmbedHyperlinkBuilder","embedHyperlinkBuilder"),e.validateElementByCodaUiId("skipPageAuthorsInput","page-authors-input")]}})),e.page=(0,H.$W)({name:"coda",domain:M.LF},[e.content,F.k.iframeHostRule,e.textareaRule])}(n||(n={}));const D=e=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{top:"-5px",right:"0px"},createPositionStyleBehavior:e=>e.pipe(l.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:-e.left+"px",bottom:-e.top+"px"})))),calculateMetrics:(e,t,i)=>{const n=x.p8.create({top:i.top+-5,left:e.size.width-i.left});return{offset:n,page:x.Cv.fromOffset(n,x.Cv.fromClient(e.client,{top:t.scrollY,left:t.scrollX}),{top:0,left:0}),client:x.Ir.create(x.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:T.V.gButtonMaxSize}}}}),O=(e,t)=>{("gbutton"!==e.grammarlyPart||P(e.editorElement))&&("gbutton"===e.grammarlyPart&&P(e.editorElement)&&!t||(0,B.Ry)(e))},P=e=>e.parentElement&&!(0,f.q2)(e.parentElement,"data-coda-ui-id","editable"),N=e=>{const t=()=>[...document.getElementsByTagName(B.Mf),...document.getElementsByTagName(b.Ao)],i="data-temp-style";let n=!1;return(0,a.R)(e,"animationstart").pipe((0,s.h)((()=>!n)),(0,u.b)((()=>{n=!0;for(const e of t()){const t=e.getAttribute("style");t&&e.setAttribute(i,t),e.setAttribute("style","display: none")}})),(0,c.w)((()=>(0,r.T)((0,a.R)(e,"animationend").pipe((0,p.g)(E.E0)),y.S.sec2).pipe((0,m.P)())))).subscribe((()=>{for(const e of t()){const t=e.getAttribute(i);t?(e.setAttribute("style",t),e.removeAttribute(i)):e.removeAttribute("style")}n=!1}))}}}]);