(self.webpackChunk=self.webpackChunk||[]).push([[628],{24858:(e,t,r)=>{r.d(t,{u:()=>n});var n,i,a,o,s,l,c,d=r(49231),u=r(90023),m=r(77400),p=r(704),h=r(84308),g=r(82589),f=r(63532),y=r(85156),v=r(52303),x=r(49225);i=n||(n={}),a=i.Manager=function(e){var t=e.children,r=e.remSize,n=m.Dx(r).pipe(p.shareReplay({refCount:!0,bufferSize:1}));return x.P.useSingleton("RemSize.Manager"),x.P.useSubscriptionTo(n),d.createElement(c.Provider,{value:n},t)},i.DefaultManager=function(e){var t=e.children;return x.P.useSingleton("RemSize.DefaultManager"),d.createElement(a,{remSize:s(o)},t)},o=i.defaultSizeObserver=h.a(g.Lw("(max-width: 1359px)"),g.Lw("(min-width: 1600px)"),(function(e,t){return e?14:t?18:16})),s=i.withRemSizeEffect=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return e.pipe(f.b((function(e){return t(v.G(e))})),y.x(t.bind(null,v.YP)),p.shareReplay({refCount:!0,bufferSize:1}))},l=i.defaultFontSizeSetter=function(e){n.setRootCssVar(document.documentElement,e),n.setRootFontSize(e)},c=i.Context=d.createContext(o),i.setRootCssVar=function(e,t){e.style.setProperty("--rem",(0,u.zG)(t,v.UI(String),v.QP))},i.setRootFontSize=function(e){document.documentElement.style.fontSize=(0,u.zG)(e,v.UI((function(e){return e+"px"})),v.QP)}},44737:(e,t,r)=>{r.d(t,{B:()=>C,N:()=>S});var n=r(84910),i=r(78520),a=r(49231),o=r(47387),s=r(37213),l=r(13391),c=r(84714),d=r(77400),u=r(59179),m=r(84308),p=r(954),h=r(20161),g=r(704),f=r(97767),y=r(64538),v=r(56424),x=r(84103),I=r(28108),b=r(11953);function C(e){var t=e.value,r=e.initValue,i=void 0===r?b.g.MIN:r,l=e.wrapperClass,m=e.progressClass,p=e.borderClass,h=e.isLoading,g=void 0===h?c.of(!1):h,f=S(t,i);return a.createElement(o.F.div,(0,n._)({role:"progressbar","aria-label":"Progress","aria-valuenow":d.Dx(t).pipe(u.U(b.g.iso.unwrap))},(0,s.Sh)(L.wrapper,l)),a.createElement(A,{width:f,progressClass:m,borderClass:p,isLoading:g}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.g.MIN,r=l.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return r.set(!0)}))})),m.a(d.Dx(e),r,(function(e,r){return r?e:t}))}function A(e){var t=e.width,r=e.progressClass,l=e.isLoading,c=e.borderClass,d=t.pipe(u.U((function(e){return"".concat(e,"%")}))),m=t.pipe(u.U(b.g.prism.reverseGet),u.U((function(e){return e>0?"".concat(e+.75,"%"):0})),p.O(0)),y=l.pipe(h.w((function(e){return e?d:"0"}))),v=t.pipe(u.U(b.g.isMin),g.shareReplay({bufferSize:1,refCount:!0}));return a.createElement(a.Fragment,null,a.createElement(o.F.div,(0,i._)((0,n._)({},(0,s.Sh)(L.borderContainer,v.pipe(u.U((0,f.RN)(L.borderContainerZeroWidth,L.borderContainerWithMinWidth))),c)),{style:{width:m}})),a.createElement(o.F.div,(0,i._)((0,n._)({},(0,s.Sh)(Boolean(r)?r:L.defaultProgress,L.progressBar,v.pipe(u.U((0,f.RN)(L.progressBarZeroWidth,L.progressBarWithMinWidth))))),{style:{width:d}})),a.createElement(o.F.div,{className:L.loading,style:{width:y}}))}var w=v.ux.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),_={position:"relative",width:v.ux.percent(100),height:v.ux.rem(.25),borderRadius:v.ux.rem(I.Jr),backgroundColor:x.xO},k={position:"relative",top:0,height:v.ux.percent(100),borderRadius:v.ux.rem(I.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},E={minWidth:v.ux.px(4)},T={position:"absolute",backgroundColor:y.Il.CoreNeutral0},M={minWidth:v.ux.px(6)},G={position:"absolute",minWidth:0,backgroundImage:x.b6,backgroundSize:"20px 20px",transition:"none",animation:"".concat(w," 1s linear infinite")},L=v.ux.stylesheet({wrapper:[_,_],progressBar:[k],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[E],borderContainer:[k,T],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[M],loading:[k,G],defaultProgress:[{backgroundImage:"linear-gradient(to right, #6391ff 0%, #2a42ef 100%)"}]})},80606:(e,t,r)=>{r.d(t,{In:()=>m,Vg:()=>c,dy:()=>u});var n=r(72117),i=r(91267),a=r(49231),o=r(37213),s=r(68823),l=r(56424),c=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function d(e){return s.g+function(e){return e.length<4?e.codePointAt(0).toString(16):e.codePointAt(0).toString(16)+"-"+e.codePointAt(2).toString(16)}(e)+".svg"}var u=function(e){var t=e.children,r=e.emojiClassName,n=e.className,i=a.useRef(null);return a.useEffect((function(){i.current&&(i.current.innerHTML=i.current.innerHTML.replace(c,(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.emoji;return'<img alt="'.concat(e,'" class="').concat(t,'" src="').concat(d(e),'" onerror="this.replaceWith(this.alt)" draggable="false" />')}(e,r)})))}),[i,r]),a.createElement("span",{ref:i,className:n},t)},m=function(e){var t=e.id,r=e.className,l=(0,n._)(a.useState(!1),2),c=l[0],d=l[1],u=(0,n._)(a.useState(""),2),m=u[0],h=u[1],g=(0,n._)(a.useState(""),2),f=g[0],y=g[1];return a.useEffect((function(){d(!1),y(function(e){return s.g+e+".svg"}(t)),h(function(e){try{var t;return(t=String).fromCodePoint.apply(t,(0,i._)(e.map((function(e){return parseInt(e,16)}))))}catch(e){return""}}(t.split("-")))}),[t]),c?a.createElement("span",(0,o.Sh)(r,p.emojiFromIDAlt),m):a.createElement("img",{className:r,src:f,alt:m,onError:function(){return d(!0)},"aria-hidden":!0})},p=l.ux.stylesheet({emoji:[{display:"inline",marginRight:".25em",width:"1em",verticalAlign:"sub",lineHeight:1,transform:"scale(1.25)",transformOrigin:"bottom",userSelect:"none"}],emojiFromIDAlt:[{display:"flex",alignItems:"center"}]})},97469:(e,t,r)=>{r.d(t,{$:()=>f});var n,i=r(32490),a=r(84910),o=r(78520),s=r(42927),l=r(49231),c=r(47387),d=r(37213),u=r(77400),m=r(17613),p=r(64538),h=r(56424),g=r(84103);function f(e){var t=e.wrapperClassName,r=e.variation,n=e.isIdle,i=(e.ref,e.label),d=(0,s._)(e,["wrapperClassName","variation","isIdle","ref","label"]);return l.createElement(c.F.span,{"data-role":"spinner",role:"status","aria-busy":!Boolean(n),"aria-live":Boolean(n)?"off":"polite","aria-label":null!=i?i:"Content is loading.",className:t},u.ab(r,(function(e){return l.createElement(f.Svg,(0,o._)((0,a._)({},d),{type:e,isIdle:n}))})))}(n=f||(f={})).getClassName=function(e){return function(t){switch(t){case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"yellowPremium":return e.yellowPremium;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,m.vE)(t)}}},n.Svg=function(e){var t=e.className,r=e.size,n=void 0===r?64:r,i=e.strokeWidth,c=void 0===i?2:i,u=e.type,p=e.name,h=e.isIdle,g=(0,s._)(e,["className","size","strokeWidth","type","name","isIdle"]),y=l.useRef(null),v=l.useRef(null);return l.useEffect((function(){return(0,m.kG)(null!==y.current,"groupEl should be already created"),v.current=y.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),l.useEffect((function(){(0,m.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;Boolean(e.play)&&(!0===h?e.pause():"running"!==e.playState&&e.play())})),l.createElement("svg",(0,a._)((0,o._)((0,a._)({"data-role":p},(0,d.Sh)(t)),{viewBox:"25 25 50 50",width:n,height:n,"aria-hidden":!0}),g),l.createElement("g",{transform:"translate(50 50)"},l.createElement("g",{ref:y},l.createElement("circle",(0,o._)((0,a._)({},(0,d.Sh)(_.path,!0===h&&x,f.getClassName(_)(u))),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:c,strokeMiterlimit:"10"})))))};var y=200,v=h.ux.keyframes({"0%":{strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1)},"50%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-35)},"100%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-124)}}),x="spinnerIdle",I={animation:"".concat(v," 2s ease-in-out infinite"),strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1),strokeLinecap:"round",$nest:(0,i._)({},"&.".concat(x),{animationIterationCount:0})},b={stroke:p.Il.CoreGreen50},C={stroke:p.Il.CoreBlue50},S={stroke:p.Il.CoreNeutral0},A={stroke:g.FW},w={stroke:p.Il.CoreCyan50},_=h.ux.stylesheet({path:[I],green:[b],blue:[C],white:[S],gray:[A],cyan:[w]})},51007:(e,t,r)=>{r.d(t,{Y1:()=>n,uq:()=>u});var n,i,a,o,s,l,c,d,u,m,p,h=r(21147),g=r(91817),f=r(17613),y=r(97767),v=r(27145);!function(e){var t;!function(e){var t;!function(e){e.user="user",e.api="api",e.doubleClick="doubleClick"}(t=e.Source||(e.Source={}));e.eq=(0,h.f7)((function(e,r){return e.source===r.source&&(e.source===t.doubleClick&&r.source===t.doubleClick?e.selectedWord===r.selectedWord:i.equals(e.formatting,r.formatting))}))}(t=e.Meta||(e.Meta={}));e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return v.SV.create(e.index,e.index+e.length)},e.isUserSelection=function(e){return e.meta.source===t.Source.user},e.isApiSelection=function(e){return e.meta.source===t.Source.api},e.isDoubleClickSelection=function(e){return e.meta.source===t.Source.doubleClick};var r=e.eqRange=(0,h.f7)((function(e,t){return e.index===t.index&&e.length===t.length})),i=e.eqFormatting=(0,h.f7)(g.vZ);e.eq=(0,h.f7)((function(e,t){return r.equals(e,t)&&n.Meta.eq.equals(e.meta,t.meta)})),e.empty={index:0,length:0,meta:{source:n.Meta.Source.user,formatting:{}}}}(n||(n={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),c=o||(o={}),(l=c.Y||(c.Y={})).top="top",l.middle="middle",l.bottom="bottom",(s=c.X||(c.X={})).left="left",s.middle="middle",s.right="right",function(e){e.toViewport=function(e){return function(t){switch(t){case o.X.left:return e.left;case o.X.middle:return e.left+e.width/2;case o.X.right:return e.right;default:return(0,f.vE)(t)}}}}(c.X||(c.X={})),function(e){e.toViewport=function(e){return function(t){switch(t){case o.Y.top:return e.top;case o.Y.middle:return e.top+e.height/2;case o.Y.bottom:return e.bottom;default:return(0,f.vE)(t)}}}}(c.Y||(c.Y={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={}));e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(d||(d={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(u||(u={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={}));e.is=function(e){return(0,y.CI)(t,e)},e.asList=Object.values(m.Type);!function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(m||(m={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(p||(p={}))},27360:(e,t,r)=>{r.d(t,{EQ:()=>f,Iy:()=>i,dC:()=>n});var n,i,a,o=r(32490),s=r(58303),l=r(90023),c=r(13391),d=r(20161),u=r(79256),m=r(62552),p=r(84714),h=r(63532),g=r(36344);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(n||(n={})),function(e){e.setGoals=e=>({type:n.SetGoals,source:e}),e.performance={type:n.Performance}}(i||(i={}));class f{show(e){return this.preload(e).pipe(d.w((e=>this.showPreloaded(e))))}showPreloaded(e){return u.P((()=>{const t=new m.X("opened");return this.state.set(s.G(e({onClose:()=>{this.state.set(s.YP),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return p.of(e)}return u.P((()=>this._modalViews.load(e))).pipe(h.b((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(s.YP)}constructor(e){(0,o._)(this,"_modalViews",void 0),(0,o._)(this,"state",void 0),(0,o._)(this,"_modalFactoryCache",void 0),this._modalViews=e,this.state=c.h.create(s.YP),this._modalFactoryCache=new Map}}!function(e){e.Mock=class{show(e){return g.E}showPreloaded(e){return g.E}preload(e){return g.E}constructor(){(0,o._)(this,"state",c.h.create(s.YP)),(0,o._)(this,"hideAll",l.Q1)}}}(a||(a={}))},42847:(e,t,r)=>{r.d(t,{DI:()=>E,SJ:()=>T});var n=r(84910),i=r(78520),a=r(49231),o=r(37213),s=r(17613),l=r(64538),c=r(39170),d=r(52574),u=r(73590),m=r(16136),p=r(56424),h=r(57156),g=r(41255),f=r(21250);const y={position:"relative",width:p.ux.percent(100)},v={position:"relative",margin:`0 0 ${p.ux.rem(.5)}`},x={display:"flex",boxSizing:"border-box",padding:`${p.ux.rem(1)} ${p.ux.rem(2)} ${p.ux.rem(1)} ${p.ux.rem(.75)}`,width:p.ux.percent(100),borderRadius:p.ux.rem(g.fx),background:l.Il.BackgroundNotification,color:l.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},I={width:p.ux.percent(100)},b={display:"inline-block",width:p.ux.percent(100)},C={margin:`${p.ux.rem(-.5)} ${p.ux.rem(.75)} ${p.ux.rem(-.5)} 0`},S={position:"absolute",top:0,right:0,marginTop:p.ux.rem(.5),marginRight:p.ux.rem(.4),marginLeft:p.ux.rem(.5)},A={stroke:h.FW},w={margin:`0 0 ${p.ux.rem(.5)}`,color:l.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:p.ux.rem(l.xv.BodySize),lineHeight:p.ux.rem(1.25)},_={marginTop:p.ux.rem(-.1),marginBottom:p.ux.rem(-.25),color:l.Il.CoreNeutral0,fontSize:p.ux.rem(l.xv.BodySize),lineHeight:p.ux.rem(1.25)},k=p.ux.prefixedStylesheet("notifications",{wrapper:[y],notification:[v],flexibleNotification:[v,{display:"flex",width:"auto"}],contentWrapper:[x],miniContentWrapper:[x,{position:"relative",width:"auto"}],fullWidthNotification:[v,x,I],content:[b],miniContent:[{flex:1}],alertIcon:[C],closeIconWrapper:[S],closeIcon:[A],header:[w],description:[_]});var E,T;!function(e){e.Wrapper=({notification:e,onClose:r,children:o,theme:s={}})=>{a.useEffect((()=>e.actions.next("shown")),[e.actions]);const l={wrapper:Boolean(s.wrapper)?s.wrapper:y.wrapper,content:void 0!==s.content?Object.assign({},y.content,s.content):y.content};return a.createElement("div",(0,i._)((0,n._)({},f.P.getAriaLiveProps(e)),{className:l.wrapper}),a.createElement(t,{metadata:e.metadata,onClose:r,theme:l.content},o))};var t=e.Base=({metadata:e,onClose:t,theme:n,children:i})=>a.createElement("div",{className:n.wrapper},r(e,n.icon),a.createElement("div",{className:n.content},i),!function(e){return e.priority===f.P.Priority.high||e.priority===f.P.Priority.highest}(e)&&a.createElement(p,{onClick:t,className:n.close}));const r=(e,t)=>{switch(e.icon){case f.P.Icon.sparkles:return a.createElement(u.JO.Sparkles,{className:t});case void 0:case f.P.Icon.priority:return a.createElement(l,{priority:e.priority,className:t});default:return(0,s.vE)(e.icon)}};e.AdHoc=({title:e,children:t,className:r,onClose:n})=>a.createElement("div",(0,o.Sh)(y.content.wrapper,r),a.createElement("div",{className:y.content.content},a.createElement(h,{title:e},t)),a.createElement(p,{onClick:n,className:y.content.close}));var l=e.PriorityIcon=({priority:e,className:t})=>{switch(e){case f.P.Priority.lowest:case f.P.Priority.low:return a.createElement(u.JO.NotificationInfo,{className:t});case f.P.Priority.average:return a.createElement(u.JO.NotificationWarning,{className:t});case f.P.Priority.high:case f.P.Priority.highest:return a.createElement(u.JO.NotificationError,{className:t});default:return(0,s.vE)(e)}},p=e.CloseButton=({onClick:e,className:t})=>{const r=a.useContext(c.m.Context);return a.createElement(d.zx,{name:"closeNotification","aria-label":r.actions.close,className:t,onClick:e},a.createElement(u.JO.Close,{className:k.closeIcon,width:12}))},h=e.TitledContent=({title:e,children:t})=>Boolean(t)?a.createElement(a.Fragment,null,a.createElement(m.P1,{className:k.header},e),a.createElement(g,null,t)):a.createElement(m.P1,{className:k.description},e),g=e.Content=({children:e})=>a.createElement(m.XY,{className:k.description},e);const y={wrapper:k.wrapper,content:{wrapper:k.fullWidthNotification,icon:k.alertIcon,content:k.content,close:k.closeIconWrapper}}}(E||(E={})),function(e){e.Wrapper=({notification:e,onClose:t,children:r})=>(a.useEffect((()=>e.actions.next("shown")),[e.actions]),a.createElement("div",{className:k.flexibleNotification},a.createElement(E.Base,{metadata:e.metadata,onClose:t,theme:{wrapper:k.miniContentWrapper,icon:k.alertIcon,content:k.miniContent,close:k.closeIconWrapper}},r)))}(T||(T={}))},95159:(e,t,r)=>{r.d(t,{a:()=>l});var n=r(32490),i=r(90023),a=r(19813),o=r(17613),s=r(52303);class l{constructor(){(0,n._)(this,"_log",a.C8.Logging.getLogger("AlertManager.repository",a.zW.i.DEBUG)),(0,n._)(this,"_allAlerts",new Map),(0,n._)(this,"_capiAlertsIdMapping",new Map),(0,n._)(this,"add",(e=>{this._allAlerts.set(e.id,e)})),(0,n._)(this,"remove",(e=>{this._log.trace("AllAlerts: Clean alert from all alerts",e.toLiteString()),(0,o.kG)(0===e.references,"can not dispose alert in use",(()=>e.toString())),(0,o.kG)(!1===e.isValid,"can not dispose valid alert",(()=>e.toString())),(0,o.kG)(this._allAlerts.delete(e.id),"alert should exist in alerts list",(()=>e.toString())),e.dispose()})),(0,n._)(this,"addToCapiMapping",(e=>{e.isValid||(0,i.zG)(e.rawId,s.g_((()=>this._log.debug("skip register of local alert in capi mapping",e)),(t=>{this._log.trace("register alert in capi mapping",e.toLiteString()),(0,o.kG)(void 0===this._capiAlertsIdMapping.get(t),"unexpected overlap of rawid alert",(()=>e.toString())),e.validate(),this._capiAlertsIdMapping.set(t,e.id)})))})),(0,n._)(this,"removeFromCapiMapping",(e=>{e.isValid&&((0,i.zG)(e.rawId,s.bw((t=>{this._log.trace("clean valid alert capi mapping for: "+e.toLiteString()),(0,o.kG)(this._capiAlertsIdMapping.delete(t),"valid alert should had valid raw id",(()=>e.toString()))}))),e.invalidate())})),(0,n._)(this,"getByAlertId",(e=>s.ij(this._allAlerts.get(e)))),(0,n._)(this,"getByRawAlertId",(e=>(0,i.zG)(s.ij(this._capiAlertsIdMapping.get(e)),s.tS(this.getByAlertId)))),(0,n._)(this,"swapRaw",((e,t)=>{const r=(0,i.zG)(e.rawId,s.Gg((e=>this._capiAlertsIdMapping.has(e)))),n=(0,i.zG)(e.rawId,s.Gg((e=>this._capiAlertsIdMapping.has(e))));(0,o.kG)(r||n,"At least one of the swapped alerts should be registered in the system");const a=e._raw;e.silentPatchWithRawAlert(t._raw),t.silentPatchWithRawAlert(a),r&&this._capiAlertsIdMapping.set(s.MH(e.rawId),e.id),n&&this._capiAlertsIdMapping.set(s.MH(t.rawId),t.id)})),(0,n._)(this,"toArray",(()=>Array.from(this._allAlerts.values()))),(0,n._)(this,"toMap",(()=>this._allAlerts)),(0,n._)(this,"toJSON",(()=>({allAlerts:Array.from(this._allAlerts.entries()),idMapping:Array.from(this._capiAlertsIdMapping.entries())})))}}},98563:(e,t,r)=>{r.d(t,{SC:()=>Oe});var n,i=r(32490),a=r(84910),o=r(78520),s=r(12518),l=r(48886),c=r(3190),d=r(90023),u=r(13391),m=r(19813),p=r(1747),h=r(56166),g=r(56215),f=r(97767),y=r(52303),v=r(17613),x=r(14146),I=r(99158),b=r(30482),C=r(74822),S=r(59179),A=r(90572),w=r(26814),_=r(63532),k=r(32734),E=r(84766),T=r(954),M=r(17705),G=r(77400),L=r(53976),D=r(64271),N=r(84178),z=r(29479),P=r(97092),F=r(58578),U=r(27343),R=r(35891),O=r(90490),B=r(3199),$=r(82977),W=r(39302);!function(e){var t=e.group=W.dM.group;e.eq=W.dM.eq;function r(e){return r=>(0,d.zG)(e,O.vh.foldMap(t)(i,a,n),(0,f.WA)(t.concat)(r))}e.applyDiff=r,e.fromAlerts=function(e){const t=m.C8.Logging.getLogger("DocumentCounters");return e.pipe(B.R(((e,t)=>({alerts:t,counters:r(F.p.Diff.toRegistered(F.p.diff(e.alerts,t)))(e.counters)})),{alerts:F.p.empty,counters:W.dM.group.empty}),_.b((({counters:e})=>{W.dM.isValid(e)||t.error("Counters can not be below zero",W.dM.show.show(e))})),S.U((({counters:e})=>e)))};const n=e=>$.R.toUnmutedOnly(e.counters),i=(0,d.ls)(n,t.inverse),a=(e,r)=>t.concat(n(r),i(e))}(n||(n={}));var j,H=r(18117),Y=r(2245),V=r(58303),Z=r(38538),J=r(97225),X=r(11953),Q=r(36355);!function(e){e.empty=new Map,e.eq=Y.Eh(Q.R.Id.ord,X.T.ord);function t(e){const{left:t,right:r}=(0,d.zG)(e,Z.DZ(V.ij),Z.z7((e=>"GeneralScore"!==e)),Z.Su(((e,t)=>{return{lensId:(r=e,r===Q.R.SpecialId.Plagiarism?s.right(Q.R.SpecialId.Plagiarism):Q.R.OutcomeId.toOutcomeId(r)),score:X.T.fromNumber(t)};var r})),Z.tV((0,H.Yt)(s.either))),n=(0,d.zG)(r,Z.UI((({lensId:e,score:t})=>(0,d.bc)(e,t))),(e=>new Map(Object.values(e))));return(0,d.zG)(J.Qp(V.DT((0,d.ff)(Z.xb))(t),V.DT((0,d.ff)(Y.xb))(n)),V.fS((()=>J.F2(new Map))))}e.fromCapi=function(e){return e.pipe(A.h((0,f.Kg)(g.hX.is("finish"),(0,f.W9)(g.hX.is("async_check_finished"),g.qq.is("plagiarism")),g.hX.is("feedback_ack"))),S.U((e=>e.outcomeScores)),A.h(f.$K),S.U(t),_.b(J.Vn((e=>{Z.xb(e)||m.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),A.h((0,f.Kg)(J.WP,J.tO)),S.U((e=>e.right)))}}(j||(j={}));var q,K=r(77178),ee=r(59833),te=r(95922),re=r(51505),ne=r(53186),ie=r(96837),ae=r(3492),oe=r(14530),se=r(45951),le=r(56164),ce=r(93018),de=r(99210),ue=r(85184),me=r(39953),pe=r(20231),he=r(91817),ge=r(30439);(e=>{e.isInsert=e=>"insert"in e,e.isInsertString=t=>(0,e.isInsert)(t)&&"string"==typeof t.insert,e.isInsertEmbed=t=>(0,e.isInsert)(t)&&!(0,e.isInsertString)(t),e.isDelete=e=>"delete"in e,e.isRetain=e=>"retain"in e,e.containsInsertsOnly=t=>t.ops.every(e.isInsert),e.getInsertLength=ae.i.Op.length,e.getTrimmedInsertLength=t=>(0,e.isInsertString)(t)?t.insert.trim().length:1,e.match=(t,r,n)=>i=>(0,e.isInsert)(i)?t(i):(0,e.isDelete)(i)?r(i):n(i),e.getAttr=function(t,r){return(0,e.isDelete)(t)||!t.attributes?y.YP:"function"==typeof r?(0,me.zG)(y.ij(Object.keys(t.attributes).find(r)),y.UI((e=>t.attributes[e]))):y.ij(t.attributes[r])},e.operationLength=ae.i.Op.length;const t=e=>-e.delete;e.getOperationOffset=(0,e.match)(ae.i.Op.length,t,ae.i.Op.length);const r=e=>t=>t.ops.map(e).reduce(f.Sm,0),n=()=>0;e.calcDiffLength=r((0,e.match)(ae.i.Op.length,t,n)),e.calcAmountLength=r((0,e.match)(ae.i.Op.length,ae.i.Op.length,n)),e.calcAffectedLength=r((0,e.match)(n,ae.i.Op.length,ae.i.Op.length)),e.rangeOfTheChange=function(t){const r=(0,e.match)(d.W8,d.W8,(e=>Boolean(e.attributes)));return t.ops.reduce((([t,n],i)=>{const a=(0,e.operationLength)(i),o=n+a;return[(0,me.zG)(t,y.g_((()=>r(i)?y.G([n,o]):y.YP),(e=>r(i)?y.G([e[0],o]):y.G(e)))),o]}),[y.YP,0])[0]},e.isEqual=t=>(r,n)=>(0,e.match)((r=>(0,e.isInsert)(n)&&r.insert===n.insert&&t(r.attributes,n.attributes)),(t=>(0,e.isDelete)(n)&&t.delete===n.delete),(r=>(0,e.isRetain)(n)&&r.retain===n.retain&&t(r.attributes,n.attributes)))(r),e.deltaEq=pe.f7(((t,r)=>t.ops.length===r.ops.length&&x.Hx(t.ops,r.ops,(0,e.isEqual)(he.vZ)))),e.normalizeDelta=e=>(new ae.i).compose(e);const i=e=>e&&Object.keys(e).reduce(((t,r)=>(t[r]="string"==typeof e[r]?`<${e[r].length}>`:e[r],t)),{});e.anonymizeTextAndStringAttrs=function(t){return t.ops.reduce(((t,r)=>(0,e.match)((r=>t.insert("string"==typeof r.insert?`<${(0,e.getInsertLength)(r)}>`:"<embed>",i(r.attributes))),(e=>t.delete(e.delete)),(e=>t.retain(e.retain,i(e.attributes))))(r)),new ae.i)},e.squash=function(e){return e.reduce(((e,t)=>e.compose(new ae.i(t))),new ae.i)},e.cleanAllAttrs=function(t){return t.reduce(((t,r)=>(0,e.match)((e=>t.insert(e.insert)),(e=>t.delete(e.delete)),(e=>t.retain(e.retain)))(r)),new ae.i)};const a=e=>y.ij(e.attributes);e.getAttrs=(0,e.match)(a,(()=>y.YP),a),e.skipAny=d.jv;e.cleanDelta=(t,r)=>n=>{const i=e=>e&&Object.keys(e).filter(((e,t,n)=>r(e,n.slice(0)))).reduce(((t,r)=>(t[r]=e[r],t)),{});return n.reduce(((r,n)=>(0,e.match)((e=>r.insert("string"==typeof e.insert||t(e.insert)?e.insert:" ",i(e.attributes))),(e=>r.delete(e.delete)),(e=>r.retain(e.retain,i(e.attributes))))(n)),new ae.i)},e.splitToDeleteThenInsert=t=>t.reduce((([t,r],n)=>e.match((e=>[t,r.push(e)]),(e=>[t.push(e),r]),(e=>[t.push({retain:e.retain}),r.push(e)]))(n)),[new ae.i,new ae.i]).map((e=>e.chop())),e.nonEmpty=e=>e.ops.length>0,e.findInDelta=function(e,t=n){return r=>{let n=0,i=0;for(;n<r.ops.length;){const a=r.ops[n];if(e(a))return i+=t(a),y.G(i);i+=ae.i.Op.length(a),n+=1}return y.YP}},e.getOps=(0,d.ls)(he.ei("ops"),y.ij,y.tS(ge.nI))})(q||(q={}));var fe,ye=function(){function e(t){(0,de._)(this,e),(0,i._)(this,"_delta",void 0),(0,i._)(this,"_cursor",void 0),this._delta=t,this._cursor={index:0,operationOffset:0}}return(0,ue._)(e,[{key:"next",value:function(e){(0,v.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return V.YP;for(var r=q.operationLength(this._delta.ops[t]),n=e-(r-this._cursor.operationOffset);n>0&&t<this._delta.ops.length-1;)t++,n-=r=q.operationLength(this._delta.ops[t]);return n>0?(this._cursor={index:t+1,operationOffset:0},V.YP):(this._cursor={index:t,operationOffset:r+n},V.G(this._delta.ops[t]))}}]),e}();!function(e){const t=V.uZ((0,le.DU)());e.getEnrichedWithFormattingDelta=e=>r=>{const n=new ye(e);return r.ops.reduce((([e,r],i)=>{const a=n.next(r);return ce.s.isInsert(i)?[e.insert(i.insert,V.FS(t.concat(V.tS(ce.s.getAttrs)(a),ce.s.getAttrs(i)))),0]:[e.push(i),ce.s.operationLength(i)]}),[new ae.i,1])[0]}}(fe||(fe={}));var ve=r(92467),xe=r(86399),Ie=r(4025),be=r(68717);const Ce=(0,f.HP)(m.C8.Logging.getLogger),Se=(0,d.ls)(xe.UI((({beingAppliedAlert:e,undo:t,reversedAlternative:r})=>re.Y3((()=>{const n={action:p.PZ.ACCEPTED,commit:()=>Ce("AlertManager.ops").debug(`_applyTransformJson(${e.toLiteString()}):commit()`),undo:t,reversedAlternative:e.registerReversedAlternative(r)},i=e.switchToApplied(n),a=be.xS.create(i.state.from,ve.h.create(e));return[i.id,a]}),Ie.KC))),re.mg);function Ae(e){const t=h.r3.compose(e.alternatives.map(c.UI((e=>e.alternative))),e.currentFullText);return(0,d.zG)(ce.s.nonEmpty(t.composedDelta)?V.G(t):V.YP,V.UI((({composedDelta:t,reversedAlternatives:r})=>({changeWithFormatting:(0,d.zG)(t,fe.getEnrichedWithFormattingDelta(e.currentFullText),(t=>ie.RI.delta(t,e.originalTextLength))),correctRevAlternatives:(0,d.zG)(r,I.T.tapFailure((({rejected:e})=>m.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",e))),I.T.foldSuccess(ee.UI((t=>({reversedAlternative:t.reversedAlternative,alternative:c.li(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert})))))}))))}var we;!function(e){const t=(0,d.ls)(((e,t)=>Ie.Y3((()=>be.xS.create(e,t)),Ie.KC)),Ie.UI((e=>(0,d.bc)(e[0].id,e))),te.of);e.prepare=te.tS((0,d.og)(t)),e.prepareFromAlert=re.tS((e=>t(e.state.from,ve.h.create(e))))}(we||(we={}));function _e(e,t,r){return Ie.DT(e,(e=>{const n=new v.ej(t,e.toString());return m.C8.Logging.getLogger("AlertManager.ops").error(t,{error:n,extra:r}),n}))}const ke=(e,t)=>_e(be.bZ.isNotDisposed,e,t);function Ee(e){return re.tS(V.g_((0,d.a9)(re.F2(void 0)),e))}var Te,Me,Ge,Le,De,Ne;!function(e){e.mock={undoApplied:()=>re.F2(void 0)}}(Te||(Te={}));class ze{_applyFeedbackToAlert(e,t,r,n){return re.Y3((()=>{this._alertsRepo.removeFromCapiMapping(e);const i=this._createFeedbackUndoable(e,t,n);return e.changeState(be.bZ.State.Applied.create(i,r,be.bZ.State.Applied.Method.ByCard,ve.h.create(e)))}),s.toError)}_createFeedbackUndoable(e,t,r){return{action:t,replacement:e.replaceText,commit:r,undo:()=>this._alertsRepo.addToCapiMapping(e)}}_commitFeedbackToCapi(e,t){return(0,d.zG)(e.rawId,V.g_((0,d.a9)((()=>this._log.debug("skip feedback for local alert",e))),(e=>this._sendFeedback((0,a._)({id:e},t)))))}_sendFeedback(e){return()=>{se.Vi(this._capiClient.sendFeedback(e)).catch(this._handleCapiError("alert feedback"))}}_commitShortenItSubmitToCapi(e){return(0,d.zG)(e.rawId,V.g_((0,d.a9)((()=>this._log.debug("skip shorten-it-submit for local alert",e))),(e=>this._shortenItSubmit(e))))}_shortenItSubmit(e){return()=>{se.Vi(this._capiClient.shortenItSubmit(e)).catch(this._handleCapiError("shorten-it-submit"))}}_switchToBeingApplied(e,t,r){return re.Y3((()=>(this._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,r))),s.toError)}constructor(e,t,r,n){(0,i._)(this,"_positionManager",void 0),(0,i._)(this,"_getContent",void 0),(0,i._)(this,"_capiClient",void 0),(0,i._)(this,"_alertsRepo",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_sendUpdate",void 0),(0,i._)(this,"_sendSingleUpdate",void 0),(0,i._)(this,"_flushChanges",void 0),(0,i._)(this,"changes",void 0),(0,i._)(this,"events",void 0),(0,i._)(this,"undoApplied",void 0),(0,i._)(this,"_dismissBatch",void 0),(0,i._)(this,"_applyAlert",void 0),(0,i._)(this,"_applyTransformJson",void 0),(0,i._)(this,"_alertFeedback",void 0),(0,i._)(this,"_alertBatchFeedback",void 0),(0,i._)(this,"_notifyAlertUpdated",void 0),(0,i._)(this,"_releaseRef",void 0),(0,i._)(this,"_changeMuteState",void 0),(0,i._)(this,"_changeGapValue",void 0),(0,i._)(this,"_confirmApplied",void 0),(0,i._)(this,"_changeTakeawayFeedback",void 0),(0,i._)(this,"_shortenItSummaryNotFound",void 0),(0,i._)(this,"_commitShortenItSummaryRequest",void 0),(0,i._)(this,"_dismissShortenItTransformGroup",void 0),(0,i._)(this,"_changeToneAIToneAlternative",void 0),(0,i._)(this,"_handleCapiError",void 0),(0,i._)(this,"_applyAlertData",void 0),(0,i._)(this,"_sendApplyFeedback",void 0),(0,i._)(this,"_sendApplyTextFeedback",void 0),(0,i._)(this,"_sendApplyTransformJsonFeedback",void 0),this._positionManager=e,this._getContent=t,this._capiClient=r,this._alertsRepo=n,this._log=m.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=e=>re.Y3((()=>this.events.next({updated:new Map(e)})),s.toError),this._sendSingleUpdate=re.tS((e=>this._sendUpdate([e]))),this._flushChanges=re.Y3((()=>this.changes.next(ie.RI.flush())),s.toError),this.changes=new C.x,this.events=new C.x,this.undoApplied=(e,t)=>{return(0,d.zG)((()=>this._positionManager.getTextLength()),te.tS((t=>{const n={alertsToUpdate:[],reversedDelta:new ae.i,undo:d.Q1},i=e.filter(be.bZ.isApplied).reduce(((e,t)=>{const n=t.state.undoable;return be.VD.isWithAlternative(n)?(0,d.zG)(n.reversedAlternative,V.g_((()=>{p.wQ.withTransformJson(t._raw)&&this._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),r(e,t)}),(0,d.ls)((e=>e()),s.map((e=>e.delta)),s.fold((e=>{this._log.error("Could not retrieve reversed delta",{e,alert:t.toLiteString()})}),(n=>{r(e,t),(0,d.zG)(n,h.r3.fromRawDelta,(t=>t.rebase(e.reversedDelta)),V.g_((()=>{e.reversedDelta=e.reversedDelta.compose(n)}),(({delta:t})=>{e.reversedDelta=e.reversedDelta.compose(t)})))}))))):r(e,t),e}),n);return i.alertsToUpdate.length>0?(0,d.zG)(re.Y3((()=>{const e=(0,d.zG)(i.reversedDelta,fe.getEnrichedWithFormattingDelta(this._getContent()));this.changes.next(ie.RI.delta(e,t))}),s.toError),re.N(this._flushChanges),re.N((0,d.zG)(i.undo,te.UI(s.right))),re.a1((0,d.zG)(i.alertsToUpdate,re.mg,re.tS(this._sendUpdate)))):re.F2(void 0)})));function r(e,r){e.undo=(0,d.ls)(e.undo,r.state.undoable.undo),e.alertsToUpdate.push(we.prepare((()=>[ve.h.create(r),ve.h.create(r.changeState(t===be.bZ.State.Applied.Method.ByCard?be.bZ.State.init:be.bZ.State.Removed.create(be.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))}},this._dismissBatch=(e,t)=>(0,d.zG)(this._flushChanges,re.a1((0,d.zG)(e,ee.UI((0,d.ls)(te.of,te.UI(ke("_dismissBatch: Cannot send feedback for already disposed",t)),re.tS((e=>this._applyFeedbackToAlert(e,p.PZ.IGNORE,be.l$.sidebar,this._commitFeedbackToCapi(e,{kind:p.PZ.IGNORE,subtype:t})))),we.prepareFromAlert)),re.mg,re.tS(this._sendUpdate)))),this._applyAlert=({alert:e,replacementText:t,source:r,method:n,feedbackSubtype:i,reason:a,gbPrompt:o})=>(0,d.zG)(e,_e(be.bZ.isRegistered,"can not apply alert in non registered state"),te.of,re.N(this._flushChanges),re.tS((e=>this._switchToBeingApplied(e,r,n))),re.tS((({beingAppliedAlert:e,undo:r})=>(0,d.zG)(e.getReplaceEither.bind(e),re.LF,re.Pd((()=>new Error("Cannot apply alert with tJSON")),(n=>{this._log.debug(`_applyAlert(${e.toLiteString()}, rrange: ${n})`);const s=n.start,l=n.end-n.start,c=(new ae.i).retain(s).delete(t.length).insert(e.replaceText);return{alert:e,undo:r,reverseDelta:c,replacementText:t,removeLen:l,feedbackSubtype:i,pos:s,reason:a,gbPrompt:o}}))))),re.tS(this._applyAlertData)),this._applyTransformJson=({alerts:e,source:t,method:r,feedbackSubtype:n,drilldownSuggestionIds:i,reason:l,gbPrompt:c})=>(0,d.zG)(this._flushChanges,re.a1((0,d.zG)(e,re.pE((e=>(0,d.zG)(e.alternative,re.UI((t=>(0,d.bc)(t,function(e){switch(e._raw.point){case"AllCapsBoldification":return h.JJ.fromAlternativeBoldified;case"Lists":return h.JJ.fromAlternativeListified;default:return h.JJ.fromAlternative}}(e.alert))))))))),re.tS((t=>re.Y3((()=>({alternatives:t,alerts:e,originalTextLength:this._positionManager.getTextLength(),currentFullText:this._getContent()})),s.toError))),re.UI(Ae),Ee((e=>(0,d.zG)(e.correctRevAlternatives,ee.UI((({alert:e,alternative:s,reversedAlternative:u})=>(0,d.zG)(this._switchToBeingApplied(e,t,r),re.mU((e=>re.dk(this._sendApplyTransformJsonFeedback(e.beingAppliedAlert,s.alternativeIndex,n,i,l,c)))),re.UI((e=>(0,o._)((0,a._)({},e),{reversedAlternative:u})))))),re.mg,re.tS((t=>(0,d.zG)(re.Y3((()=>this.changes.next(e.changeWithFormatting)),s.toError),re.N(this._flushChanges),te.a1((0,d.zG)(Se(t),re.tS(this._sendUpdate)))))))))),this._alertFeedback=(e,t,r)=>{this._log.debug(`_alertFeedback(${e.toLiteString()}, feedbackType: ${t.kind}, source: ${r})`),be.bZ.isHidden(e)&&this._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});const n=this._commitFeedbackToCapi(e,t);return(0,d.zG)(e,ke("_alertFeedback: Cannot send feedback for already disposed",t),te.of,re.tS((e=>t.kind!==p.PZ.LOOKED||e.isRead?p.nw.willRemoveAlert(t.kind)?(0,d.zG)(this._flushChanges,re.a1(this._applyFeedbackToAlert(e,t.kind,r,n)),we.prepareFromAlert,this._sendSingleUpdate):(0,d.zG)(n,re.dk):(0,d.zG)(we.prepare((()=>[ve.h.create(e),(e.isRead=!0,ve.h.create(e))])),this._sendSingleUpdate,te.N(n)))))},this._alertBatchFeedback=(e,t,r)=>(0,d.zG)(e,ee.DZ((e=>e.rawId)),ne.nI,V.g_((0,d.a9)(d.Q1),(e=>this._sendFeedback({kind:t,alertIds:e,subtype:r})))),this._notifyAlertUpdated=(0,d.ls)((e=>[[e[0].id,e]]),this._sendUpdate),this._releaseRef=(e,t)=>(0,d.zG)(re.Y3((()=>{this._log.debug(`_releaseRef ${e} on (${t.toLiteString()}) refs: ${t._refNames}`,{shouldBeRemoved:be.bZ.shouldBeRemoved(t)}),be.bZ.shouldBeRemoved(t)&&this.events.next({removed:new Map([[t.id,ve.h.create(t)]])})}),s.toError)),this._changeMuteState=(e,t)=>{const r=(0,d.zG)(e,I.T.fromArray((0,d.ls)(ke("_changeMuteState: Cannot send Mute feedback for already disposed",t),s.chain(_e((e=>V.pC(e.muteCategory)||be.bZ.belongsToAnySpecialCategory(e)),"Alert is not muting")))));return(0,d.zG)(r,I.T.foldSuccess(ee.UI((e=>we.prepare((()=>[ve.h.create(e),(e.mute=t,ve.h.create(e))]))))),re.mg,re.UI(ne.nI),Ee(this._sendUpdate),re.UI((0,d.a9)(r)))},this._changeGapValue=(e,t)=>(0,d.zG)(e,_e(be.bZ.isOneGap,"can not change gap value for a non one gap alert"),te.of,re.tS((e=>we.prepare((()=>[ve.h.create(e),ve.h.create(e.changeGapValue(t))])))),this._sendSingleUpdate),this._confirmApplied=(0,d.ls)(ee.UI((e=>we.prepare((()=>[ve.h.create(e),ve.h.create(e.changeState(be.bZ.State.Removed.create(be.bZ.State.Removed.Reason.bulkAcceptUserResponse)))])))),re.mg,re.tS(this._sendUpdate)),this._changeTakeawayFeedback=(e,t)=>(0,d.zG)(e,_e(be.bZ.isTakeaway,"can not change feedback for non-takeaway alert"),te.of,re.tS((e=>{const r=ve.h.create(e),n=e.setFeedback(t),i=ve.h.create(n);return(0,d.zG)(we.prepare((()=>[r,i])),this._sendSingleUpdate,re.UI((()=>n)))}))),this._shortenItSummaryNotFound=e=>(0,d.zG)(e,ke("_shortenItSummaryNotFound: Cannot change state to not-found for already disposed"),s.chain(_e(be.bZ.isShortenIt,"cannot change state to not-found for a non shorten-it alert")),te.of,re.tS((e=>{const t=ve.h.create(e),r=e.changeSummaryState("notFound"),n=ve.h.create(r);return(0,d.zG)(we.prepare((()=>[t,n])),this._sendSingleUpdate,re.UI((()=>r)))}))),this._commitShortenItSummaryRequest=e=>(0,d.zG)(e,ke("_commitShortenItSummaryRequest: Cannot send shorten_it_submit message for already disposed"),s.chain(_e(be.bZ.isShortenIt,"cannot send shorten_it_submit for a non shorten-it alert")),te.of,re.tS((e=>{const t=ve.h.create(e),r=e.changeSummaryState("requestSent"),n=ve.h.create(r);return(0,d.zG)(we.prepare((()=>[t,n])),this._sendSingleUpdate,re.UI((()=>r)),te.N(this._commitShortenItSubmitToCapi(e)))}))),this._dismissShortenItTransformGroup=(e,t)=>(0,d.zG)(e,ke("_dismissShortenItTransformGroup: Cannot dismiss transform group for already disposed",t),s.chain(_e(be.bZ.isShortenIt,"cannot dismiss transform group for a non shorten-it alert")),te.of,re.tS((e=>{const r=ve.h.create(e),n=e.dismissTransformGroup(t),i=ve.h.create(n);return(0,d.zG)(we.prepare((()=>[r,i])),this._sendSingleUpdate,re.UI((()=>n)))}))),this._changeToneAIToneAlternative=(e,t)=>(0,d.zG)(e,_e(be.bZ.isToneAI,"Cannot change tone for a non-ToneAI alert."),te.of,re.tS((e=>re.Y3((()=>{const r=[(0,d.bc)(e.id,be.xS.create(ve.h.create(e),ve.h.create(e.setSelectedToneAlternativeIdx(t))))];return this.events.next({updated:new Map(r)}),e}),s.toError)))),this._handleCapiError=e=>t=>{oe.EP.isDroppedError(t)?this._log.debug(`Stopped listening for ${e} message acknowledge`,t):oe.YG.isNotConnectedError(t)?this._log.warn(`Failed to send ${e} as CAPI was not connected`,t):this._log.error(`Failed to send ${e}`,t)},this._applyAlertData=({pos:e,removeLen:t,reverseDelta:r,undo:n,replacementText:i,alert:a,feedbackSubtype:o,reason:l,gbPrompt:c})=>(0,d.zG)(re.Y3((()=>{let s=this._positionManager.getTextLength(),d=!1;const u={action:p.PZ.ACCEPTED,replacement:i,commit:()=>{d||this._log.debug(`_applyAlert(${a.toLiteString()}):commit()`)},reversedAlternative:V.YP,undo:()=>{d=!0,this._log.debug(`_applyAlert(${a.toLiteString()}):undo()`);const e=this._positionManager.getTextLength();e!==s&&this._log.error(`Text has changed while uncommitted apply is present. Expected: ${s}, actual: ${e}`);const t=ie.RI.delta(r,e);this.changes.next(t),this.changes.next(ie.RI.flush()),n()}};return this._sendApplyTextFeedback(a,i,o,l,c)(),this.changes.next(ie.RI.delta((new ae.i).retain(e).delete(t).insert(i),s)),this.changes.next(ie.RI.flush()),s=this._positionManager.getTextLength(),u}),s.toError),re.tS((e=>re.Y3((()=>a.switchToApplied(e)),s.toError))),we.prepareFromAlert,this._sendSingleUpdate),this._sendApplyFeedback=(e,t)=>e.state.method===be.bZ.State.Applied.Method.ByCard?this._commitFeedbackToCapi(e,t):d.Q1,this._sendApplyTextFeedback=(e,t,r,n,i)=>this._sendApplyFeedback(e,{kind:p.PZ.ACCEPTED,replacementText:t,subtype:r,reason:n,gbPrompt:i}),this._sendApplyTransformJsonFeedback=(e,t,r,n,i,s)=>{const l={kind:p.PZ.ACCEPTED,alternativeIndex:t,subtype:r,drilldownSuggestionIds:n,reason:i,gbPrompt:s},c=be.bZ.isOneGap(e)?(0,o._)((0,a._)({},l),{gapValue:e.gapValue}):be.bZ.isShortenIt(e)?(0,o._)((0,a._)({},l),{dismissedTransformGroups:Array.from(e.dismissedTransformGroups)}):l;return this._sendApplyFeedback(e,c)}}}!function(e){e.toString=s.fold((({id:e})=>`rid:${e}`),(e=>`aid:${e.toString()}`))}(Me||(Me={})),function(e){e.match=function(e){return t=>t instanceof be.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}(Ge||(Ge={})),function(e){e.defaultValidator=be.bZ.isDuplicatedBy}(Le||(Le={}));class Pe{static _prepareUpdate(e,t){const r=(0,o._)((0,a._)({},e.toRawAlert()),{rev:t.rev});return(0,d.zG)(t.extraProperties,y.bw((e=>r.extra_properties=e))),(0,d.zG)(t.muted,y.bw((e=>r.muted=e))),p.wQ.withTransformJson(r)&&(0,d.zG)(t.transformJson,y.bw((e=>r.transformJson=e))),r}_processBatch(e){return e.reduce(((e,t)=>(Ge.match({alertAddOrUpdate:t=>{(0,d.zG)(t.rawId,y.g_((()=>{e.toAdd.set(t.id,t)}),(r=>{(0,d.zG)(this._alertsRepo.getByRawAlertId(r),y.hX((e=>e.allowUpdate)),y.UI((()=>{(0,d.zG)(y.ij(e.toAddOrUpdate.get(r)),y.UI((t=>{this._log.debug("got overlap in batch on update"),e.toUpdate.delete(t.id),e.toDispose.set(t.id,t)}))),e.toUpdate.set(t.id,t)})),y.fS((()=>{(0,d.zG)(y.ij(e.toAddOrUpdate.get(r)),y.UI((t=>{this._log.info("got overlap in batch on add"),e.toAdd.delete(t.id),e.toDispose.set(t.id,t)}))),e.toAdd.set(t.id,t)}))),e.toAddOrUpdate.set(r,t)})))},rangeChange:t=>{(0,v.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:t=>{e.toRemoveUnfiltered.push(t)},alertChange:t=>{e.toChangeUnfiltered.push(t)}})(t),e)),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})}_getMergeTarget(e,t){return(0,d.zG)(e,s.swap,y.Uo,y.tS((e=>e.mergedIn)),y.tS((e=>{const r=(0,d.zG)(this._alertsRepo.getByRawAlertId(e),y.UI((e=>s.right(e))),y.wp((()=>(0,d.zG)(y.ij(t.get(e)),y.UI((e=>s.left(e)))))));return y.Wi(r)&&this._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),y.hX(Fe((e=>!!e.allowUpdate||(this._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)))))}_addAlerts(e,t){return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((e=>e.toLiteString()))}),(0,d.zG)(e,ee.hX(this._validateAlertAdd),ee.u4({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},((e,t)=>{this._log.trace("Adding alert: "+t.toLiteString());const r=this._getAlertsWithMatchingRanges(t.getNotEnclosingHighlightRanges()[0]),n=this._tryToMatchInvalid(t,r);switch(this._log.trace("Adding alert match result",{inc:t.id,match:n}),n.type){case De.Type.Merged:{const r=n.result[1];be.bZ.isNotRegistered(r.alert)?be.bZ.isRemoved(r.alert)&&this._log.warn("unexpected merge into removed alert",{alert:r,newAlert:t}):this._alertsRepo.addToCapiMapping(r.alert),e.alertsToUpdate.set(r.id,n.result);break}case De.Type.Restored:{const t=n.result[1];(0,v.kG)(!e.alertsToRemove.has(t.id),"can't update alert which we wanted to remove earlier"),this._alertsRepo.addToCapiMapping(t.alert),e.alertsToUpdate.set(t.id,n.result);break}case De.Type.Unmatched:{const t=n.result,i=r.filter((r=>be.bZ.isDuplicateCandidate(r,y.Wi(r.rawId))&&this._alertDuplicateValidator(t,r)&&!e.alertsToRemove.has(r.id)));(0,v.kG)(t.allowDuplicates||be.bZ.isApplicableAlert(t),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type");const a=t.allowDuplicates?{result:Ne.Add,toRemove:y.YP}:this._tryAddAlert(t,i);switch(a.result){case Ne.Add:case Ne.OverwriteExisting:this._log.debug("AllAlerts: Append alert to all alerts",t.toLiteString()),this._alertsRepo.addToCapiMapping(t),(0,v.kG)(!e.alertsToRemove.has(t.id),"can't add alert which we wanted to remove earlier",(()=>t.toLiteString())),this._alertsRepo.add(t),e.alertsToAdd.set(t.id,ve.h.create(t)),(0,d.zG)(a.toRemove,y.bw((t=>{if(e.alertsToAdd.has(t.id)){this._alertsRepo.removeFromCapiMapping(t);const e=t.changeState(be.bZ.State.Removed.create(be.bZ.State.Removed.Reason.canceled));this._terminateAlertChecking(e),this._alertsRepo.remove(e)}else this._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:be.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case Ne.Skip:this._log.debug("Skip alert with low priority",t.id);break;default:(0,v.vE)(a.result)}break}default:(0,v.vE)(n)}return e})))}_updateAlerts(e,t){this._log.debug(`_updateAlerts, to update = ${e.length}`,{alerts:e.map((e=>e.toLiteString()))}),(0,d.zG)(e,ee.u4(t,((e,t)=>(this._log.trace("Updating alert: "+t.toLiteString()),(0,d.zG)(this._alertsRepo.getByRawAlertId(y.MH(t.rawId)),y.g_((()=>this._log.warn("tried to update unknown alert",t)),(r=>{const n=t._raw;t.dispose();const i=e.has(r.id)?e.get(r.id)[0]:ve.h.create(r);r.enqueueRawAlertForUpdate(n),e.set(r.id,be.xS.create(i,ve.h.create(r)))}))),e))))}_startAlertsChecking(e,t,r){this._log.debug(`_startAlertsChecking, to update = ${e.length}`,{alerts:e.map((([e,t])=>[e.toLiteString(),t]))});const n=(e,t)=>{const r=e.changeState(be.bZ.State.Registered.create(be.bZ.CheckingState.CHECKING));return this._recheckedAlerts.add(e.id),ve.h.create(t.size>0?r.enqueueRangesRemove(t):r)};(0,d.zG)(e,ee.u4({updatedAlerts:t,addedAlerts:r},((e,[t,r])=>((0,d.zG)(this._alertsRepo.getByAlertId(t.id),y.g_((()=>{this._log.warn("tried to start checking unknown alert",{alert:t,ranges:r})}),(()=>{if(e.addedAlerts.has(t.id))e.addedAlerts.set(t.id,n(t,r));else{const i=e.updatedAlerts.has(t.id)?e.updatedAlerts.get(t.id)[0]:ve.h.create(t);e.updatedAlerts.set(t.id,be.xS.create(i,n(t,r)))}}))),e))))}_removeAlerts(e,t){e.forEach(((e,r)=>{(0,d.zG)(this._alertsRepo.getByAlertId(r),y.g_((()=>{this._log.warn("tried to remove unknown alert",e)}),(()=>(0,d.zG)(t.get(r),y.ij,y.UI(c.li),y.hX((e=>be.bZ.isNotDisposed(e.alert))),y.wp((()=>(0,d.zG)(e.alert,y.DT(be.bZ.isNotDisposed),y.UI(ve.h.create)))),y.bw((n=>{const i=this._applyRemoveToAlert(e);this._terminateAlertChecking(i),t.set(r,be.xS.create(n,ve.h.create(i)))}))))))}))}_getAlertsWithMatchingRanges(e){return(0,d.zG)(this._positionManager.findIntersections(e),ee.hX((0,f.W9)(K.P.is,K.x.isVisible)),ee.hX((0,f.ff)(K.x.isEnclosingView)),ee.DZ((e=>this._alertsRepo.getByAlertId(e.meta.alertId))),ee.hX((e=>!(be.bZ.isApplied(e)&&e.getAppliedRanges().length>0))))}_tryToMatchInvalid(e,t){return(0,v.kG)(!e.isValid,"added alert should be invalid"),(0,v.kG)(be.bZ.isRegistered(e),"added alert should be in registered state",(()=>e.toString())),(0,d.zG)(y.ij(t.find((t=>!t.isValid&&t.canBeMergedWith(e)))),y.g_((()=>({result:e,type:De.Type.Unmatched})),(t=>{(0,v.kG)((0,d.zG)(t.rawId,y.wo((0,d.ls)(this._alertsRepo.getByRawAlertId,y.Wi))),"CAPI mapping should not contain invalid alerts"),this._log.debug(`Merging new alert (${e}) into the existing one aid(${t})`);const r=ve.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&be.bZ.isCapiDone(t)?{result:be.xS.create(r,ve.h.create(t.changeState(be.bZ.State.init))),type:De.Type.Restored}:{result:be.xS.create(r,ve.h.create(t)),type:De.Type.Merged}})))}_tryAddAlert(e,t){return(0,d.zG)(ne.nI(t),y.UI((t=>{(0,v.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert",`got ${t.map((e=>e.toString()))} with input (${e.toString()})`);const r=t[0];return r.extraProperties.priority<=e.extraProperties.priority?{result:Ne.OverwriteExisting,toRemove:y.G(r)}:(e.dispose(),{result:Ne.Skip,toRemove:y.YP})})),y.fS((()=>({result:Ne.Add,toRemove:y.YP}))))}_cleanupPendingAlerts(e){e.removed.forEach((e=>{this._heuristicallyRemovedAlerts.delete(e)&&this._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.debug("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()}_finishAlertsChecking(){return(0,d.zG)(Array.from(this._recheckedAlerts.values()),ee.DZ((e=>{const t=this._alertsRepo.getByAlertId(e);y.Wi(t)&&(this._log.error("tried to finish checking on missing alert",e),this._recheckedAlerts.delete(e));const r=(0,d.zG)(t,y.hX((e=>be.bZ.isRegistered(e))),y.UI((e=>(0,d.bc)(e.id,this._finishAlertChecking(e)))));return y.Wi(r)&&this._log.error("tried to update checking state on non-registered alert",e),r})),(e=>({updated:new Map(e)})))}constructor(e,t,r){(0,i._)(this,"_positionManager",void 0),(0,i._)(this,"_alertsRepo",void 0),(0,i._)(this,"_alertDuplicateValidator",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_heuristicallyRemovedAlerts",void 0),(0,i._)(this,"process",void 0),(0,i._)(this,"reset",void 0),(0,i._)(this,"_processAlertsBatch",void 0),(0,i._)(this,"_collectChanges",void 0),(0,i._)(this,"_validateAlertAdd",void 0),(0,i._)(this,"_recheckedAlerts",void 0),(0,i._)(this,"_terminateAlertChecking",void 0),(0,i._)(this,"_applyRemoveToAlert",void 0),(0,i._)(this,"_finishAlertChecking",void 0),this._positionManager=e,this._alertsRepo=t,this._alertDuplicateValidator=r,this._log=m.C8.Logging.getLogger("AlertManager.pipeline",m.zW.i.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=e=>(this._log.trace(`process, to process = ${e.length}`),this._collectChanges(this._processAlertsBatch(e))),this.reset=e=>(this._cleanupPendingAlerts(e),this._finishAlertsChecking()),this._processAlertsBatch=e=>{const{toAdd:t,toUpdate:r,toAddOrUpdate:n,toRemoveUnfiltered:i,toChangeUnfiltered:a,toDispose:o,rangeChanges:l}=this._processBatch(e),c=e=>(0,d.zG)(this._alertsRepo.getByAlertId(e),y.fS((()=>t.get(e)||r.get(e)||o.get(e))));a.forEach((e=>(0,d.zG)(y.ij(n.get(e.id)),y.g_((()=>(0,d.zG)(this._alertsRepo.getByRawAlertId(e.id),y.UI((t=>{const i=t.copy(!1),a=Pe._prepareUpdate(i,e);y.pC(e.transformJson)?i.updateAlertWithManagedData(a):i.patchWithRawAlert(a),r.set(i.id,i),n.set(e.id,i)})),y.fS((()=>this._log.info("Change from CAPI: Cannot find internal AlertId."))))),(t=>{const n=Pe._prepareUpdate(t,e);r.has(t.id)?t.patchWithRawAlert(n):t.updateAlertWithManagedData(n)})))));const u=i.reduce(((e,i)=>{const a=(0,d.zG)(i,s.fold((({id:e})=>(0,d.zG)(this._alertsRepo.getByRawAlertId(e),y.UI((e=>be.bZ.isRegistered(e)?e:void 0)),y.fS((()=>this._heuristicallyRemovedAlerts.has(e)?void this._heuristicallyRemovedAlerts.delete(e):n.get(e))))),c));return void 0===a?(s.isLeft(i)?this._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(i.left)):this._log.error("Cannot find existing alert by id",i.right),e):((0,d.zG)(this._getMergeTarget(i,n),y.hX(Fe((e=>e.lensId!==a.lensId?(this._log.warn("Trying to merge alerts from different lenses",{source:a,target:e}),!1):y.Wi(a.rawId)?(this._log.warn("Trying to merge into local alert",{source:a,target:e}),!1):a.references>e.references))),y.g_((()=>{e.set(a.id,{alert:a,reason:(0,d.zG)(i,s.swap,y.Uo,y.tS((e=>e.hint)),y.tS((e=>e===g.AF.NotFixed?y.G(be.bZ.State.Removed.Reason.capiDismiss):y.YP)),y.fS((()=>be.bZ.State.Removed.Reason.capiDone)))})}),s.fold((e=>{this._log.debug("swap raw alerts with new alert",{source:a.toString(),newTarget:e.toString()}),this._alertsRepo.swapRaw(a,e);const i=y.MH(a.rawId);(0,v.kG)(void 0===r.get(e.id),"Added alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()));const s=a.copy();r.set(s.id,s),n.set(i,s),t.delete(e.id),o.set(e.id,e)}),(t=>{this._log.debug("swap raw alerts with existing alert",{source:a.toString(),existingTarget:t.toString()}),this._alertsRepo.swapRaw(a,t),e.set(t.id,{alert:t,reason:be.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),m=new Map;return l&&l.forEach(((e,t)=>{(0,d.zG)(t,c,y.DT((n=>n?be.bZ.isInteractable(n)?!r.has(n.id)||(this._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(this._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(this._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1))),y.tS((r=>(0,d.zG)(r.onRangeChange(e),y.UI((e=>{switch(e.state){case be.bZ.Transition.State.Pending:return m.set(r.id,[r,e.removedRanges]);case be.bZ.Transition.State.Dispose:return(0,d.zG)(r.rawId,y.g_((()=>this._log.debug("dispose by range change on unknown rid",r.id)),(e=>this._heuristicallyRemovedAlerts.set(e,r)))),u.set(t,{alert:r,reason:be.bZ.State.Removed.Reason.textChange});default:return(0,v.vE)(e)}}))))))})),u.forEach((({alert:e})=>{this._log.trace("check cancellations from toRemove: "+e.toLiteString()),(0,d.zG)(e.rawId,y.g_((()=>{t.get(e.id)&&(this._log.debug("cancel add local alert for: "+e.toLiteString()),t.delete(e.id),u.delete(e.id),o.set(e.id,e)),(0,v.kG)(!1===r.has(e.id),"Added local alert should not be present in the updated alerts map",(()=>r.get(e.id).toString()))}),(i=>{const a=n.get(i);a&&(n.delete(i),t.delete(a.id)?(this._log.debug("cancel add for: "+a.toLiteString()),this._log.debug("cancel remove for: "+e.toLiteString()),u.delete(e.id),o.set(e.id,e),o.set(a.id,a)):r.delete(a.id)?(this._log.debug("cancel update for: "+a.toLiteString()),a.id!==e.id&&(this._log.debug("marking update to dispose: "+a.toLiteString()),o.set(a.id,a))):this._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",a))}))),this._log.trace("check if local orphan toRemove: "+e.toLiteString()),(0,d.zG)(this._alertsRepo.getByAlertId(e.id),y.g_((()=>{this._log.debug("cancel delete for: "+e.toLiteString()),u.delete(e.id)}),d.Q1))})),o.size>0&&this._log.debug(`_cancelAlerts, to cancel = ${o.size}`,{alerts:Array.from(o.values()).map((e=>e.toLiteString()))}),o.forEach((e=>{m.delete(e.id)&&this._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){this._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:t,toUpdate:r,toRemove:u,toStartChecking:m}},this._collectChanges=({toAdd:e,toUpdate:t,toRemove:r,toStartChecking:n})=>{const{alertsToAdd:i,alertsToUpdate:a,alertsToRemove:o}=this._addAlerts(Array.from(e.values()),r);return t.size>0&&this._updateAlerts(Array.from(t.values()),a),n.size>0&&this._startAlertsChecking(Array.from(n.values()),a,i),o.size>0&&this._removeAlerts(o,a),{added:i,updated:a}},this._validateAlertAdd=e=>{try{const t=!be.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==p.wQ.Impact.Critical&&e._raw.impact!==p.wQ.Impact.Advanced&&y.pC(e.rawId)&&this._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:p.wQ.clearUserTextFields(e._raw)}),t||(this._log.error("CAPI provides corrupted alert",{alert:e,raw:p.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,d.zG)(e.rawId,y.Gg((e=>y.pC(this._alertsRepo.getByRawAlertId(e)))))?(this._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:p.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===Q.R.Type.Plagiarism&&X.T.isMax(e.progress)?(this._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:p.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){this._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){this._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=({id:e})=>{this._recheckedAlerts.delete(e)&&this._log.debug("Stopped watching checking state for alert",e)},this._applyRemoveToAlert=({alert:e,reason:t})=>(this._alertsRepo.removeFromCapiMapping(e),t!==be.bZ.State.Removed.Reason.textChange&&t!==be.bZ.State.Removed.Reason.duplicated&&e.clearCapiId(),e.changeState(be.bZ.State.Removed.create(t))),this._finishAlertChecking=e=>{(0,v.kG)(this._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),this._log.debug("Stopped watching checking state for alert",e.id);const t=ve.h.create(e);return be.xS.create(t,ve.h.create(e.changeState(be.bZ.State.Registered.create(be.bZ.CheckingState.IDLE))))}}}function Fe(e){return s.fold(e,e)}!function(e){let t;!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(t=e.Type||(e.Type={}))}(De||(De={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(Ne||(Ne={}));var Ue=r(95159),Re=r(4608);class Oe{flushAlerts(){this._flush.next()}loadAlerts(e){const t=new Map;return(0,f.Dw)(e)&&(this._log.debug(`${e.length} external alert(s) where loaded`),e.map(Re.I.splitById).map((({id:e,local:t})=>({id:e,alert:be.bZ.create((0,d.zG)(t,p.wQ.matchBy(d.yR,(e=>(0,o._)((0,a._)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,d.zG)(e.transformJson.alternatives,y.UI(h.r3.Group.fromSerialized))}})),d.yR),this._transformRawAlert),this._ops,this._positionManager,this._alternativeManager)}))).forEach((({id:e,alert:r})=>{this._addAlertBuffered(r),e&&t.set(e,r.id)}))),t}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{repo:this._alertsRepository}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_getTypeFilter(e){switch(e){case"alert":return e=>!be.bZ.isPlagiarism(e);case"plagiarism":return e=>be.bZ.isPlagiarism(e);default:return(0,v.vE)(e)}}_addAlertBuffered(e){this._log.trace(`_addAlert(${e.toLiteString()})`),this._addAlerts.next(e)}_handleFreePremium(e){this._log.trace(`_handleFreePremium(${e.id})`),Boolean(e.updatable)&&(0,d.zG)(this._alertsRepository.getByRawAlertId(e.id),y.hX(be.bZ.isNotDisposed),y.bw((()=>this._removeAlertBuffered(s.left({id:e.id,mergedIn:y.YP,hint:y.YP})))));const t=be.bZ.create(this._transformRawAlert(e),this._ops,this._positionManager,this._alternativeManager);this.flushAlerts(),this._freePremiumAlerts.next(t)}_changeAlertBuffered(e){this._log.trace(`_changeAlert(${e.id})`),this._changeAlerts.next(e)}_removeAlertBuffered(e){this._log.trace(`_removeAlert(${Me.toString(e)})`),this._removeAlerts.next(e)}_getAllAlertsAsArray(){return this._alertsRepository.toArray().filter(be.bZ.isNotRemoved)}constructor(e,t,r,a,o,p,h,v=Le.defaultValidator,O=new Ue.a,B=e.rangeChanged){(0,i._)(this,"_positionManager",void 0),(0,i._)(this,"_alternativeManager",void 0),(0,i._)(this,"_getContent",void 0),(0,i._)(this,"_capiEvents",void 0),(0,i._)(this,"_capiClient",void 0),(0,i._)(this,"_documentCounters",void 0),(0,i._)(this,"_transformRawAlert",void 0),(0,i._)(this,"_alertDuplicateValidator",void 0),(0,i._)(this,"_alertsRepository",void 0),(0,i._)(this,"rangeChanged",void 0),(0,i._)(this,"_state",void 0),(0,i._)(this,"state",void 0),(0,i._)(this,"lensesScores",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_addAlerts",void 0),(0,i._)(this,"_removeAlerts",void 0),(0,i._)(this,"_changeAlerts",void 0),(0,i._)(this,"_freePremiumAlerts",void 0),(0,i._)(this,"_flush",void 0),(0,i._)(this,"_alertsPerRevision",void 0),(0,i._)(this,"_ops",void 0),(0,i._)(this,"_pipeline",void 0),(0,i._)(this,"changes",void 0),(0,i._)(this,"loadScores",void 0),(0,i._)(this,"undoApplied",void 0),(0,i._)(this,"_invalidateAlerts",void 0),(0,i._)(this,"_removeInvalidAlerts",void 0),(0,i._)(this,"_onCapiEvent",void 0),(0,i._)(this,"_emitDomainEvent",void 0),(0,i._)(this,"_prepareDiff",void 0),(0,i._)(this,"_disposeAlert",void 0),this._positionManager=e,this._alternativeManager=t,this._getContent=r,this._capiEvents=a,this._capiClient=o,this._documentCounters=p,this._transformRawAlert=h,this._alertDuplicateValidator=v,this._alertsRepository=O,this.rangeChanged=B,this._state=u.h.create(R.r.empty),this.state=this._state.view(R.r.toCheckingResult),this.lensesScores=u.h.create(j.empty),this._log=m.C8.Logging.getLogger(Oe.loggerName,m.zW.i.TRACE,m.zW.T.Manager.getColor()),this._subs=[],this._addAlerts=new C.x,this._removeAlerts=new C.x,this._changeAlerts=new C.x,this._freePremiumAlerts=new C.x,this._flush=new C.x,this._alertsPerRevision=0,this._pipeline=new Pe(this._positionManager,this._alertsRepository,this._alertDuplicateValidator),this._invalidateAlerts=()=>{this.flushAlerts();const[e,t]=x.uK(this._getAllAlertsAsArray(),(e=>e.isValid));this._log.debug("Invalidate alerts...",{valid:e.length,invalid:t.length}),e.forEach((e=>{this._alertsRepository.removeFromCapiMapping(e),e.clearCapiId()})),t.forEach((e=>e.clearCapiId()))},this._removeInvalidAlerts=e=>{this._log.debug(`Removing invalid alerts by type '${e}'...`);const t=this._getTypeFilter(e),r=this._getAllAlertsAsArray().filter((e=>!e.isValid&&be.bZ.isNotDisposed(e)&&be.bZ.isRegistered(e)&&t(e)));r.forEach((e=>this._removeAlertBuffered(s.right(e.id)))),this._log.debug(`${r.length} invalid alerts removed`),this.flushAlerts(),this._log.isEnabled(m.zW.i.TRACE)&&this._log.trace("Removed alerts",r.map((e=>e.toString())))},this._onCapiEvent=e=>{try{switch("alert_received"===e.kind&&this._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void this._log.warn("got alert with empty mapping",{pname:e.alert.pname});"unlocked"===e.alert.extra_properties.free_premium?this._handleFreePremium(e.alert):this._addAlertBuffered(be.bZ.create(this._transformRawAlert(e.alert),this._ops,this._positionManager,this._alternativeManager));break;case"alert_removed":this._log.debug(`Remove from capi #${e.alertId}, merged in #${y.fS((()=>"None"))(e.mergedIn)}, hint: ${y.fS((()=>"None"))(e.hint)}`);(0,d.zG)(this._alertsRepository.getByRawAlertId(e.alertId),y.Gg(be.bZ.isBulkApplied))||this._removeAlertBuffered(s.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":this._log.debug("Alert change from capi #"+e.alertId),this._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:y.ij(e.extraProperties),transformJson:y.ij(e.transformJson),muted:y.ij(e.muted)});break;case"finish":this._log.debug(`Alerts per revision (#${e.revision}): ${this._alertsPerRevision}`),this._alertsPerRevision=0,"idle"===this._capiClient.checkingState&&this._emitDomainEvent(this._pipeline.reset(e))}}catch(t){m.jI.isErrorLike(t)?this._log.error("Cannot handle CAPI event.",t,{capiEvent:e}):this._log.error("Cannot handle CAPI event.",{capiEvent:e,error:t})}},this._emitDomainEvent=e=>{(0,d.zG)(e,this._prepareDiff,U.v.createDiff,I.T.recover((e=>this._log.error("conflicts on diff creating",e))),(e=>(this._log.debug("_emitDomainEvent",F.p.Diff.show.show(e)),e)),R.r.applyDiff,l.UI(I.T.recover((e=>this._log.error("conflicts on diff apply",e)))),(e=>this._state.modify(e)))},this._prepareDiff=({added:e,updated:t=new Map,removed:r=new Map})=>(t.forEach(((e,n)=>{(0,d.zG)(e,c.Yg,be.bZ.fromAlertModel,be.bZ.shouldBeRemoved)&&(t.delete(n),r.set(n,e[0]))})),r.forEach((0,d.ls)(be.bZ.fromAlertModel,this._disposeAlert)),{added:e,updated:t,removed:r}),this._disposeAlert=e=>{if(be.bZ.isApplied(e)&&e.state.undoable.commit(),be.bZ.isNotRegistered(e))try{this._alertsRepository.remove(e)}catch(t){this._log.error("Cannot remove alert.",t),be.bZ.isNotDisposed(e)&&e.dispose()}else this._log.error("unexpected remove of registered alert",e.toString())},this._ops=new ze(this._positionManager,this._getContent,this._capiClient,this._alertsRepository),this.loadScores=e=>{this.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;const $=this.rangeChanged.pipe(S.U((({affected:e})=>e)),A.h((e=>e.length>0)),S.U((e=>w.vM((e=>e.meta.alertId),e.filter(K.P.is)))),A.h((e=>e.size>0)),_.b((e=>this._log.debug("Range[s] changed",e))),k.B()),W=E.F(250).pipe(T.O(0),M.T(this._flush)),H=G.RX(this._log);this._subs.push(H("_alertsInvalidation",this._capiEvents.pipe(A.h((e=>g.hX.is("session_started")(e)&&e.isNewSession)),_.b(this._invalidateAlerts),L.c(D.T(this._capiEvents.pipe(A.h(g.hX.is("finish")),N.q(1),z.h("alert")),this._capiEvents.pipe(A.h(g.hX.is("async_check_finished")),N.q(1),z.h("plagiarism")))),_.b(this._removeInvalidAlerts))),H("_capiEvents",this._capiEvents.pipe(_.b(this._onCapiEvent))),H("_alertsProccesing",this._addAlerts.pipe(M.T(this._freePremiumAlerts),M.T(this._removeAlerts),M.T(this._changeAlerts),M.T($),P.f(W),A.h(f.Dw),S.U(this._pipeline.process),_.b(this._emitDomainEvent))),H("_alertsBuffer",$.pipe(M.T(this._capiEvents.pipe(A.h(g.hX.is("before_finish","before_async_check_finish","async_check_finished")))),z.h(G.PU),_.b((e=>this._flush.next(e))))),H("_alertOpsAlertChanges",this._ops.events.pipe(_.b(this._emitDomainEvent))),H("_lensesScoresChanges",j.fromCapi(this._capiEvents).pipe(_.b(G.wW(this.lensesScores)))),H("documentCountersChanges",n.fromAlerts(this._state.view(U.v.iso.wrap)).pipe(_.b(G.wW(this._documentCounters))))),(0,b.iR)("alerts",(()=>this.toString())),(0,b.iR)("triggerRemove",(e=>{this._removeAlertBuffered(s.right(e))}))}}(0,i._)(Oe,"loggerName","AlertManager")},73173:(e,t,r)=>{r.d(t,{e:()=>n});var n,i=r(58303),a=r(61179),o=r(90023),s=r(97767),l=r(58578),c=r(68717);!function(e){e.create=function(e){const t=t=>(0,o.zG)(e.get(),l.p.get(t),i.UI(c.bZ.fromAlertModel)),r=e=>(0,o.zG)(t(e),i.hX(c.bZ.isInteractable)),n=e=>(0,o.zG)(t(e),i.hX(c.bZ.isRegistered)),d=(0,o.ls)(n,i.hX((0,s.W9)(c.bZ.isNotDisposed,(0,a.ff)(c.bZ.isInPremiumLens),(0,a.ff)(c.bZ.isHidden)))),u=(0,o.ls)(d,i.pC);return{getById:t,getRegistered:n,getInteractable:r,getValidForFeedback:d,isValidForFeedback:u,isRegistered:e=>(0,o.zG)(n(e),i.pC),isInteractable:e=>(0,o.zG)(r(e),i.pC)}}}(n||(n={}))},25797:(e,t,r)=>{r.d(t,{k:()=>f});var n=r(32490),i=r(59833),a=r(12518),o=r(51505),s=r(24332),l=r(58303),c=r(86399),d=r(90023),u=r(19813),m=r(1747),p=r(4025),h=r(99158),g=r(68717);class f{apply(e,t){const{alternativeIndex:r,source:n}=t;return this._log.trace("apply",e),(0,d.zG)(this._findAlert(e),p.tS(p.DT(g.bZ.isApplicableAlert,(()=>new Error("cannot apply not applicable alert")))),p.tS((e=>(0,d.zG)(p.vM((()=>e.apply(t))),p.Vn((t=>(this._log.error("apply single alert error",{error:t,alert:e.toLiteAlert(),alternativeIndex:r,source:n}),t)))))))}applyBulk(e,t){this._log.trace("applyBulk",e),this.sendBatchFeedback(e,m.DI.BULK_ACCEPTED,t);const r=(0,d.zG)(e,h.T.fromArray((e=>(0,d.zG)(this._findAlert(e),p.Vn((t=>(0,d.bc)(t,{id:e}))),p.tS(p.DT(g.bZ.isRegisteredApplicableAlert,(e=>(0,d.bc)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())))),p.tS(p.DT((e=>m.wQ.withTransformJson(e._raw)),(e=>(0,d.bc)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())))),p.Vn((([e,t])=>(this._log.error(e.message,t),e)))))));return(0,d.zG)(r,h.T.flatMap(i.uZ(),(e=>(0,d.zG)(this._ops._applyTransformJson({alerts:e.map((e=>({alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}))),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),o.g_((t=>()=>(this._log.error("applyBulk error",t),h.T.of([],e.map((e=>e.id))))),(()=>()=>h.T.of(e.map((e=>e.id))))))())))}confirmApplied(e){return this._log.trace("commitApplied",e),(0,d.zG)(e,h.T.fromArray((0,d.ls)(this._findAlert,p.UI(g.Ev.castApplied))),p.Vn((e=>new Error(`Error on trying to confirm applied alerts: ${e.rejected.join(",")}`))),p.tS((e=>this._ops._confirmApplied(e)())))}dismissBatch(e,t){return this._log.trace("dismissBatch",e),(0,d.zG)(e.map((0,d.ls)(this._findAlert,p.UI((e=>[e])))),(0,s.g_)(v),p.tS((e=>this._ops._dismissBatch(e,t)())))}applyFeedback(e,t,r){return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._alertFeedback(e,t,r)())))}sendBatchFeedback(e,t,r){return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,d.zG)(e,h.T.fromArray(this._findAlert),h.T.tapFailure((e=>this._log.error("Cannot send batch feedback for alerts",e.rejected))),h.T.foldSuccess((e=>p.F2(this._ops._alertBatchFeedback(e,t,r)()))))}takeReference(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,d.zG)(this._findAlert(e.id),p.tS((e=>e.takeReference(t))))}changeMuteState(e,t){return this._log.trace("changeMuteState",e),(0,d.zG)(e,h.T.fromArray((e=>this._findAlert(e.id))),h.T.flatMap(i.uZ(),(e=>(0,d.zG)(this._ops._changeMuteState(e,t)(),p.Vn((e=>(this._log.error("Can not change mute state",e),e))),p.MH))))}changeGapValue(e,t){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._changeGapValue(e,t)())))}changeTakeawayFeedback(e,t){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._changeTakeawayFeedback(e,t)())))}shortenItSummaryNotFound(e){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._shortenItSummaryNotFound(e)())))}sendShortenItSummaryRequest(e){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._commitShortenItSummaryRequest(e)())))}dismissShortenItTransformGroup(e,t){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._dismissShortenItTransformGroup(e,t)())))}changeToneAIToneAlternative(e,t){return(0,d.zG)(this._findAlert(e),p.tS((e=>this._ops._changeToneAIToneAlternative(e,t)())))}constructor(e,t){(0,n._)(this,"_alertsReader",void 0),(0,n._)(this,"_ops",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_findAlert",void 0),(0,n._)(this,"undoBulk",void 0),(0,n._)(this,"getHighlightRanges",void 0),(0,n._)(this,"hasNewRangesForUpdate",void 0),(0,n._)(this,"applyPendingRangesUpdate",void 0),(0,n._)(this,"getAppliedRanges",void 0),this._alertsReader=e,this._ops=t,this._log=u.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=e=>(0,d.zG)(e,this._alertsReader.getById,p.Yo((()=>new Error(`alert ${e} not found in the repo`)))),this.undoBulk=(0,d.ls)(c.DZ((0,d.ls)(this._alertsReader.getById,l.hX(g.bZ.isBulkApplied))),(e=>this._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()),p.fS((e=>{throw this._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,d.ls)(this._findAlert,p.UI((e=>e.getHighlightRanges()))),this.hasNewRangesForUpdate=(0,d.ls)(this._findAlert,p.UI((e=>e.hasNewRangesForUpdate))),this.applyPendingRangesUpdate=(0,d.ls)(this._findAlert,p.UI((e=>e.applyPendingRangesUpdate()))),this.getAppliedRanges=(0,d.ls)(this._alertsReader.getById,p.Yo((()=>new Error("alert not found in the repo"))),p.Y$(g.bZ.isApplicableAlert,(e=>new Error(`alert is not applicable: ${e.alertType}`))),p.UI((e=>e.getAppliedRanges())))}}const y=i.uZ(),v=(0,a.getApplyMonoid)(y)},97173:(e,t,r)=>{r.d(t,{R:()=>a});var n=r(45951),i=r(74822);class a{static init(e,t,r,n,o,s){const l=new i.x;return new a(e,t,r,n,o,s,l),l}constructor(e,t,r,n,i,o,s){const l=a.NamedChangesSink.factory(s),c={pm:l(a.Receiver.PM,n),dm:l(a.Receiver.PM,i),capi:l(a.Receiver.CAPI,r),userTextEcho:l(a.Receiver.UserText,e)};a.Producer.create(a.Producer.UserText,{changes:e.changes})(c.dm,c.pm,c.capi),a.Producer.create(a.Producer.ALERT_APPLY,o)(c.userTextEcho),t.subscribe((t=>{"before_alert"===t.kind&&e.flushChanges()}))}}!function(e){let t,r,i,a;!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(t=e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return(...r)=>t.changes.subscribe((t=>{r.forEach((r=>r.pushChanges(e,t)))}))}}(t=e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(r=e.Receiver||(e.Receiver={})),function(e){function t(e,t,r){return{pushChanges:(i,a)=>{try{let o=t.pushChanges(a);"function"==typeof o&&(o=n.Vi(o)),void 0!==o&&o.catch((t=>r.next({exception:t,details:{from:i,to:e}})))}catch(t){r.next({exception:t,details:{from:i,to:e}})}}}}e.factory=function(e){return(r,n)=>t(r,n,e)},e.create=t}(i=e.NamedChangesSink||(e.NamedChangesSink={})),function(e){e.create=e=>({changes:e.changes,pushChanges(t){e.pushChanges(t,"user")},getContents:()=>e.getContents(),flushChanges:()=>e.flushChanges()})}(a=e.UserTextChangesSync||(e.UserTextChangesSync={}))}(a||(a={}))},72998:(e,t,r)=>{r.d(t,{Av:()=>i,nR:()=>n});var n,i,a,o=r(84910),s=r(78520),l=r(72106),c=r(90023),d=r(96837),u=r(93018),m=r(64271),p=r(84714);!function(e){e.noopSync={pushChanges:c.Q1};e.ignoreResult=function(e){return{pushChanges:t=>{e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,c.ls)(e.pushChanges,l.UI(c.Q1))}},e.pushDeleteThenInsert=function(e){return{pushChanges:t=>{(d.RI.isDelta(t)?d.RI.fromArrayOfDeltas(u.s.splitToDeleteThenInsert(t.delta).filter(u.s.nonEmpty),t.prevLen):[t]).forEach((t=>e.pushChanges(t)))}}}}(n||(n={})),function(e){e.merge=function(e){return{changes:m.T(...e.map((e=>e.changes)))}}}(i||(i={})),function(e){e.noopSync=e=>(0,s._)((0,o._)({},n.noopSync),{changes:p.of(e)})}(a||(a={}))},9746:(e,t,r)=>{r.d(t,{w:()=>m});var n,i=r(2245),a=r(58303),o=r(61179),s=r(90023),l=r(90490),c=r(97767),d=r(82977),u=r(92467);!function(e){e.modelToCounters=function(e){return u.h.isRegistered(e)?e.counters:d.R.empty}}(n||(n={}));var m,p=r(36355);!function(e){e.monoid=i.uZ(p.R.Id.ord,p.R.Meta.group),e.eq=i.Eh(p.R.Id.ord,p.R.Meta.eq),e.isEmpty=i.xb,e.lookup=i.P5(p.R.Id.ord),e.applyDiff=e=>t=>n=>(0,s.zG)(t,l.vh.foldMap(m.monoid)(d(e),u(e),r(e)),(0,c.WA)(m.monoid.concat)(n),i.hX((0,o.ff)(p.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let r=t;return e.forEach(((e,t)=>{r=(0,s.zG)(r,i.cq(p.R.Id.ord)(t,p.R.Meta.ratioToPercentile(e)),a.g_((()=>(0,s.zG)(r,i.ZQ(p.R.Id.ord)(t,p.R.Meta.fromPercentile(e)))),s.yR))})),r};const t=(0,s.ls)(n.modelToCounters,p.R.Meta.fromAlertCounters),r=e=>r=>h(e)(r,t),d=e=>r=>h(e)(r,(0,s.ls)(t,p.R.Meta.group.inverse)),u=e=>(t,n)=>m.monoid.concat(r(e)(n),d(e)(t)),h=e=>(t,r)=>(0,s.zG)(e,i.hX((e=>e(t.alert))),i.UI((()=>r(t))))}(m||(m={}))},77326:(e,t,r)=>{r.d(t,{A:()=>n});var n,i=r(84910),a=r(78520),o=r(13391),s=r(954),l=r(31403),c=r(3199),d=r(77400),u=r(98800),m=r(58578),p=r(9746);!function(e){var t=e.defaultState={alerts:m.p.empty,lenses:p.w.monoid.empty};e.get=(e,n,i)=>n.pipe(s.O(new Map),l.a(e.pipe(s.O(m.p.empty),c.R(((e,t)=>r(t,i.lensFilters)(e)),t)),h)),e.getMock=(e,t)=>{const r=o.h.create(n.defaultState);return n.get(e,t,u.t.create(u.t.defaultLensFilters,u.t.defaultTextFilters)).subscribe(d.wW(r)),r};const r=(e,t)=>r=>{const n=m.p.Diff.toRegistered(m.p.diff(r.alerts,e));return{alerts:e,lenses:p.w.applyDiff(t)(n)(r.lenses)}},h=(e,t)=>(0,a._)((0,i._)({},t),{lenses:p.w.updatePercentiles(e)(t.lenses)})}(n||(n={}))},63153:(e,t,r)=>{r.d(t,{J:()=>n});var n,i=r(84910),a=r(78520),o=r(59833),s=r(12518),l=r(58303),c=r(14944),d=r(61179),u=r(18397),m=r(72106),p=r(90023),h=r(13391),g=r(19813),f=r(1747),y=r(56215),v=r(70393),x=r(74822),I=r(31391),b=r(20161),C=r(90572),S=r(59179),A=r(63532),w=r(77400),_=r(78129),k=r(36344),E=r(68717),T=r(74467);!function(e){let t,r,n;!function(e){let t;!function(e){e.ord=c.r9,e.show=u._3,e.create=e=>e}(t=e.Id||(e.Id={}));e.isSpecial=e=>Object.values(f.JW.SpecialCategory).includes(e),e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=e=>v.hX((t=>e(t.id))),e.filterWithCount=(e,t)=>r=>{const n=Array.from(r.keys()),o=T.k.getAlerts(t,n).byCategory;return(0,p.zG)(r,v.DZ((t=>e(t.id)?l.G((0,a._)((0,i._)({},t),{alertsCount:o.get(t.id).filter(E.bZ.isRegistered).length})):l.YP)))}}(r=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){let n,i;!function(e){let t;!function(e){e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(n=e.Events||(e.Events={})),e.create=function(e,i,a,c,u){const k=g.C8.Logging.getLogger("MutedAlertsModel"),M=h.h.create(new Map),G=new x.x,L=new I.w.Keeper,D=h.h.create(!1);return L.push(D.pipe(b.w((t=>e.pipe(C.h((()=>!t)),C.h(y.hX.is("session_started")),S.U((e=>function(e){const t=e.map((e=>[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]));return new Map(t)}(e.userMutedCategories))),A.b(w.wW(M)),A.b((()=>G.next({type:n.Type.CategoriesChanged}))))))).subscribe(),M.pipe(_.G(),S.U((([e,r])=>function(e,r){return{muted:v.uz(t.Id.ord)(e,r),unmuted:v.uz(t.Id.ord)(r,e)}}(e,r))),S.U(function(e){return({muted:t,unmuted:r})=>({toMute:T.k.getAlerts(e,t).all.filter((e=>e.mute!==E.bZ.MuteStateType.Muted)),toUnmute:T.k.getAlerts(e,r).all.filter((e=>e.mute!==E.bZ.MuteStateType.Unmuted))})}(a)),A.b((({toMute:e,toUnmute:t})=>{e.length>0&&c.changeMuteState(e,E.bZ.MuteStateType.Muted),t.length>0&&c.changeMuteState(t,E.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:G,mutedCategories:M,muteCategories:e=>{D.set(!0),(0,p.zG)(i.sendFeedback({kind:f.Mw.MUTE,userMuteScope:u,userMuteCategories:e}),m.tS((()=>(D.set(!1),m.F2(p.Q1)))),m.Vn((e=>{k.warn("Alerts could not be muted on CAPI",e)})))();const r=T.k.getAlerts(a,e);0===r.all.filter((e=>e.mute!==E.bZ.MuteStateType.Muted)).length&&k.warn("No alerts were muted on category mute",{categoryIds:e});const c=function(e,r,n){return i=>{const a=new Map(i);return e.forEach(((e,i)=>{t.isSpecial(i)?a.set(i,{id:i,scope:r,description:t.specialCategoryDescription}):(0,p.zG)(o.P5(0,e),l.tS((e=>e.muteCategory)),l.g_((()=>n.error("No alerts to mute",i)),(e=>a.set(i,{id:e.id,description:e.description,scope:r}))))})),a}}(r.byCategory,u,k)(M.get());return M.set(c),G.next({type:n.Type.CategoriesChanged}),s.right(void 0)},unmuteCategories:e=>{D.set(!0),(0,p.zG)(i.sendFeedback({kind:f.Mw.UNMUTE,userMuteScope:u,userMuteCategories:e}),m.tS((()=>(D.set(!1),m.F2(p.Q1)))),m.Vn((e=>{k.warn("Alerts could not be un-muted on CAPI",e)})))();return 0===T.k.getAlerts(a,e).all.filter((e=>e.mute!==E.bZ.MuteStateType.Unmuted)).length&&k.warn("No alerts were unmuted on category unmute",{categoryIds:e}),M.modify(function(e,t){return r=>{const n=new Map(r);return e.forEach((e=>{r.has(e)?n.delete(e):t.error("Tried to unmute a category which is not muted",e)})),n}}(e,k)),G.next({type:n.Type.CategoriesChanged}),s.right(void 0)},getMutedCategories:()=>(0,p.zG)(M.get(),r.filterWithCount((0,d.ff)(t.isSpecial),a)),getMutedSpecialCategories:()=>(0,p.zG)(M.get(),r.filter(t.isSpecial)),loadCachedMutedCategories:e=>{M.set(e)},dispose:()=>L.dispose()}},function(e){e.create=function(){return{events:k.E,mutedCategories:h.h.create(new Map),getMutedCategories:()=>new Map,getMutedSpecialCategories:()=>new Map,muteCategories:e=>s.right(void 0),unmuteCategories:e=>s.right(void 0),loadCachedMutedCategories:p.Q1,dispose:p.Q1}}}(i=e.Mock||(e.Mock={}))}(n=e.CategoriesModel||(e.CategoriesModel={}))}(n||(n={}))},74467:(e,t,r)=>{r.d(t,{k:()=>n});var n,i=r(58303),a=r(90023),o=r(68717),s=r(58578);!function(e){e.create=e=>({getAlertMuteCategory:t=>(0,a.zG)(e.getById(t),i.tS((e=>e.muteCategory)))});e.getAlerts=function(e,t){const r={byCategory:new Map(t.map((e=>[e,[]]))),all:[]};return(0,a.zG)(e.get(),s.p.reduce(r,((e,{alert:r})=>(0,a.zG)(r.muteCategory,i.hX((e=>t.includes(e.id))),i.UI((e=>e.id)),i.wp((()=>i.ij(t.find(o.bZ.belongsToSpecialCategory(r))))),i.g_((()=>e),(t=>(e.byCategory.get(t).push(r),e.all.push(r),e)))))))}}(n||(n={}))},39302:(e,t,r)=>{r.d(t,{dM:()=>n,j:()=>i});var n,i,a,o,s=r(21147),l=r(18397),c=r(90023),d=r(13391),u=r(94444),m=r(5981),p=r(52303);!function(e){e.group=m.kT({critical:m.Kh,advanced:m.Kh,free:m.Kh,freePremium:m.Kh,paid:m.Kh,unread:m.Kh,muted:m.Kh}),e.eq=s.MW({critical:s.lr,advanced:s.lr,free:s.lr,freePremium:s.lr,paid:s.lr,unread:s.lr,muted:s.lr}),e.show=l.aM({critical:l.yt,advanced:l.yt,free:l.yt,paid:l.yt,unread:l.yt,muted:l.yt});e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(e){return n.eq.equals(e,n.group.empty)}}(n||(n={})),function(e){var t=e.MIN_GOALS=3;e.TOTAL_GOALS=t+1;e.calculateCompleteness=function(e){const t=(0,c.zG)(e.goals,p.Gg((e=>e.size>0)));return u.R$.eq.equals(e,u.R$.unset)||(0,c.zG)(e.domain,p.wo((e=>"general"===e)))&&!(p.pC(e.audience)||p.pC(e.style)||t)?0:Number(t||0)+i.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){let t;!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(t=e.CheckingKind||(e.CheckingKind={}));e.Mock={getCheckingForState:()=>d.h.create({kind:o.CheckingKind.Document,type:"idle"})}}(o||(o={}))},51607:(e,t,r)=>{r.d(t,{X:()=>n});var n,i=r(17613);!function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony",e.GrammarlyGOIdeationAssistant="grammarlyGOIdeationAssistant",e.GrammarlyGORewrite="grammarlyGORewrite"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){switch(e){case t.Step2:case t.Step3:case t.Step5:case t.Step6:case t.Step7:case t.Step12:case t.Step13:case t.Step16:return!1;case t.Step1:case t.Step4:case t.Step8:case t.Step9:case t.Step10:case t.Step11:case t.Step14:case t.Step15:case t.DocumentTitle:case t.Synfony:case t.GrammarlyGOIdeationAssistant:case t.GrammarlyGORewrite:return!0;default:return(0,i.vE)(e)}}}(n||(n={}))},46193:(e,t,r)=>{r.d(t,{E:()=>n});const n=(0,r(28820).createTypeStyle)()},97050:(e,t,r)=>{r.d(t,{sJ:()=>g});var n=r(58303),i=r(90023),a=r(5876),o=r(84308),s=r(59179),l=r(954),c=r(24666),d=r(57326),u=r(48746),m=r(9761),p=r(8080),h=r(85240);function g(e){return(t,r,n,i,o,s)=>a.Z.composeKnot({content:a.Z.fromSideEffect((r=>{f(t)(r);const n=r.action.action;"item"===n.key&&e(n.action)}),v(r,o,s)),root:y(r,n,i)})}function f(e){return t=>{switch(t.action.action.action.kind){case h.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case h.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const y=(e,t,r)=>a.Z.fromSideEffect((e=>{t.next(e.element)}),o.a([r,e.view("cardsHeight")]).pipe(s.U((([e,t])=>({disableUserActions:e,height:t}))),l.O({disableUserActions:!1,height:0}))),v=(e,t,r)=>{const a=e.view(p.v.Prism.items),l=e.pipe(s.U((e=>e.itemsOrd))),g=e.pipe(s.U((0,i.ls)(m.In.getActiveItem,n.UI(d.X.getId)),c.x())),f=e.view(t.getActiveAlertsCount).view((e=>0===e));return o.a([a,g,f,l]).pipe(s.U((([e,a,o,s])=>{const l=(0,i.zG)(e.find((e=>e.positionState.watched)),n.UI((e=>e.value))),c=e.getAt(e.size-1);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.zG)(t,n.Gg((t=>t.id===e.id)))||(0,i.zG)(t,n.Gg((e=>e.positionState.isHeightValid))))(e,l))).map((e=>function(e){return(t,r,a,o)=>s=>{const l=(0,i.zG)(t,n.Gg((e=>e===s.id)));return{cell:{item:e.viewState(r,a)(s),root:{height:{value:s.positionState.height,watched:s.positionState.watched&&!e.isScheduledToDispose(s),isValid:s.positionState.isHeightValid},position:{top:s.positionState.absTop,animationInProgress:s.positionState.animationInProgress},layer:l||u.o.isAnimatable(s)&&s.visualState.incomplete&&!(0,i.zG)(s.visualState.from,n.Gg((e=>"focused"===e)))?h.H.Layer.front:h.H.Layer.back}},root:s.id,hashCode:s.hashCode.bind(s),equals:e=>s.equals(e.cell.item.view),compare:e=>o.compare(s,e.cell.item.view)}}}(t)(a,o,(0,i.zG)(c,n.Gg((t=>t.id===e.id))),s)(e)),r(s))})))}},28069:(e,t,r)=>{r.d(t,{A:()=>n});var n,i=r(84910),a=r(78520),o=r(49231),s=r(58303),l=r(47387),c=r(37213),d=r(97767),u=r(5876),m=r(56424),p=r(85240),h=r(26814),g=r(59179);!function(e){let t;function r(e){return u.UI.List.make(h.aW.getFoldableWithIndex(),m(e))}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=r,e.cardList=function(e){return u.UI.Knot.make(n,{content:r(e)})};var n=e.ScrollableBox=u.UI.Grid.make((({notify:e,view:r,slots:n})=>o.createElement(l.F.div,(0,a._)((0,i._)({},(0,c.Sh)(r("disableUserActions").pipe(g.U((0,d.RN)(y.disableUserActions,void 0))),y.scrollContent)),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:r=>e({kind:t.onMount,element:s.ij(r)})()}),n.content)));function m(e){return u.UI.Knot.make(v,{cell:u.UI.Knot.make(p.H.Cell,{item:u.UI.Composite.make(f,e)})})}e.cell=m;var f=e.CardStyleProvider=u.UI.Grid.make((({slots:e})=>o.createElement(l.F.div,{className:y.cardWrapper},e.children))),v=e.IdProvider=u.UI.Grid.make((({slots:e,state:t})=>o.createElement(l.F.div,{"data-id":t},e.cell)))}(n||(n={}));const f={margin:`${m.ux.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:m.ux.rem(-.5),width:m.ux.rem(.5),height:m.ux.percent(100),background:"none",content:"''"}}},y=m.ux.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[f]})},16227:(e,t,r)=>{r.d(t,{Q:()=>le});var n=r(49231),i=r(47387),a=r(5876),o=r(24666),s=r(59179),l=r(44059),c=r(95140),d=r(23584),u=r(1553),m=r(84910),p=r(78520),h=r(58303),g=r(90023),f=r(69088),y=r(62552),v=r(8867);class x{constructor(e){this._keySelector=e}call(e,t){return t.subscribe(new I(e,this._keySelector))}}class I extends f.Lv{constructor(e,t){super(e),this.destination=e,this._keySelector=t,this.attemptedToUnsubscribe=!1,this.count=0,this._currentGroup=h.YP}_next(e){const t=this._keySelector(e);(0,g.zG)(this._currentGroup,h.g_((()=>this._createGroup(t,e)),(({key:r,group:n})=>{r!==t?(n.complete(),this._currentGroup=h.YP,this._createGroup(t,e)):n.closed||n.next(e)})))}_createGroup(e,t){const r=new y.X(t);this._currentGroup=h.G({key:e,group:r}),this.destination.next(this._createGroupedObservable(e,r))}_createGroupedObservable(e,t){const r=new v.y((e=>{this.count++;const r=t.subscribe(e);return()=>{r.unsubscribe(),0==--this.count&&this.attemptedToUnsubscribe&&this.unsubscribe()}}));return r.key=e,r}_error(e){(0,g.zG)(this._currentGroup,h.UI((({group:t})=>t.error(e)))),this._currentGroup=h.YP,this.destination.error(e)}_complete(){(0,g.zG)(this._currentGroup,h.UI((({group:e})=>e.complete()))),this._currentGroup=h.YP,this.destination.complete()}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}var b,C=r(20161),S=r(704),A=r(84714),w=r(19813),_=r(97767),k=r(64538),E=r(55441),T=r(56424),M=r(41255),G=r(57326),L=r(42596),D=r(21016),N=r(2087),z=r(38713),P=r(93127),F=r(68334),U=r(83207);!function(e){e.Mini=({card:e,actions:t})=>n.createElement(i.F.Fragment,null,e.pipe(s.U((e=>L.i.isToneAIItem(e)?n.createElement(U.Y.BundleMini,{card:e,actions:t}):L.i.isEthicalAIItem(e)?n.createElement(F.T.Mini,{card:e,actions:t,useBundleContainer:!0}):n.createElement(P.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:r,renderCard:c})=>{const{isChecking:d,isCheckingGlobal:u,transform:m}=G.X.useCardStates(e),p=e=>(l("CardBundle").error("card type not supported:",e),null),h=e.pipe((e=>e.lift(new x((e=>e.activeAlert.id)))),C.w((e=>e.pipe(o.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),s.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,g.zG)(e,o.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),S.shareReplay({bufferSize:1,refCount:!0}))}))))))),f=(e,t)=>{const a=t.alerts.length,o=1===a?se.bundleInnerContainer:2===a?se.bundleInnerContainer2Cards:se.bundleInnerContainerNCards;return n.createElement(i.F.div,{className:o},c?c({card:t,actions:r,isChecking:d,isCheckingGlobal:u,transform:e}):n.createElement(z.J,{card:t,actions:r,isChecking:d,transform:e,isCheckingGlobal:u}))};return n.createElement(i.F.Fragment,null,e.pipe(s.U((o=>L.i.isIndependentBundleItem(o)?f(m,o):n.createElement(a,{card:e,actions:r},n.createElement(t,{state:h,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,E.EJ)(""),next:(0,E.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,E.EJ)(se.inBundleToUpdatedCardOld),next:(0,E.EJ)(se.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,E.EJ)(se.inBundleToUpdatedCardOld),next:(0,E.EJ)(se.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,E.EJ)(se.inBundleToNextCardOld),next:(0,E.EJ)(se.inBundleToNextCardNew)}:{prev:(0,E.EJ)(se.inBundleToPrevCardOld),next:(0,E.EJ)(se.inBundleToPrevCardNew)}}},(e=>n.createElement(i.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:g.Q1},(0,g.zG)(e.state.card,s.U((0,g.ls)(L.i.match({super:p,ethicalAI:p,takeaway:t=>f("prev"===e.type?A.of(t.transform):m,t),synfony:t=>f("prev"===e.type?A.of(t.transform):m,t),shortenIt:t=>f("prev"===e.type?A.of(t.transform):m,t),toneAI:t=>f("prev"===e.type?A.of(t.transform):m,t),suggestedSnippet:t=>f("prev"===e.type?A.of(t.transform):m,t),knowledgeHubSuggestedTerm:t=>f("prev"===e.type?A.of(t.transform):m,t),default:t=>f("prev"===e.type?A.of(t.transform):m,t)}),G.X.foldCard)))))))))))};class t extends E.l5{}const r=({alertCount:e})=>1===e?n.createElement(n.Fragment,null):2===e?n.createElement("div",{className:se.bundleFakeCard1}):n.createElement(n.Fragment,null,n.createElement("div",{className:se.bundleFakeCard1}),n.createElement("div",{className:se.bundleFakeCard2})),a=({children:e,card:t,actions:a})=>n.createElement(i.F.div,{className:se.bundleCardWrapper},n.createElement(N.PS,{card:t,actions:a}),n.createElement(i.F.div,{className:se.cardBundleContainer},e,(0,g.zG)((e=>(0,g.zG)(e,s.U((e=>h.G(e.alerts.length)))))(t),s.U(h.UI((e=>n.createElement(r,{key:e,alertCount:e})))),s.U(h.WG)))),l=(0,_.HP)(w.C8.Logging.getLogger)}(b||(b={}));const R=.25,O="0 1px 8px rgba(109, 117, 141, .18)",B=T.ux.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),$=T.ux.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),W=T.ux.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),j=T.ux.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),H=T.ux.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),Y={position:"relative",borderRadius:T.ux.rem(M.Jr),background:k.Il.CoreNeutral0,boxShadow:O,zIndex:2},V={marginTop:T.ux.rem(.75)},Z={marginTop:T.ux.rem(1.25)},J={position:"absolute",top:T.ux.px(-5),right:T.ux.rem(.5),left:T.ux.rem(.5),zIndex:-1,display:"block",height:T.ux.percent(100),borderRadius:T.ux.rem(M.Jr),backgroundColor:k.Il.CoreNeutral1,boxShadow:O,content:"' '"},X={position:"absolute",top:T.ux.px(-10),right:T.ux.rem(1),left:T.ux.rem(1),zIndex:-2,display:"block",height:T.ux.rem(2),borderRadius:T.ux.rem(M.Jr),backgroundColor:k.Il.CoreNeutral10,boxShadow:O,content:"' '"},Q={borderRadius:T.ux.rem(.75),background:k.Il.CoreNeutral20,margin:`${T.ux.rem(-.25)} ${T.ux.rem(-.25)}`,padding:`${T.ux.rem(.25)} ${T.ux.rem(.25)}`,$nest:{[`& .${D.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${D.g.fullCardSelector}`]:{padding:`${T.ux.rem(.75)} ${T.ux.rem(.5)} ${T.ux.rem(.5)} ${T.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${T.ux.rem(-.5)})`}}},q={position:"absolute",top:T.ux.rem(.8),right:T.ux.rem(1),margin:0},K={borderRadius:T.ux.rem(M.Jr),background:k.Il.CoreNeutral0,boxShadow:O},ee={display:"block",position:"absolute",top:0,$nest:{[`& .${D.g.bundleInnerContainerSelector}`]:{margin:0}}},te={animation:`${H} ${T.ux.seconds(R)} ease-out`},re={animation:`${W} ${T.ux.seconds(R)} ease-out`},ne={animation:`${$} ${T.ux.seconds(R)} ease-in`},ie={animation:`${j} ${T.ux.seconds(R)} ease-in`},ae={display:"none",animation:`${B} ${T.ux.seconds(R)} ease-in`},oe={animation:`${B} ${T.ux.seconds(R)} ease-in`},se=(0,p._)((0,m._)({},T.ux.stylesheet({bundleInnerContainer:[Y],bundleCardWrapper:[Q],minimalBetaLabel:[q],compactCardContainer:[K],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[ee],inBundleToPrevCardOld:[ee,te],inBundleToPrevCardNew:[re],inBundleToNextCardOld:[ee,ne],inBundleToNextCardNew:[ie],inBundleToUpdatedCardOld:[ae],inBundleToUpdatedCardNew:[oe]})),{bundleInnerContainer:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y)]),bundleInnerContainer2Cards:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y,V)]),bundleInnerContainerNCards:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y,Z)]),bundleFakeCard1:T.ux.joinClasses([D.g.bundleFakeCard1Selector,T.ux.style(J)]),bundleFakeCard2:T.ux.joinClasses([D.g.bundleFakeCard2Selector,T.ux.style(X)])});var le;!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const r=t("view");return n.createElement(i.F.Fragment,null,r.pipe(o.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),s.U((i=>n.createElement(d.p.Provider,{card:r,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>n.createElement(c.b.Card,{mount:a,miniCard:n.createElement(b.Mini,{card:r,actions:e}),fullCard:n.createElement(b.Full,{card:r,actions:e}),successCard:n.createElement(l.A.Success,{cardData:i,isLastCard:t("isLastCard"),actions:e}),feedbackForm:n.createElement(l.A.FeedbackForm,{cardData:i,actions:e}),mutedCard:n.createElement(l.A.MutedAlert,{cardData:i,actions:e}),actions:e,card:i,transitionClassMapper:u.a})))))))}))}(le||(le={}))},39578:(e,t,r)=>{r.d(t,{p:()=>n});var n,i=r(49231),a=r(90023),o=r(47387),s=r(5876),l=r(24666),c=r(59179),d=r(44059),u=r(95140),m=r(23584),p=r(31363);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const r=t("view");return i.createElement(o.F.Fragment,null,r.pipe(l.x(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),c.U((n=>i.createElement(m.p.Provider,{card:r,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>i.createElement(u.b.Card,{mount:a,miniCard:i.createElement(d.A.Mini,{card:r,actions:e}),fullCard:i.createElement(d.A.Full,{card:r,actions:e}),successCard:i.createElement(d.A.Success,{cardData:n,isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(d.A.FeedbackForm,{cardData:n,actions:e}),actions:e,card:n,mutedCard:i.createElement(d.A.MutedAlert,{cardData:n,actions:e})})))))))})),e.DenaliCardWrapper=s.UI.Grid.make((({slots:e,view:t})=>i.createElement(o.F.div,{className:(0,a.zG)(t("layoutDensity"),c.U((e=>(0,p.f8)(e).container)))},e.children)))}(n||(n={}))},81080:(e,t,r)=>{r.d(t,{C:()=>f});var n=r(49231),i=r(58303),a=r(90023),o=r(47387),s=r(5876),l=r(64538),c=r(52574),d=r(44737),u=r(16136),m=r(36355),p=r(56424),h=r(41255),g=r(59179);const f=s.UI.Node.make((({state:e,notify:t})=>n.createElement(o.F.Fragment,null,e.pipe(g.U((({previews:e,disabled:r,activeLensId:s})=>n.createElement(o.F.div,{className:k.lensNavigation},e.map((e=>n.createElement(c.zx.Flat,{name:e.id,key:e.id,className:k.lensButton,active:(0,a.zG)(s,i.Gg((t=>t===e.id))),disabled:r,title:e.description,titleAlign:"bottomCenter",onClick:t({kind:"lensClicked",lens:e})},n.createElement(d.B,{value:e.progress,wrapperClass:k.progressBarWrapper,progressClass:y(e.id)}),n.createElement(u.XY,{className:k.lensButtonText},e.title)))))))))));function y(e){switch(e){case m.R.SpecialId.Correctness:return k.correctnessProgressBar;case m.R.SpecialId.Clarity:return k.clarityProgressBar;case m.R.SpecialId.Engagement:return k.engagementProgressBar;case m.R.SpecialId.Delivery:return k.deliveryProgressBar;case m.R.SpecialId.Vox:return k.voxProgressBar;default:return}}const v={display:"flex",height:p.ux.percent(100),justifyContent:"space-between",alignItems:"center"},x={display:"flex",flexDirection:"column",marginRight:p.ux.rem(.3125),padding:`${p.ux.rem(.375)} ${p.ux.rem(.25)} 0`,borderRadius:p.ux.rem(h.fx),$nest:{"&:last-child":{marginRight:0},"&:hover:not([data-disabled='true'])":{backgroundColor:l.Il.CoreNeutral10},"&[data-active='true']":{backgroundColor:l.Il.CoreNeutral10,color:l.Il.CoreNeutral90}}},I={textTransform:"uppercase",fontSize:p.ux.px(8)},b={width:p.ux.rem(2),backgroundColor:l.Il.CoreNeutral20},C={backgroundColor:l.Il.CoreRed50},S={backgroundColor:l.Il.CoreBlue50},A={backgroundColor:l.Il.CoreGreen50},w={backgroundColor:l.Il.CorePurple50},_={backgroundColor:l.Il.CoreNeutral50},k=p.ux.stylesheet({lensNavigation:[v],lensButton:[x],lensButtonText:[I],progressBarWrapper:[b],correctnessProgressBar:[C],clarityProgressBar:[S],engagementProgressBar:[A],deliveryProgressBar:[w],voxProgressBar:[_]})},85240:(e,t,r)=>{r.d(t,{H:()=>T});var n=r(84910),i=r(78520),a=r(49231),o=r(47387),s=r(37213),l=r(67397),c=r(5876),d=r(56424),u=r(41255),m=r(55341),p=r(10883),h=r(20161),g=r(64271),f=r(44071),y=r(90572),v=r(29479),x=r(84714),I=r(18827),b=r(14969),C=r(36344),S=r(63532),A=r(82589),w=r(24666),_=r(49225),k=r(59179),E=r(954);var T;!function(e){let t,r;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(r=e.ActionKind||(e.ActionKind={}));e.Cell=c.UI.Grid.make((({slots:e,state:c,notify:d})=>{const u=new m.t,T=c.pipe(p.M(u),h.w((([e,t])=>e.position.animationInProgress?g.T(f.R(t,"transitionend").pipe(y.h((e=>e.target===t&&"transform"===e.propertyName)),v.h(void 0)),x.of(void 0).pipe(I.g(200))).pipe(b.P()):C.E)),S.b(d({kind:r.completePositionAnimation}))),M=c.pipe(p.M(u),h.w((([e,t])=>e.height.watched?A.YC(t).pipe(y.h((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):C.E)),w.x(),S.b((({height:e})=>d({kind:r.changePosition,height:e})())));_.P.useSubscriptionTo(g.T(T,M));const G=c.pipe(k.U((e=>e.position.top)),k.U((e=>l.ux.translateY(e))),w.x()),D=c.pipe(k.U((e=>e.layer===t.front?1:0)),w.x()),N=c.pipe(k.U((({position:e})=>e)),w.x(((e,t)=>e.top===t.top&&e.animationInProgress===t.animationInProgress)),k.U((({animationInProgress:e})=>e?L.animate:void 0)),E.O(void 0));return a.createElement(o.F.div,(0,i._)((0,n._)({},(0,s.Sh)(L.item,N)),{style:{transform:G,zIndex:D},mount:e=>{null!==e&&u.next(e)}}),e.item)}))}(T||(T={}));const M={position:"absolute",boxSizing:"border-box",width:d.ux.percent(100),contain:"layout"},G={transition:`transform ${d.ux.seconds(u.v4/1e3)} linear`},L=d.ux.stylesheet({item:[M],animate:[G]})},37537:(e,t,r)=>{r.d(t,{k:()=>x});var n,i=r(84910),a=r(78520),o=r(90023),s=r(13391),l=r(94444),c=r(19813),d=r(52303),u=r(17613),m=r(5876),p=r(58303),h=r(2844);!function(e){e.unwrap=function(e){return h.Ue(p.fS((()=>e)),p.G)}}(n||(n={}));var g,f=r(77400),y=r(63153);!function(e){e.create=function(e,t,r,i,a){const o=n.unwrap(t.style),c=n.unwrap(t.audience),d=n.unwrap(l.R$.OutcomeContext.defaultAcademic),u=n.unwrap(t.domain),m=s.h.create(e),h=m.lens("style").lens(o),g=m.lens("domain").lens(u),v=m.lens("outcomeContext").lens(d).lens("type"),x=m.lens("outcomeContext").lens(d).lens("citation"),I=r.isStudentsOFE?g.view((e=>"academic"!==e)):s.h.create(!0),b=f.U_(I),C=y.J.Category.Id.create("Citations"),S=b.view((e=>e&&!a().has(C))),A={audience:{items:l.R$.audiences,current:m.lens("audience").lens(c),default:p.G(t.audience),isVisible:I},formality:{items:l.R$.formalityLevels,current:h,default:p.G(t.style),isVisible:I,shouldDisable:e=>g.view((t=>!l.R$.isStyleValidWithDomain(t,e)))},domain:{items:l.R$.domains,current:g,default:p.G(t.domain),isVisible:s.h.create(!0),shouldDisable:e=>h.view((t=>r.isFree?"general"!==e:!l.R$.isStyleValidWithDomain(e,t)))},intent:{items:l.R$.goals.filter((e=>"sell"!==e)),isVisible:I,current:m.lens("goals")},type:{items:l.R$.academicTypes,default:p.G("essay"),isVisible:b,current:v},format:{items:l.R$.citation,default:p.G("apa"),isVisible:S,current:x}};return{localContext:m,blocks:A,showSetGoalsLoader:s.h.create(!r.demoMode&&i)}}}(g||(g={}));var v=r(83277);function x(e,t,r,n,p,h,f,y,x=o.Q1,I=(()=>new Map)){const b=(0,o.zG)(e.defaultContext.get(),d.g_((()=>(c.C8.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",p),p)),o.yR)),C=g.create(e.context.get(),b,h,y,I),S=s.h.combine(C.showSetGoalsLoader,C.localContext,((e,t)=>({blocks:C.blocks,context:t,showOnLoad:e,features:h,source:n})));return m.Z.fromSideEffect((n=>{switch(n.kind){case v.R.ActionsKind.open:x(""),t.goalsPopupShow(n.source);break;case v.R.ActionsKind.upgrade:t.getPremiumButtonClick(),f();break;case v.R.ActionsKind.close:x(""),r.onClose();const o=(()=>d.FX("academic")(n.context.domain)&&h.isStudentsOFE)()&&d.Wi(n.context.outcomeContext)?(0,a._)((0,i._)({},n.context),{outcomeContext:d.G(l.R$.OutcomeContext.defaultAcademic)}):n.context;e.updateContext(o)&&t.goalsFormSuccess(o,b);break;case v.R.ActionsKind.reset:C.localContext.set(l.R$.unset),x("Goals have been reset.");break;case v.R.ActionsKind.showOnLoadChanged:C.showSetGoalsLoader.set(n.value);break;case v.R.ActionsKind.setGoal:x("");break;default:(0,u.vE)(n)}}),S)}},83277:(e,t,r)=>{r.d(t,{R:()=>Se});var n=r(49231),i=r(5876),a=r(49471),o=r(84910),s=r(78520),l=r(58303),c=r(90023),d=r(3143),u=r(57129),m=r(47387),p=r(13391),h=r(37213),g=r(97767),f=r(95501),y=r(39170),v=r(52574),x=r(88873),I=r(36234),b=r(64538),C=r(73590),S=r(56424),A=r(57156),w=r(41255);const _=({upgradeAction:e,size:t,title:r,className:i,isEligibleForInProductDiscount:a})=>{const l=n.useContext(y.m.Context),c=Boolean(a)?l.getDiscountPro:l.getPro,d=Boolean(r)?r:c;return n.createElement(v.zx,(0,s._)((0,o._)({name:"upgrade"},(0,h.Sh)(i,"big"===t?R.baseBig:"link"===t?R.link:R.baseSmall)),{onClick:e}),"link"===t?n.createElement(C.JO.PaidLink,{width:14,className:R.linkIcon}):n.createElement(C.JO.Paid,{className:"big"===t?R.bigIcon:R.icon}),d)},k={display:"inline-flex",alignItems:"center",background:b.Il.CoreGreen60,borderRadius:S.ux.rem(w.fx),boxShadow:`0 2px 5px ${S.ux.color(A.UE).fade(.35).toRGBA().toString()}`,color:b.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:S.ux.rem(w.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.ux.color(b.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:S.ux.color(b.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`,fontSize:S.ux.rem(.8125),lineHeight:S.ux.rem(3)},T={padding:`0 ${S.ux.rem(1)} 0 ${S.ux.rem(.5)}`,fontSize:S.ux.rem(.6875),lineHeight:S.ux.rem(2)},M={background:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.ux.color(b.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:S.ux.color(b.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},G={padding:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`,fontSize:S.ux.rem(.8125),lineHeight:S.ux.rem(3)},L={padding:`0 ${S.ux.rem(2)} 0 ${S.ux.rem(.5)}`,fontSize:S.ux.rem(.6875),lineHeight:S.ux.rem(2)},D={fill:b.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:b.Il.CoreNeutral0}}},N={marginRight:S.ux.rem(.2)},z={display:"inline-flex",alignItems:"center",color:b.Il.CoreGreen60,fontSize:S.ux.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},P={color:b.Il.CoreGreen60},F={fill:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:b.Il.CoreGreen60}}},U={fill:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:b.Il.CoreGreen60}}},R=S.ux.stylesheet({base:[k],baseBig:[k,E],baseSmall:[k,T],baseUpHookRedesign:[k,M],baseBigUpHookRedesign:[E,M,G],baseSmallUpHookRedesign:[T,M,L],icon:[D],bigIcon:[D,N],link:[z],linkUpHookRedesign:[z,P],linkIconUpHookRedesign:[F],linkIcon:[U]});var O=r(77400),B=r(49225),$=r(59179),W=r(84308),j=r(63532),H=r(67968),Y=r(27341);const V=.8125,Z=S.ux.rem(Y.fe+Y.xB),J={display:"flex",flexDirection:"column",maxHeight:"90vh",width:S.ux.rem(41.5),backgroundColor:d.I.Background.Base.Default,textAlign:"left"},X={padding:`${S.ux.rem(1.125)} ${S.ux.rem(2)} ${S.ux.rem(1)}`,paddingBottom:S.ux.rem(1)},Q={paddingBottom:0,backgroundColor:d.I.Background.Base.Default,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${S.ux.rem(4)})`,height:S.ux.px(1),background:d.I.Border.Base.Subdued,content:"''"}}},q={display:"block",margin:`${S.ux.rem(V)} 0`,fontWeight:b.xv.SmallLightWeight,lineHeight:S.ux.rem(1.5)},K={minHeight:S.ux.rem(4)},ee={marginBottom:S.ux.rem(-.5),maxWidth:S.ux.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${S.ux.rem(.5)}`,marginLeft:S.ux.important(0),$nest:{"&:not(:last-child)":{marginRight:S.ux.rem(.5)}}}}},te={position:"absolute",marginTop:`calc(${S.ux.rem(V)} + ${S.ux.rem(2)})`},re={margin:`0 0 ${S.ux.rem(1.5)} ${S.ux.rem(7)}`},ne={margin:`0 0 ${S.ux.rem(1.5)} ${S.ux.rem(7)}`},ie={position:"absolute",top:S.ux.rem(2.5)},ae={display:"flex",width:S.ux.percent(100),justifyContent:"space-between"},oe={fontWeight:300,fontSize:S.ux.rem(.8125)},se={border:"none",margin:0,padding:0,$nest:{"&:not(:last-child)":{marginBottom:S.ux.rem(1.25),borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:d.I.Border.Base.Subdued}}},le={float:"inline-start",fontWeight:700,minWidth:S.ux.rem(7),width:S.ux.rem(7),textTransform:"capitalize",lineHeight:S.ux.rem(2)},ce={paddingInline:S.ux.rem(.5),lineHeight:S.ux.rem(2),display:"block",cursor:"pointer",fontSize:S.ux.rem(.8125),textTransform:"capitalize",alignItems:"center",borderWidth:1,borderStyle:"solid",borderColor:d.I.Border.Base.Subdued},de={$nest:{"&:first-of-type":{borderStartStartRadius:Z,borderEndStartRadius:Z},"&:last-of-type":{borderStartEndRadius:Z,borderEndEndRadius:Z},"&:not(:last-of-type)":{marginInlineEnd:-1}}},ue={display:"flex",gap:S.ux.rem(.5)},me={borderRadius:Z},pe={$nest:{"&:disabled + label":{cursor:"not-allowed",opacity:.4},"&:checked + label":{backgroundColor:d.I.Background.Brand.Default,color:d.I.Text.Base.Inverse,borderColor:d.I.Border.Brand.Default,zIndex:1},"&:not(:checked)&:not(:disabled):hover + label":{backgroundColor:u.NeutralGray10},"&:not(:checked)&:not(:disabled):active + label":{backgroundColor:u.NeutralGray20},"&:focus-visible + label":{outlineOffset:2,outlineWidth:2,outlineStyle:"solid",outlineColor:d.I.Border.Brand.Default,zIndex:2},'&[type="checkbox"]&:checked&:not(:disabled):hover + label':{backgroundColor:u.Green80,borderColor:u.Green80},'&[type="checkbox"]&:checked&:not(:disabled):active + label':{backgroundColor:u.Green90,borderColor:u.Green90}}},he=S.ux.stylesheet({wrapper:[J],modalBody:[X],modalHeader:[Q],itemDescription:[q],modalFooter:[K],toneButtons:[ee],extraContent:[te],title:[re],description:[ne],image:[ie],footerWrapper:[ae],checkboxText:[oe],fieldset:[se],legend:[le],fieldsetContentContainer:[{display:"flex",flexDirection:"column",alignItems:"flex-start"}],input:[pe],radioLabel:[ce,de],radioGroup:[{display:"flex"}],checkboxGroup:[ue],checkboxLabel:[ce,me]}),ge=({name:e,items:t,sticky:r,extraContent:i,children:a,isVisible:l})=>n.createElement(m.F.Fragment,null,l.view((l=>l?n.createElement("fieldset",{className:he.fieldset},n.createElement("legend",{className:he.legend},e),i,n.createElement("span",{className:he.fieldsetContentContainer},n.createElement("span",{className:r?he.radioGroup:he.checkboxGroup},t.map((t=>n.createElement(fe,(0,s._)((0,o._)({},t),{itemKey:t.key,fieldsetName:e,type:r?"radio":"checkbox"}))))),n.createElement(I.Z.Small,{className:he.itemDescription},a))):null)));function fe({itemKey:e,type:t,active:r,children:i,disabled:a,description:o,fieldsetName:s,onClick:l}){const c=`goal-${s}-option-${e}`,d=`goal-${s}-option-${e}-description`,u=o!==i;return n.createElement(n.Fragment,null,n.createElement(m.F.input,{id:c,name:s,type:t,checked:r,"aria-describedby":u?d:void 0,onChange:l,disabled:a,className:S.ux.joinClasses(["gds-sr-only",he.input])}),n.createElement("label",{htmlFor:c,className:"radio"===t?he.radioLabel:he.checkboxLabel},i),u&&n.createElement(H.u,{id:d},o))}const ye=({items:e,current:t,isVisible:r,shouldDisable:n,itemDescription:i,onGoalSet:a,itemTitle:o=c.yR})=>({sticky:!0,isVisible:r,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>{t.set(e),a&&a()},disabled:n&&n(e),children:o(e),description:i(e)})))}),ve=({blocks:e,features:t,showOnLoad:r,close:i,upgrade:o,reset:s,showOnLoadChanged:l,setGoal:c})=>{const d=n.useContext(f.a.Context),u=O.Dx(t),m=O.Dx(e),p=O.Dx(r),h=O.Dx(i);return n.createElement(a.u_,{id:"setGoalsModal",className:he.wrapper,focusTrapMode:"dynamic",initialFocus:B.P.FocusTrap.InitialFocus.none},n.createElement(a.u_.Header,{className:he.modalHeader},n.createElement(Ie,null)),n.createElement(a.u_.Body,{name:"goalsBody",className:he.modalBody},n.createElement(xe,{features:u,upgradeAction:o,blocks:m,onGoalSet:c})),n.createElement(a.u_.Footer,{className:he.modalFooter},n.createElement(be,{supportsSetGoalsLoader:u.pipe($.U((e=>!e.demoMode&&d.has(f.a.Flag.supportsSetGoalsLoader)))),onDone:h,reset:s,showOnLoad:p,showOnLoadChanged:l})))},xe=({blocks:e,features:t,upgradeAction:r,onGoalSet:i})=>{const a=n.useContext(y.m.Context).goals;return n.createElement(m.F.Fragment,null,W.a(e,t).pipe($.U((([{audience:e,formality:t,domain:d,intent:u,type:p,format:h},g])=>{const f=n.createElement(ge,(0,s._)((0,o._)({name:"domain"},ye((0,s._)((0,o._)({},d),{onGoalSet:i,itemTitle:e=>"mail"===e?"email":e,itemDescription:e=>a.sections.domain[e]}))),{extraContent:n.createElement(m.F.div,{className:he.extraContent},g.isFree?n.createElement(_,{size:"link",upgradeAction:r}):null)}),d.current.view((e=>g.isFree?a.sections.domain.free:Boolean(e)?a.sections.domain[e]:""))),y=n.createElement(ge,(0,o._)({name:"intent"},(({items:e,isVisible:t,current:r},n,i,a)=>({isVisible:t,items:e.map((e=>({key:e,active:r.view((t=>(0,c.zG)(t,l.Gg((t=>t.has(e)))))),description:i(e),onClick:()=>{r.modify((t=>{const r=(0,c.zG)(t,l.g_((()=>new Set),(e=>new Set(e))));return r.has(e)?r.delete(e):r.add(e),l.G(r)})),a&&a()},children:n(e)})))}))(u,(e=>a.sections.intent.options[e]),(e=>a.sections.intent.options[e]),i)),a.sections.intent.experimental),v=n.createElement(ge,(0,o._)({name:"audience"},ye((0,s._)((0,o._)({},e),{onGoalSet:i,itemDescription:t=>a.sections.audience[t]((0,c.zG)(e.default,l.Gg((e=>e===t))))}))),e.current.view((t=>Boolean(t)&&a.sections.audience[t]((0,c.zG)(e.default,l.Gg((e=>e===t))))))),x=n.createElement(ge,(0,o._)({name:"formality"},ye((0,s._)((0,o._)({},t),{onGoalSet:i,itemDescription:e=>a.sections.formality[e]}))),t.current.view((e=>Boolean(e)?a.sections.formality[e]:""))),I=n.createElement(ge,(0,o._)({name:"type"},ye((0,s._)((0,o._)({},p),{itemDescription:e=>a.sections.type.options[e]}))),p.current.view((e=>Boolean(e)?a.sections.type.options[e]:""))),b=n.createElement(ge,(0,o._)({name:"format"},ye((0,s._)((0,o._)({},h),{itemTitle:a.sections.format.formatTitle,itemDescription:e=>a.sections.format.options[e]}))),h.current.view((e=>Boolean(e)?a.sections.format.options[e]:"")));return g.isStudentsOFE?n.createElement(n.Fragment,null,f,y,v,x,I,b):n.createElement(n.Fragment,null,v,x,f,y)}))))},Ie=()=>{const e=n.useContext(y.m.Context).goals,t=n.useContext(a.u_.TitleIdContext);return n.createElement(n.Fragment,null,n.createElement(I.Z,{nodeType:"h2",styleType:I.Z.Type.H1,id:t,className:he.title},e.title),n.createElement(Ce,null),n.createElement(a.u_.SpokenDescription,null,n.createElement(I.Z.Base,{className:he.description},e.header)))},be=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:r,reset:i,onDone:a})=>{const o=n.useContext(y.m.Context),s=p.h.create(!1);return B.P.useSubscriptionTo(t.pipe(j.b(O.wW(s)))),B.P.useSubscriptionTo(s.pipe(j.b(r))),n.createElement(m.F.div,(0,h.Sh)(e.pipe($.U((0,g.RN)(he.footerWrapper,null)))),e.pipe($.U((0,g.RN)(n.createElement(x.X,{checked:s,name:"set-goals"},n.createElement(I.Z.Small,{className:he.checkboxText},o.goals.footer.showModalOnStart)),null))),n.createElement(v.zx.Group,null,n.createElement(v.zx.Ghost,{name:"reset",onClick:i},o.goals.footer.reset),n.createElement(m.F.Fragment,null,a.pipe($.U((e=>n.createElement(v.zx.Primary,{name:"closeSetContext",onClick:e},o.done)))))))},Ce=()=>n.createElement("svg",{"aria-hidden":!0,className:he.image,width:"69",height:"80",viewBox:"0 0 69 80"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:d.I.Background.Brand.Default}),n.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:u.Green10}),n.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),n.createElement("path",{stroke:d.I.Background.Brand.Default,strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),n.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:d.I.Background.Brand.Default}),n.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:d.I.Background.Base.Default,strokeWidth:"1.3"})));var Se,Ae=r(14969);!function(e){e.Modal=i.UI.Node.make((({state:e,view:r,notify:i})=>{B.P.useSubscriptionTo(r("source").pipe(Ae.P(),j.b((e=>i({kind:t.open,source:e})()))));const o=e.pipe($.U((e=>i({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad}))));return n.createElement(a.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},n.createElement(ve,{blocks:r("blocks"),features:r("features"),close:o,upgrade:i({kind:t.upgrade}),reset:i({kind:t.reset}),setGoal:i({kind:t.setGoal}),showOnLoad:r("showOnLoad"),showOnLoadChanged:e=>i({kind:t.showOnLoadChanged,value:e})()}))}));let t;!function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.setGoal="setGoal",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(Se||(Se={}))},61111:(e,t,r)=>{r.d(t,{JT:()=>g,hM:()=>f,wK:()=>h});var n=r(58303),i=r(97225),a=r(90023),o=r(97767),s=r(17613),l=r(5876),c=r(59179),d=r(66299);function u(e){return{title:e.title,firstLine:n.ij(e.firstLine)}}const m=(e,t)=>{const r=t.successLens;switch(e){case d.g.SuccessType.zero:return r.emptyText;case d.g.SuccessType.small:return r.smallText;case d.g.SuccessType.large:return r.largeText;case d.g.SuccessType.applied:return{title:r.fixedText.titles[(0,o.TN)(9)]};case d.g.SuccessType.premiumOnboardingStart:return r.premiumOnboardingStartText;case d.g.SuccessType.premiumOnboardingComplete:return r.premiumOnboardingCompleteText;default:return(0,s.vE)(e)}};function p(e){switch(e){case d.g.SuccessType.applied:case d.g.SuccessType.large:return"growComplete";case d.g.SuccessType.premiumOnboardingStart:return"premiumOnboardingStart";case d.g.SuccessType.premiumOnboardingComplete:return"premiumOnboardingComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(c.U((e=>{const r=m(e,t);return{kind:p(e),caption:n.G(u(r))}})))}function g(e,t){return()=>e.pipe(c.U((e=>{const r=m(e,t);return{kind:p(e),caption:n.G(u(r))}})))}function f(e){return l.Z.animatingFlow(e,(e=>(0,a.zG)(e,n.g_((()=>n.G(i.F2("fadein"))),(()=>n.G(i.Hk("fadeout","fadein")))))))}},63709:(e,t,r)=>{r.d(t,{q:()=>P});var n=r(49231),i=r(90023),a=r(47387),o=r(52303),s=r(5876),l=r(64538),c=r(16136),d=r(56424),u=r(59179),m=r(68823);const p=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{clipPath:"url(#clip0)"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),n.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),n.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),n.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("defs",null,n.createElement("clipPath",{id:"clip0"},n.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),n.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),n.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),g=s.UI.Node.make((()=>n.createElement("video",{className:y.premiumOnboardingStartVideo,autoPlay:!0,loop:!0,muted:!0,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI2NCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTIuODA5IDgxLjcwNDVDMTEyLjgwOSA4OS4xMDY3IDEyOS40NDEgOTcuOTcxMiAxMjkuNDQxIDk3Ljk3MTJMMTI0LjE0MSAxMDkuMzk0IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTEzLjA4MyA4Mi44OTI1QzExMy45OTcgODIuNjE4MyAxMTQuNDU0IDgyLjA3IDExNC42MzYgODEuNjEzMUMxMTQuOTExIDgxLjA2NDggMTE0LjgxOSA4MC40MjUxIDExNC40NTQgNzkuOTY4MUwxMTAuOTgxIDc1Ljk0NzFMMTEwLjM0MSA4MS4yNDc1QzExMC4yNSA4MS43OTU4IDExMC41MjQgODIuNDM1NSAxMTEuMDcyIDgyLjcwOTdDMTExLjUyOSA4Mi45ODM5IDExMi4xNjkgODMuMTY2NiAxMTMuMDgzIDgyLjg5MjVaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMTguNjU4IDcyLjIwMDRDMTE3LjEwNCA3NS43NjQ1IDExNC44MTkgNzguNTk3NCAxMTIuMDc4IDc5LjQxOTlDMTA1LjU4OSA4MS40MzA0IDk0Ljg5NzMgNzIuNjU3MyA5Mi42MTI2IDY0Ljk4MDlDOTAuNDE5NCA1Ny42NzAxIDk0LjI1NzYgNTAuMDg1IDEwMS4yMDMgNDcuMzQzNUMxMDEuNTY4IDQ3LjE2MDcgMTAxLjkzNCA0Ny4wNjkzIDEwMi4zIDQ2Ljk3NzlDMTA5Ljg4NSA0NC42OTMzIDExOC4wMTggNDguOTg4NCAxMjAuMzAzIDU2LjU3MzRDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMjY1NiAxMTguNjU4IDcyLjIwMDRaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIG9wYWNpdHk9IjAuNSIgZD0iTTEwMS41NjggNzEuMDEyM0MxMDMuODUzIDY5LjgyNDMgMTAwLjE5OCA2MS40MTY4IDk2Ljk5OSA2My4wNjE3QzkzLjE2MDggNjUuMDcyMiA5OC4wOTU2IDcyLjg0IDEwMS41NjggNzEuMDEyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIG9wYWNpdHk9IjAuMjUiIGQ9Ik0xMjAuMjExIDU2LjY2NDdDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMzU2OSAxMTguNjU3IDcyLjIwMDNDMTEwLjYxNSA2My45NzU2IDEwMS4xMTEgNTIuMjc4MiAxMDEuMTExIDQ3Ljg5MTdDMTAxLjExMSA0Ny43MDg5IDEwMS4xMTEgNDcuNTI2MiAxMDEuMjAzIDQ3LjM0MzRDMTAxLjU2OCA0Ny4xNjA2IDEwMS45MzQgNDcuMDY5MiAxMDIuMjk5IDQ2Ljk3NzhDMTA5Ljg4NCA0NC42OTMyIDExNy45MjYgNDguOTg4MyAxMjAuMjExIDU2LjY2NDdaIiBmaWxsPSIjMUYyNDNDIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUxLjAwOCA3Mi42NTczQzE0NS43MDggODQuNTM3NSAxMjkuNDQxIDk3Ljk3MTIgMTI5LjQ0MSA5Ny45NzEyTDEzNC41NTkgMTA3LjExIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUwLjkxNyA3My45MzY3QzE1MC4wMDMgNzMuNjYyNSAxNDkuNTQ2IDczLjExNDIgMTQ5LjM2MyA3Mi42NTczQzE0OS4wODkgNzIuMTA4OSAxNDkuMTggNzEuNDY5MiAxNDkuNTQ2IDcxLjAxMjNMMTUzLjAxOSA2Ni45OTEzTDE1My42NTggNzIuMjkxN0MxNTMuNzUgNzIuODQgMTUzLjQ3NiA3My40Nzk3IDE1Mi45MjcgNzMuNzUzOUMxNTIuNDcgNzQuMDI4IDE1MS44MzEgNzQuMTE5NCAxNTAuOTE3IDczLjkzNjdaIiBmaWxsPSIjODc4MEU0IiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNzEuMzg3IDU2LjAyNTFDMTY5LjEwMyA2My42MTAxIDE1OC41MDIgNzIuNDc0NiAxNTEuOTIyIDcwLjQ2NDFDMTQ1LjQzNCA2OC40NTM2IDE0MS40MTMgNTUuMjk0IDE0My42OTcgNDcuNzA5QzE0NS45ODIgNDAuMTI0IDE1NC4wMjQgMzUuNzM3NCAxNjEuNyAzOC4xMTM1QzE2OS4zNzcgNDAuMzA2NyAxNzMuNjcyIDQ4LjM0ODcgMTcxLjM4NyA1Ni4wMjUxWiIgZmlsbD0iIzg3ODBFNCIgc3Ryb2tlPSIjMUMyNTNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBvcGFjaXR5PSIwLjQiIGQ9Ik0xNjcuOTE1IDUyLjkxOEMxNjMuODk0IDU0LjE5NzQgMTYxLjA2MSA0NC42MDE5IDE2NS4zNTYgNDQuMjM2M0MxNjkuMjg1IDQzLjg3MDggMTcwLjU2NSA1Mi4wOTU1IDE2Ny45MTUgNTIuOTE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4yNSIgZD0iTTE2Mi43OTcgMzguOTM1OUMxNjIuNzk3IDQzLjMyMjUgMTUzLjM4NCA1NC45Mjg1IDE0NS4zNDIgNjMuMTUzMkMxNDMuMjQgNTguMzA5NyAxNDIuNTA5IDUyLjA5NTUgMTQzLjc4OSA0Ny43MDlDMTQ2LjA3MyA0MC4xMjQgMTU0LjExNSAzNS43Mzc0IDE2MS43OTIgMzguMTEzNUMxNjIuMDY2IDM4LjIwNDkgMTYyLjQzMSAzOC4yOTYyIDE2Mi43MDUgMzguMzg3NkMxNjIuNzA1IDM4LjU3MDQgMTYyLjc5NyAzOC43NTMyIDE2Mi43OTcgMzguOTM1OVoiIGZpbGw9IiMxRjI0M0MiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik0xMjkuNDQxIDY2LjgwODdWMTEyLjEzNiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEyOS40NDEgNzQuNTc2NUMxMjguNDM2IDc0LjU3NjUgMTI3Ljc5NiA3NC4yMTEgMTI3LjQzMSA3My43NTQxQzEyNi45NzQgNzMuMjk3MSAxMjYuODgyIDcyLjU2NjEgMTI3LjE1NiA3Mi4wMTc3TDEyOS41MzIgNjYuNjI2TDEzMS45MDggNzIuMDE3N0MxMzIuMTgzIDcyLjU2NjEgMTMyLjA5MSA3My4yOTcxIDEzMS42MzQgNzMuNzU0MUMxMzEuMDg2IDc0LjIxMSAxMzAuNDQ2IDc0LjU3NjUgMTI5LjQ0MSA3NC41NzY1WiIgZmlsbD0iI0ZGQzk0MCIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTE0My41MTQgMjQuNDA1N0MxNDEuNDEzIDIzLjU4MzIgMTE3LjU2MSAyMy41ODMyIDExNS40NTkgMjQuNDA1N0MxMTMuMzU3IDI1LjIyODEgMTAyLjU3NCAzNS4zNzIgMTAyLjU3NCAzOS4zMDE2QzEwMi41NzQgNDUuOTcyNyAxMjUuNzg2IDcwLjY0NjkgMTI5LjUzMiA3MC42NDY5QzEzMy4yNzkgNzAuNjQ2OSAxNTYuNDkxIDQ1Ljk3MjcgMTU2LjQ5MSAzOS4zMDE2QzE1Ni40IDM1LjQ2MzQgMTQ1LjYxNiAyNS4yMjgxIDE0My41MTQgMjQuNDA1N1oiIGZpbGw9IiNGRkM5NDAiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTE0MS41MDQgMjYuMzI0OEMxMzkuMjE5IDI2LjIzMzQgMTM5LjIxOSAyOC44ODM2IDE0MC41OSAzMS4wNzY5QzE0Mi45NjYgMzUuMDA2NSAxNDYuMjU2IDM2LjY1MTQgMTQ3LjYyNyAzNi4xMDMxQzE1MS42NDggMzQuNjQwOSAxNDYuMzQ3IDI2LjQxNjIgMTQxLjUwNCAyNi4zMjQ4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0xNTYuNCAzOS4yMTAyTDE0MC44NjQgNDEuNjc3NkgxMTguMDE4TDEwMi40ODIgMzkuMjEwMiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEzNS4wMTUgMjQuMDQwMkMxMzcuNTc0IDI4Ljc5MjIgMTQwLjg2NCAzOS45NDEzIDE0MC44NjQgNDEuNjc3NkMxNDAuODY0IDQzLjQxNCAxMzUuODM4IDU5LjA0MDkgMTI5LjQ0MSA3MC42NDY5IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTIzLjg2NiAyNC4wNDAyQzEyMS4zMDggMjguNzkyMiAxMTguMDE4IDM5Ljk0MTMgMTE4LjAxOCA0MS42Nzc2QzExOC4wMTggNDMuNDE0IDEyMy4wNDQgNTkuMDQwOSAxMjkuNDQxIDcwLjY0NjkiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTExNy41NjEgNTUuNzUxMUMxMTYuMTkgNTYuMDI1MyAxMTAuNjE1IDUwLjM1OTQgMTA4LjMzMSA0Ni4zMzg0QzEwNy4yMzQgNDQuNDE5MyAxMDguMjM5IDQzLjMyMjcgMTA5LjMzNiA0My4wNDg1QzExMi41MzQgNDIuMjI2IDExMy45MDUgNDQuMzI3OSAxMTYuMDA3IDQ3Ljg5MkMxMTcuOTI2IDUxLjA5MDUgMTE5LjIwNiA1NS4zODU2IDExNy41NjEgNTUuNzUxMVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuOCIvPgo8cGF0aCBkPSJNMTQxLjg2OSA5OS44OTA0QzE0My44OCA5MC4zODYzIDEyOS40NDEgOTcuNzg4NSAxMjkuNDQxIDk3Ljc4ODVDMTI5LjQ0MSA5Ny43ODg1IDE0MC4wNDIgMTA5LjAyOSAxNDEuODY5IDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTE3LjAxMyA5OS44OTA0QzExNS4wMDIgOTAuMzg2MyAxMjkuNDQxIDk3Ljc4ODUgMTI5LjQ0MSA5Ny43ODg1QzEyOS40NDEgOTcuNzg4NSAxMTguODQgMTA5LjAyOSAxMTcuMDEzIDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8L3N2Zz4K"},n.createElement("source",{src:`${m.y}premiumOnboardingStart.mp4`})))),f=s.UI.Node.make((()=>n.createElement("svg",{"aria-hidden":!0,width:"130",height:"82",viewBox:"0 0 130 82",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{opacity:"0.25",d:"M82.084 40.757L72.7367 30.3437C72.1869 29.6495 71.4996 29.3718 70.6748 29.3718H46.8943C46.0695 29.3718 45.3822 29.6495 44.8324 30.3437L35.4851 40.757C34.5229 41.8677 34.5229 43.5338 35.4851 44.6446L57.3412 68.9421C57.7536 69.3586 58.3034 69.6363 58.8533 69.6363C59.4031 69.6363 59.953 69.3586 60.3653 68.9421L82.084 44.6446C83.1837 43.5338 83.1837 41.8677 82.084 40.757Z",fill:"#494393"}),n.createElement("path",{d:"M66.1044 65.0148L87.9605 40.7173C88.6478 39.8843 88.6478 38.6347 87.9605 37.8016L78.4758 27.3884C78.0634 26.9719 77.5136 26.6942 76.8263 26.6942H53.1832C52.6333 26.6942 51.946 26.9719 51.5336 27.3884L42.1864 37.8016C41.4991 38.6347 41.4991 39.8843 42.1864 40.7173L64.0425 65.0148C64.5923 65.7091 65.5546 65.7091 66.1044 65.0148Z",fill:"#FFDF80",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M88.5103 39.3289H41.6365",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M60.4684 26.6942L55.7947 38.4958C55.6573 39.0512 55.6573 39.6066 55.7947 40.0231L65.142 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("path",{d:"M69.6783 26.6942L74.3519 38.4958C74.4894 39.0512 74.4894 39.6066 74.3519 40.0231L65.0046 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),n.createElement("rect",{x:"77.5491",y:"1",width:"8",height:"8",rx:"2",transform:"rotate(14.9627 77.5491 1)",fill:"#F8C6DA",stroke:"#0E101A"}),n.createElement("rect",{x:"13",y:"53.5762",width:"8",height:"8",rx:"2",transform:"rotate(-36.5938 13 53.5762)",fill:"#B8B4EF",stroke:"#0E101A"}),n.createElement("circle",{cx:"96",cy:"73",r:"4",fill:"#87E8D1",stroke:"#0E101A"}),n.createElement("path",{d:"M37 66V72",stroke:"#0E101A"}),n.createElement("path",{d:"M37 76V82",stroke:"#0E101A"}),n.createElement("path",{d:"M45 74L39 74",stroke:"#0E101A"}),n.createElement("path",{d:"M35 74L29 74",stroke:"#0E101A"}),n.createElement("path",{d:"M37.5 10V14.125",stroke:"#0E101A"}),n.createElement("path",{d:"M37.5 16.875V21",stroke:"#0E101A"}),n.createElement("path",{d:"M43 15.5L38.875 15.5",stroke:"#0E101A"}),n.createElement("path",{d:"M36.125 15.5L32 15.5",stroke:"#0E101A"}),n.createElement("path",{d:"M103 21V27",stroke:"#0E101A"}),n.createElement("path",{d:"M103 31V37",stroke:"#0E101A"}),n.createElement("path",{d:"M111 29L105 29",stroke:"#0E101A"}),n.createElement("path",{d:"M101 29L95 29",stroke:"#0E101A"})))),y=d.ux.stylesheet({premiumOnboardingStartVideo:[{width:264,height:120}]}),v=s.UI.Node.make((({view:e})=>n.createElement("div",{"data-name":"success-lens-text",className:N.newSuccessText},n.createElement(c.H4,{key:"title"},e("title")),n.createElement("div",{className:N.newSuccessDescription},n.createElement(a.F.div,{className:N.newSuccessDescriptionText},(0,i.zG)(e("firstLine"),u.U(o.QP))))))),x=s.UI.Union.asOption(v),I=s.UI.Grid.make((({slots:e})=>n.createElement(a.F.div,{className:N.newSuccessContainer},e.image,e.caption))),b=s.UI.Knot.make(I,{image:p,caption:x}),C=s.UI.Knot.make(I,{image:h,caption:x}),S=s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>n.createElement(a.F.div,{className:N.premiumOnboardingStartSuccessContainer},e.animation,e.caption))),{animation:g,caption:x}),A=s.UI.Knot.make(I,{image:f,caption:x}),w=s.UI.Union.make("kind",{growStart:b,growComplete:C,premiumOnboardingStart:S,premiumOnboardingComplete:A}),_=d.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),k=d.ux.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),E={animation:`${_} 300ms linear forwards`},T={position:"absolute",top:0,width:d.ux.percent(100),animation:`${k} 200ms linear forwards`},M={textAlign:"center",background:l.Il.CoreNeutral0,padding:d.ux.rem(.5)},G={width:d.ux.percent(100),marginTop:d.ux.rem(.5)},L={marginTop:d.ux.rem(.25)},D={fontSize:d.ux.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:d.ux.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},N=d.ux.stylesheet({success_fadein:[E],success_fadeout:[T],premiumOnboardingStartSuccessContainer:[M],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[G],newSuccessDescription:[L],newSuccessDescriptionText:[D]}),z=s.UI.Transition.make({fadein:N.success_fadein},{fadeout:N.success_fadeout}),P=s.UI.Animated.make(z,w)},35157:(e,t,r)=>{r.d(t,{r:()=>y});var n=r(49231),i=r(58303),a=r(90023),o=r(47387),s=r(5876),l=r(39170),c=r(73590),d=r(16136),u=r(56424),m=r(44622);const p=s.UI.Grid.make((({slots:e})=>n.createElement("div",{className:b.grid},n.createElement(o.F.div,{className:b.iconWrapper},e.icon),n.createElement(o.F.div,{className:b.titleWrapper},e.title),n.createElement(o.F.div,{className:b.bottomWrapper},e.bottom)))),h=s.UI.Node.make((()=>{const e=n.useContext(l.m.Context).successLens.paidView;return n.createElement(d.H4,null,e.title)})),g=s.UI.Node.make((()=>n.createElement(c.JO.GreenOk,{width:32}))),f=s.UI.Knot.make(p,{icon:g,title:h,bottom:s.UI.Union.make("kind",{[m.n.State.hidden]:s.UI.Node.empty,[m.n.State.expanded]:m.n.TogglableExpandedPanel})}),y=(0,a.zG)(s.UI.squash(f),s.UI.contramapState((e=>(0,a.zG)(e,i.g_((()=>({bottom:{kind:m.n.State.hidden}})),(e=>({bottom:{kind:m.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),v={marginTop:u.ux.rem(3.5)},x={marginTop:u.ux.rem(1.375)},I={marginTop:u.ux.rem(2.675)},b=u.ux.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[v],titleWrapper:[x],bottomWrapper:[I]})},3714:(e,t,r)=>{r.d(t,{d:()=>u});var n=r(58303),i=r(90023),a=r(17613),o=r(59179),s=r(68545),l=r(954),c=r(20161),d=r(44622);function u(e){return(0,i.ls)(o.U((e=>{switch(e.key){case d.n.State.expanded:switch(e.action.kind){case"collapse":return n.G(d.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return n.YP;default:return(0,a.vE)(e.action)}case d.n.State.minimized:return"onClick"===e.action.action?n.G(d.n.State.expanded):(0,a.vE)(e.action.action);default:return(0,a.vE)(e)}})),s.oA,l.O(d.n.State.minimized),c.w((t=>e.pipe(o.U(n.g_((()=>({kind:d.n.State.hidden})),(e=>{switch(t){case d.n.State.minimized:return{kind:d.n.State.minimized,alertsCount:e.count};case d.n.State.expanded:return{kind:d.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case d.n.State.hidden:return{kind:d.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},44622:(e,t,r)=>{r.d(t,{n:()=>Se});var n,i=r(5876),a=r(49231),o=r(58303),s=r(90023),l=r(47387),c=r(17613),d=r(39170),u=r(52574),m=r(32490),p=r(84910),h=r(78520),g=r(72117),f=r(3143),y=r(37213),v=r(59179),x=r(77400),I=r(31403),b=r(954),C=r(67397),S=r(95501),A=r(73590),w=r(97469),_=r(56424),k=r(24019),E=r(11953);!function(e){var t=function(e){return 0===e?"":e>=i?"".concat(Math.min(Math.trunc(e/i),9),"k+"):String(e)},r=10,n=100,i=1e3,o=function(e){var t=e.className,r=e.isChecking,n=e.type,i=e.animateFade,o=void 0===i||i,s=k.f.fadeOutState(r),c=s.state,d=s.complete,u="checking-complete";return a.createElement(l.F.div,(0,y.Sh)(Y.loader,t),o?c.pipe(v.U((function(e){return"end"===e?a.createElement("div",{key:"checking-complete",className:u}):a.createElement(w.$,{key:"spinner",variation:n,size:"100%",className:"fadeOut"===e?Y.fadeOut:void 0,onTransitionEnd:d})}))):r.pipe(v.U((function(e){return e?a.createElement(w.$,{variation:n,size:"100%"}):a.createElement("div",{className:u})}))))},s=function(e){var r=e.name,i=e.theme,o=void 0===i?{}:i,s=e.count,c=e.type,d=void 0===c?"white":c,u=e.suffix,m=void 0===u?"":u,g=a.useContext(S.a.Context);return a.createElement(l.F.div,(0,h._)((0,p._)({},(0,y.Sh)(Y.roundCounter,x.ab(d,w.$.getClassName(Y)),o.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:Y.circular},a.createElement("g",null,a.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),a.createElement("text",(0,p._)((0,h._)((0,p._)({x:"16",y:"17"},C.h5(g.has(S.a.Flag.supportsSVGDominantBaseline))),{fontSize:s>=n?14:18,"data-name":r}),(0,y.Sh)(F,o.counterContent)),t(s),m))))},c=function(e){var r=e.name,n=e.theme,i=void 0===n?{}:n,o=e.count,s=e.type,c=void 0===s?"white":s,d=e.suffix,u=void 0===d?"":d,m=a.useContext(S.a.Context);return a.createElement(l.F.div,(0,h._)((0,p._)({},(0,y.Sh)(Y.ovalCounter,x.ab(c,w.$.getClassName(Y)),i.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 20",className:Y.circular},a.createElement("rect",{width:"32",height:"20",rx:"10"}),a.createElement("text",(0,p._)((0,h._)((0,p._)({x:"16",y:"10.5"},C.h5(m.has(S.a.Flag.supportsSVGDominantBaseline))),{fontSize:11,"data-name":r}),(0,y.Sh)(F,i.counterContent)),t(o),u)))},d=(e.Counter=function(e){var t=e.theme,r=void 0===t?{}:t,i=e.count,o=e.type,l=void 0===o?"white":o,d=i>=n?c:s;return a.createElement(d,{theme:(0,h._)((0,p._)({},r),{counterWrapper:(0,y.Sh)(r.counterWrapper,Y.flexCounter).className}),count:i,type:l})},e.OutcomeCounter=function(e){var i=e.name,o=e.theme,s=void 0===o?{}:o,c=e.count,d=e.type,u=void 0===d?"white":d,m=e.suffix,g=e.fontSize,f=void 0===g?function(e,t){return t||e>=n?10:12}(c,Boolean(m)):g,v=a.useContext(S.a.Context);return a.createElement(l.F.div,(0,h._)((0,p._)({},(0,y.Sh)(Y.outcomeCounter,x.ab(u,w.$.getClassName(Y)),s.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 18",className:Y.circular},a.createElement("rect",(0,h._)((0,p._)({},function(e,t){return t||e>=n?{width:32}:e>=r?{x:4,width:24}:{x:7,width:18}}(c,Boolean(m))),{height:18,rx:9})),a.createElement("text",(0,p._)((0,h._)((0,p._)({x:"50%",y:"10px"},C.h5(v.has(S.a.Flag.supportsSVGDominantBaseline))),{fontSize:f,"data-name":i}),(0,y.Sh)(F,s.counterContent)),t(c),m)))});e.PlagiarismOutcomesMeter=function(e){var t=e.count,r=e.isChecking,n=e.className;return a.createElement("div",(0,y.Sh)(Y.plagiarismMeter,n),a.createElement(o,{isChecking:r,type:"cyan",animateFade:!1}),a.createElement(l.F.div,{className:Y.wrapper},t.pipe(I.a(r),v.U((function(e){var t=(0,g._)(e,2),r=t[0],n=t[1];return E.g.isMin(r)?a.createElement(A.JO.CheckmarkOutcomes,{className:Y.plagiarismOutcomeIcon,key:"icon",width:20}):!n&&a.createElement(d,{count:E.g.prism.reverseGet(r),type:"cyan",key:"value",suffix:a.createElement("tspan",{fontSize:11},"%")})})),b.O(null))))}}(n||(n={}));var T=1.25,M={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:_.ux.percent(100),height:_.ux.percent(100)},G={position:"absolute",width:_.ux.percent(150),height:_.ux.percent(150),transform:"translate(-17%, -17%)"},L={position:"relative",display:"inline-flex",alignItems:"center"},D={width:_.ux.percent(100),height:_.ux.percent(100)},N={minWidth:_.ux.rem(2),width:_.ux.percent(100),height:_.ux.rem(T)},z={maxWidth:_.ux.rem(2),height:_.ux.rem(T)},P="counterText",F=_.ux.joinClasses([P,_.ux.style({fontWeight:"bold",textAnchor:"middle",fill:f.I.Text.Base.Inverse})]),U={fill:"transparent",$nest:(0,m._)({},"& .".concat(P),{fill:f.I.Text.Base.Subdued})},R={fill:"#FFDF80",$nest:(0,m._)({},"& .".concat(P),{fill:"#8C5404"})},O={fill:f.I.Background.Plagiarism.Default,$nest:(0,m._)({},"& .".concat(P),{fill:f.I.Text.Base.Inverse})},B={width:_.ux.rem(1.5),height:_.ux.rem(1.5)},$={width:_.ux.rem(2),height:_.ux.rem(T)},W={margin:"".concat(_.ux.rem(-1)," 0")},j={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:f.I.Background.Plagiarism.Default}}},H={width:_.ux.rem(2),height:_.ux.rem(1.125),position:"relative"},Y=_.ux.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[M],loader:[G],wrapper:[L],roundCounter:[L,D],ovalCounter:[L,N],flexCounter:[L,z],gray:[],green:[],blue:[],white:[U],yellowPremium:[R],cyan:[O],meter:[L,B],plagiarismMeter:[L,$],plagiarismIcon:[W],plagiarismOutcomeIcon:[W,j],outcomeCounter:[L,{position:"absolute",left:0},H]}),V=r(16136),Z=r(67741),J=r(64538),X=r(41255);const Q={position:"relative",borderRadius:_.ux.rem(X.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:J.Il.CoreNeutral0},q={padding:`${_.ux.rem(1)} ${_.ux.rem(2)}`},K={position:"absolute",top:_.ux.rem(.75),left:_.ux.rem(.5)},ee={display:"flex",boxSizing:"border-box",padding:_.ux.rem(.5),height:_.ux.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},te={marginLeft:_.ux.rem(.8),fontSize:_.ux.rem(.85),lineHeight:_.ux.rem(1)},re={display:"flex",width:_.ux.percent(100),alignItems:"center",justifyContent:"space-between"},ne={position:"absolute",top:_.ux.rem(.2),right:_.ux.rem(.3),cursor:"pointer"},ie={paddingRight:_.ux.rem(1),textAlign:"left",fontSize:_.ux.rem(.75),lineHeight:_.ux.rem(1.15)},ae={marginTop:_.ux.rem(.6),fontSize:_.ux.rem(.875),flexShrink:0},oe={display:"flex",marginBottom:_.ux.rem(.6),justifyContent:"flex-end",flexShrink:0},se={marginRight:"auto",lineHeight:_.ux.rem(1.3125)},le={marginTop:_.ux.rem(.21),minWidth:_.ux.rem(1.5),flexShrink:0},ce={marginTop:_.ux.rem(1)},de={display:"flex",justifyContent:"center",alignItems:"center",height:_.ux.rem(2),backgroundColor:J.Il.CoreGreen60,borderRadius:_.ux.rem(.25),fontSize:_.ux.rem(.875),fontWeight:700,color:J.Il.CoreNeutral0,lineHeight:_.ux.rem(2),padding:_.ux.rem(Z.mh),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:_.ux.color(J.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:_.ux.color(J.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},ue=_.ux.stylesheet({wrapper:[Q],maximizedWrapper:[q],minimizedWrapper:[ee],maximizedWrapperIcon:[K],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[te],minimizedContent:[re],maximizedCloseButtonContainer:[ne],maximizedHeader:[ie],alertCategoryContainer:[ae],alertCategory:[oe],categoryHumanContainer:[se],alertCounterContainer:[le],premiumButtonContainer:[ce],premiumButton:[de]}),me=(e,t)=>i.UI.Grid.make((({slots:r})=>a.createElement(l.F.div,(0,y.Sh)(ue.wrapper,e),a.createElement(A.JO.UpgradeHookPanel.TitleDiamond,{className:t}),r.body))),pe=i.UI.Node.make((({notify:e})=>a.createElement(l.F.div,{className:ue.maximizedCloseButtonContainer},a.createElement(V.zx,{name:"close",onClick:e("onClick")},a.createElement(A.JO.Arrow,{width:11,direction:A.n4.up})))));var he;!function(e){let t,r;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={})),function(e){e.isOnUpgrade=function(e){return"onUpgrade"===e.kind},e.isOnUpgradeButtonMount=function(e){return"onUpgradeButtonMount"===e.kind}}(r=e.Actions||(e.Actions={}))}(he||(he={}));const ge=i.UI.Node.make((({state:e,notify:t})=>{const r=a.useContext(d.m.Context);return a.createElement(a.Fragment,null,a.createElement("div",{className:ue.maximizedHeader},a.createElement(l.F.Fragment,null,e.pipe(v.U((({count:e})=>e>0?e>1?a.createElement(a.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1," ",e," ",r.sidebar.content.premiumIssues.foundTitlePlural.description2):a.createElement(a.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1," ",e," ",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),a.createElement(l.F.div,{className:ue.alertCategoryContainer},e.pipe(v.U((({alerts:e})=>e.map((e=>a.createElement("div",{key:e.category,className:ue.alertCategory},a.createElement("div",{className:ue.categoryHumanContainer},e.categoryHuman),a.createElement("div",{className:ue.alertCounterContainer},a.createElement(n.Counter,{count:e.count,type:"yellowPremium"}))))))))),a.createElement("div",{className:ue.premiumButtonContainer},a.createElement("div",{ref:e=>{t({type:"upgradeHookAction",kind:he.ActionsKind.onUpgradeButtonMount,element:o.ij(e)})()}},a.createElement(u.zx,{name:"upgrade",className:ue.premiumButton,onClick:t({type:"upgradeHookAction",kind:he.ActionsKind.onUpgrade})},a.createElement(A.JO.UpgradeHookPanel.ButtonDiamond,null),r.goPremium))))})),fe=i.UI.Composite.make(me(ue.maximizedWrapper,ue.maximizedWrapperIcon),i.UI.Group.make({closeButton:i.UI.Union.make("kind",{hidden:i.UI.Node.empty,visible:pe}),content:ge})),ye=(0,s.zG)(i.UI.squash(fe),i.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case he.ActionsKind.onUpgrade:return{kind:"upgrade"};case he.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,c.vE)(e.action)}case"closeButton":return"onClick"===e.action.action?{kind:"collapse"}:(0,c.vE)(e.action.action);default:return(0,c.vE)(e)}})),i.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}))));var ve=r(12281);const xe=i.UI.Node.make((({state:e})=>{const t=a.useContext(d.m.Context);return a.createElement(l.F.div,{className:ue.minimizedContent},a.createElement("div",{className:ue.minimizedText},t.premiumSuggestions),e.pipe(v.U((({alertsCount:e})=>e>0&&a.createElement(n.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),Ie=i.UI.Grid.make((({slots:e,notify:t})=>a.createElement(l.F.div,(0,p._)({role:"button",className:ue.shadowWrapper},ve.rl(t("onClick"))),e.body))),be=i.UI.Knot.make(Ie,{body:i.UI.Composite.make(me(ue.minimizedWrapper),xe)}),Ce=(0,s.zG)(i.UI.squash(be),i.UI.contramapState((e=>({body:e}))));var Se;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={}));e.TogglableExpandedPanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.expanded]:ye}),e.TogglablePanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.minimized]:Ce,[t.expanded]:ye})}(Se||(Se={}))},26814:(e,t,r)=>{r.d(t,{aW:()=>n,vM:()=>u});var n,i=r(32490),a=r(59833),o=r(12518),s=r(90023),l=r(17613),c=r(52303),d=r(14146);function u(e,t){return t.reduce(((t,r)=>{const n="function"==typeof e?e(r):r[e];let i=t.get(n);return i||(i=[],t.set(n,i)),i.push(r),t}),new Map)}!function(e){e.URI="ImmutableSortedMap";e.create=function(e,t,r){const i=Array.isArray(e)?new Map(e.map((e=>[t(e),e]))):e,a=n.orderKeys(i,r);return i.forEach((e=>(0,l.kG)(p(e),"init value should implement IEquals",(()=>JSON.stringify(e))))),new m(i,a,r,t)},e.empty=function(e,t){return new m(new Map,[],t,e)},e.diff=function(e,t){const r=e.clear();return e.reduce((({added:e,preserved:r,removed:n,changed:i},a,o)=>{const s=e.has(o)?e.remove(o):e;if(t.has(o)){const e=a.equals(c.MH(t.get(o)).value);return{removed:n,added:s,preserved:e?r.add(a):r,changed:e?i:i.add(a)}}return{removed:n.add(a),added:s,preserved:r,changed:i}}),{removed:r,added:t,preserved:r,changed:r})},e.unsafeGet=function(e,t){return c.MH(t.get(e)).value},e.unsafeGetBy=function(e){return t=>c.MH(t.get(e)).value},e.unsafeGetAt=function(e,t){return c.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return t=>c.MH(t.getAt(e))},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){let r=-1,n=e.size;for(;r+1!==n;){const i=r+(n-r>>1);t(c.MH(e.getAt(i)))?r=i:n=i}return r+1},e.createKeySorter=function(e,t){return(r,n)=>t(e(r),e(n))},e.orderKeys=function(e,t){return Array.from(e.keys()).sort(n.createKeySorter((t=>e.get(t)),t))},e.takeByKey=function(e,t,r){const n=(0,s.zG)(r,a.cx((t=>t===e))),i=c.ij(t.get(e));return(0,l.kG)(c.Wi(n)&&c.Wi(i)||c.pC(n)&&c.pC(i),"unsynced hash&order"),c.vB(((e,t)=>({index:e,value:t})))(n,i)},e.getFoldableWithIndex=function(){return{URI:n.URI,_E:void 0,reduce:(e,t,r)=>e.reduce(r,t),foldMap:e=>(t,r)=>t.reduce(((t,n)=>e.concat(t,r(n))),e.empty),reduceRight:(e,t,r)=>e.reduce(((e,t)=>r(t,e)),t),reduceWithIndex:(e,t,r)=>e.reduce(((e,t,n)=>r(n,e,t)),t),reduceRightWithIndex:(e,t,r)=>e.reduce(((e,t,n)=>r(n,t,e)),t),foldMapWithIndex:e=>(t,r)=>t.reduce(((t,n,i)=>e.concat(t,r(i,n))),e.empty)}}}(n||(n={}));class m{get(e){return n.takeByKey(e,this._hash,this._order)}getIndex(e){return c.DT((e=>e>-1))(this._order.indexOf(e))}getAt(e){return c.ij(this._hash.get(this._order[e]))}has(e){return this._hash.has(e)}find(e,t=0){if(t<0)return c.YP;for(let r=t;r<this._order.length;r++){const t=this._order[r],n=this._hash.get(t);if(e(n))return c.G({index:r,value:n})}return c.YP}findFrom(e,t){return this.find(e,t)}findRight(e,t){if(Boolean(t)&&t>=this._order.length)return c.YP;for(let r=Boolean(t)?t:this._order.length-1;r>=0;r--){const t=this._order[r],n=this._hash.get(t);if(e(n))return c.G({index:r,value:n})}return c.YP}findRightFrom(e,t){return this.findRight(e,t)}map(e,t=this._comp){const r=new Map;this._order.forEach(((t,n)=>{const i=this._hash.get(t),a=e(i,t,n);(0,l.kG)(p(a),"transformed value should implement IEquals",(()=>JSON.stringify(a))),r.set(t,a)}));const i=n.orderKeys(r,t);return new m(r,i,t,this._getKey)}mapTo(e){return this._order.map(((t,r)=>e(this._hash.get(t),t,r)))}filter(e){const t=new Map,r=this._order.filter((r=>{const n=this._hash.get(r),i=e(n,r);return i&&t.set(r,n),i}));return new m(t,r,this._comp,this._getKey)}reduce(e,t){return this._order.reduce(((t,r,n)=>e(t,this._hash.get(r),r,n)),t)}modifyWith(e,t){const r=new Map(this._hash),i=this._order.slice(),a=(e,a)=>{const o=n.takeByKey(a,r,i),s=t(a,e,o);(0,l.kG)(p(s),"modified value should implement IEquals",(()=>JSON.stringify(s))),r.set(a,s),c.Wi(o)&&i.push(a)};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),i.sort(n.createKeySorter((e=>r.get(e)),this._comp)),new m(r,i,this._comp,this._getKey)}patchWith(e,t){const r=new Map(this._hash),i=this._order.slice(),a=(e,a)=>{const o=n.takeByKey(a,r,i),d=t(a,e,o);(0,l.kG)(c.wo(p)(d),"patched value should implement IEquals",(()=>JSON.stringify(d))),(0,s.zG)(d,c.g_((()=>{(0,s.zG)(o,c.g_(s.Q1,(({index:e})=>{r.delete(a),i.splice(e,1)})))}),(e=>{r.set(a,e),c.Wi(o)&&i.push(a)})))};return e instanceof Array?e.forEach((([e,t])=>a(t,e))):e.forEach(a),i.sort(n.createKeySorter((e=>r.get(e)),this._comp)),new m(r,i,this._comp,this._getKey)}add(e){const t=new Map(this._hash),r=this._order.slice();return(Array.isArray(e)?e:[e]).forEach((e=>{const n=this._getKey(e);(0,l.kG)(p(e),"added value should implement IEquals",(()=>JSON.stringify(e))),t.set(n,e),-1===r.indexOf(n)&&r.push(n)})),r.sort(n.createKeySorter((e=>t.get(e)),this._comp)),new m(t,r,this._comp,this._getKey)}update(e,t){return(0,s.zG)(this.get(e),c.g_((()=>o.left(`Provided key ${e} not found in the map`)),(({value:r})=>{const i=new Map(this._hash),a=this._order.slice();return i.set(e,t(r)),a.sort(n.createKeySorter((e=>i.get(e)),this._comp)),o.right(new m(i,a,this._comp,this._getKey))})))}remove(e){(0,l.kG)(this.has(e),`can not remove unknown key: ${e}`);const t=new Map(this._hash);t.delete(e);const r=d.CE(e,this._order);return new m(t,r,this._comp,this._getKey)}clear(){return new m(new Map,[],this._comp,this._getKey)}hashCode(){let e=7;return this._hash.forEach((t=>e+=t.hashCode())),e}equals(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every(((t,r)=>t.equals(c.MH(e.getAt(r)))))}values(){return this._order.map((e=>this._hash.get(e)))}keys(){return this._order}get size(){return this._order.length}constructor(e,t,r,n){(0,i._)(this,"_hash",void 0),(0,i._)(this,"_order",void 0),(0,i._)(this,"_comp",void 0),(0,i._)(this,"_getKey",void 0),this._hash=e,this._order=t,this._comp=r,this._getKey=n,(0,l.kG)(e.size===t.length,"every hash entry should has order")}}function p(e){return!(!Boolean(e)||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},33069:(e,t,r)=>{r.d(t,{mN:()=>C});var n,i,a=r(32490),o=r(59833),s=r(14944),l=r(90023),c=r(13391),d=r(52303),u=r(14146),m=r(97767),p=r(91817),h=r(36355),g=r(59179),f=r(74822),y=r(3199),v=r(24666),x=r(10883),I=r(704),b=r(48922);!function(e){const t=e=>t=>(0,l.zG)(t,d.UI((0,l.ls)(o.DZ((t=>e.getAlertByMark(t))),o.DY(s.Uz((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(h.R.ord)))));e.fromMarksEvents=(e,r)=>({activeHighlights:(0,l.zG)(r.activeMarks,g.U(t(e))),hoveredHighlights:(0,l.zG)(r.hoveredMarks,g.U(t(e)))})}(n||(n={})),function(e){e.Mock=class{constructor(){(0,a._)(this,"alertHovered",new f.x),(0,a._)(this,"alertClicked",new f.x),(0,a._)(this,"highlightedAlert",c.h.create(d.YP))}}}(i||(i={}));class C{constructor(e,t,r,i,o,s){(0,a._)(this,"_ded",void 0),(0,a._)(this,"_markAlertMapper",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"_impl",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._ded=e,this._markAlertMapper=t,this._alertsReader=r,this._activeAlertChanges=i,this._alertFilter=o,this._resolveClickedAlert=s,this._impl=new S(n.fromMarksEvents(this._markAlertMapper,this._ded),this._alertsReader,this._activeAlertChanges,this._alertFilter,this._resolveClickedAlert),this.alertHovered=this._impl.alertHovered,this.alertClicked=this._impl.alertClicked}}class S{constructor(e,t,r,n,i){(0,a._)(this,"_highlightEvents",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._highlightEvents=e,this._alertsReader=t,this._activeAlertChanges=r,this._alertFilter=n,this._resolveClickedAlert=i,this.alertHovered=this._highlightEvents.hoveredHighlights.pipe(g.U(d.UI(o.UI((({alert:e})=>e)))),y.R(((e,t)=>(0,l.zG)(t,d.tS((t=>(0,l.zG)(e,d.hX((e=>-1!==t.indexOf(e))),d.g_((()=>d.ij(t[0])),d.G)))))),d.YP),g.U(d.hX((e=>this._alertsReader.isInteractable(e.id)&&!b.$.isPlagiarism(e)))),v.x()),this.alertClicked=this._highlightEvents.activeHighlights.pipe(x.M(this._activeAlertChanges,this._alertFilter),y.R(((e,[t,r,n])=>{const i=t=>(0,l.zG)(e,d.Gg((e=>e.alert.id===t.alert.id))),a=e=>(0,l.zG)(r,d.Gg((t=>t.alert.id===e.alert.id))),o=e=>n(e.alert);var s;return(0,l.zG)(t,d.tS((e=>(0,l.zG)(e,null!==(s=this._resolveClickedAlert)&&void 0!==s?s:u.N6([(0,m.W9)(i,a),a,(0,m.W9)(i,o),o,i]),d.g_((()=>d.ij(e[0])),d.G),d.UI((e=>p.Vx(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),d.cS()),I.shareReplay({refCount:!0,bufferSize:1}))}}},98800:(e,t,r)=>{r.d(t,{t:()=>g});var n=r(84910),i=r(78520),a=r(61179),o=r(90023),s=r(24666),l=r(59179),c=r(97767),d=r(52303),u=r(68717),m=r(36355);const p=(0,c.W9)(u.bZ.isRegistered,(0,a.ff)(u.bZ.isMuted)),h=e=>t=>(0,c.W9)(p,e(t));var g;!function(e){e.create=function(e,t){const r=h((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:e=>h((e=>t[e]))(e),alertVisibleInSidebar:r,getLensesFilter:t=>e[t],alertCanBeDisplayed:p,alertIsBulkAcceptable:e=>(0,c.W9)(r(e),u.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,r=()=>e=>(0,o.zG)(e.freePremium,d.FX("unlocked"));e.getAlertVisibleInTextFilter=function(e,t){return t.pipe(s.x(((e,t)=>e.currentLens.id===t.currentLens.id)),l.U((t=>({filter:(0,c.Kg)(e.alertVisibleInText(t.currentLens.id),u.bZ.isBulkApplied,(e=>u.bZ.isWithTeaser(e)&&m.R.isCheetah(t.currentLens.id))),lensId:t.currentLens.id}))))};var a=e.defaultLensFilters={[m.R.SpecialId.Clarity]:t(m.R.SpecialId.Clarity),[m.R.SpecialId.Correctness]:t(m.R.SpecialId.Correctness),[m.R.SpecialId.Delivery]:t(m.R.SpecialId.Delivery),[m.R.SpecialId.Engagement]:t(m.R.SpecialId.Engagement),[m.R.SpecialId.Vox]:t(m.R.SpecialId.Vox),[m.R.SpecialId.KnowledgeHub]:t(m.R.SpecialId.KnowledgeHub),[m.R.SpecialId.FreePremiumAlerts]:(0,c.Kg)(r(),t(m.R.SpecialId.Premium)),[m.R.SpecialId.Plagiarism]:t(m.R.SpecialId.Plagiarism),[m.R.SpecialId.DraftAI]:o.jv,[m.R.SpecialId.Cheetah]:o.jv,[m.R.SpecialId.Premium]:t(m.R.SpecialId.Premium),[m.R.SpecialId.AllAlerts]:u.bZ.belongsToAllAlerts,[m.R.SpecialId.Closed]:o.jv,[m.R.SpecialId.PredictionTakeaways]:u.bZ.belongsToPredictionTakeaways,[m.R.SpecialId.PredictionEmogenie]:u.bZ.belongsToPredictionEmogenie,[m.R.SpecialId.RealTimeProofit]:t(m.R.SpecialId.RealTimeProofit)};e.defaultTextFilters=(0,i._)((0,n._)({},a),{[m.R.SpecialId.Closed]:u.bZ.isInline,[m.R.SpecialId.FreePremiumAlerts]:(0,c.Kg)(r(),t(m.R.SpecialId.Premium)),[m.R.SpecialId.Premium]:g.defaultLensFilters[m.R.SpecialId.Premium]})}(g||(g={}))},80836:(e,t,r)=>{r.d(t,{F:()=>n});var n,i=r(32490),a=r(58303),o=r(90023),s=r(19813),l=r(17613),c=r(97767),d=r(77178),u=r(68717),m=r(58578),p=r(48922);!function(e){e.Impl=class{constructor(e,t,r,n){(0,i._)(this,"_checkingState",void 0),(0,i._)(this,"_positionManager",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_alertCanBeDisplayed",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"findClosestAlertHighlight",void 0),(0,i._)(this,"findNextAlertInText",void 0),(0,i._)(this,"findPremiumAlert",void 0),this._checkingState=e,this._positionManager=t,this._alertsReader=r,this._alertCanBeDisplayed=n,this._log=s.C8.Logging.getLogger("AlertSearchService"),this.findClosestAlertHighlight=(e,t)=>(0,o.zG)(this._positionManager.findClosestToPosition(e,(e=>d.P.is(e)&&d.x.isVisible(e)&&!d.x.isApplied(e)&&(0,o.zG)(this._alertsReader.getRegistered(e.meta.alertId),a.Gg((r=>this._alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),a.tS((e=>(0,o.zG)(this._alertsReader.getRegistered(e.meta.alertId),a.UI((t=>{const r={alert:p.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return r.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>d.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))))),this.findNextAlertInText=({alert:e,highlightIndex:t},r)=>{const n=e.getHighlightRanges();return(0,l.kG)(t<n.length,"AHI is out of highlightRanges length",`hr length: ${n.length}, ahi: ${t}`),this.findClosestAlertHighlight(n[t].end,r)},this.findPremiumAlert=()=>(0,o.zG)(this._checkingState.get(),m.p.find((0,o.ls)(u.bZ.fromAlertModel,(0,c.W9)(u.bZ.isRegistered,u.bZ.isPremium))),a.UI((e=>({alert:p.$.fromModel(e.alert),highlightIndex:0}))))}}}(n||(n={}))},46387:(e,t,r)=>{r.d(t,{Bd:()=>a,Oe:()=>n,rG:()=>i});var n,i,a,o=r(84910),s=r(78520),l=r(21147),c=r(68717);!function(e){e.eq=(0,l.Uz)((e=>e.alert))(c.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState));var t=e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState));e.canBeChanged=e=>r=>Boolean(e)&&a.applied===r.state.current.visualState?e===a.disposed:c.bZ.State.isBulkApplied(r.alert.state)||t(a.applied,a.disposed)(r),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(n||(n={})),function(e){e.updateRanges=function(e,t){return(0,s._)((0,o._)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,s._)((0,o._)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,s._)((0,o._)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),(a||(a={})).isApplied=function(e){return e===a.applied}},41145:(e,t,r)=>{r.d(t,{v:()=>S});var n=r(32490),i=r(84910),a=r(78520),o=r(59833),s=r(12518),l=r(90023),c=r(94173),d=r(198),u=r(19813),m=r(40920),p=r(27145),h=r(17613),g=r(52303),f=r(14146),y=r(97767),v=r(77178),x=r(68717),I=r(46025),b=r(48922),C=r(46387);class S{get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,h.kG)(e!==C.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==C.Bd.initial||e!==C.Bd.disposed&&!C.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=C.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=C.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=C.rG.from(C.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=C.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!C.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,l.zG)(this.change(),g.hX((e=>e.rawMark.length>0)),g.UI((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return g.YP}}get enclosingMark(){const e=Array.from(this._marksMap.values()).findIndex((0,l.ls)(g.tS((e=>g.Uo(e.range()))),g.hX(v.x.isEnclosingView),g.pC));return e>-1?this.markByIndex(e):g.YP}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:r})=>{e.rawMark.forEach((e=>{"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,l.zG)(t.created.get(e.id)||s.left(new Error("Cannot get unknown mark")),g.Uo)):"remove"===e.action&&r._removeMark(e.id)})),e.commit(),r._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const r=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,l.zG)(t,g.hX((t=>0!==t.rawMark.length||(A("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:(0,a._)((0,i._)({},e.toJSON()),{alert:void 0})}),!1))),g.pC))).map((([e,t])=>({ma:e,change:g.MH(t)})));if(0===r.length)return;const n=f.VS(r.map((e=>e.change.rawMark))),o=this._changeMarksInDEd(n);this._iterateOverMarkAlerts(r,o)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:g.YP}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,h.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?g.G(this._getRawActionForApply(e)):g.YP}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===m.v.Change.ActionType.remove)this._removeMark(e.id);else{const r=(0,l.zG)(g.ij(this._marksMap.get(e.id)),g.tS(c.y),g.wp((()=>(0,l.zG)((e.action===m.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||s.left(new Error("Cannot get unknown mark")),g.Uo))));this._setMark(e.id,r)}})),this._disposeIfEmpty()}_getTransition(){return(0,h.kG)(C.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=(0,a._)((0,i._)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){if(e.from.visualState===C.Bd.initial)return(0,l.zG)(this._tryToUpdateRangesInAlert(e),g.UI((e=>e.commit()))),{action:"create",commit:d.Z,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};switch(e.to.visualState){case C.Bd.disposed:const t=C.Bd.isApplied(e.from.visualState)||x.bZ.State.isRemoved(this.alert.state)&&b.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(l.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e}))),r=(0,l.zG)(this._tryToUpdateRangesInAlert(e),g.UI((({commit:e})=>e)),g.fS((()=>l.Q1)));return{action:"remove",commit:r,rawMark:t.map((e=>this._remove(e.range)(e.id)))};case C.Bd.applied:const n=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,l.zG)(this._tryToUpdateRangesInAlert(e),g.UI((({commit:e})=>e)),g.fS((()=>l.Q1))),rawMark:[...n,...this._getAppliedRanges(((t,r)=>this._create(r,e)(r().meta.id)))]};default:const i=()=>x.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(c.y);return(0,l.zG)(this._tryToUpdateRangesInAlert(e),g.UI((({commit:t,ranges:r})=>this._getReplaceAction(e,i(),r.removed,t))),g.fS((()=>({action:"update",commit:d.Z,rawMark:i().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}_getReplaceAction(e,t,r,n){return{action:"replace",commit:n,rawMark:[...r.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,l.zG)(this._alertRangeService.getAppliedRanges(this.id),s.fold((e=>(A("markAlert").error("cannot get applied ranges",{error:e.message,alert:b.$.snapshot(this._alert("_getAppliedRanges"))}),[])),o.Su(e)))}_getHighlightRanges(e){return(0,l.zG)(this._alertRangeService.getHighlightRanges(this.id),s.fold((t=>(A("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,l.zG)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),o.UI(e)))),o.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,h.kG)(!!b.$.isApplicableAlert(t)||(!Boolean(e)||x.bZ.State.isBulkApplied(t.state)||!C.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,h.kG)(Boolean(e)&&C.Oe.isOneOf(C.Bd.applied)(this)?e===C.Bd.disposed||x.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):C.Oe.notAnyOf(C.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${Boolean(e)?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,l.zG)(this._mark,g.UI((e=>e.id)),g.FS),range:(0,l.zG)(this._mark,g.UI((e=>e.range)),g.FS)},alert:this._alert("toJSON")}}equals(e){return C.Oe.eq.equals(this,e)}hashCode(){return(0,I.AC)(this.id)}constructor(e,t,r,i,a,o,d,u){(0,n._)(this,"_alert",void 0),(0,n._)(this,"_alertsService",void 0),(0,n._)(this,"_alertRangeService",void 0),(0,n._)(this,"_changeMarksInDEd",void 0),(0,n._)(this,"_create",void 0),(0,n._)(this,"_update",void 0),(0,n._)(this,"_remove",void 0),(0,n._)(this,"_onTransitionEnd",void 0),(0,n._)(this,"_currentState",void 0),(0,n._)(this,"_scheduledState",void 0),(0,n._)(this,"id",void 0),(0,n._)(this,"_marksMap",void 0),(0,n._)(this,"_alertRef",void 0),(0,n._)(this,"_shouldInitMark",void 0),(0,n._)(this,"_tryToUpdateRangesInAlert",void 0),(0,n._)(this,"_dispose",void 0),(0,n._)(this,"_disposeIfEmpty",void 0),this._alert=e,this._alertsService=t,this._alertRangeService=r,this._changeMarksInDEd=i,this._create=a,this._update=o,this._remove=d,this._onTransitionEnd=u,this._currentState=C.rG.from(C.Bd.initial),this._scheduledState=C.rG.from(C.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,l.zG)(this._alertRangeService.hasNewRangesForUpdate(this.id),s.fold(l.jv,c.y)))return g.YP;const t=(0,l.zG)(this._alertRangeService.applyPendingRangesUpdate(this.id),s.mapLeft((e=>A("markAlert").error("cannot apply pending ranges",e))),g.Uo,g.tS(c.y),g.hX((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,l.zG)(t,g.UI((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),s.either.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},s.either.mapLeft(this._alertRef,(e=>A("markAlert").warn("can not take alertRef",e)))}}!function(e){e.compareTo=e=>{const t=(0,y.WA)(p.SV.distanceFrom)(e);return(e,r)=>(0,y.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...r.alert.getHighlightRanges().map(t)))}}(S||(S={}));const A=(0,y.HP)(u.C8.Logging.getLogger)},79159:(e,t,r)=>{r.d(t,{v:()=>n});var n,i=r(12518),a=r(58303),o=r(90023),s=r(19813),l=r(51007),c=r(17613),d=r(68545),u=r(59179),m=r(20161),p=r(24666),h=r(29479),g=r(77400),f=r(66878),y=r(36344),v=r(32734),x=r(84714),I=r(64271),b=r(74703),C=r(93167);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={}));const r=s.C8.Logging.root.getLogger("AlignmentViewModel");function S(e,t){return(0,o.zG)(e,i.fold((({kind:e,reason:t})=>{switch(e){case"error":r.error("Cannot align card to mark",{reason:t});break;case"notFound":r.info("Item does not exist, alignment is canceled",{reason:t});break;default:(0,c.vE)(e)}return y.E}),(e=>x.of({mark:t,card:e}))))}e.alignMarkToItem=function(e,n){return({animation:i,suggestedPosition:s})=>({id:c,renderOptions:{features:x},activeHighlightIndex:I,activeAlert:A})=>(0,o.zG)(e.getMarkAlertPosition({alert:A,highlightIndex:I}),d.oA,u.U((e=>({mark:e,cardPosition:n.getCardSuggestedPositionInViewport(c,x.has(C.j.Features.showLabel),a.YP,"cardContentTop")}))),m.w((({cardPosition:e,mark:t})=>S(e,t))),m.w((({card:e,mark:t})=>n.setCardPosition(c,x.has(C.j.Features.showLabel),!1,b.r.FromWindowTop.ISO.modify(b.L.concatC(-e.contentOffset))(t)).pipe(p.x(),h.h((0,o.zG)(s,a.hX((t=>n.willFitViewport(c,b.r.FromWindowTop.ISO.modify(b.L.concatC(-e.contentOffset))(t)))),a.fS((()=>b.r.FromWindowTop.ISO.modify(b.L.concatC(e.contentOffset))(e.top)))))))),m.w((r=>e.moveAlertHighlightInViewport({alert:A,highlightIndex:I},r,i===t.ANIMATE_ALL?l.uq.fake:l.uq.none))),h.h(g.PU),f.K((e=>(r.error("Cannot align mark to card",e),y.E))),v.B())},e.alignItemToMark=function(e,t){return({animation:i,fitCardIntoViewport:s})=>({id:c,renderOptions:{features:d},activeAlert:p,activeHighlightIndex:A})=>(0,o.zG)(e.getMarkAlertPosition({alert:p,highlightIndex:A}),m.w(a.g_((()=>y.E),(e=>x.of(e)))),u.U((e=>({mark:e,cardPosition:t.getCardSuggestedPositionInViewport(c,d.has(C.j.Features.showLabel),a.G(e),"cardContentTop")}))),m.w((({cardPosition:e,mark:t})=>S(e,t))),m.w((({card:r,mark:a})=>I.T(t.setCardPosition(c,d.has(C.j.Features.showLabel),i===n.Animation.ANIMATE_ALL,b.r.FromWindowTop.ISO.modify(b.L.concatC(-r.contentOffset))(a)),g.Ft(e.moveAlertHighlightInViewport({alert:p,highlightIndex:A},b.r.FromWindowTop.ISO.modify(b.L.concatC(r.contentOffset))(r.top),i===n.Animation.ANIMATE_ALL?l.uq.initial:l.uq.none))(s)))),h.h(g.PU),f.K((e=>(r.error("Cannot align card to mark",e),y.E))),v.B())}}(n||(n={}))},9057:(e,t,r)=>{r.d(t,{eZ:()=>j,UC:()=>H});var n=r(32490),i=r(84910),a=r(78520),o=r(90023),s=r(94173),l=(r(19813),r(70416)),c=r(17613),d=r(52303),u=r(4025),m=r(97767),p=r(91817),h=r(68717),g=r(36355),f=r(84714),y=r(59179),v=r(29479),x=r(954),I=r(24666),b=r(36344),C=r(68545),S=r(20161),A=r(77400),w=r(53976),_=r(91089),k=r(10883),E=r(82589),T=r(84908),M=r(17705),G=r(64271),L=r(78129),D=r(90572),N=r(79159),z=r(31854),P=r(74703),F=r(31789),U=r(9761),R=r(49239),O=r(49857);var B,$,W;!function(e){var t=e.CARD_CONTENT_OFFSET_REM=3.4,r=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=t+1;e.contentOffsetGetter=(e=t,n=r)=>(t,r)=>Math.round((t?n:e)*r)}(B||(B={})),function(e){e.cardPositionGetter=(e,t)=>(r,n)=>{const i=new R.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.view(U.nL.getLens).get(),u.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),u.tS((({items:e,id:t})=>(0,o.zG)(e.get(r),u.Yo((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),u.UI((({value:e})=>(0,o.zG)(n,d.g_((()=>(0,o.ls)(P.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(e.positionState.absTop)),o.yR))))))))},e.cardPositionInViewportGetter=(e,t)=>(r,n)=>{const i=new R.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.view(U.nL.getLens).get(),u.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),u.tS((({items:e,id:t})=>(0,o.zG)(e.get(r),u.Yo((()=>({kind:"notFound",reason:`The item with id: ${r} does not exist in lens ${t}`}))),u.tS((({value:t})=>{return(0,o.zG)(n,d.UI(i.converters.windowToViewport),d.wp((()=>d.G((0,o.ls)(P.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(t.positionState.absTop)))),d.UI((a=t,s=((e,t)=>(0,o.zG)(t.get(e),d.UI((({index:e})=>({before:(0,o.zG)(t.getAt(e-1),d.UI((e=>e.positionState.height)),d.fS((()=>0))),after:(0,o.zG)(t.getAt(e+1),d.UI((e=>e.positionState.height)),d.fS((()=>0)))}))),d.fS((()=>({before:0,after:0})))))(r,e),l=i.viewport,e=>{const t=(0,O.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:l.height,padding:s});return P.L.FromViewportTop.ISO.modify(P.L.concatC(-t))(e)})),d.UI(i.converters.viewportToWindow),u.Yo((()=>({kind:"error",reason:"Cannot get card position in viewport"}))));var a,s,l}))))))}}($||($={})),function(e){const t=(e,t,r,n)=>{const i=n.viewport.get(),a=n.scrollTop.get(),s=P.L.converters(a,P.r.FromWindowTop.ISO.unwrap(i.top),n.paddingTop.get());return u.vM((()=>(0,o.zG)(U.nL.getLens(r),d.tS((t=>t.items.get(e))),d.UI((e=>P.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),d.UI((e=>s.absTopToViewportTop(e))),d.g_((()=>{throw new c.ej("Cannot get offset for unknown card")}),(e=>{const r=s.windowToViewport(t);return P.L.FromViewportTop.ISO.unwrap(e)-P.L.FromViewportTop.ISO.unwrap(r)})))))};e.moveCardToPositionSyncGetter=(e,r)=>n=>(0,o.zG)(t(n.id,n.position,e.get(),r),u.tS((e=>r.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,r)=>n=>(0,o.zG)(t(n.id,n.position,e.get(),r),u.g_((e=>F._(e)),(e=>r.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(W||(W={}));var j,H,Y,V,Z=r(87784);class J extends c.sH{}!function(e){var t=e.cardSuggestedPositionGetter=(e,t)=>(r,n,i,a)=>{const s="cardTop"===a?0:t(n);return(0,o.zG)(e(r,(0,o.zG)(i,d.UI(P.r.FromWindowTop.ISO.modify(P.L.concatC(-s))))),u.UI((e=>({top:e,contentOffset:s}))))};e.getSuperScrollMapper=(e,r,n)=>{const i=W.moveCardToPositionAnimatedGetter(e,r),a=W.moveCardToPositionSyncGetter(e,r),s=B.contentOffsetGetter();return{setCardPosition:(e,t,r,o)=>{const l={top:o,contentOffset:s(t,n.get())};return(r?i({id:e,position:o}):f.of(a({id:e,position:o})).pipe(y.U(u.MH))).pipe(v.h(l),x.O(l),I.x())},getCardSuggestedPosition:t($.cardPositionGetter(e,r),(e=>s(e,n.get()))),getCardSuggestedPositionInViewport:t($.cardPositionInViewportGetter(e,r),(e=>s(e,n.get()))),willFitViewport:(t,n)=>(0,o.zG)(e.get(),(e=>!!U.nL.hasItems(e)&&((e,t)=>(r,n)=>{const i=new R.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.currentLens.items,(e=>(0,o.zG)(e.get(r),d.UI((({value:e})=>0===(0,O.v_)({cardTop:i.converters.windowToViewport(n),cardHeight:e.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}}))))),d.MH)})(e,r)(t,n))),isAboveViewportTop:(l=r,e=>P.r.FromWindowTop.ISO.modify(P.L.concatC(l.scrollTop.get()+l.paddingTop.get()))(e)<l.viewport.get().top)};var l}}(j||(j={})),function(e){e.getMapper=(e,t,r)=>({moveAlertHighlightInViewport:(t,r,n)=>e.ensureAlertHighlightInViewport(t,P.r.FromWindowTop.ISO.unwrap(r),n),getMarkAlertPosition:n=>(0,o.zG)(e.getMarkByAlert(n),u.Yo((()=>new J("getMarkByAlert returned O.none"))),u.tS((i=>(0,o.zG)(i.getRect(),u.UI(l.n.relativeToViewport),u.UI((e=>e.top)),u.vx((()=>(r.debug("Cached alert is missing, falling back to flush"),(r=>(t.flushChanges(),(0,o.zG)(e.getMarkByAlert(r),u.Yo((()=>new Error("getMarkByAlert returned O.none"))),u.tS((e=>(0,o.zG)(e.getRect(),u.UI(l.n.relativeToViewport),u.UI((e=>e.top))))))))(n)))),u.UI(P.r.FromWindowTop.ISO.wrap)))),u.Vn((e=>(e instanceof J||r.warn("Cannot getMarkAlertPosition",e),e))),d.Uo,(e=>f.of(e)))})}(H||(H={}));!function(e){e.Mock=class{constructor(){(0,n._)(this,"alignCardToMark",(()=>b.E)),(0,n._)(this,"alignCardTo",(()=>b.E)),(0,n._)(this,"alignMarkTo",(()=>b.E)),(0,n._)(this,"alignMarkToCard",(()=>b.E))}}}(Y||(Y={})),function(e){let t;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={}));e.getRelativePosition=(e,r,n)=>r.top+n>e.bottom?t.below:e.top>r.bottom?t.above:t.intersects}(t||(t={}));e.createAlignmentOnTypingEffect=(e,t,r,n,i,a=O.Bk)=>{const s=e.view(U.nL.mapper((({currentLens:e})=>(0,o.zG)(d.G(e),d.hX(a(i)))))).pipe(y.U(d.tS(n),d.hX(i.isValidToAlign)),C.cp((e=>r.pipe(S.w(A.b2.rafScheduler),S.w((()=>t.alignCardToMark(e,N.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:g.R.isWithAlertsId,what:U.nL.Effect.Applicator.create(s.pipe(w.c(_.C)))}},e.createAlignOnDisjointedAreasEffect=(e,r,n,i)=>{const a=e.view((0,o.ls)(U.nL.getLens,d.hX((e=>d.Wi(U.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),l=a.pipe(y.U(d.pC),I.x(),S.w(A.Ft(n.changes.pipe(x.O(A.PU),S.w(A.b2.rafScheduler),y.U((()=>d.G((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(n)))),y.U(d.hX((e=>e.top-e.bottom!=0)))))),k.M(a.pipe(y.U(d.UI((({items:e})=>e)))),d.vB(((n,a)=>(0,o.zG)(Z.YA(e,i),d.UI((e=>({top:P.r.FromWindowTop.ISO.unwrap(e.top),bottom:P.r.FromWindowTop.ISO.unwrap(e.bottom)}))),d.tS((e=>(0,o.zG)(((e,r,n)=>{const i=(0,o.zG)(e.getAt(0),d.UI((e=>e.positionState.height)),d.fS((()=>0))),a=t.getRelativePosition(r,n,i);switch(a){case t.RelativePosition.above:return(0,o.zG)(e.getAt(0),d.UI((e=>({card:e,top:r.top}))));case t.RelativePosition.below:return(0,o.zG)(e.getAt(0),d.UI((e=>({card:e,top:r.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return d.YP;default:return(0,c.vE)(a)}})(a,n,e),d.UI((({card:e,top:t})=>r.alignCardTo(e,P.r.FromWindowTop.ISO.wrap(t),N.v.Animation.NO_ANIMATION)))))),d.fS((()=>b.E)))))),S.w(d.g_((()=>b.E),s.y)));return{id:"alignOnDisjointedAreas",when:g.R.isWithAlertsId,what:U.nL.Effect.Applicator.create(l.pipe(w.c(_.C)))}},e.createAlignOnResizeSideEffect=(e,t,r,n,i,a=A.b2.rafScheduler,s=O.Bk)=>{const l=e.view(U.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))).view(d.hX((({currentLens:e})=>s(i)(e)))).view(d.tS((({currentLens:e,alertSource:t})=>(0,o.zG)(n(e),d.hX(i.isValidToAlign),d.UI((r=>({item:r,source:t,lensId:e.id}))))))),c=E.Qr.pipe(T.p(100),M.T(r),k.M(l,((e,t)=>t)),S.w(a),S.w(d.g_((()=>b.E),(({item:e})=>t.alignCardToMark(e,N.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:g.R.isWithAlertsId,what:U.nL.Effect.Applicator.create(c.pipe(w.c(_.C)))}};let r;!function(e){e.skip="skip"}(r=e.SkipAlertActionSource||(e.SkipAlertActionSource={}));e.createAlignmentSideEffect=(e,t,r=((e,t)=>t),i,a,o,s,l=A.b2.rafScheduler)=>{const c=n(e,t,r,i,a,o,s,l);return{id:"alignmentSideEffect",when:g.R.isWithAlertsId,what:U.nL.Effect.Applicator.create(c.pipe(w.c(b.E)))}};var n=e._createAlignmentSource=(e,t,n=((e,t)=>t),l,c,u,g,f=A.b2.rafScheduler,C=O.Bk)=>{const w=(0,m.Kg)(z.lY.isAlertMinicardButtonClick,z.lY.isSwitchToClosestByViewport,z.lY.isAlertCardShow,z.eI.isCardExpand,z.lY.isBulkAcceptItemShow,z.lY.isBulkHighlight),E=G.T(e.pipe(y.U(U.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))),x.O(d.YP),y.U(d.UI((e=>e.currentLens.id))),L.G(),D.h((([e,t])=>(0,o.zG)(d.vB(((e,t)=>e!==t))(e,t),d.Gg(s.y)))),v.h(d.YP)),e.pipe(y.U(U.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))),D.h(d.Gg((({currentLens:e})=>C(c)(e)))),y.U(d.tS((({currentLens:e,alertSource:t})=>(0,o.zG)(l(e),d.hX(c.isValidToAlign),d.UI((r=>({item:r,source:t,lensId:e.id}))))))))).pipe(I.x((0,o.ls)(d.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),d.Gg(s.y)))),T=t.pipe(D.h(w),y.U(d.G),x.O(d.YP),L.G(),D.h((0,o.ls)((0,o.og)(d.vB(((e,t)=>!z.lY.isAlertCardShow(t)||!z.lY.isAlertMinicardButtonClick(e)))),d.fS(o.jv))),y.U((([,e])=>(0,o.zG)(e,d.hX(z.lY.hasClickPoint)))),x.O(d.YP)).pipe(S.w((e=>E.pipe(D.h(d.Gg((e=>e.source===h.l$.sidebar))),y.U(d.tS((t=>d.G((0,a._)((0,i._)({},t),{clickPoint:(0,o.zG)(e,d.UI(p.ei("clickPoint")))}))))))))),M=E.pipe(D.h(d.Gg((e=>e.source!==h.l$.sidebar))),y.U((e=>(0,o.zG)(e,d.tS((e=>d.G((0,a._)((0,i._)({},e),{clickPoint:d.YP}))))))));return G.T(T,M).pipe(x.O(d.YP),L.G(),y.U((([e,t])=>(0,o.zG)(t,d.UI((r=>({lensId:r.lensId,card:r.item,source:r.source,animate:(0,o.zG)(e,d.wo((({lensId:e})=>e===r.lensId))),clickPoint:(0,o.zG)(t,d.tS(p.ei("clickPoint")),d.UI((0,o.ls)(p.ei("y"),P.r.FromWindowTop.ISO.wrap)))})))))),S.w(d.g_((()=>b.E),f)),k.M(e),S.w((([{card:e,source:t,animate:i,clickPoint:a,lensId:s},l])=>(0,o.zG)(n(e,t),(t=>U.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&s===l.currentLens.id&&t!==r.skip?((e,t,r,n)=>{if(r===h.l$.text)return(0,o.zG)(e,g({animation:t?N.v.Animation.ANIMATE_ALL:N.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(r===U.h8.forceText)return(0,o.zG)(e,g({animation:N.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const i=r===h.l$.sidebar?t?N.v.Animation.ANIMATE_ALL:N.v.Animation.ANIMATE_MARK:N.v.Animation.NO_ANIMATION;return(0,o.zG)(e,u({animation:i,suggestedPosition:n}))}})(e,i,t,a):_.C)))))}}(V||(V={}))},90818:(e,t,r)=>{r.d(t,{sU:()=>we,dv:()=>Ae,Xx:()=>De});var n={};r.r(n),r.d(n,{handleGbPrompt:()=>se,sendToIdeasGallery:()=>oe,sendToSignIn:()=>ae});var i=r(32490),a=r(84910),o=r(78520),s=r(59833),l=r(12518),c=r(21147),d=r(95922),u=r(90023),m=r(74822),p=r(13391),h=r(19813),g=r(1747),f=r(52303),y=r(17613),v=r(91817),x=r(48446),I=r(97767),b=r(18117),C=r(50271),S=r(58303);function A(e){return(0,u.ls)(S.G,e.of)}function w(e){return(0,u.a9)(e.of(S.YP))}function _(e){return function(t){return e.map(t,S.G)}}function k(e){var t=function(e){var t=w(e);return function(r,n){return e.chain(r,S.EQ((function(){return t()}),n))}}(e);return function(e){return function(r){return t(r,e)}}}function E(e){var t=function(e){return(0,b.ap)(e,S.G5)}(e),r=function(e){return(0,C.UI)(e,S.dO)}(e),n=k(e),i=function(e){var t=A(e);return function(r){return function(n){return e.chain(n,S.EQ(r,t))}}}(e),a=function(e){return function(t,r){return function(n){return e.chain(n,S.EQ(t,r))}}}(e),o=function(e){return function(t){return function(r){return e.chain(r,S.EQ(t,e.of))}}}(e),s=w(e);return{map:function(e,t){return(0,u.zG)(e,r(t))},ap:function(e,r){return(0,u.zG)(e,t(r))},of:A(e),chain:function(e,t){return(0,u.zG)(e,n(t))},alt:function(e,t){return(0,u.zG)(e,i(t))},fold:function(e,t,r){return(0,u.zG)(e,a(t,r))},getOrElse:function(e,t){return(0,u.zG)(e,o(t))},fromM:_(e),none:function(){return s()}}}var T,M,G=r(39953);(M=T||(T={})).URI="IOOption",M.ioOption={URI:M.URI,...E(d.io)},({map:M.map,chain:M.chain,ap:M.ap,alt:M.alt,apFirst:M.apFirst,apSecond:M.apSecond}=(0,G.iz)(M.ioOption)),M.of=M.ioOption.of,M.fold=(e,t)=>r=>M.ioOption.fold(r,e,t),M.fromM=M.ioOption.fromM;var L,D=r(95501),N=r(68717),z=r(36355),P=r(53976),F=r(36344),U=r(84714),R=r(20161),O=r(31789),B=r(59179),$=r(24666),W=r(68545),j=r(8867),H=r(91089),Y=r(90572),V=r(63532),Z=r(31391),J=r(84766),X=r(954),Q=r(17705),q=r(97092),K=r(26814),ee=r(3199),te=r(32734);!function(e){e.update=function(e,t,r){return e.update(t,r)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,r){return(0,u.zG)(e.get(t),S.hX((e=>r(e.value))))},e.find=function(e,t){return e.find(t)}}(L||(L={}));var re=r(31854),ne=r(79159),ie=r(64271);const ae=(e,t)=>(0,u.ls)(Y.h((e=>e.type===re.lY.Type.toSignIn)),B.U((()=>r=>(e.actions.openUrl(new x.Z(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),r)))),oe=(e,t)=>(0,u.ls)(Y.h(re.lY.isOpenIdeasGallery),V.b((()=>e.actions.openPopup(new x.Z(t.ideas.galleryURL)))),P.c(F.E)),se=(e,t,r)=>n=>ie.T((0,u.zG)(n,Y.h(re.lY.isGbPromptShow),V.b((e=>le(e,r))),P.c(F.E)),(0,u.zG)(n,Y.h(re.lY.isGbPromptApply),V.b((n=>ce(e,t,n,r))),P.c(F.E)),(0,u.zG)(n,Y.h(re.lY.isGbPromptCreateRule),V.b((e=>de(e,r))),P.c(F.E)),(0,u.zG)(n,Y.h(re.lY.isGbPromptDismiss),V.b((e=>ue(e,r))),P.c(F.E))),le=({patternName:e},t)=>t.onShow(e),ce=(e,t,r,n)=>N.BY.isVox(r.gbPrompt)?me(e,t,r,n):ge(e,t,r,n),de=(e,t)=>N.BY.isVox(e.gbPrompt)?ve(e,t):be(),ue=(e,t)=>N.BY.isVox(e.gbPrompt)?Ce(e,t):Se(e,t),me=(e,t,r,n)=>"redirect"===r.gbPrompt.promptType?pe(e,t,r,n):he(),pe=(e,t,{gbPrompt:{styleGuideId:r},source:n,target:i,patternName:a},o)=>{e.actions.openPopup(new x.Z(t.account.styleGuide).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",action:"createRule",source:n,target:i,styleGuideId:r})),o.onAccept(a)},he=()=>{},ge=(e,t,r,n)=>"redirect"===r.gbPrompt.promptType?fe(e,t,r,n):ye(r,n),fe=(e,t,{gbPrompt:r,patternName:n},i)=>{e.actions.openPopup(new x.Z(t.account.writingStyle).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",categoryTitle:r.categoryTitle})),i.onAccept(n)},ye=({patternName:e},t)=>t.onAccept(e),ve=(e,t)=>"redirect"===e.gbPrompt.promptType?xe():Ie(e,t),xe=()=>{},Ie=({patternName:e},t)=>t.onAccept(e),be=()=>{},Ce=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e),Se=({patternName:e,step:t},r)=>"initial"===t&&r.onDismiss(e);var Ae,we,_e=r(48922),ke=r(57326),Ee=r(30008),Te=r(48746),Me=r(35992),Ge=r(9761),Le=r(8080);!function(e){const t=(e,t,r,n)=>(0,u.zG)(n((t=>(t.lensId===e.id||z.R.isMainLens(e.id))&&!N.bZ.isPremium(t)),"middleOfTheViewport"),f.g_((()=>F.E),(n=>(0,u.zG)(r(e),f.hX((e=>e.activeAlert.id===n.alert.id)),f.g_((()=>U.of(n)),(e=>((e,r)=>(0,u.zG)(t,f.UI((t=>t.alignMarkToCard(e,ne.v.Animation.ANIMATE_ALL,f.YP).pipe(P.c(F.E)))),f.fS((()=>U.of(r)))))((0,u.MZ)(e),n)))))));e.changeAlertEffect=(e,r,n,i,a,o,s,l)=>({id:"changeAlertEffect",when:z.R.isWithAlertsId,what:Ge.nL.Effect.SwitchAlert.create(r.actionEvents.pipe(R.w((r=>{const c=e.get();if(!Ge.nL.hasCards(c))return O._(new y.ej("Cannot update state without cards"));switch(r.type){case re.lY.Type.alertMinicardButtonClick:return(0,u.zG)(a.getRegistered(r.alertHighlight.alert.id),f.g_((()=>(l.error("somehow we got click on non registered alert",{alert:_e.$.snapshot(r.alertHighlight.alert),alertInRepo:(0,u.zG)(a.getById(r.alertHighlight.alert.id),f.UI(_e.$.fromModel),f.UI(_e.$.snapshot)),state:Ge.nL.snapshot(Ee.Mq.snapshot,i)(c)}),F.E)),(()=>U.of(r.alertHighlight))));case re.lY.Type.cardMatchesNavigationButtonClick:const e=r.transitionTo;switch(e.kind){case"anotherAlert":return(0,u.zG)("right"===r.direction?n.nextAlert(e.card):(0,u.zG)(n.prevAlert(e.card),f.vx(n.anyRegisteredAlert(e.card))),f.g_((()=>F.E),(e=>U.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,u.zG)(a.getRegistered(e.card.activeAlert.id),f.g_((()=>F.E),(()=>U.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,y.vE)(e)}case re.lY.Type.switchToClosestByViewport:return t(c.currentLens,o,i,s);default:return F.E}})),B.U((e=>({alertHighlight:e,alertSource:N.l$.sidebar,options:{order:"lensOrder"}})))))});e.createSendActiveAlertFeedbacksEffect=function(e,t,r,n,i){const a=e.pipe(B.U(Ge.nL.getActiveAlert(t)),$.x(f.Eh(c.f7(((e,t)=>_e.$.eq.equals(e,t)&&e.patternName===t.patternName))).equals),B.U((0,u.ls)(f.UI(v.ei("id")),f.tS(n.getValidForFeedback))),W.cp((e=>j.y.create((()=>((0,u.zG)(n.getValidForFeedback(e.id),f.bw((()=>(0,u.zG)(r.applyFeedback(e.id,{kind:g.PZ.LOOKED,subtype:g.e3.Sidebar},N.l$.sidebar),l.fold((e=>i.error("Failed to send LOOKED feedback",e)),u.Q1))))),()=>(0,u.zG)(n.getValidForFeedback(e.id),f.bw((()=>(0,u.zG)(r.applyFeedback(e.id,{kind:g.PZ.CLOSED,subtype:g.e3.Sidebar},N.l$.sidebar),l.fold((e=>i.error("Failed to send CLOSED feedback: ",e)),u.Q1)))))))))));return{id:"sendActiveAlertFeedbacksEffect",when:u.W8,what:Ge.nL.Effect.Applicator.create(a.pipe(P.c(H.C)))}}}(Ae||(Ae={}));class De{_applyStartVSChange(e,t){return t.reduce(((e,[t,r])=>(0,u.zG)(L.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(r)(e))),l.fold((()=>e),u.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,r])=>(0,u.zG)(e.items.get(t),f.UI((({value:e})=>e)),f.g_((()=>e),(n=>Te.o.isAnimatable(n)&&"removed"===n.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,u.zG)(L.update(e.items,t,(e=>Te.o.isAnimatable(e)&&e.visualState.transitionId===r?this._checksFeedCapabilities.completeTransition(r)(e):e)),l.fold((()=>e),(t=>Le.v.Prism.items.set(t,e)))))))),e)}_handleSnippetsOpenExternalLink(){return this.actionEvents.pipe(Y.h(re.lY.isSnippetsOpenExternalLink)).subscribe((({externalLink:e})=>this._platformEnvironment.actions.openPopup(new x.Z(e))))}_updateToneAICard(e){return t=>(0,u.zG)(e,l.chainW((({newAlert:e,itemId:r})=>L.update(t.currentLens.items,r,this._checksFeedCapabilities.updateWithAlerts([e])))),l.fold((e=>(this._log.error("Error updating card with ToneAI alert.",e),t)),(e=>Ge.nL.Prism.getLens().compose(Le.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(Y.h(re.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(Y.h(re.lY.isTakeawayDetectionFeedbackAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===re.lY.Type.takeawayCorrectlyDetected?N.TO.correctlyDetected:t===re.lY.Type.takeawayIncorrectlyDetected?N.TO.incorrectlyDetected:(0,y.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(Y.h(re.lY.isTakeawayAction)).subscribe((e=>{switch(e.type){case re.lY.Type.takeawayCorrectlyDetected:return e.isLikelyToBeRead?this._sendFeedback(e.alertId,{kind:g.PZ.ACKNOWLEDGED,text:e.takeawayText}):this._sendFeedback(e.alertId,{kind:g.PZ.ACCEPTED,replacementText:e.takeawayText});case re.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:g.PZ.IGNORE});case re.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:g.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?g.N_.likelyToBeReadTakeaway:g.N_.unlikelyToBeReadTakeaway});case re.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:g.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?g.N_.likelyToBeReadTakeaway:g.N_.unlikelyToBeReadTakeaway});default:(0,y.vE)(e)}}))}_handleEssayDetectionSetAcademicDomainAndCitationStyle(){return this.actionEvents.pipe(Y.h(re.Wh.isSetAcademicDomainAndCitationStyleAction)).subscribe((({citationStyle:e})=>{this._setDocumentCitationStyle(e)}))}_handleAlertResolve(){return this.actionEvents.pipe(Y.h(re.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:g.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(Y.h(re.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>{this._sendFeedback(e,{kind:g.PZ.IGNORE,reason:t})}))}_handleApplyFormSubmit(){return this.actionEvents.pipe(Y.h(re.lY.isAlertApplyFeedbackFormSubmit)).subscribe((e=>{this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{reason:e.reason})),e.alertApplyActionProps.actionsToDispatchAfterSurvey&&e.alertApplyActionProps.actionsToDispatchAfterSurvey.forEach((e=>this.actionEvents.next(e)))}))}_handleGbPromptDismiss(){return this.actionEvents.pipe(Y.h(re.lY.isGbPromptDismiss)).subscribe((e=>this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{gbPrompt:{feedback:g.Kd.DISMISSED,source:e.source,target:e.target,description:e.description}}))))}_handleGbPromptApply(){return this.actionEvents.pipe(Y.h(re.lY.isGbPromptApply)).subscribe((e=>this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{gbPrompt:{feedback:g.Kd.ACCEPTED,source:e.source,target:e.target,description:e.description}}))))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(Y.h(re.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,u.zG)(e.muteCategories([t.categoryId]),l.fold((e=>this._log.error("error calling categories model to commit muted category",e)),u.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(Y.h(re.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlert(e){return(0,u.zG)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:N.l$.sidebar,feedbackSubtype:g.e3.Sidebar,drilldownSuggestionIds:e.drilldownSuggestionIds,reason:e.reason,gbPrompt:e.gbPrompt}),l.fold((e=>this._log.error("error calling alert service to apply an alert",e)),u.Q1))}_handleDrilldown(){return this.actionEvents.pipe(Y.h(re.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:g.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(Y.h(re.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,u.zG)(this._alertsService.dismissBatch(e.alerts,g.e3.Sidebar),l.fold((e=>this._log.error("error calling alert service to dismiss alerts batch",e)),u.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(Y.h(re.lY.isOnboardingClose)).subscribe((e=>(0,u.zG)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,u.zG)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._toneAIChangeToneAlternative,"toneAIChangeToneAlternative"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this._shortenItDismissEdit,"shortenItDismissEdit"],[this.actionEvents.pipe(Y.h(re.lY.isNavigation),V.b((e=>this._navigationEvents.next(e))),P.c(F.E)),"navigationEvents"],...(0,u.zG)(this._sendToUrl,f.fS((0,u.a9)([]))),[this._showSurveyFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],s.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:z.R.isWithAlertsId,what:Ge.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}constructor(e,t,r,n,s,c,d,p,v,x,b,C,S=new D.A,A={bufferTransitions:!0,showGbPrompt:!1},w=u.Q1){(0,i._)(this,"_ops",void 0),(0,i._)(this,"_navigationEvents",void 0),(0,i._)(this,"_cardFactory",void 0),(0,i._)(this,"_alertsService",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_markOnboardingAsSeen",void 0),(0,i._)(this,"_markMuteQuotedAdviceAsDismissed",void 0),(0,i._)(this,"_sendToUrlExperiment",void 0),(0,i._)(this,"_getActiveItemWithAlert",void 0),(0,i._)(this,"_checksFeedCapabilities",void 0),(0,i._)(this,"_platformEnvironment",void 0),(0,i._)(this,"_settings",void 0),(0,i._)(this,"_setDocumentCitationStyle",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_flushCompleteTransition",void 0),(0,i._)(this,"_flushPositionAnimation",void 0),(0,i._)(this,"actionEvents",void 0),(0,i._)(this,"completePositionAnimation",void 0),(0,i._)(this,"changePosition",void 0),(0,i._)(this,"_transitionBuffer",void 0),(0,i._)(this,"_positionAnimationBuffer",void 0),(0,i._)(this,"_startTransitionStateChanges",void 0),(0,i._)(this,"_completeTransitionStateChanges",void 0),(0,i._)(this,"_changePositionEffect",void 0),(0,i._)(this,"_transitionEndStateChanges",void 0),(0,i._)(this,"_switchToNextChanges",void 0),(0,i._)(this,"_dismissMuteQuotedAdvice",void 0),(0,i._)(this,"_changeUserInput",void 0),(0,i._)(this,"_shortenItDismissEdit",void 0),(0,i._)(this,"_focusChecksFeedItem",void 0),(0,i._)(this,"_collapseChecklistItem",void 0),(0,i._)(this,"_toneAIChangeToneAlternative",void 0),(0,i._)(this,"_synfonyDrilldown",void 0),(0,i._)(this,"_synfonyBack",void 0),(0,i._)(this,"_sendToUrl",void 0),(0,i._)(this,"_sendFeedback",void 0),(0,i._)(this,"_showSurveyForm",void 0),(0,i._)(this,"_showSurveyFormEffect",void 0),(0,i._)(this,"_showMutedAlertSuccessEffect",void 0),(0,i._)(this,"_undoMutedAlertEffect",void 0),(0,i._)(this,"_handleAlertIgnore",void 0),(0,i._)(this,"_handleApplyAlerts",void 0),(0,i._)(this,"hovered",void 0),(0,i._)(this,"flushTransitionTo",void 0),(0,i._)(this,"flushPositionAnimation",void 0),this._ops=e,this._navigationEvents=t,this._cardFactory=r,this._alertsService=n,this._alertsReader=s,this._markOnboardingAsSeen=c,this._markMuteQuotedAdviceAsDismissed=d,this._sendToUrlExperiment=v,this._getActiveItemWithAlert=b,this._checksFeedCapabilities=C,this._platformEnvironment=S,this._settings=A,this._setDocumentCitationStyle=w,this._log=h.C8.Logging.getLogger("CardsViewModelImpl",h.zW.i.DEBUG),this._subs=new Z.w.Keeper,this._flushCompleteTransition=new m.x,this._flushPositionAnimation=new m.x,this.actionEvents=new m.x,this.completePositionAnimation=new m.x,this.changePosition=new m.x,this._transitionBuffer=J.F(100).pipe(X.O(0),Q.T(this._flushCompleteTransition)),this._positionAnimationBuffer=J.F(100).pipe(X.O(0),Q.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(Y.h(re.eI.isStartTransitionTo),B.U((e=>t=>we.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(Y.h(re.eI.isCompleteTransitionTo),this._settings.bufferTransitions?q.f(this._transitionBuffer):B.U((e=>[e])),Y.h(I.Dw),B.U((e=>t=>{const r=t.currentLens,n=this._applyCompleteVSChange(r,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(h.zW.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:K.aW.diff(r.items,n.items)}),Ge.nL.Prism.getLens().set(n,t)}))),this._changePositionEffect=this.changePosition.pipe(B.U((({id:e,height:t})=>r=>{const n=(0,u.zG)(L.update(r.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(Me.s.PositionState.changeHeight(e.positionState,t))(e))),l.fold((()=>r.currentLens.items),u.yR));return we.itemsLens.set(n,r)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(q.f(this._positionAnimationBuffer),Y.h(I.Dw),B.U((e=>t=>{const r=t.currentLens.items,n=e.map((e=>[e,!1])).reduce(((e,[t,r])=>(0,u.zG)(L.update(e,t,(e=>this._checksFeedCapabilities.changePosition(Me.s.PositionState.changeAnimationInProgress(e.positionState,r))(e))),l.fold((()=>e),u.yR))),r);return we.itemsLens.set(n,t)}))),this._switchToNextChanges=this.actionEvents.pipe(Y.h((e=>e.type===re.lY.Type.switchToNext)),B.U((()=>e=>e.patch({currentLens:(0,u.zG)(Ge.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):f.YP,f.g_((()=>(0,u.zG)(Ge.nL.getActiveAlert(this._getActiveItemWithAlert)(e),f.g_((()=>{throw new y.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>Ge.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:N.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(Y.h(re.lY.isDismissMuteQuotedAdvice),V.b(this._markMuteQuotedAdviceAsDismissed),B.U((()=>e=>{const t=e.currentLens.items.filter((0,u.ls)(this._checksFeedCapabilities.hasActiveAlert,f.UI((e=>e.alert)),f.Gg(_e.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,u.zG)(L.update(e,t,this._cardFactory.hideMuteQuotedAdvice),l.fold((()=>e),u.yR))),e.currentLens.items);return we.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(Y.h(re.lY.isChangeUserInput),V.b((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),B.U((({cardId:e,userInput:t})=>r=>{const n=(0,u.zG)(r.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(Boolean(t)?f.G(t):f.YP)),l.fold((()=>r.currentLens.items),u.yR));return we.itemsLens.set(n,r)}))),this._shortenItDismissEdit=this.actionEvents.pipe(Y.h(re.ut.isDismissEdit),B.U((({alertId:e,group:t,itemId:r})=>n=>(0,u.zG)(this._alertsService.dismissShortenItTransformGroup(e,t),l.map((e=>({newAlert:e,itemId:r}))),l.chainW((({newAlert:e,itemId:t})=>L.update(n.currentLens.items,t,this._checksFeedCapabilities.updateWithAlerts([e])))),l.fold((e=>(this._log.error("Error updating card/alert with dismissed transform groups.",e),n)),(e=>we.itemsLens.set(e,n))))))),this._focusChecksFeedItem=this.actionEvents.pipe(Y.h(re.lY.isMiniItemClick),B.U((e=>t=>t.patch({currentLens:(0,u.zG)(t.currentLens.items.find((t=>t.id===e.id)),f.g_((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,u.MZ)((0,u.zG)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:N.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(Y.h(re.lY.isChecklistItemCollapseButtonClick),B.U((()=>e=>e.patch({currentLens:Ge.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:N.l$.sidebar})))),this._toneAIChangeToneAlternative=this.actionEvents.pipe(Y.h(re.lY.isToneAIChangeToneAlternativeAction),B.U((({itemId:e,alertId:t,selectedToneAlternativeIdx:r})=>(0,u.zG)(this._alertsService.changeToneAIToneAlternative(t,r),l.map((t=>({newAlert:t,itemId:e})))))),B.U((e=>this._updateToneAICard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(Y.h(re.GM.isDrilldown),B.U((({cardId:e,wordIndex:t})=>r=>(0,u.zG)(L.update(r.currentLens.items,e,(e=>{const r=e;return ke.X.changeSynfonySelection((0,u.zG)(r.synfonySelection,f.fS((()=>[])),(e=>f.G(e.concat([t])))))(r)})),l.fold((()=>r),(e=>Ge.nL.Prism.getLens().compose(Le.v.Prism.items).set(e,r))))))),this._synfonyBack=this.actionEvents.pipe(Y.h(re.GM.isBack),B.U((({cardId:e})=>t=>(0,u.zG)(L.update(t.currentLens.items,e,(e=>{const t=e;return ke.X.changeSynfonySelection((0,u.zG)(t.synfonySelection,f.UI((e=>e.slice(0,-1)))))(t)})),l.fold((()=>t),(e=>Ge.nL.Prism.getLens().compose(Le.v.Prism.items).set(e,t))))))),this._sendToUrl=(0,u.zG)(this._sendToUrlExperiment,f.UI((e=>Object.entries(e).filter((([e])=>"handleGbPrompt"!==e||this._settings.showGbPrompt)).map((([e,t])=>[t(this.actionEvents),e]))))),this._sendFeedback=(e,t)=>(0,u.zG)(e,f.DT(this._alertsReader.isValidForFeedback),f.bw((()=>(0,u.zG)(this._alertsService.applyFeedback(e,(0,o._)((0,a._)({},t),{subtype:g.e3.Sidebar}),N.l$.sidebar),l.fold((e=>this._log.error("error calling alert service to send a feedback",e)),u.Q1))))),this._showSurveyForm=new m.x,this._showSurveyFormEffect=(0,u.zG)(this._showSurveyForm,B.U((e=>t=>we.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,"survey"===e.formType?(0,a._)({type:"feedback_form",formType:"survey",clockwise:!0,survey:e.survey},e.submitActionType===re.lY.Type.alertApplyFormSubmit?{submitActionType:re.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e.alertApplyActionProps}:{submitActionType:re.lY.Type.alertIgnoreFormSubmit}):{type:"feedback_form",formType:"gbPrompt",clockwise:!0,gbPrompt:e.gbPrompt,alertApplyActionProps:e.alertApplyActionProps}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(Y.h(re.lY.isMuteCategoryAction),B.U((e=>t=>we.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(Y.h(re.lY.isUndoMuteCategoryAction),B.U((e=>t=>we.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,u.ls)(Ne((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:g.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(Y.h(re.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this._handleApplyAlerts=(0,u.ls)(Ne((e=>()=>this._applyAlert(e)),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(Y.h(re.lY.isAlertApplyAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(Y.h(re.lY.isHoverAction),V.b((()=>this._ops.flush())),ee.R(((e,t)=>"hover"===t.kind?f.G(t.id):(0,u.zG)(e,f.hX((e=>e!==t.id)))),f.YP),te.B()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleApplyFormSubmit(),this._handleGbPromptDismiss(),this._handleGbPromptApply(),this._handleAlertIgnore(x),this._handleAlertResolve(),this._handleApplyAlerts(x),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleDrilldown(),this._handleSnippetsOpenExternalLink(),this._handleEssayDetectionSetAcademicDomainAndCitationStyle()),(0,u.zG)(p,f.bw((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}}!function(e){e.itemsLens=Ge.nL.Prism.getLens().compose(Le.v.Prism.items);e.Mock=class{constructor(){(0,i._)(this,"animate",p.h.create(!0)),(0,i._)(this,"clockwise",p.h.create(!0)),(0,i._)(this,"toggleAnimations",(()=>this.animate.modify((e=>!e)))),(0,i._)(this,"completePositionAnimation",new m.x),(0,i._)(this,"actionEvents",new m.x),(0,i._)(this,"flushTransitionTo",u.Q1),(0,i._)(this,"sideEffect",{id:"cardsViewModelMock",when:z.R.isWithAlertsId,what:Ge.nL.Effect.Applicator.create(F.E)}),(0,i._)(this,"changePosition",new m.x),(0,i._)(this,"dispose",u.Q1)}};e.Experiments=n}(we||(we={}));const Ne=(e,t,r)=>n=>i=>(0,u.zG)(ze(i,r),d.of,T.chain((e=>(0,u.zG)(n,d.UI((t=>t?f.YP:f.G(e)))))),T.fold((()=>e(i)),(e=>t(e)))),ze=(e,t)=>re.lY.isAlertApplyAction(e)?Pe(e,t):Fe(e),Pe=(e,t)=>(0,u.zG)(e.eligibleForGbPrompt,f.hX((0,u.a9)(t)),f.UI((t=>({id:e.id,formType:"gbPrompt",alertApplyActionProps:e,gbPrompt:t}))),f.vx((0,u.zG)(e.eligibleForSurvey,f.UI((t=>({id:e.id,formType:"survey",submitActionType:re.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e,survey:t})))))),Fe=e=>(0,u.zG)(e.eligibleForSurvey,f.UI((t=>({id:e.id,formType:"survey",submitActionType:re.lY.Type.alertIgnoreFormSubmit,survey:t}))))},81917:(e,t,r)=>{r.d(t,{$y:()=>W});var n,i=r(84910),a=r(78520),o=r(59833),s=r(12518),l=r(53186),c=r(58303),d=r(90023),u=r(93018),m=r(56166),p=r(68717),h=r(17613),g=r(32490),f=r(1747),y=r(4025),v=r(86625);function x(e,{text:t,ops:r}){r.reduce(((t,r,n)=>m.JU.isInsertString(r)?(e.insertString(r.insert,r,n),t):m.JU.isInsertGap(r)?(e.insertGap("",r,n),t):m.JU.isInsert(r)?t:m.JU.isDelete(r)?(e.remove(t.slice(0,r.delete),r,n),t.slice(r.delete)):m.JU.isRetain(r)?(e.retain(t.slice(0,r.retain),r,n),t.slice(r.retain)):(0,h.vE)(r)),t)}function I(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,d.zG)(e,o.Z$,c.g_((()=>{I(t.text)||e.push(t)}),(r=>{r.type===t.type?r.text+=t.text:e.push(t)})))}function C(e){return!0===e.italic?!0===e.bold?"boldItalic":"italic":!0===e.bold?"bold":void 0}function S(e){const{substitutions:t,longestSubstitution:r,inserts:i}=e.reduce(((e,[t,r])=>{const n=t.map((e=>e.text)).join("");return e.substitutions.push(n),e.inserts.push(r),n.length>e.longestSubstitution.length&&(e.longestSubstitution=n),e}),{substitutions:[],inserts:[],longestSubstitution:""}),a=(0,d.zG)(t,l.UI((e=>r.split(e).join(""))));return(0,d.zG)(o.yL(i,a,((e,t)=>(t&&e.push({type:v.GP.Text,text:t,shouldBeCollapsed:!1}),e))),l.nI,y.Yo((()=>new Error("Substitution processing error"))),y.UI((e=>({type:n.Type.Substitution,remove:[{type:v.GP.Delete,text:r,shouldBeCollapsed:!1}],inserts:e}))))}function A(e){return(0,d.zG)(y.vM((()=>(0,d.zG)(e,l.UI((t=>{const r=[[],[]];return x({insertString(e){b(r[1],{type:v.GP.Insert,text:"\n"===e?"¶ ":e,shouldBeCollapsed:!1})},insertGap(){throw new M("Substitution transform contains gap insert",e)},remove(e){b(r[0],{type:v.GP.Delete,text:e,shouldBeCollapsed:!1})},retain(e,{type:t,attributes:n}){if(!m.JU.isOptionalType(t)||0!==r[0].length){const t={type:v.GP.Text,text:e,style:C(n),shouldBeCollapsed:!1};r[0].push(t),r[1].push(t)}}},t),(0,h.kG)(r[0].length>0,"Substituted part is empty"),(0,h.kG)(r[1].length>0,"Inserts are empty"),r}))))),y.tS(S),y.Vn(M.fromError(e)))}function w(e){if(!("list"in e))return c.YP;switch(e.list){case"bullet":case"dashed":case"ordered":return c.G({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.YP}}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.ShortenIt=7]="ShortenIt",e[e.ToneAI=8]="ToneAI",e[e.Citation=9]="Citation",e[e.WritingExpert=10]="WritingExpert"}(t=e.Type||(e.Type={})),(t=e.Type||(e.Type={})).parse=function(e,r){const n=e[0];if(n.isFullSentence)return t.FullSentence;if(c.pC(r.drilldown))return t.Drilldown;if(n.isCitation)return t.Citation;if(n.isShortenIt)return t.ShortenIt;if(n.isToneAI)return t.ToneAI;if(n.isWritingExpert)return t.WritingExpert;switch(n.type){case m.r3.Type.Insert:return t.Insert;case m.r3.Type.Remove:return e.length>1?t.RemoveOr:t.Remove;case m.r3.Type.Substitution:return n.ops.find(m.JU.isInsertGap)?t.OneGap:t.Substitution;default:return(0,h.vE)(n.type)}},e.create=function(e){return t=>{const r=n.Type.parse(t,e);switch(r){case n.Type.Remove:return function(e,t){return(0,d.zG)(y.vM((()=>(0,d.zG)(e,l.UI((r=>{const n=[];return x({insertString(t,{type:r}){if(r===m.JU.Type.Main)throw new M("Remove transform contains main insert",e)},insertGap(){throw new M("Remove transform contains gap insert",e)},retain(e,{type:t,attributes:r}){m.JU.isOptionalType(t)||b(n,{type:v.GP.Text,text:e,style:C(r),shouldBeCollapsed:!1})},remove(e,{type:r}){b(n,{type:r!==m.JU.Type.Main||I(e)&&t?v.GP.Text:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},r),n})),o.xH))),y.tS((0,d.ls)(y.DT((e=>e.length>0),(()=>new M("Remove transform contains no data",e))),y.UI((e=>({type:n.Type.Remove,remove:e}))))))}(t,e.ignoreWhitespaceRemoves);case n.Type.RemoveOr:return function(e,t){return(0,d.zG)(y.vM((()=>(0,d.zG)(e,l.UI((r=>{const n=[];return x({insertString(t,{type:r}){if(r===m.JU.Type.Main)throw new M("Multi-remove transform contains main insert",e)},insertGap(){throw new M("Multi-remove transform contains gap insert",e)},retain(e,{type:t,attributes:r}){m.JU.isOptionalType(t)||b(n,{type:v.GP.Text,text:e,style:C(r),shouldBeCollapsed:!1})},remove(e,{type:r}){b(n,{type:r!==m.JU.Type.Main||I(e)&&t?v.GP.Text:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},r),n}))))),y.tS((0,d.ls)(y.DT((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new M("Incomplete multi-remove",e))),y.UI((e=>({type:n.Type.RemoveOr,removes:e}))))))}(t,e.ignoreWhitespaceRemoves);case n.Type.Insert:return function(e){return(0,d.zG)(y.vM((()=>(0,d.zG)(e,l.UI((t=>{const r=[];return x({insertString(e,{type:t}){b(r,{type:m.JU.isOptionalType(t)?v.GP.Text:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("Insert transform contains gap insert",e)},retain(e,{type:t,attributes:n}){(!m.JU.isOptionalType(t)||r.length>0)&&b(r,{type:v.GP.Text,text:e,style:C(n),shouldBeCollapsed:!1})},remove(t,{type:r}){if(r===m.JU.Type.Main)throw new M("Insert transform contains main delete",e)}},t),r}))))),y.tS((0,d.ls)(l.nI,y.Yo((()=>new M("Incomplete insert",e))),y.UI((e=>({type:n.Type.Insert,inserts:e}))))))}(t);case n.Type.Substitution:return A(t);case n.Type.Drilldown:return function(e,t){return(0,d.zG)(A(e),y.tS((r=>(0,d.zG)(y.vM((()=>{(0,h.kG)(t.length>0,"Drilldown transform - empty drilldown tree");return{inserts:(0,d.zG)(t,l.UI(e)),remove:r.remove,type:n.Type.Drilldown};function e([t,n]){return(0,h.kG)(void 0!==r.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:r.inserts[t],subLabels:n.map(e)}}})),y.Vn(M.fromError(e))))))}(t,(0,d.zG)(e.drilldown,c.fS((()=>f.H5.empty))));case n.Type.FullSentence:return function(e){return(0,d.zG)(e,y.DT((e=>1===e.length),(()=>new M("Expected full-sentence transform to have 1 alternative",e))),y.UI((0,d.ls)(l.YM,(t=>{let r={blockStart:0,ops:[],kind:v._k.PlainText};return x({insertString(e,t){const n=e.split("\n");if(1===n.length)r.ops.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,d.zG)(t.attributes,w,c.g_((()=>d.Q1),(({kind:e,indent:t})=>()=>{r.ops.splice(r.blockStart,1,{type:v.GP.List,kind:e,indent:t}),r={kind:v._k.WithFormatting,ops:r.ops,blockStart:r.blockStart}})));for(let t=0,i=n.length-1;t<=i;t++){const a=n[t];a&&r.ops.push({type:v.GP.Insert,text:a,shouldBeCollapsed:!1}),t<i&&(e(),r.blockStart=r.ops.length,r.ops.push({type:v.GP.Insert,text:"\n",shouldBeCollapsed:!1}))}}},insertGap(){throw new M("Full sentence transform contains gap insert",e)},retain(e,t){r.ops.push({type:v.GP.Text,text:e,shouldBeCollapsed:_(t.type,e)})},remove(e,t){r.ops.push({type:v.GP.Delete,text:e,shouldBeCollapsed:_(t.type,e)})}},t),r}))),y.tS((0,d.ls)(c.DT((e=>e.ops.length>0)),y.Yo((()=>new M("Got empty full sentence transform",e))),y.UI((({ops:e,kind:t})=>({type:n.Type.FullSentence,ops:e,kind:t}))))))}(t);case n.Type.OneGap:return function(e){return(0,d.zG)(y.vM((()=>((0,h.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,d.zG)(e,l.YM,(e=>{const t=[],r=[];let n=!1;return x({insertString(e,{type:i}){b(n?r:t,{type:m.JU.isOptionalType(i)?v.GP.Text:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){(0,h.kG)(!n,"One gap transform does not contain exactly one gap insert"),n=!0},retain(e,{type:i}){const a=n?r:t;(!m.JU.isOptionalType(i)||a.length>0)&&b(a,{type:v.GP.Text,text:e,shouldBeCollapsed:!1})},remove:d.Q1},e),(0,h.kG)(n,"One gap transform does not contain exactly one gap insert"),(0,h.kG)(t.length>0||r.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:r}}))))),y.Pd(M.fromError(e),(({left:e,right:t})=>({type:n.Type.OneGap,left:e,right:t}))))}(t);case n.Type.ShortenIt:return function(e){return(0,d.zG)(e,y.DT((e=>1===e.length),(()=>new M("Expected shorten-it transform to have 1 alternative",e))),y.tS(l.fw(y.wE)(k)),y.UI(l.YM),y.UI((e=>({type:n.Type.ShortenIt,ops:e}))))}(t);case n.Type.ToneAI:return function(e){return(0,d.zG)(y.vM((()=>(0,d.zG)(e,l.UI((t=>{const r=[];return x({insertString(e){b(r,{type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("ToneAI transform should not include gap insert",e)},retain(e){b(r,{type:v.GP.Text,text:e,shouldBeCollapsed:!1})},remove(e){b(r,{type:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},t),r}))))),y.tS((0,d.ls)(l.nI,y.Yo((()=>new M("Incomplete ToneAI transform",e))),y.UI((e=>({type:n.Type.ToneAI,transformParts:e}))))))}(t);case n.Type.Citation:return function(e){return(0,d.zG)(e,y.DT((e=>1===e.length),(()=>new M("Expected citation transform to have 1 alternative",e))),y.UI(l.YM),y.tS(y.DT((e=>e.isCitation),(()=>new M("Expected citation to have isCitation set to true",e)))),y.tS(E),y.UI((e=>({ops:e,type:n.Type.Citation}))))}(t);case n.Type.WritingExpert:return function(e){return(0,d.zG)(e,y.DT((e=>1===e.length),(()=>new M("Expected citation transform to have 1 alternative",e))),y.UI(l.YM),y.tS(y.DT((e=>e.isWritingExpert),(()=>new M("Expected citation to have isWritingExpert set to true",e)))),y.tS(T),y.UI((e=>({ops:e,type:n.Type.WritingExpert}))))}(t);default:return(0,h.vE)(r)}}}}(n||(n={}));const _=(e,t)=>e===m.JU.Type.Optional&&t.length>3;function k(e){const t=[];return x({insertString(e,{group:r}){t.push({type:v.GP.Insert,text:e,group:r,shouldBeCollapsed:!1})},insertGap(){throw new M("ShortenIt transform contains gap insert",[e])},retain(e,{group:r}){t.push({type:v.GP.Text,text:e,group:r,shouldBeCollapsed:!1})},remove(e,{group:r}){t.push({type:v.GP.Delete,text:e,shouldBeCollapsed:!0,group:r})}},e),(0,d.zG)(t,y.DT((e=>e.length>0),(()=>new M("Got empty ShortenIt transform",[e]))))}function E(e){const t=[];return x({insertString(e){t.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("Citation transform contains gap insert",[e])},retain(e,{attributes:r}){t.push({type:v.GP.Text,text:e,style:C(r),shouldBeCollapsed:!1})},remove(e){t.push({type:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},e),(0,d.zG)(t,y.DT((e=>e.length>0),(()=>new M("Got empty Citation transform",[e]))))}function T(e){const t=[];return x({insertString:e=>{t.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap:()=>{throw new M("Citation transform contains gap insert",[e])},retain:(e,{attributes:r})=>{t.push({type:v.GP.Text,text:e,style:C(r),shouldBeCollapsed:!1})},remove:d.Q1},e),(0,d.zG)(t,y.DT((e=>e.length>0),(()=>new M("Got empty Citation transform",[e]))))}class M extends h.sH{static fromError(e){return t=>{const r=new M(t.message,e);return r.stack=t.stack,r}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(m.JU.anonymize)))}`}constructor(e,t){super(e),(0,g._)(this,"alternatives",void 0),this.alternatives=t}}var G=r(19813),L=r(97767);const D=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,h.kG)((0,L.Dw)(e),"transforms should have at least one element");const[r]=e;return N(r)>-1?v.nV.create(z(r),e.map(P),t,!0):v.zE.create(e,t)}(e.content.map((e=>[{type:v.GP.Insert,text:e,shouldBeCollapsed:!1}])),t);case"transform":return function(e,t){(0,h.kG)((0,L.Dw)(e),"transforms should have at least one element");const[r]=e;return N(r)>-1?v.nV.create(z(r),e.map(P),t):function(e){return 2===e.length&&U(e)}(e)?v.fi.create(e[0],e[1],t):U(e)?v.zE.create(e,t):v.n6.create(e,t)}(e.content.map(B),t);default:return(0,h.vE)(e.kind)}};function N(e){return e.findIndex((e=>"arrow"===e.type))}function z(e){return e.slice(0,N(e))}function P(e){return e.slice(N(e)+1)}function F(e){return e.every((e=>"delete"!==e.type))}function U(e){return e.every(F)}function R(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const O=[R("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:v.GP.Delete,text:e[2],shouldBeCollapsed:!1}))),R("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:v.GP.Insert,text:e[2],shouldBeCollapsed:!1}))),R("(→)",(e=>({type:v.GP.Arrow}))),R("([^<>→]+)",(e=>({type:v.GP.Text,text:e[1],shouldBeCollapsed:!1})))];function B(e){function t(e){for(const t of O){const r=e.match(t.re);if(null!==r)return[t.createResult(r),r[r.length-1]]}}function r(t){let r=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((e=>t.indexOf(e)));if(r.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(r=r.filter((e=>e>0)),(0,L.Dw)(r)){const e=Math.min(...r);return[{type:v.GP.Text,text:t.substring(0,e),shouldBeCollapsed:!1},t.substring(e)]}return[{type:v.GP.Text,text:t,shouldBeCollapsed:!1},""]}const n=[];let i,a=e,o=!1,s=0;for(;(0,L.Dw)(a);){const e=t(a);void 0===e&&(o=!0);const[l,c]=e||r(a);i&&i.type===v.GP.Text&&l.type===v.GP.Text?i.text+=l.text:(i&&i.type===v.GP.Delete&&l.type===v.GP.Insert&&(n.push({type:v.GP.Arrow}),s++),n.push(l)),l.type===v.GP.Arrow&&s++,i=n[n.length-1],a=c}return(o||!(0,L.Dw)(n)||s>1)&&G.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:n.length,arrowCount:s}),n}const $={ignoreWhitespaceRemoves:!0},W=(0,d.ls)((function(e,t=$){return r=>(0,d.zG)(r.alternatives,j(e,{isFullSentence:p.eT.isFullSentence(r.cardType),isShortenIt:p.eT.isShortenIt(r.cardType),isToneAI:p.eT.isToneAI(r.cardType),isCitation:p.eT.isCitation(r.cardType),isWritingExpert:p.eT.isWritingExpert(r.cardType)}),s.chain(n.create((0,a._)((0,i._)({},t),{drilldown:r.drilldown}))))}),(e=>t=>(0,d.zG)(t.content,s.fold((e=>s.right(D(e,t.todo))),(0,d.ls)(e,s.bimap((e=>({kind:"default",error:e})),(e=>function(e,t){switch(e.type){case n.Type.Drilldown:return v.ey.create(e.remove,e.inserts,t);case n.Type.Substitution:return v.nV.create(e.remove,e.inserts,t);case n.Type.Insert:return 2===e.inserts.length?v.fi.create(e.inserts[0],e.inserts[1],t):v.zE.create(e.inserts,t);case n.Type.Remove:return v.n6.create([e.remove],t);case n.Type.RemoveOr:return v.fz.create(e.removes,t);case n.Type.FullSentence:return function(e,t){switch(e.kind){case v._k.WithFormatting:return v.i3.createWithFormatting(e.ops,t);case v._k.PlainText:return v.i3.createPlainText(e.ops,t);default:return(0,h.vE)(e)}}(e,t);case n.Type.Citation:return function(e,t){return{type:v.b$.Type.Citation,tooltipText:t,labels:e.ops}}(e,t);case n.Type.OneGap:return v.G7.create(e,t);case n.Type.ShortenIt:return function(e,t){return{type:v.b$.Type.ShortenIt,tooltipText:t,labels:e.ops}}(e,t);case n.Type.ToneAI:return function(e,t){return{type:v.b$.Type.ToneAI,tooltipText:t,labels:e.transformParts}}(e,t);case n.Type.WritingExpert:return function(e,t){return{type:v.b$.Type.WritingExpert,tooltipText:t,labels:e.ops}}(e,t);default:return(0,h.vE)(e)}}(e,t.todo))))))));function j(e,t){const r=(e=>(0,d.ls)(e,(e=>e.delta.reduce(((e,t)=>u.s.isInsertString(t)?e+t.insert:e),""))))(e);return(0,d.ls)(function(e,{isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:i,isWritingExpert:a}){return s=>(0,d.zG)(s,o.DZ((o=>(0,d.zG)(o.type,c.UI((s=>{if(m.r3.hasOptionalContext(o.ops)){const[l,...c]=o.ops,d=m.JU.length(l);return{text:e(d,o.lengthAffected-d),ops:c,type:s,isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:i,isWritingExpert:a}}return{text:e(0,o.lengthAffected),ops:o.ops,type:s,isFullSentence:t,isShortenIt:r,isToneAI:n,isCitation:i,isWritingExpert:a}}))))),l.nI)}(r,t),s.fromOption((()=>new Error("Alternative array is empty"))))}},86625:(e,t,r)=>{r.d(t,{G7:()=>p,GP:()=>n,_k:()=>u,b$:()=>i,ey:()=>c,fi:()=>l,fz:()=>s,i3:()=>m,n6:()=>o,nV:()=>d,zE:()=>a});var n,i,a,o,s,l,c,d,u,m,p,h=r(84910),g=r(78520),f=r(21147),y=r(90023),v=r(9141),x=r(97767);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(n||(n={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt",e[e.ToneAI=9]="ToneAI",e[e.Citation=10]="Citation",e[e.WritingExpert=11]="WritingExpert"}(t=e.Type||(e.Type={}));e.eq=f.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels)));let r;!function(e){e.eq=f.Uz((e=>JSON.stringify(e.labels)))(v.Eq)}(r=e.ShortenIt||(e.ShortenIt={}));e.isFullSentence=e=>e.type===i.Type.FullSentence,e.isOneGap=e=>e.type===i.Type.OneGap,e.isShortenIt=e=>e.type===i.Type.ShortenIt,e.isToneAI=e=>e.type===i.Type.ToneAI,e.isRegular=e=>(0,y.ff)((0,x.Kg)(i.isFullSentence,i.isOneGap,i.isShortenIt,i.isToneAI))(e)}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(o||(o={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(s||(s={})),function(e){e.create=(e,t,r)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:r})}(l||(l={})),function(e){e.create=function(e,t,r){return{type:i.Type.Drilldown,original:e,labels:t,tooltipText:r}};e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const r=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:r.subLabels,original:r.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(x.Sm,0)>30}e.create=function(e,r,n,a){return{type:i.Type.Arrow,original:e,labels:r,tooltipText:n,onlyReplacements:!0===a||t(e,r[0])}}}(d||(d={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(u||(u={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.WithFormatting}}}(m||(m={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>(0,g._)((0,h._)({},e),{type:n.Text}))),right:e.right.map((e=>(0,g._)((0,h._)({},e),{type:n.Text})))},tooltipText:t}}}(p||(p={}))},57326:(e,t,r)=>{r.d(t,{X:()=>_});var n=r(32490),i=r(84910),a=r(78520),o=r(12518),s=r(21147),l=r(24332),c=r(58303),d=r(14944),u=r(90023),m=r(19813),p=r(17613),h=r(97767),g=r(68717),f=r(59179),y=r(24666),v=r(704),x=r(90572),I=r(46025),b=r(86625),C=r(48922),S=r(95894),A=r(42596),w=r(93167);class _{get activeAlertRemoved(){return A.i.activeAlertRemoved(this)}get scheduledToDispose(){return A.i.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return _.hashCode(this)}equals(e){return _.eq.equals(this,e)}toJSON(){return(0,a._)((0,i._)({},this),{renderOptions:w.j.toJSON(this.renderOptions)})}constructor(e,t,r,i,a,o,s,l,d,m,p,h,g,f,y,v){(0,n._)(this,"id",void 0),(0,n._)(this,"alerts",void 0),(0,n._)(this,"activeAlertIndex",void 0),(0,n._)(this,"activeHighlightIndex",void 0),(0,n._)(this,"positionState",void 0),(0,n._)(this,"visualState",void 0),(0,n._)(this,"meta",void 0),(0,n._)(this,"lensId",void 0),(0,n._)(this,"renderOptions",void 0),(0,n._)(this,"muteCategory",void 0),(0,n._)(this,"order",void 0),(0,n._)(this,"initialAlertId",void 0),(0,n._)(this,"removedAlertsIds",void 0),(0,n._)(this,"cachedTransform",void 0),(0,n._)(this,"userInput",void 0),(0,n._)(this,"synfonySelection",void 0),(0,n._)(this,"kind",void 0),(0,n._)(this,"activeAlert",void 0),(0,n._)(this,"transform",void 0),this.id=e,this.alerts=t,this.activeAlertIndex=r,this.activeHighlightIndex=i,this.positionState=a,this.visualState=o,this.meta=s,this.lensId=l,this.renderOptions=d,this.muteCategory=m,this.order=p,this.initialAlertId=h,this.removedAlertsIds=g,this.cachedTransform=f,this.userInput=y,this.synfonySelection=v,this.kind=_.Kind,this.activeAlert=A.i.getActiveAlert(this),this.transform=(0,u.zG)(this.cachedTransform,c.UI((e=>e.labels)))}}!function(e){e.Kind="AlertCard",e.isPriority=e=>C.$.isPriority(e.activeAlert),e.updateAlerts=(e,t,r,n)=>i=>new _(i.id,e,r,n,i.positionState,i.visualState,i.meta,i.lensId,i.renderOptions,i.muteCategory,i.order,i.initialAlertId,t,i.cachedTransform,i.userInput,i.synfonySelection),e.updateUserInput=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,e,t.synfonySelection),e.changeVisualState=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,e,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changePosition=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,e,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeMeta=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,e,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeTransform=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,e,t.userInput,t.synfonySelection),e.changeSynfonySelection=e=>t=>new _(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,e),e.canHydrate=e=>!(e.meta.checking!==S.n.CheckingState.Idle||A.i.activeAlertRemoved(e));let t,r;function n(e){return e.activeAlert.type===C.$.Type.writingExpertVbar||e.activeAlert.type===C.$.Type.writingExpertWithTeaser}e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(r,n)=>i=>{const a=new Set(r.map((e=>e.id)));return A.i.hasAnyOfAlerts(a)(i)?e.remove(i,[i.activeAlert],(0,u.zG)(n,c.UI((e=>t.compare(i,e)>0)),c.fS(u.W8))):i};e.getChangePosition=function(e){return{changePosition:t=>r=>e.changePosition(r,t)}},e.getAnimatable=function(e){return{completeTransition:t=>r=>e.completeTransition(r,t),transitionTo:t=>r=>e.transitionTo(r,t),changeVisualState:t=>r=>e.changeVisualState(r,t)}},e.getRemove=function(e){return{remove:(t,r)=>n=>t(n)?e.remove(n,[n.activeAlert],r(n)):n}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>r=>e.updateWith(r,t)}},e.getSelect=function(e){return{select:(t,r)=>n=>e.selectFirstAlert(n,t,r),selectByAlert:(t,r,n)=>i=>e.select(i,r,t,n),unselect:(t,r)=>n=>e.unselect(n,t,r)}},e.getCloneable=function(){return{clone:e=>new _(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(r=e.Type||(e.Type={})),(0,p.L0)(null),e.isSuperView=function(e){return e.activeAlert.type===C.$.Type.super},e.isTakeawayView=function(e){return e.activeAlert.type===C.$.Type.takeaway},e.isSynfonyView=function(e){return e.activeAlert.alertType===g.bZ.Type.Synfony},e.isShortenItView=function(e){return e.activeAlert.type===C.$.Type.shortenIt},e.isToneAIView=function(e){return e.activeAlert.type===C.$.Type.toneAI},e.isEthicalAIView=function(e){return e.activeAlert.type===C.$.Type.ethicalAI},e.isSuggestedSnippetView=function(e){return e.activeAlert.type===C.$.Type.suggestedSnippet},e.isKnowledgeHubSuggestedTermView=function(e){return e.activeAlert.type===C.$.Type.knowledgeHubSuggestedTerm},e.isDefaultView=function(e){return e.activeAlert.type===C.$.Type.default||n(e)},e.isWritingExpertView=n,e.match=function(e){return t=>{switch(t.activeAlert.type){case C.$.Type.super:return o.right(e.super(t));case C.$.Type.takeaway:return o.right(e.takeaway(t));case C.$.Type.synfony:return o.right(e.synfony(t));case C.$.Type.shortenIt:return o.right(e.shortenIt(t));case C.$.Type.toneAI:return o.right(e.toneAI(t));case C.$.Type.ethicalAI:return o.right(e.ethicalAI(t));case C.$.Type.suggestedSnippet:return o.right(e.suggestedSnippet(t));case C.$.Type.knowledgeHubSuggestedTerm:return o.right(e.knowledgeHubSuggestedTerm(t));case C.$.Type.default:case C.$.Type.writingExpertVbar:case C.$.Type.writingExpertWithTeaser:return o.right(e.default(t));case C.$.Type.plagiarism:case C.$.Type.premium:return o.left(new Error(`Cannot match a card type with alert: [${JSON.stringify({lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType},null,2)}]`));default:return(0,p.L0)(t.activeAlert)}}};e.eq=A.i.eq,e.hashCode=e=>(0,I.NO)({itemHashCode:A.i.hashCode(e),synfonySelection:(0,u.zG)(e.synfonySelection,c.fS((()=>[])),(e=>e.join(",")))});const i=d.iP();e.ord=(0,l.g_)(i)([(0,u.zG)(d.Mh,d.Uz((e=>e.order))),(0,u.zG)(d.r9,d.Uz((e=>e.initialAlertId)))]);let a;function w(e){return e.activeAlert.gbPrompt}e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,u.zG)(e.from,c.Gg((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=s.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(a=e.Transition||(e.Transition={})),e.hasTransform=function(e){return c.pC(e.transform)},e.hasFullSentenceTransform=function(e){return(g.eT.isFullSentence(e.activeAlert.extraProperties.cardType)||g.eT.isWritingExpert(e.activeAlert.extraProperties.cardType))&&(0,u.zG)(e.transform,c.Gg(b.b$.isFullSentence))},e.hasWritingExpertTransform=function(e){return g.eT.isWritingExpert(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,u.zG)(e.transform,c.Gg(b.b$.isOneGap))},e.hasSynfonyTransform=function(e){return g.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.hasCitationTransform=function(e){return g.eT.isCitation(e.activeAlert.extraProperties.cardType)},e.isCitationDetectionCard=function(e){return g.eT.isCitationDetection(e.activeAlert.extraProperties.cardType)},e.isTakeaway=function(e){return C.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return g.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.isEligibleForAcceptSurvey=function(e){return e.activeAlert.acceptSurvey},e.isEligibleForGbPrompt=w,e.hasGbPrompt=function(e){return(0,u.zG)(w(e),c.Gg(Boolean))},e.hasBackgroundGbPrompt=function(e){return(0,u.zG)(w(e),c.Gg((({promptType:e})=>"background"===e)))},e.hasRedirectGbPrompt=function(e){return(0,u.zG)(w(e),c.Gg((({promptType:e})=>"redirect"===e)))},e.miniTitle=function(e,t){return C.$.isTakeaway(e.activeAlert)&&c.Wi(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle};e.useCardStates=e=>({isChecking:e.pipe(f.U((e=>e.meta.checking===S.n.CheckingState.Checking)),y.x(),v.shareReplay({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(f.U((e=>e.meta.checking===S.n.CheckingState.Full)),y.x(),v.shareReplay({bufferSize:1,refCount:!0})),transform:e.pipe(f.U((({transform:e})=>e)),x.h(c.pC),v.skipBy(c.Eh(b.b$.eq)))}),e.foldCard=o.getOrElse((e=>(k("CardComponent").error("Got an unexpected card type",e),null)));const k=(0,h.HP)(m.C8.Logging.getLogger)}(_||(_={}))},95894:(e,t,r)=>{r.d(t,{n:()=>n});var n,i=r(32490),a=r(11953),o=r(46025);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class r{equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,o.NO)({percentile:a.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}constructor(e,t,r,n,a){(0,i._)(this,"percentile",void 0),(0,i._)(this,"explanation",void 0),(0,i._)(this,"checking",void 0),(0,i._)(this,"ranges",void 0),(0,i._)(this,"showMuteQuotedAdvice",void 0),this.percentile=e,this.explanation=t,this.checking=r,this.ranges=n,this.showMuteQuotedAdvice=a}}e.Impl=r;e.empty=(e="",n=a.g.MIN,i=t.Idle,o=[])=>new r(n,e,i,o,!1),e.create=({explanation:e="",percentile:n=a.g.MIN,checking:i=t.Idle,ranges:o=[]})=>new r(n,e,i,o,!1)}(n||(n={}))},19103:(e,t,r)=>{r.d(t,{R:()=>n});var n,i=r(84910),a=r(78520),o=r(58303),s=r(14944),l=r(90023),c=r(9141),d=r(17613),u=r(68717),m=r(48922),p=r(57326),h=r(95894),g=r(30008),f=r(42596),y=r(48746);!function(e){e.Kind="AlertsBundle";e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title};e.ord=(0,l.zG)(s.Mh,s.Uz((0,l.ls)((e=>e.activeAlert.bundleInfo),o.g_((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank)))));var t=e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,d.vE)(e.visualState.transition.type)}},r=(e.getAlertOutcomeBundle=e=>(0,l.zG)(e.bundleInfo,o.g_((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>f.i.eq.equals(e,t)&&o.Eh(c.Eq).equals(e.lensId,t.lensId)});let v;!function(e){const t=e=>(t,a)=>(0,i._)({id:t,kind:n.Kind,bundleInfo:e,activeAlert:f.i.getAlertByIndex(a.activeAlertIndex,a.alerts),transform:(0,l.zG)(a.cachedTransform,o.UI((e=>e.labels))),equals(e){return r.equals(this,e)},hashCode(){return f.i.hashCode(this)}},a);e.create=function(e,r,i,a){const s=k.getAnimatable(e).changeVisualState,c=e=>g.Mq.getCreate(t(e),r,s,a,i),p=x(i);return{create:e=>(t,r,n,a,s,l,d)=>c(s)(t,r,n,a,g.Mq.getApplicableCardMeta(r[n],l,i),e,o.G(l),d),createAdded:e=>(t,r,n,a)=>{const s=y.o.VisualState.initial({type:"added",clockwise:!0},!0);return c(r)(t,n,0,0,g.Mq.getApplicableCardMeta(n[0],s,i),e,o.G(s),a)},createFocused:e=>(t,r,n,a,s)=>{const l=y.o.VisualState.initial({type:"focused",clockwise:!0},!0);return c(r)(t,n,a,0,g.Mq.getApplicableCardMeta(n[a],l,i),e,o.G(l),s)},createRendered:e=>(t,r,n,a)=>{const s=y.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return c(r)(t,n,0,0,g.Mq.getApplicableCardMeta(n[0],s,i),e,o.G(s),a)},updateWith:(t,r)=>i=>{(0,d.kG)(t.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const a=new Set(t.map((e=>e.id))),o=new Set(i.removedAlertsIds);a.forEach((e=>{o.delete(e)}));const s=i.alerts.filter((e=>!a.has(e.id))).concat(t.map(m.$.fromModel)).sort(r.compare);return(0,l.zG)(i,p(s,o,f.i.getIndexByAlert(i.activeAlert.id,s)),n.getCardHydrator(e))}}}}(v=e.ItemFactory||(e.ItemFactory={}));const x=e=>(t,r,n)=>o=>{const s=f.i.getAlertByIndex(n,t),l=m.$.isApplicableAlert(s)?g.Mq.getApplicableCardMeta(s,o.visualState,e):h.n.empty(void 0);return(0,a._)((0,i._)({},o),{alerts:t,activeAlert:s,meta:l,removedAlertsIds:r,activeAlertIndex:n})};var I=e.changePosition=e=>t=>(0,a._)((0,i._)({},t),{positionState:e}),b=e.updateVisualState=e=>t=>(0,a._)((0,i._)({},t),{visualState:e}),C=e.getCardHydrator=e=>g.Mq.getCardHydrator((e=>e.cachedTransform),p.X.canHydrate,A,e),S=e.changeUserInput=e=>t=>(0,a._)((0,i._)({},t),{userInput:e});const A=e=>t=>(0,a._)((0,i._)({},t),{cachedTransform:e,transform:(0,l.zG)(e,o.UI((e=>e.labels)))}),w=e=>t=>(0,a._)((0,i._)({},t),{meta:e});e.unselect=g.Mq.getUnselectItem(b,I);var _=e.getSelectByAlert=(e,t,r)=>g.Mq.getSelectByAlert(x(t),S,b,I,w,r,e,t);e.getSelect=(e,t,r)=>g.Mq.getSelectFirstAlert(_(e,t,r));let k;!function(e){function r(e){const t=g.Mq.getChangeVisualState(b,C(e));return{completeTransition:e=>r=>t(y.o.VisualState.complete(r.visualState,e))(r),transitionTo:g.Mq.getTransitionTo(t,I),changeVisualState:t}}e.getAnimatable=r;var n=e.getRemove=(e,t)=>g.Mq.getRemove(x(e),r(t).transitionTo);e.getUpdatableWithAlertsCapability=(e,n)=>i=>(0,l.ls)(e.updateWith(i,u.h$.ord),(e=>t(e)?e:r(n).transitionTo({type:"added",clockwise:!0})(e))),e.getRemoveAlertsCapability=(e,t,r,i)=>(a,s)=>{const c=_(e,t,C(r)),d=g.Mq.getSelectNextAlert(g.Mq.getCardSelections(e),c);return e=>{const c=new Set(a.map((e=>e.id)));if(!f.i.hasAnyOfAlerts(c)(e))return e;const u=n(t,r)(a,(0,l.zG)(s,o.UI((t=>i.compare(e,t)>0)),o.fS(l.W8)))(e);return(0,l.zG)(s,o.Gg((t=>t.id===e.id)))?d(i)(u):u}}}(k=e.Capabilities||(e.Capabilities={}))}(n||(n={}))},96030:(e,t,r)=>{r.d(t,{Dv:()=>D,Py:()=>O,VC:()=>N,sR:()=>B,u0:()=>z,vM:()=>R});var n=r(32490),i=r(84910),a=r(78520),o=r(12518),s=r(24332),l=r(90023),c=r(13391),d=r(19813),u=r(52303),m=r(17613),p=r(97767),h=r(91817),g=r(14146),f=r(68717),y=r(36355),v=r(78129),x=r(14969),I=r(59179),b=r(954),C=r(90572),S=r(20161),A=r(704),w=r(31391),_=r(64271),k=r(63532),E=r(77400),T=r(10883),M=r(9761),G=r(8080),L=r(80936);const D=(e,t,r,n=(()=>u.YP))=>i=>{if(!e(i))return t(i);const{currentLens:a}=i;return a.kind===M._L.abstract?u.YP:(0,l.zG)(u.DT(M.nL.hasItems)(i),u.tS((e=>r.findNextAlert(e.currentLens))),u.wp((()=>n(i))),u.UI(L.l.toLensAlert))},N=(e,t,r,n,i=G.v.WithSuccess.State.isInGlobalSuccess(n),a=(()=>!0))=>o=>{const{currentLens:s}=o;return s.kind===M._L.abstract?u.YP:s.kind===M._L.persistent?(0,l.zG)(u.DT(M.nL.hasItems)(o),u.tS((e=>n.getActiveAlert(e.currentLens))),u.g_((()=>M.nL.hasItems(o)?n.findNextAlert(o.currentLens):u.YP),(t=>e.findNextAlertInTextByLens(t,(0,l.MZ)(o.currentLens)))),u.wp((()=>a()&&(i(o)||y.R.isOutcomeId(o.currentLens.id)&&e.hasZeroFreeAlerts(r))?e.findPremiumAlert():u.YP)),u.UI(L.l.toLensAlert)):(0,l.zG)((i=>{const a=u.DT(M.nL.hasItems)(i);return(0,l.zG)(a,u.tS((e=>n.findNextAlert(e.currentLens))),u.UI(L.l.toLensAlert),u.wp((()=>(0,l.zG)(a,u.tS((e=>n.getActiveAlert(e.currentLens))),u.g_((()=>t(f.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,f.bZ.isApplicableAlert))),u.UI((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:r.get()})))))))})(o),u.wp((()=>(0,l.zG)(e.findPremiumAlert(),u.UI(L.l.toLensAlert)))))};function z(e,t){return(r,n)=>t.findClosestAlertHighlight(e(n),r)}const P=e=>e.pipe(v.G(),x.P((([e,t])=>"idle"!==e&&"idle"===t)),I.U((()=>{}))),F=e=>e.pipe(b.O("idle"),v.G(),x.P((([e,t])=>"idle"===t)),C.h((([e])=>"full"===e)),I.U((()=>{}))),U=(e,t)=>{const r=P(e);return t.bigPaste.pipe(S.w((()=>r)),I.U((()=>{})),A.shareReplay({bufferSize:1,refCount:!0}))};class R{dispose(){this._subs.dispose()}constructor(e,t){(0,n._)(this,"_subs",new w.w.Keeper),(0,n._)(this,"firstOpeningOfDocumentWithAlerts",c.h.create(!1));const r=P(e),i=(e=>(0,l.zG)(e,C.h((e=>M.nL.hasCards(e)&&u.pC(M.In.getActiveItem(e.currentLens)))),I.U((()=>{}))))(t);this._subs.push((0,l.zG)(t,x.P((e=>M.nL.hasCards(e))),S.w((()=>(0,l.zG)(_.T(i,r),I.U(l.jv),b.O(!0)))),k.b(E.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}}var O,B;!function(e){const t=(0,p.HP)(d.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,r,n,i,a)=>{const o=P(r),s=F(r),c=U(r,i);return(0,l.zG)(_.T(o,s,c),T.M(e,a,n),C.h((([e,t,r,n])=>n&&!r&&M.nL.hasCards(t)&&u.Wi(M.In.getActiveItem(t.currentLens)))),I.U((()=>M.nL.Effect.FocusBehavior.focusFirst)),k.b((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const r=(0,l.zG)(e,I.U((e=>t=>r=>{switch(t.kind){case M.nL.Effect.FocusBehaviorType.noFocus:return r;case M.nL.Effect.FocusBehaviorType.unFocus:return M.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case M.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(e.findFirstAlert(r.currentLens),u.g_((()=>r),(t=>M.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case M.nL.Effect.FocusBehaviorType.focusNext:return(0,l.zG)(e.findNextAlert(r.currentLens),u.g_((()=>r),(t=>M.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),r))));case M.nL.Effect.FocusBehaviorType.focusAlert:return M.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,m.vE)(t)}})(t)));return{id:"autoFocusEffect",when:y.R.isWithAlertsId,what:M.nL.Effect.ItemsApplicator.create(r)}};var r=e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),n=e.whenShouldVerifyCurrentLens=(e,r)=>n=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!M.nL.hasItems(n)||!r.shouldVerify(n.currentLens))&&((0,l.zG)(M.nL.getActiveAlert(e)(n),u.hX(f.bZ.isInDuplicatedState),u.g_((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},h=e.whenNoActiveCard=e=>e.currentLens.items.size>0&&u.Wi(M.In.getActiveItem(e.currentLens)),g=e.behaviorToEffect=e=>r=>n=>(0,l.zG)(r(n)?e(n):u.YP,u.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`))));e.getDefaultBehavior=(e,t)=>(0,l.zG)([(0,l.zG)(n(e,t),g((()=>u.G(M.nL.Effect.FocusBehavior.focusNext))))],(0,s.g_)((0,s._e)(u.gW())())),e.getAlwaysFocusBehavior=(e,t)=>(0,l.zG)([(0,l.zG)((0,p.Kg)(h,n(e,t)),g((()=>u.G(M.nL.Effect.FocusBehavior.focusNext))))],(0,s.g_)((0,s._e)(u.gW())())),e.getFocusFromCacheBehavior=(e,t,i,a,o,c)=>(0,l.zG)([(0,l.zG)(n(a,o),g((()=>u.G(M.nL.Effect.FocusBehavior.focusNext)))),(0,l.zG)((0,p.W9)((()=>t.get()),(0,p.W9)((0,p.W9)((0,p.W9)(r(i),(()=>e)),h),(0,l.zG)(c,u.UI((e=>(0,l.ff)(e.willShowBulkAccept))),u.fS((()=>l.W8))))),g((()=>u.G(M.nL.Effect.FocusBehavior.focusFirst))))],(0,s.g_)((0,s._e)(u.gW())()));e.getFirstApiAlignmentOverride=function(){const e=c.h.create(!0);return(t,r)=>{let n=r;return e.get()&&r===f.l$.api&&(n=f.l$.text),e.set(!1),n}};e.getShouldAutoFocus=(e,t,r)=>n=>e.get()&&(0,l.zG)(n,M.nL.getActiveAlert(r),u.tS((({id:e})=>t.getById(e))),u.hX((0,p.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),f.bZ.isDuplicated,f.bZ.isCapiDone)),u.pC),e.getStateTransformer=(e,r,n,s,c,d,p)=>({state:h,metadata:g})=>{const f=t("AutoFocus.stateTransformer");if(!M.nL.hasCards(h)||!M.nL.hasItems(h))return f.trace("state has no items, returning original state"),o.left({state:h,metadata:g});const y=e(h);if(f.trace("effect: ",{state:h,metadata:g,effect:y}),u.Wi(y))return f.trace("no effect selected, returning original state"),o.left({state:h,metadata:g});if(d(y.value),y.value.kind===M.nL.Effect.FocusBehaviorType.unFocus||y.value.kind===M.nL.Effect.FocusBehaviorType.noFocus)return o.left({state:M.nL.Prism.getLensWithItems().modify(s.unselectItem(),h),metadata:g});const v=c(h);return f.trace("shouldAutoFocus",{alertSource:h.alertSource,shouldAutoFocus:v}),(0,l.zG)(y,u.tS((e=>{switch(e.kind){case M.nL.Effect.FocusBehaviorType.noFocus:case M.nL.Effect.FocusBehaviorType.unFocus:return u.YP;case M.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(s.findFirstAlert(h.currentLens),u.UI((e=>(0,a._)((0,i._)({},e),{lensId:h.currentLens.id}))));case M.nL.Effect.FocusBehaviorType.focusNext:return r(h);case M.nL.Effect.FocusBehaviorType.focusAlert:return u.G((0,a._)((0,i._)({},e.alertHighlight),{lensId:h.currentLens.id}));default:(0,m.vE)(e)}})),u.UI((e=>((0,m.kG)(u.pC(n.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),u.g_((()=>(f.trace("no alert selected, returning original state"),h.currentLens.kind===M._L.active?o.right(o.right({lensId:p.get(),alertSource:h.alertSource,options:{order:h.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}})):o.left({state:h,metadata:g}))),(({alert:e,highlightIndex:t,lensId:r})=>{if(f.trace("selected alert to focus",e),h.currentLens.meta.filter(e)){if(v){const r={alert:e,highlightIndex:t};return(0,l.zG)(h.currentLens.items.find(s.hasAlert(e.id)),u.g_((()=>(f.trace("shouldAutoFocus: true, no such item in a lens for given alert",e.id),o.left({state:h,metadata:g}))),(()=>(f.trace("shouldAutoFocus: true, selecting alert"),o.left({state:M.nL.Prism.getLensWithItems().modify(s.selectItemByAlert(r),h),metadata:{sourceId:"LSM.updateActiveState"}})))))}return f.trace("shouldAutoFocus: false"),o.left({state:h,metadata:g})}return f.trace("alert is not from current lens, recreating lens view"),o.right(v?o.left({alertHighlight:{alert:e,highlightIndex:t},alertSource:h.alertSource,options:{lensId:r,order:h.switchOrder,toFocus:M.nL.Effect.FocusBehavior.focusFirst}}):o.right({lensId:r,alertSource:h.alertSource,options:{order:h.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}}))})))}}(O||(O={})),function(e){const t=e=>t=>r=>{switch(t.kind){case M.nL.Effect.FocusBehaviorType.noFocus:return r;case M.nL.Effect.FocusBehaviorType.unFocus:return M.nL.Prism.getLensWithItems().modify(e.unselectItem(),r);case M.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(r.currentLens.items.find((0,l.ff)(e.isScheduledToDispose)),u.UI(h.ei("value")),u.g_((0,l.a9)(r),(t=>M.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),r))));case M.nL.Effect.FocusBehaviorType.focusNext:return(0,l.zG)(r.currentLens.cardIndex,u.tS((t=>(0,l.zG)(g.uU(r.currentLens.items.values(),t,u.DT((0,l.ff)(e.isScheduledToDispose))),u.UI(h.ei("value"))))),u.g_((0,l.a9)(r),(t=>M.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),r))));case M.nL.Effect.FocusBehaviorType.focusAlert:return M.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),r);default:(0,m.vE)(t)}},r=(0,p.HP)(d.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,t,n,i)=>{const a=P(t),o=F(t),s=U(t,i);return(0,l.zG)(_.T(a,o,s),S.w(E.b2.rafScheduler),S.w(E.b2.rafScheduler),T.M(e,n),C.h((([e,t,r])=>r&&M.nL.hasCards(t)&&u.Wi(M.In.getActiveItem(t.currentLens)))),I.U((()=>M.nL.Effect.FocusBehavior.focusFirst)),k.b((e=>r("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,r)=>{const n=(0,l.zG)(e,I.U(t(r)));return{id:"sduiAutoFocusEffect",when:y.R.isWithAlertsId,what:M.nL.Effect.ItemsApplicator.create(n)}},e.getShouldAutoFocus=(e,t,r)=>n=>e.get()&&(0,l.zG)(n,M.nL.getActiveAlert(r),u.tS((({id:e})=>t.getById(e))),u.hX((0,p.Kg)((e=>!("REMOVED"===e.state.type&&"textChange"===e.state.reason)),f.bZ.isDuplicated,f.bZ.isCapiDone)),u.pC),e.getStateTransformer=(e,n,s,c,m,p)=>({state:h,metadata:g})=>{const f=r("AutoFocus.stateTransformer",d.zW.i.TRACE);if(!M.nL.hasCards(h)||!M.nL.hasItems(h))return f.trace("state has no items, returning original state"),o.left({state:h,metadata:g});const y=e(h);if(u.Wi(y))return f.trace("no effect selected, returning original state"),o.left({state:h,metadata:g});if(f.trace("effect: ",{state:h,metadata:g,effect:y}),m(y.value),y.value.kind===M.nL.Effect.FocusBehaviorType.unFocus||y.value.kind===M.nL.Effect.FocusBehaviorType.noFocus)return o.left({state:M.nL.Prism.getLensWithItems().modify(s.unselectItem(),h),metadata:g});const v=c(h);return f.trace("shouldAutoFocus",{alertSource:h.alertSource,shouldAutoFocus:v}),(0,l.zG)(y,u.UI((e=>({effect:e,applicator:t(s)}))),u.g_((()=>(f.trace("no effect selected, returning original state"),h.currentLens.kind===M._L.active?o.right(o.right({lensId:p.get(),alertSource:h.alertSource,options:{order:h.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}})):o.left({state:h,metadata:g}))),(({effect:e,applicator:t})=>{f.trace(`effect selected: ${e.kind}`);const r=t(e)(h);return v?(f.trace("shouldAutoFocus: true, selecting an item in the lens"),o.left({state:r,metadata:{sourceId:"LSM.updateActiveState"}})):(f.trace("current lens is empty"),e.kind===M.nL.Effect.FocusBehaviorType.focusNext?(f.trace("no items to select in the current lens, trying to switch"),(0,l.zG)(h,n,u.g_((()=>(f.trace("next alert not found in other lenses, reset cardIndex"),o.left({state:h.patch({currentLens:(0,a._)((0,i._)({},h.currentLens),{cardIndex:u.YP})}),metadata:{sourceId:"LSM.updateActiveState"}}))),(({lensId:e})=>(f.trace(`found next alert in lens: ${e}. Switching the lens`),o.right(o.right({lensId:e,alertSource:h.alertSource,options:{order:h.switchOrder,toFocus:M.nL.Effect.FocusBehavior.noFocus}}))))))):(f.trace("shouldAutoFocus: false"),o.left({state:h,metadata:g})))})))}}(B||(B={}))},30008:(e,t,r)=>{r.d(t,{IG:()=>n,Ls:()=>A,Mq:()=>k});var n,i=r(84910),a=r(78520),o=r(12518),s=r(90023),l=r(13391),c=r(19813),d=r(27145),u=r(52303),m=r(17613),p=r(14146),h=r(68717),g=r(36355),f=r(11953),y=r(48922),v=r(57326),x=r(95894),I=r(48746),b=r(42596),C=r(35992),S=r(93167);function A(e,t,r,n,o,s=v.X.canHydrate){const l=k.getCardSelections(t),c=k.getCardHydrator((e=>e.cachedTransform),s,v.X.changeTransform,e),d=k.getChangeVisualState(v.X.changeVisualState,c),p=k.getSelectByAlert(v.X.updateAlerts,v.X.updateUserInput,d,v.X.changePosition,v.X.changeMeta,c,t,r),g=k.getUnselectItem(d,v.X.changePosition),f=k.getTransitionTo(d,v.X.changePosition),b=k.getRemove(v.X.updateAlerts,f);const C=k.getCreate(_,o,d,n,r);const S=k.getSelectFirstAlert(p);return(0,a._)((0,i._)({shouldAnimateAlertApply:r.shouldAnimateAlertApply,create:C,createFromAlert:e=>t=>C(t.id,[t],0,0,x.n.empty(h.bZ.isApplicableAlert(t)?t.explanation:void 0),e,u.YP),createFocused:function(e){const t=I.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(n,i,a)=>C(n,[i],0,a,k.getApplicableCardMeta(i,t,r),e,u.G(t))},createRendered:function(e){const t=I.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(n,i)=>C(n,[i],0,0,k.getApplicableCardMeta(i,t,r),e,u.G(t))},createAdded:function(e){const t=I.o.VisualState.initial({type:"added",clockwise:!0},!0);return(n,i)=>C(n,[i],0,0,k.getApplicableCardMeta(i,t,r),e,u.G(t))}},l),{select:(e,t,r,n)=>p(t,r,n)(e),selectFirstAlert:(e,t,r)=>S(t,r)(e),selectNextAlert:(e,t)=>k.getSelectNextAlert(l,p)(t)(e),unselect:(e,t,r)=>g(t,r)(e),remove:(e,t,r)=>b(t,r)(e),updateWith(e,t){(0,m.kG)(1===t.length,"AlertCard can only handle update with a single alert");const n=t[0];(0,m.kG)(void 0!==e.alerts.find((e=>e.id===n.id)),"can not receive updates for unknown alert",(()=>n.toString()));const i=function(e,t){const n=k.getApplicableCardMeta(t,e.visualState,r);return new v.X(e.id,e.alerts.map((e=>e.id===t.id?y.$.fromModel(t):e)),e.activeAlertIndex,k.getAHI(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,n);switch(n.state.type){case h.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?c(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?f({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case h.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>h.bZ.isCapiDone(e)&&e.allowUpdate&&h.bZ.isRated(i.activeAlert)))?b(t,!0)(i):f({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case h.bZ.State.Type.APPLIED:case h.bZ.State.Type.BEING_APPLIED:return b(t,!0)(i);default:return(0,m.vE)(n.state)}},changePosition:(e,t)=>v.X.changePosition(t)(e),changeVisualState:(e,t)=>d(t)(e),transitionTo:(e,t)=>f(t)(e),completeTransition:(e,t)=>d(I.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new v.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new x.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>v.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>v.X.changeSynfonySelection(t)(e)})}function w(e){return h.bZ.isOneGap(e)&&""!==e.gapValue?u.G(e.gapValue):u.YP}!function(e){let t;e.toCardRenderOptions=function(e,r,n){const i=new Set;return(g.R.isMainLens(r)||e.features.has(t.showCardLabelInOutcomes)&&r!==g.R.SpecialId.Plagiarism)&&i.add(S.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(S.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(S.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(S.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(S.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(S.j.Features.showPersistentPremiumCardLabels),e.features.has(t.showPremiumOnboarding)&&i.add(S.j.Features.showPremiumOnboarding),e.features.has(t.a11yContrast)&&i.add(S.j.Features.a11yContrast),e.features.has(t.showYellowFooterForTrialUsers)&&i.add(S.j.Features.showYellowFooterForTrialUsers),e.features.has(t.sduiContainerStyle)&&i.add(S.j.Features.sduiContainerStyle),e.features.has(t.showOnboardingTourA11yUpdates)&&i.add(S.j.Features.showOnboardingTourA11yUpdates),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:n,cardVisualMode:e.cardVisualMode,isPremiumOnboarding:e.isPremiumOnboarding}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.showOnboardingTourA11yUpdates="showOnboardingTourA11yUpdates"}(t=e.Features||(e.Features={}));e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:S.j.Density.cozy,shouldAnimateAlertApply:h.bZ.isAccepted,cardVisualMode:l.h.create(S.j.CardVisualMode.RegularLightMode)}}(n||(n={}));const _=(e,t)=>new v.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var k;!function(e){function t(e,t,r){let i;i=h.bZ.getCheckingState(e)===h.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?x.n.CheckingState.Checking:x.n.CheckingState.Full:x.n.CheckingState.Idle;const a=r.features.has(n.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new x.n.Impl(f.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t;e.getRemove=(e,t)=>(r,n=!0)=>i=>{const a=new Set(r.map((e=>e.id))),o=new Set(i.removedAlertsIds);a.has(i.activeAlert.id)&&o.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,r)=>!a.has(t.id)||I.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(r<i.activeAlertIndex||r===i.activeAlertIndex&&r===i.alerts.length-1&&r>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),d=(0,s.zG)(i,b.i.willBeDisposed(i,a)?e(i.alerts,a,i.activeAlertIndex,i.activeHighlightIndex):e(l,o,c,0));return b.i.willBeDisposed(d,d.removedAlertsIds)?t({type:"removed",clockwise:n})(d):d},e.getTransitionTo=(e,t)=>r=>n=>{const i=I.o.VisualState.to(n.visualState,r);return(0,s.zG)(n,e(i),(e=>r.type===n.visualState.transition.type||"expanded"!==r.type&&"focused"!==r.type?e:t(C.s.PositionState.invalidateHeight(n.positionState))(e)))};const r=e=>t=>{const r=t.alerts;return u.ij(r.slice(t.activeAlertIndex+1).find(e))};var i=e.getPrevAlert=e=>t=>{const r=t.alerts;return u.ij(r.slice(0,t.activeAlertIndex).reverse().find(e))},a=e.getAnyRegisteredAlert=e=>t=>{const r=t.alerts;return(0,s.zG)(r.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),u.ij)},l=(e.getCardSelections=e=>{const t=(e=>t=>e.isRegistered(t.id))(e);return{nextAlert:r(t),prevAlert:i(t),anyRegisteredAlert:a(e)}},e.getSelectByAlert=(e,r,n,i,a,o,c,d)=>({alert:p,highlightIndex:g},f,y)=>v=>{(0,m.kG)(!v.removedAlertsIds.has(p.id),"Cannot select removed alert");const I=c.getById(p.id);(0,m.kG)(u.pC(I),"Cannot select not registered alert");const C=u.MH(I),S=v.alerts.filter((e=>!v.removedAlertsIds.has(e.id))),A=w(C),_=b.i.getIndexByAlert(p.id,S),k=l(n,i)(f,y);return(0,s.zG)(v,k,e(S,v.removedAlertsIds,_,g),r(A),(e=>{return a((r=e.visualState,h.bZ.isApplicableAlert(C)?t(C,r,d):x.n.empty(void 0)))(e);var r}),o)},e.getSelectItem=(e,t)=>(r,n)=>i=>{const a=(0,s.zG)(r,u.UI((e=>n.compare(i,e)>0)),u.fS(s.W8)),o=(0,s.zG)(r,u.Gg((e=>e.id===i.id))),l=o?i.positionState:C.s.PositionState.invalidateHeight(i.positionState),c=o&&v.X.isCardOpen(i.visualState)?"expanded":"focused",d=(0,s.zG)(r,u.g_((()=>I.o.VisualState.initial({type:c,clockwise:a})),(e=>I.o.VisualState.to(i.visualState,{type:c,clockwise:a}))));return(0,s.zG)(i,t(l),e(d))});e.getSelectNextAlert=(e,t)=>r=>n=>b.i.activeAlertRemoved(n)&&!b.i.willBeDisposed(n,n.removedAlertsIds)?(0,s.zG)(e.nextAlert(n),u.vx(e.prevAlert(n)),u.UI((e=>t({alert:e,highlightIndex:0},u.YP,r)(n))),u.fS((()=>n))):n,e.getSelectFirstAlert=e=>(t,r)=>n=>{const i=n.alerts.filter((e=>!n.removedAlertsIds.has(e.id)));(0,m.kG)(i.length>0,"Selectable card must have at least one not removed alert");const a=i[0];return e({alert:a,highlightIndex:0},t,r)(n)},e.getUnselectItem=(e,t)=>(r,n)=>i=>{const a=(0,s.zG)(r,u.UI((e=>n.compare(i,e)>0)),u.fS(s.W8)),o=(0,s.zG)(r,u.Gg((e=>e.id===i.id))),l=o?i.positionState:C.s.PositionState.invalidateHeight(i.positionState);return(0,s.zG)(i,t(l),b.i.willBeDisposed(i,i.removedAlertsIds)||I.o.isHidden(i)?s.yR:e(I.o.VisualState.to(i.visualState,{type:"rendered",clockwise:a})))},e.getCardHydrator=(e,t,r,n)=>i=>{const a=i.activeAlert.type===y.$.Type.super||i.activeAlert.type===y.$.Type.plagiarism||i.activeAlert.type===y.$.Type.premium||i.activeAlert.type===y.$.Type.takeaway||h.eT.isSimple(i.activeAlert.extraProperties.cardType)?u.YP:function(e,t,r){const i=c.C8.Logging.getLogger("CardFactory");return(0,s.zG)(t,u.hX((t=>!r||(0,s.zG)(e,u.Gg((e=>t.id===e.id&&t.rev===e.revision))))),u.wp((()=>(0,s.zG)(e,u.tS((e=>(0,s.zG)(n(e),o.fold((r=>{switch(r.kind){case"default":i.error("Could not hydrate transform",r.error,{alertId:e.id});break;case"mpteError":i.warn("Could not hydrate transform",r.error,{alertId:e.id});break;default:(0,m.vE)(r)}return t}),(t=>u.G({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return r(a)(i)},e.getChangeVisualState=(e,t)=>r=>n=>{const i=e(r)(n);return"focused"===r.transition.type||"expanded"===r.transition.type?t(i):i},e.getCreate=(e,t,r,i,a)=>(o,l,c,d,p,g,f,v=h.h$.ord)=>{const S=b.i.getAlertByIndex(c,l),A=w(S),_=[...l].sort(v.compare),k=_.map(y.$.fromModel),E=k[0];(0,m.kG)(Boolean(E),"The card must contain at least 1 alert");const T=(0,s.zG)(t,u.tS((e=>e.getAlertMuteCategory(l[0].id)))),M=e(o,{alerts:k,alertModels:_,activeAlertIndex:b.i.getIndexByAlert(S.id,k),activeHighlightIndex:d,positionState:C.s.PositionState.empty,visualState:I.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new x.n.Impl(p.percentile,p.explanation,p.checking,p.ranges,a.features.has(n.Features.enableMuteQuotedAdvice)&&y.$.isInQuotes(E)),lensId:u.G(g),renderOptions:n.toCardRenderOptions(a,g,i(E)),muteCategory:T,order:E.getHighlightRanges()[0].end,initialAlertId:E.id,removedAlertsIds:new Set,cachedTransform:u.YP,userInput:A,synfonySelection:u.YP});return(0,s.zG)(f,u.g_((()=>M),(e=>r(e)(M))))};e.getAHI=function(e,t){if((0,m.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const r=e.meta.ranges[e.activeHighlightIndex];return(0,m.kG)(void 0!==r,"AHI not found in rangeIds"),(0,s.zG)(u.G(t.ranges.findIndex((e=>e.meta.id===r.meta.id))),u.hX((e=>-1!==e)),u.wp((()=>p.OI(t.ranges,r,d.SV.ordEnd))),u.fS((()=>t.ranges.length-1)))}};e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,s.zG)(Boolean(e.alerts)?e.alerts.map((e=>e.id)):e.alerts),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(k||(k={}))},73358:(e,t,r)=>{r.d(t,{R7:()=>x,XU:()=>I});var n=r(58303),i=r(90023),a=r(36355),o=r(77400),s=r(59179),l=r(20161),c=r(90572),d=r(63532),u=r(64271),m=r(53976),p=r(91089),h=r(31854),g=r(48746),f=r(9761),y=r(49857);const v={cardsBeyondViewport:5,cardsAroundActive:100},x=(e,t,r,i,l=v,c=o.b2.rafScheduler)=>{const d=e=>!e.positionState.visible&&g.o.isAnimatable(e)&&e.visualState.incomplete?(i.next({type:h.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),r.completeTransition(e.visualState.transitionId)(e)):e,u=e.pipe(s.U(f.nL.mapper((({currentLens:e,alertSource:t})=>n.G({currentLens:e,alertSource:t}))))),m=(0,y.nM)(r)(u,t.viewport,t.scrollTop,t.paddingTop,c).pipe(s.U((({viewport:e,scrollTop:t,paddingTop:r})=>({viewport:e,scrollTop:t,paddingTop:r,completeTransition:d}))),s.U((0,y.GC)({cardsBeyondViewport:l.cardsBeyondViewport,cardsAroundActive:l.cardsAroundActive,changePosition:r})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(m)}},I=(e,t,r)=>{const h=(0,i.zG)(e,s.U(f.nL.mapper((({currentLens:e,alertSource:t})=>n.G({currentLens:e,alertSource:t})))),(0,y.SW)(r),l.w(o.b2.rafScheduler),c.h((e=>0!==e)),d.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(u.T(u.T(h).pipe(m.c(p.C))))}}},87784:(e,t,r)=>{r.d(t,{YA:()=>p,i$:()=>m});var n=r(90023),i=r(52303),a=r(77400),o=r(8794),s=r(954),l=r(704),c=r(9761),d=r(74703),u=r(49239);const m=e=>a.Hl(e.scrollTop.pipe(o.T(1)),100,!0).pipe(s.O(!1),l.shareReplay({bufferSize:1,refCount:!0})),p=(e,t)=>{const r=new u.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,n.zG)(e.view(c.nL.getLens).get(),i.tS((({items:e,cardsHeight:t})=>(0,n.zG)(e.getAt(0),i.UI((e=>{const i=(0,n.ls)(d.L.AbsTop.ISO.wrap,r.converters.absTopToViewportTop,r.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(t))(i)}}))))))}},70930:(e,t,r)=>{r.d(t,{o:()=>f});var n=r(32490),i=r(12518),a=r(90023),o=r(13391),s=r(19813),l=r(74822),c=r(8867),d=r(24019),u=r(78129),m=r(59179),p=r(954),h=r(63532),g=r(74703);class f{constructor(e){(0,n._)(this,"_validateOffset",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"scrollTop",void 0),(0,n._)(this,"paddingTop",void 0),(0,n._)(this,"viewport",void 0),(0,n._)(this,"scrollOffset",void 0),(0,n._)(this,"moveCardsBy",void 0),(0,n._)(this,"moveCardsByAnimated",void 0),this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=o.h.create(0),this.paddingTop=o.h.create(0),this.viewport=o.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.x,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),i.right(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),c.y.create((t=>(0,a.zG)(this._validateOffset(e,this),i.fold((e=>(t.thrownError(e),a.Q1)),(()=>{const r=2*this.viewport.get().height,n=Math.abs(e)>r?(e>0?1:-1)*r:e,i=e-n,a=d.f.createAnimationObservable(0,n,200).pipe(u.G(),m.U((([e,t])=>t-e)),p.O(i),h.b((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},74703:(e,t,r)=>{r.d(t,{L:()=>i,r:()=>n});var n,i,a=r(21147),o=r(76399),s=r(84210);!function(e){let t;!function(e){e.ISO=(0,s.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(n||(n={})),function(e){let t,r,n;!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(r=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(n=e.CardTop||(e.CardTop={}));var i=e.concatC=e=>t=>e+t;const l=e=>new o.aD(e);e.converters=function(e,t,r){const n=l(i(r)).get,a=l(i(-e)).get;return{windowToViewport:l(i(-t)).get,viewportToWindow:l(i(t)).get,cardTopToViewport:a,viewportToCardTop:l(i(e)).get,absTopToViewportTop:e=>a(n(e)),absTopToCardTop:n}}}(i||(i={}))},49239:(e,t,r)=>{r.d(t,{Db:()=>i});var n,i,a,o=r(32490),s=r(21147),l=r(74703);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(n||(n={})),function(e){e.Impl=class{constructor(e,t,r){(0,o._)(this,"scrollTop",void 0),(0,o._)(this,"viewport",void 0),(0,o._)(this,"converters",void 0),this.scrollTop=e,this.viewport=t,this.converters=l.L.converters(e,l.r.FromWindowTop.ISO.unwrap(t.top),r)}}}(i||(i={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},49857:(e,t,r)=>{r.d(t,{Bk:()=>b,GC:()=>E,SW:()=>w,Sd:()=>_,nM:()=>k,v_:()=>S});var n=r(18117),i=r(21147),a=r(3190),o=r(90023),s=r(52303),l=r(14146),c=r(26814),d=r(59179),u=r(78129),m=r(90572),p=r(24666),h=r(20161),g=r(77400),f=r(84308),y=r(35992),v=r(9761),x=r(8080),I=r(74703);const b=e=>t=>t.isCardsHeightValid&&(0,o.zG)(v.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t)))),C=e=>t=>t.isCardsHeightValid&&(0,o.zG)(v.In.getActiveItem(t),s.wo((t=>!e.isScheduledToDispose(t))));function S({cardTop:e,cardHeight:t,viewportHeight:r,padding:n}){const i=I.L.FromViewportTop.ISO.unwrap(e),a=i+t;return t>r?i:i<0?t+n.before<r?i-n.before:i:a>r?t+n.after<r?a-r+n.after:a-r:i<n.before?t+n.after+n.before<r?i-n.before:t+n.after<r?i-n.after:n.before:r-a<n.after&&t+n.after<r?n.after-(r-a):0}const A=(e,t,r,n)=>({from:Math.max(0,c.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<r))-n),to:Math.min(e.size,c.aW.lowerBound(e,(e=>e.positionState.absTop<r+t.height))+n)}),w=e=>t=>t.pipe(_(e),d.U(s.UI((e=>e.currentLens))),u.G(),m.h((([e,t])=>(0,o.zG)((0,o.bc)(e,t),(0,o.og)(s.vB(((e,t)=>e.id===t.id&&(0,o.zG)((0,o.bc)(v.In.getActiveItem(e),e.cardIndex,v.In.getActiveItem(t),t.cardIndex),(0,o.og)(n.gz(s.Kw)),s.UI((([e,t,r,n])=>e.id===r.id&&t!==n)),s.fS((()=>!1)))))),s.fS((()=>!1))))),d.U((0,o.ls)(a.Pd(s.tS(v.In.getActiveItem),s.tS(v.In.getActiveItem)),(0,o.og)(s.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),s.fS((()=>0))))),_=e=>t=>t.pipe(d.U(s.hX((({currentLens:t})=>C(e)(t))))),k=e=>(t,r,n,a,c)=>{const u=(e=>s.Eh(i.f7(((t,r)=>{const n=v.In.getActiveItem(t),i=v.In.getActiveItem(r);return s.Eh(e.visualStateEq).equals(n,i)&&t.items.size===r.items.size&&l.Hx(t.items.keys(),r.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(d.U(s.UI((e=>e.currentLens.id))),p.x(i.w4.equals),d.U(s.pC),h.w(g.Ft(f.a(r,n,a,_(e)(t).pipe(d.U(s.UI((e=>e.currentLens))),p.x(u.equals),h.w(c))))),m.h((([t,r,n,i])=>(0,o.zG)(i,s.Gg(C(e))))),d.U((([e,t,r])=>({viewport:e,scrollTop:t,paddingTop:r}))))},E=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:r})=>({viewport:n,scrollTop:i,paddingTop:a,completeTransition:l})=>c=>{const d=c.currentLens,u=((e,t,r,n)=>e.size<2||Math.floor(t.height/Math.min(s.MH(e.getAt(0)).positionState.height,s.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:A(e,t,r,n))(d.items,n,i-a,e);let m=!1;const p=d.items.map(((e,n,i)=>{const a=(0,o.ls)((c=r,p=e.positionState.watched||(e=>u.from<=e&&u.to>e||(0,o.zG)(d.cardIndex,s.Gg((r=>e>=r-t&&e<=r+t))))(i),e=>e.positionState.visible!==p?c.changePosition(y.s.PositionState.changeVisible(e.positionState,p))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(y.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(r),l)(e);var c,p;return a!==e?(m=!0,a):e}));return m?v.nL.Prism.getLens().compose(x.v.Prism.items).set(p,c):c}},48746:(e,t,r)=>{r.d(t,{o:()=>n});var n,i=r(84910),a=r(78520),o=r(35992),s=r(56381);!function(e){var t=s.u;e.Transition=t;var r=s.t;e.VisualState=r;e.eq={equals:(e,t)=>!n(e)||n(t)&&r.eq.equals(e.visualState,t.visualState)};function n(e){return"visualState"in e}e.isAnimatable=n;e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}};var l=e.isInTransition=e=>e.visualState.incomplete;e.isRemoved=e=>"removed"===e.visualState.transition.type,e.isAnimatingAdded=e=>"added"===e.visualState.transition.type&&l(e),e.isAnimatingRemoval=e=>"removed"===e.visualState.transition.type&&l(e),e.isHidden=e=>"hidden"===e.visualState.transition.type;let c;!function(e){e.getPojoUpdates=()=>(0,a._)((0,i._)({},o.s.Capabilities.getPojoUpdates()),{setVisualState:e=>t=>(0,a._)((0,i._)({},t),{visualState:e})})}(c=e.Capabilities||(e.Capabilities={}))}(n||(n={}))},35992:(e,t,r)=>{r.d(t,{s:()=>n});var n,i=r(84910),a=r(78520),o=r(21147),s=r(62325);!function(e){var t=s.Z;e.PositionState=t;e.eqById=o.f7(((e,t)=>e.id===t.id)),e.getEqById=()=>o.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(e,r)=>t.eq.equals(e.positionState,r.positionState)},e.verticalPositionEq={equals:(e,r)=>t.verticalEq.equals(e.positionState,r.positionState)};let r;!function(e){e.getPojoCloneable=()=>({clone:e=>(0,i._)({},e)}),e.getPojoUpdates=()=>({setPosition:e=>t=>(0,a._)((0,i._)({},t),{positionState:e})})}(r=e.Capabilities||(e.Capabilities={}))}(n||(n={}))},93167:(e,t,r)=>{r.d(t,{j:()=>n});var n,i=r(84910),a=r(78520),o=r(95922),s=r(58303),l=r(13391),c=r(84714),d=r(17613);!function(e){let t;let r;!function(e){e.RegularLightMode="regularLightMode",e.ContrastLightMode="contrastLightMode"}(t=e.CardVisualMode||(e.CardVisualMode={})),(t=e.CardVisualMode||(e.CardVisualMode={})).match=({onRegular:e,onContrast:r})=>n=>{switch(n){case t.RegularLightMode:return e();case t.ContrastLightMode:return r();default:return(0,d.vE)(n)}},e.toJSON=function(e){return(0,a._)((0,i._)({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(r=e.Density||(e.Density={}));e.defaultOptions={features:new Set,layoutDensity:r.cozy,isNew:c.of(s.YP),cardVisualMode:l.h.create(t.RegularLightMode)};let n;!function(e){function t(e,t,n){return i=>{switch(i){case r.cozy:return e();case r.compact:return t();case r.minimal:return n();default:return(0,d.vE)(i)}}}e.match=function(e,r,n){return t(o.of(e),o.of(r),o.of(n))},e.matchL=t,e.matchOrDefault=function(e){return(t,r)=>n=>n===e?t():r()}}(r=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.showOnboardingTourA11yUpdates="showOnboardingTourA11yUpdates"}(n=e.Features||(e.Features={}))}(n||(n={}))},59778:(e,t,r)=>{r.d(t,{B:()=>n});var n,i=r(12518),a=r(58303);!function(e){var t=e.NAME_LENGTH_LIMIT=30,r=e.CONTENT_LENGTH_LIMIT=1e3;e.validate=(e,n,o)=>{const s=((e,r)=>0===e.trim().length?a.G(r.nameEmpty):e.length>t?a.G(r.nameTooLong):a.YP)(e,o),l=((e,t)=>0===e.trim().length?a.G(t.textEmpty):e.length>r?a.G(t.textTooLong):a.YP)(n,o);return a.Wi(s)&&a.Wi(l)?i.right(void 0):i.left({nameError:s,contentError:l})}}(n||(n={}))},50278:(e,t,r)=>{r.d(t,{v:()=>n});var n,i=r(84910),a=r(78520),o=r(18117),s=r(59833),l=r(12518),c=r(21147),d=r(24332),u=r(14944),m=r(61179),p=r(86399),h=r(90023),g=r(2844),f=r(52303),y=r(97767),v=r(91817),x=r(90490),I=r(17613),b=r(14146),C=r(68717),S=r(36355),A=r(58578),w=r(46025),_=r(48746),k=r(35992),E=r(9761);!function(e){e.filterAlertInLens=(e,t)=>s.hX((r=>C.bZ.isNotRemoved(r)||f.pC(e.items.find((e=>t.hasAlert(r.id)(e)))))),e.findItemWithAlertInLens=(e,t)=>(0,h.ls)(f.DT(C.bZ.isNotRemoved),f.tS((r=>e.items.find((e=>t.hasAlert(r.id)(e)&&!t.isScheduledToDispose(e))))),f.UI((e=>e.value))),e.createWithInitialAlerts=(e,t,r,n,o)=>(s,l,c,d)=>{const u=(0,h.zG)(d,f.g_((()=>h.yR),(e=>o.selectItemByAlert(e)))),m=e.create(s,l),p=c.filter(r.alertVisibleInSidebar(s)),g=t(s);if(E.vj.hasItems(m)){const e=A.p.empty,t=A.p.from(p),r=A.p.diff(e,t);return(0,h.zG)(m,g(r,n),o.changeItemsVisualState(_.o.VisualState.initial({type:"rendered",clockwise:!0},!1)),u,(e=>(0,a._)((0,i._)({},e),{animation:E.wj.skip})))}return m},e.createWithExternalItems=(e,t)=>(r,n,o,s,l)=>{const c=e.create(r,n);return(0,h.zG)(l,f.hX((e=>E.vj.hasItems(e)&&E.vj.hasItems(c))),f.UI((e=>t.changeItemsVisualState(_.o.VisualState.initial({type:"rendered",clockwise:!0},!1))((0,a._)((0,i._)({},c),{items:e.items.filter((0,m.ff)(t.isScheduledToDispose))})))),f.fS((()=>c)))};let t,r,n;!function(e){e.setVisibleItems=e=>t=>(0,a._)((0,i._)({},t),{cardIndex:(0,h.zG)(E.In.getActiveItem(t),f.tS((t=>(0,h.zG)(e.get(t.id),f.UI((e=>e.index)))))),items:e});e.hideItem=function(e,t){return _.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e};var t=e.calculateCardsHeight=e=>(0,h.zG)(e.getAt(e.size-1),f.UI((e=>e.positionState.absTop+e.positionState.height)),f.fS((()=>0)));e.getItemsPositionsUpdateTransformer=e=>({state:t,metadata:r})=>{if(!E.nL.hasCards(t))return l.left({state:t,metadata:r});const i=E.nL.Prism.getLens();return l.left({state:i.modify(n(e),t),metadata:r})},e.getSingleItemFeedPositionsUpdateTransformer=e=>({state:t,metadata:r})=>{if(!E.nL.hasCards(t))return l.left({state:t,metadata:r});const n=E.nL.Prism.getLens();return l.left({state:n.modify((t=>{const r=t.items.map(((r,n,o)=>{const s=f.FX(o)(t.cardIndex)?{absTop:r.positionState.absTop,height:r.positionState.height,animationInProgress:t.animation(r,o),visible:!0,isHeightValid:!0,watched:!0,inert:r.positionState.inert}:(0,a._)((0,i._)({},r.positionState),{visible:!1,isHeightValid:!0});return k.s.PositionState.eq.equals(r.positionState,s)?r:e.changePosition(s)(r)}));return(0,a._)((0,i._)({},t),{items:r,isCardsHeightValid:!0})}),t),metadata:r})},e.getRemoveDisposedItemsTransformer=e=>({state:t,metadata:r})=>{if(!E.nL.hasCards(t))return l.left({state:t,metadata:r});const n=E.nL.Prism.getLens();return l.left({state:n.modify((t=>{const r=E.In.getActiveItem(t),n=t.items.filter((t=>!e.isScheduledToDispose(t)||(0,y.Kg)((0,m.ff)(_.o.isAnimatable),_.o.isAnimatingRemoval)(t)||(0,h.zG)(r,f.Gg((e=>e.id===t.id))))),o=(0,h.zG)(t,E.In.getActiveItemIndex(n));return(0,a._)((0,i._)({},t),{items:n,cardIndex:o})}),t),metadata:r})};const r=e=>t=>(0,h.zG)(t.items.find((e=>t=>r=>r.positionState.watched&&!e.isHidden(r)&&(0,h.zG)(t,f.wo((e=>e.id!==r.id))))(e)(E.In.getActiveItem(t))),f.UI((({value:t,index:r})=>({index:r,value:(0,h.zG)(t,f.DT((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));var n=e.updateItemsPositions=e=>n=>{const o=E.In.getActiveItem(n),s=r(e)(n),l=(0,h.zG)(s,f.tS(v.ei("value")),f.UI((e=>e.positionState.height)));let c=0;const d=(0,h.zG)(o,f.wo((e=>e.positionState.isHeightValid))),u=(0,h.zG)(s,f.UI(v.ei("index")),f.fS((()=>{return e=n.cardIndex,(0,h.zG)(e,f.UI((e=>0===e?1:0)),f.fS((()=>0)));var e}))),m=n.items.map(((t,r,i)=>{const a=f.FX(i)(n.cardIndex),o=a||i===u,s=e.isScheduledToDispose(t)||(a?t.positionState.isHeightValid:f.pC(l)),m=e.isScheduledToDispose(t)?e.useReferenceHeightOnRemove(t)?(0,h.zG)(l,f.fS((()=>t.positionState.height))):0:a?t.positionState.height:(0,h.zG)(l,f.fS((()=>t.positionState.height))),p={absTop:a||d?c:t.positionState.absTop,height:m,animationInProgress:n.animation(t,i),visible:t.positionState.visible,isHeightValid:s,watched:o,inert:t.positionState.inert};return e.shouldAnimatePositionChange(p,a)(t)||(p.animationInProgress=!1),c+=m,k.s.PositionState.eq.equals(t.positionState,p)?t:e.changePosition(p)(t)})),p=t(m),g=(0,h.zG)(o,f.wo((e=>e.positionState.isHeightValid)))&&(0,h.zG)(m.getAt(u),f.wo((e=>e.positionState.isHeightValid)));return(0,a._)((0,i._)({},n),{items:m,cardsHeight:p,isCardsHeightValid:g})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,r,n)=>i=>(0,h.zG)(e,x.vh.reduce(i,((e,{alert:t})=>n([t])(e)),((e,t,{alert:n})=>r([n])(e)),((e,{alert:r})=>t([r])(e)))),e.applyWithFilter=(e,t)=>(r,n,i,a)=>{const o=(0,h.ls)(s.uK(e),(e=>(0,h.ls)(a(e.left),i(e.right))));return t(r,(t=>n(t.filter(e))),o,a)}}(r=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=g.Ue((e=>e.items),((e,r)=>t.setVisibleItems(e)(r))),e.getFeedItems=()=>g.Ue((e=>e.items),((e,r)=>t.setVisibleItems(e)(r)))}(n=e.Prism||(e.Prism={}));e.getEq=e=>c.f7(((t,r)=>{if(t.kind===E._L.abstract||r.kind===E._L.abstract)return t.id===r.id;{const n=t,i=r;return t.id===r.id&&f.Eh(e).equals(E.In.getActiveItem(n),E.In.getActiveItem(i))&&n.meta.equals(r.meta)&&n.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===E._L.abstract)return(0,w.AC)(e.id);{const r=e;let n=7;return n=31*n+(0,w.AC)(e.id),n=31*n+(t=E.In.getActiveItem(r),(0,h.zG)(t,f.g_((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*n+e.meta.count}var t}};let T;!function(e){e.getAlertReleaser=e=>({release:t=>r=>{const n=r.items.map(e.removeAlertFromItem([t],r)),o=(0,h.zG)(r.cardIndex,f.tS((t=>(0,h.zG)(n.findRightFrom(e.isScheduledToDispose,t),f.UI((e=>e.index))))),f.pC)?E.wj.skip:E.wj.force;return(0,a._)((0,i._)({},r),{animation:o,items:n})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>r=>{const n=(0,h.zG)(r,e,f.hX((0,m.ff)(t.isScheduledToDispose)),f.UI((e=>r.items.add((0,h.zG)(e,t.unselect(f.YP,r.itemsOrd))))),f.fS((()=>r.items)));return(0,a._)((0,i._)({},r),{items:n,animation:E.wj.force,cardIndex:f.YP})}}),e.getHasChecksFeed=()=>({willShowChecksFeed:e=>e.type!==E.Nm.advanced});const t=e=>(0,h.zG)(u.Mh,u.Uz((t=>(0,h.zG)(e.items.get(t.id),f.UI(v.ei("index")),f.fS((()=>-1))))));e.getSelectableByAlert=(e,r)=>({selectItemByAlert:n=>o=>{if(!r.willShowChecksFeed(o))return o;const s=e(o),l=o.items.find(r.isSelectableByAlert(n));(0,I.kG)(f.pC(l),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>n.alert.toString()));const{value:c,index:p}=f.MH(l),g=(0,d.ur)(u.iP())([o.itemsOrd,t(o)]),y=(0,h.zG)(s,f.hX((0,m.ff)(r.isScheduledToDispose)),f.UI((e=>o.items.add((0,h.zG)(e,r.unselect(f.G(c),o.itemsOrd))))),f.fS((()=>o.items))).add((0,h.zG)(c,r.selectByAlert(s,n,g)));return(0,a._)((0,i._)({},o),{items:y,animation:E.wj.force,cardIndex:f.G(p)})}}),e.getSelectableById=(e,r)=>({selectItemById:n=>o=>{const s=e(o),l=o.items.get(n),{value:c,index:p}=f.MH(l),g=(0,d.ur)(u.iP())([o.itemsOrd,t(o)]),y=(0,h.zG)(s,f.hX((0,m.ff)(r.isScheduledToDispose)),f.UI((e=>o.items.add((0,h.zG)(e,r.unselect(f.G(c),g))))),f.fS((()=>o.items))).add((0,h.zG)(c,r.select(s,g)));return(0,a._)((0,i._)({},o),{items:y,animation:E.wj.force,cardIndex:f.G(p)})}}),e.getItemReleaser=()=>({removeItemById:e=>t=>n(t.items.remove(e))(t)});function r(e,t,r){return n=>(0,h.zG)(f.of(n),f.hX((e=>!r.isScheduledToDispose(e)&&t(e))),f.tS(r.hasActiveAlert),f.hX((t=>e.isRegistered(t.alert.id))))}e.getMetaUpdatable=function(){return{updateMeta:e=>t=>(0,a._)((0,i._)({},t),{meta:S.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{changeItemsVisualState:e=>r=>t.willShowChecksFeed(r)?(0,a._)((0,i._)({},r),{items:r.items.map(t.changeVisualState(e))}):r,finishApplyAnimation:r=>n=>{(0,I.kG)(r.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const o=n.id,s=e=>{const n=e.items.map(t.removeAlertFromItem(r,e));return(0,a._)((0,i._)({},e),{items:n})};if(S.R.isOutcomeId(o))return s(n);switch(o){case S.R.SpecialId.AllAlerts:case S.R.SpecialId.PredictionTakeaways:case S.R.SpecialId.PredictionEmogenie:case S.R.SpecialId.RealTimeProofit:case S.R.SpecialId.FreePremiumAlerts:return s(n);case S.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case S.R.SpecialId.Plagiarism:return(0,I.kG)(r.every(C.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),s(n);default:return(0,I.vE)(o)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,h.zG)(E.In.getActiveItem(t),f.Gg((t=>e.isScheduledToDispose(t))))||f.Wi(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasSelectableAlert=r,e.getHasAlerts=function(e,t,n,i){const a=e=>r(t,n(e),i),s=e=>e.id===S.R.SpecialId.Premium||e.id===S.R.SpecialId.Plagiarism?e.meta.count:(0,h.zG)(E.In.getActiveItem(e),f.tS(i.hasActiveAlert),f.UI((e=>e.alert)),f.Gg(C.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:s,getActiveAlertsCount:s,getActiveAlert:e=>(0,h.zG)(E.In.getActiveItem(e),f.tS(i.hasActiveAlert)),findFirstAlert:e=>(0,h.zG)(e.items.values(),p.f2(a(e))),findNextAlert:t=>((0,I.kG)(f.pC(E.In.getActiveItem(t))===f.pC(t.cardIndex),"Lens is in wrong state: cardIndex must reference existing card"),(0,h.zG)((0,o.gz)(f.Kw)(E.In.getActiveItem(t),t.cardIndex),f.tS((([r,n])=>(0,h.zG)(e.nextAlert(r),f.wp((()=>e.prevAlert(r))),f.UI((e=>({alert:e,highlightIndex:0}))),f.wp((()=>(0,h.zG)(b.uU(t.items.values(),n,a(t)),f.UI((e=>e.value)))))))),f.vx((0,h.zG)(t.items.values(),p.f2(a(t))))))}};var n=e.setVisibleItems=e=>t=>(0,a._)((0,i._)({},t),{cardIndex:(0,h.zG)(E.In.getActiveItem(t),f.tS((t=>(0,h.zG)(e.get(t.id),f.UI((e=>e.index)))))),items:e})}(T=e.Capabilities||(e.Capabilities={}))}(n||(n={}))},8080:(e,t,r)=>{r.d(t,{v:()=>D});var n,i,a=r(50278),o=r(90023),s=r(36355),l=r(46025),c=r(9761);(n||(n={})).create=()=>({id:s.R.SpecialId.Cheetah,type:c.Nm.cheetah,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.Cheetah,title:"Grammarly Ideate"},s.R.Meta.group.empty,o.jv),hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),function(e){let t;e.create=function(e,r){return Boolean(t)||(t={id:s.R.SpecialId.Closed,kind:c._L.abstract,type:c.Nm.closed,meta:s.R.createStaticLens({id:s.R.SpecialId.Closed,title:"Closed"},s.R.Meta.group.empty,e),hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}),t}}(i||(i={}));var d,u,m,p=r(84910),h=r(78520),g=r(58303);u=d||(d={}),m=u.create=()=>({id:s.R.SpecialId.DraftAI,type:c.Nm.draftAI,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.DraftAI,title:"Draft AI"},s.R.Meta.group.empty,o.jv),transitionSource:g.YP,hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),u.createFromTransitionSource=e=>(0,h._)((0,p._)({},m()),{transitionSource:g.G(e)});var f,y,v=r(12518),x=r(61179),I=r(9615),b=r(17613),C=r(52303),S=r(14146),A=r(68717),w=r(26814),_=r(48922);!function(e){function t(e){return w.vM("cardId",e)}e.create=function(e,t,r){(0,b.kG)(e.id===s.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const n=w.aW.empty((e=>e.id),r.compare),i=C.YP;return{id:s.R.SpecialId.Plagiarism,kind:c._L.persistent,type:c.Nm.plagiarism,meta:e,cardIndex:i,items:n,itemsOrd:r,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===s.R.SpecialId.Plagiarism?(0,h._)((0,p._)({},t),{items:t.items.map((t=>_.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism)):t))}):t};var r=e.add=e=>r=>n=>{const i=t(r),a=Array.from(i.entries()).reduce(((t,[r,n])=>(0,o.zG)(t.update(r,(t=>e.addPlagiarismAlerts(t,n))),v.fold((()=>t.add(e.createAdded(r,n))),o.yR))),n.items),s=(0,o.zG)(c.In.getActiveItem(n),C.UI((({id:e})=>C.MH(a.get(e)).index))),l=C.Eh(I.Eq).equals(s,n.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,p._)({},n),{cardIndex:s,items:a,animation:l})},n=e.remove=e=>r=>n=>{const i=t(r),a=c.In.getActiveItem(n),s=Array.from(i.entries()).reduce(((t,[r,i])=>(0,o.zG)(t.update(r,(t=>{const r=(0,o.zG)(e.remove(t,i,(0,o.zG)(a,C.UI((e=>n.itemsOrd.compare(t,e)>0)),C.fS(o.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism))));return(0,o.zG)(a,C.Gg((e=>e.id===r.id)))?e.selectNextAlert(r,n.itemsOrd):r})),v.fold((()=>t),o.yR))),n.items);return(0,h._)((0,p._)({},n),{items:s,animation:c.wj.force})},i=e.update=e=>t=>r=>l(e)(t.filter((0,x.ff)(e.shouldAnimateAlertApply)))(r),l=e.updateWithAlerts=e=>r=>i=>{const[a,s]=S.uK(r,A.bZ.isRegistered),l=t(a),d=Array.from(l.entries()).reduce(((t,[r,n])=>(0,o.zG)(t.update(r,(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(_.$.isPlagiarism)))),v.fold((()=>t.add(e.createAdded(r,n))),o.yR))),n(e)(s)(i).items),u=(0,o.zG)(c.In.getActiveItem(i),C.UI((({id:e})=>(0,o.zG)(d.get(e),C.UI((({index:e})=>e)),C.fS((()=>0))))));return(0,h._)((0,p._)({},i),{cardIndex:u,items:d,animation:c.wj.proceed})};e.getAlertsHandler=function(e){return t=>a.v.ApplyDiff.apply(t,r(e),i(e),n(e))}}(f||(f={})),function(e){e.create=function(e,t,r){const n=w.aW.empty((e=>e.id),r.compare);return{id:s.R.SpecialId.Premium,kind:c._L.active,type:c.Nm.advanced,meta:e,items:n,itemsOrd:r,cardIndex:g.YP,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.getAlertsHandler=function(e,i){return o=>a.v.ApplyDiff.apply(o,t(e),n(e,i),r(i))};var t=e.add=e=>t=>r=>{const n=t.map(e.createFromAlert(r.id)),i=r.items.add(n),a=c.In.getActiveItemIndex(i)(r);return(0,h._)((0,p._)({},r),{cardIndex:a,items:i,animation:c.wj.proceed})},r=e.remove=e=>t=>r=>{const n=new Set(t.map((e=>e.id))),i=r.items.filter((0,o.ls)(e.hasActiveAlert,g.UI((e=>e.alert)),g.Gg((e=>n.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),r.items),a=c.In.getActiveItemIndex(i)(r);return(0,h._)((0,p._)({},r),{cardIndex:a,items:i})},n=e.update=(e,n)=>i=>a=>{const[s,l]=S.uK(i,A.bZ.isRegistered);return(0,o.zG)(a,r(n)(l),t(e)(s))}}(y||(y={}));var k,E=r(18117),T=r(59833),M=r(97767),G=r(19103);!function(e){const t=A.h$.ord;function r(e){return e.id}function n(e){const t=e.map((e=>[G.R.getAlertOutcomeBundle(e),e]));return w.vM((([e,t])=>r(e)),t)}e.getCardId=r,e.initCardsHash=function(e,r,i,a,s){(0,b.kG)((0,o.zG)(i,C.wo((({alertIndex:e})=>void 0!==r[e]))),"Can not find alert for provided alertIndex");const l=n(r),c=(0,o.zG)(i,C.UI((({alertIndex:e})=>((0,b.kG)(void 0!==r[e],"Can not find alert for provided alertIndex"),r[e]))));let d=C.YP;const u=w.aW.empty(G.R.getId,s.compare),m=Array.from(l.entries()).reduce(((r,[n,i])=>{const s=i.map((([e,t])=>t)),l=i[0][0];return(0,o.zG)(c,C.UI((e=>s.indexOf(e))),C.hX((e=>e>-1)),C.g_((()=>r.add(a.createRendered(e)(n,l,s,t))),(i=>{const o=a.createFocused(e)(n,l,s,i,t);return d=C.G(n),r.add(o)})))}),u),p=(0,o.zG)(d,C.tS((e=>(0,o.zG)(m.get(e),C.UI((e=>e.index))))));return{cardIndex:p,cards:m}},e.create=function(e,t,r,n){const i=w.aW.empty(G.R.getId,n.compare),o=C.YP;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:i,itemsOrd:n,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}};var i=e.add=(e,r)=>i=>a=>{if(0===i.length)return a;const s=n(i),l=Array.from(s.entries()).reduce(((n,[i,s])=>{const l=s.map((([e,t])=>t)),c=s[0][0];return(0,o.zG)(n.update(i,(e=>r.updateWithAlerts(l)(e))),v.fold((()=>n.add(e.createAdded(a.id)(i,c,l,t))),o.yR))}),a.items),d=(0,o.zG)(a,c.In.getActiveItemIndex(l)),u=C.Eh(I.Eq).equals(d,a.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,p._)({},a),{cardIndex:d,items:l,animation:u})},s=e.remove=e=>t=>r=>{const i=n(t),a=Array.from(i.entries()).reduce(((t,[n,i])=>(0,o.zG)(t.update(n,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),r)(t))),v.fold((()=>t),o.yR))),r.items),s=(0,o.zG)(r,c.In.getActiveItemIndex(a));return(0,h._)((0,p._)({},r),{cardIndex:s,items:a,animation:c.wj.force})},l=e.update=(e,t,r)=>n=>i=>d(e,r)(n.filter((0,M.ff)(t.shouldAnimateAlertApply)))(i),d=e.updateWithAlerts=(e,r)=>i=>l=>{if(0===i.length)return l;const{left:d,right:u}=(0,o.zG)(i,a.v.filterAlertInLens(l,r),T.uK(A.bZ.isRegistered)),m=n(u),g=Array.from(m.entries()).reduce(((n,[i,a])=>{const s=a.map((([e,t])=>t)),c=a[0][0];return(0,o.zG)(n.update(i,(e=>r.updateWithAlerts(s)(e))),v.fold((()=>n.add(e.createAdded(l.id)(i,c,s,t))),o.yR))}),s(r)(d)(l).items),f=(0,o.zG)(l,c.In.getActiveItemIndex(g));return(0,h._)((0,p._)({},l),{cardIndex:f,items:g,animation:c.wj.proceed})};e.getAlertsHandler=function(e,t,r){return(n,c)=>d=>{const u=a.v.ApplyDiff.applyWithFilter(c,a.v.ApplyDiff.apply);return(0,o.zG)(d,u(n,i(e,r),l(e,t,r),s(r)))}},e.getHasAlerts=function(e,t,r,n){const i=a.v.Capabilities.getHasAlerts(e,t,r,n),s=e=>a.v.Capabilities.getHasSelectableAlert(t,r(e),n);return(0,h._)((0,p._)({},i),{findNextAlert:t=>(0,o.zG)((0,E.gz)(C.Kw)(c.In.getActiveItem(t),t.cardIndex),C.tS((([r,n])=>(0,o.zG)(e.nextAlert(r),C.wp((()=>e.prevAlert(r))),C.wp((()=>(0,o.zG)(S.Bs(t.items.values(),n+1,s(t)),C.wp((()=>S.Bs(t.items.values(),0,s(t)))),C.tS((e=>(0,o.zG)(t.items.getAt(e.index),C.UI((e=>e.alerts[0]))))))))))),C.UI((e=>({alert:e,highlightIndex:0}))))})}}(k||(k={}));var L,D,N=r(21147),z=r(57326);!function(e){let t;function r(e,t){return`${e.id}_${t.id}`}e.isInSuccess=function(e,t=o.W8){return r=>0===r.meta.count&&(0===r.items.filter(t).size||g.Wi(r.items.filter(t).find((t=>!e.isScheduledToDispose(t)))))},function(e){function t(e){return t=>c.nL.hasSuccess(t)&&c.nL.hasItems(t)&&L.isInSuccess(e)(t.currentLens)}e.isInSuccess=t;e.isInGlobalSuccess=e=>r=>c.nL.is(s.R.SpecialId.AllAlerts)(r)&&t(e)(r)}(t=e.State||(e.State={})),e.getCardId=r,e.create=function(e,t,r,n){const i=w.aW.empty(z.X.getId,n.compare),o=g.YP;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:i,itemsOrd:n,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(r).equals(this,e)}}};var n=e.add=(e,t,n)=>i=>o=>{const s=i.map((i=>{const s=t.createAdded(o.id)(r(o.meta,i),i);return e(o,i)?s:a.v.Items.hideItem(s,n)})),l=o.items.add(s),d=c.In.getActiveItemIndex(l)(o),u=g.Eh(N.lr).equals(d,o.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,p._)({},o),{cardIndex:d,items:l,animation:u})},i=e.remove=e=>t=>r=>{const n=new Set(t.map((e=>e.id))),i=r.items.map(e.remove((0,o.ls)(e.hasActiveAlert,g.UI((e=>e.alert)),g.g_(o.jv,(e=>n.has(e.id)))),(e=>(0,o.zG)(c.In.getActiveItem(r),g.UI((t=>r.itemsOrd.compare(e,t)>0)),g.fS(o.W8))))),a=(0,o.zG)(r.cardIndex,g.tS((t=>(0,o.zG)(i.findRightFrom((t=>e.isScheduledToDispose(t)),t),g.UI((e=>e.index))))),g.pC)?c.wj.skip:c.wj.force,s=(0,o.zG)(r,c.In.getActiveItemIndex(i));return(0,h._)((0,p._)({},r),{cardIndex:s,items:i,animation:a})},l=e.update=(e,t,r)=>n=>i=>d(t,e,r)(n.filter((0,M.ff)(t.shouldAnimateAlertApply)))(i),d=e.updateWithAlerts=(e,t,n)=>i=>s=>{if(0===i.length)return s;const l=(0,o.zG)(i,a.v.filterAlertInLens(s,n),T.UI((e=>[r(s.meta,e),e])),T.u4(s.items,((r,[i,l])=>(0,o.zG)(r.update(i,n.updateWithAlerts([l])),v.fold((()=>{const o=e.createAdded(s.id)(i,l);return r.add(t(s,l)?o:a.v.Items.hideItem(o,n))}),o.yR))))),d=c.In.getActiveItemIndex(l)(s);return(0,h._)((0,p._)({},s),{cardIndex:d,items:l,animation:c.wj.proceed})};e.getAlertHandler=function(e,t,r=o.W8){return(s,c)=>{const d=a.v.ApplyDiff.applyWithFilter(c,a.v.ApplyDiff.apply);return a=>(0,o.zG)(a,d(s,n(r,e,t),l(r,e,t),i(t)))}}}(L||(L={})),function(e){var t=a.v.Prism;e.Prism=t;var r=a.v.Items;e.Items=r;var o=a.v.Capabilities;e.Capabilities=o;var s=a.v.ApplyDiff;e.ApplyDiff=s;e.filterAlertInLens=a.v.filterAlertInLens,e.findItemWithAlertInLens=a.v.findItemWithAlertInLens,e.lensHash=a.v.lensHash,e.getEq=a.v.getEq;var l=i;e.Closed=l;var c=d;e.DraftAI=c;var u=f;e.Plagiarism=u;var m=y;e.Premium=m;var p=k;e.WithBundles=p;var h=L;e.WithSuccess=h;var g=n;e.Cheetah=g}(D||(D={}))},80936:(e,t,r)=>{r.d(t,{l:()=>D});var n=r(32490),i=r(64151),a=r(12518),o=r(21147),s=r(95922),l=r(58303),c=r(90023),d=r(9141),u=r(19813),m=r(17613),p=r(97767),h=r(36355),g=r(63532),f=r(53976),y=r(91089),v=r(74822),x=r(59179),I=r(84714),b=r(62552),C=r(64271),S=r(20161),A=r(77400),w=r(54115),_=r(66878),k=r(10883),E=r(24666),T=r(48922),M=r(48746),G=r(9761),L=r(5961);class D{dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case G.nL.Effect.Type.Applicator:case G.nL.Effect.Type.ItemsApplicator:return e.source;case G.nL.Effect.Type.SwitchLens:return e.source.pipe(g.b((e=>this._switchLensActions.next(e))),f.c(y.C));case G.nL.Effect.Type.SwitchAlert:return e.source.pipe(g.b((e=>this._switchAlertActions.next(e))),f.c(y.C));default:return(0,m.vE)(e)}}_checkState(e){try{if(G.nL.hasCards(e)){const t=e.currentLens.items.filter((0,p.W9)(M.o.isAnimatable,M.o.isFocused));(0,m.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return a.left(e)}return a.right(void 0)}constructor(e,t,r,m,p,f,y){(0,n._)(this,"_state",void 0),(0,n._)(this,"_stateProvider",void 0),(0,n._)(this,"_alertsReader",void 0),(0,n._)(this,"_alertsService",void 0),(0,n._)(this,"_stateSideEffects",void 0),(0,n._)(this,"_getActiveAlert",void 0),(0,n._)(this,"_stateTransformer",void 0),(0,n._)(this,"focusLens",void 0),(0,n._)(this,"focusAlert",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"_ts",void 0),(0,n._)(this,"_switchLensActions",void 0),(0,n._)(this,"_switchAlertActions",void 0),(0,n._)(this,"_addMetadata",void 0),(0,n._)(this,"_focusLensEffect",void 0),(0,n._)(this,"_focusAlertEffect",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"_effects",void 0),this._state=e,this._stateProvider=t,this._alertsReader=r,this._alertsService=m,this._stateSideEffects=p,this._getActiveAlert=f,this._stateTransformer=y,this.focusLens=(e,t,r={toFocus:G.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:r})},this.focusAlert=(e,t,r)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:r}})},this._log=u.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=u.C8.TimeSeries.rootFemetrics.getMetric("lens_state.manager"),this._switchLensActions=new v.x,this._switchAlertActions=new v.x,this._addMetadata=e=>t=>t.pipe(x.U((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:r=G.Zz.defaultOptions.focusBehavior,order:n}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),h.R.isClosedId(e))return(0,c.zG)(I.of(G.nL.Effect.Applicator.Source.override((0,L.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(h.R.isDraftAIId(e)||h.R.isCheetah(e)){const t=h.R.isCheetah(e)?(0,L.yC)():(0,L.zc)();return(0,c.zG)(I.of(G.nL.Effect.Applicator.Source.override(t)),this._addMetadata({sourceId:"LSM.focusLensEffect"}))}const i=this._state.get(),a=i.patch({switchOrder:Boolean(n)?n:i.switchOrder,alertSource:t});return(0,c.zG)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:r}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:r})=>{this._log.isEnabled(u.zW.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const n=this._state.get(),i=n.patch({switchOrder:Boolean(r.order)?r.order:n.switchOrder,alertSource:t});return(0,c.zG)(this._stateProvider.getLensEventsByAlert(i,function(e,t,r){if(e===h.R.SpecialId.PredictionTakeaways||e===h.R.SpecialId.PredictionEmogenie||e===h.R.SpecialId.RealTimeProofit||e===h.R.SpecialId.FreePremiumAlerts)return e;if(void 0!==r)return r;if(e===h.R.SpecialId.Closed||e===h.R.SpecialId.AllAlerts)return h.R.SpecialId.AllAlerts;return t}(n.currentLens.id,e.alert.lensId,r.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const M=this._state.get(),D=this._stateTransformer,N=new b.X(M);this._effects=C.T(...this._stateSideEffects.map((({when:e,what:t,id:r})=>this._state.view("currentLens","id").view(e).pipe(S.w(A.Ft((0,c.zG)(this._effectToApplicator(t),this._addMetadata({sourceId:r}))))))),C.T(this._switchAlertActions.pipe(x.U(this._focusAlertEffect)),this._switchLensActions.pipe(x.U(this._focusLensEffect))).pipe(w.B()));const z=this._ts.getTimer("batched.long_state_change"),P=o.MW({activeAlert:l.Eh(T.$.eq),lensId:d.Eq});this._subs=[this._effects.pipe(_.K(((e,t)=>(this._log.error("Got error from effects: ",e),t))),k.M(N,(({source:e,metadata:t},r)=>({state:e(r),metadata:t}))),_.K(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),g.b((e=>{this._log.isEnabled(u.zW.i.TRACE)&&this._log.trace("lens state before state transformer: ",e)})),x.U(D),_.K(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,c.zG)(e,a.fold((({state:e,metadata:t})=>{this._log.isEnabled(u.zW.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,c.zG)(this._checkState(e),a.fold((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>N.next(e))))}),a.fold((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,c.zG)(N,x.U((e=>({activeAlert:G.nL.getActiveAlert(this._getActiveAlert)(e),lensId:e.currentLens.id}))),g.b((e=>this._log.trace("active alert: ",e.activeAlert))),E.x(P.equals),S.w((({activeAlert:e,lensId:t})=>(0,c.zG)(e,A.aI((e=>(0,c.zG)(this._alertsService.takeReference(e,`activeCard_${t}`),a.mapLeft((e=>this._log.error("can not take alertRef",e))),a.fold(s.of(c.Q1),(e=>e.dispose))))))))).subscribe(),N.subscribe((e=>{const t=performance.now();i.unstable_batchedUpdates((()=>{this._state.set(e)}));const r=performance.now()-t;r>16&&z.recordTime(r)}))],G.nL.hasCards(M)&&(0,c.zG)(G.nL.getActiveAlertHighlight(this._getActiveAlert)(M),l.hX((e=>this._alertsReader.isRegistered(e.alert.id))),l.g_((()=>this._switchLensActions.next({lensId:M.currentLens.id,alertSource:M.alertSource,options:{order:M.switchOrder,toFocus:G.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:M.alertSource,options:{lensId:M.currentLens.id,order:M.switchOrder}}))))}}(0,n._)(D,"toLensAlert",(({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})))},5961:(e,t,r)=>{r.d(t,{T:()=>E,oq:()=>G,yC:()=>M,zc:()=>T});var n=r(32490),i=r(21147),a=r(61179),o=r(90023),s=r(19813),l=r(17613),c=r(90490),d=r(52303),u=r(97767),m=r(68717),p=r(36355),h=r(58578),g=r(9746),f=r(84714),y=r(90572),v=r(24666),x=r(59179),I=r(64271),b=r(78129),C=r(63532),S=r(20161),A=r(954),w=r(9761),_=r(8080);const k=(0,a.ff)(m.bZ.isMuted),E=()=>w.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:_.v.Closed.create(o.jv,i.f7(o.jv))}),T=()=>w.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:_.v.DraftAI.create()}),M=()=>w.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:_.v.Cheetah.create()});class G{static _mapByActiveLensId(e,t,r,n){if(p.R.isOutcomeId(e))return n();switch(e){case p.R.SpecialId.Plagiarism:return t();case p.R.SpecialId.Premium:return r();case p.R.SpecialId.AllAlerts:case p.R.SpecialId.PredictionTakeaways:case p.R.SpecialId.PredictionEmogenie:case p.R.SpecialId.RealTimeProofit:case p.R.SpecialId.FreePremiumAlerts:return n();default:return(0,l.vE)(e)}}_conditionedApplicator(e,t){return r=>n=>e(n,r)?t(r)(n):n}static _filterALEvents(e,t){return r=>f.of((0,o.zG)(r,h.p.Diff.filter((t=>e(t.alert))),(e=>(t.isEnabled(s.zW.i.TRACE)&&t.trace("diff after filter",e),e)))).pipe(y.h((0,a.ff)(c.vh.isEmpty)))}emptyState(e=p.R.SpecialId.AllAlerts){return w.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:d.YP,previousState:d.YP,alertSource:m.l$.api}),alertSource:m.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,r={}){const n=this._getActiveLensMeta(t),i=this._lensAlerts(n),a=this._createState(e,d.YP,n,t,i),s=r.focusBehavior?this._getAlertToFocus(r.focusBehavior,a):d.YP;e.currentLens.id===t&&w.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==i.length&&this._log.warn("Lens contains inconsistent number of alerts",n.id);const l=w.nL.hasItems(a)?(0,o.zG)(s,d.g_((()=>a),(r=>this._createState(e,d.G(r),n,t,i)))):a;return this._generateEventsFromState(l,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,r){(0,l.kG)(d.pC(this._alertsReader.getById(r.alert.id)),"Can't focus non existing alert",r.alert.id);const n=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(r.alert)&&w.nL.hasItems(e)?w.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(r),e):this._createState(e,d.G(r),n,t,this._lensAlerts(n));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findNextAlertInTextByLens(e,t){return this._alertSearchService.findNextAlertInText(e,(0,u.W9)(this._alertsFilterService.alertVisibleInText(t.id),(t=>t.id!==e.alert.id),(0,o.ls)(_.v.findItemWithAlertInLens(t,this._capabilities),d.pC)))}findPremiumAlert(){return this._lensPreviewVM.getLens(p.R.SpecialId.Premium).get().count>0?this._alertSearchService.findPremiumAlert():d.YP}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return w.nL.hasItems(e)&&e.currentLens.kind===w._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):w.nL.hasItems(e)&&e.currentLens.type===w.Nm.lensview?this._lenses.pipe(v.x(g.w.eq.equals),x.U((0,o.ls)(g.w.lookup(e.currentLens.id),d.UI(this._updateMetaSource(e.currentLens.id)),d.fS((()=>w.nL.Effect.Applicator.Source.identity))))):w.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return I.T(this._checkingState.pipe(b.G(),x.U((([e,t])=>h.p.diff(e,t))),C.b((e=>{this._log.isEnabled(s.zW.i.TRACE)&&this._log.trace("new alerts diff",e)})),S.w(G._filterALEvents(e.currentLens.meta.filter,this._log)),x.U(this._conditionedApplicator(((e,t)=>{const r=this._alertsFilterService.getLensesFilter(e.currentLens.id),n=(0,o.zG)(t,h.p.Diff.filter((0,a.ff)((({alert:e})=>r(e)))));return c.vh.isEmpty(n)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(A.O(w.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=G._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(p.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(p.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,l.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState(e,t,r,n,i){(0,l.kG)(d.wo((({alert:e})=>d.pC(this._alertsReader.getInteractable(e.id))))(t),"we can create state only with alert in registered state",(()=>(0,o.zG)(t,d.g_((()=>"null"),(e=>e.toString())))));const a=e.alertSource,s=e.switchOrder,c=this._createLens({lensId:n,initialLens:r,visibleAlerts:i,alertHighlight:t,alertSource:a,previousState:d.G(e.currentLens)});return w.nL.create({currentLens:c,alertSource:a,switchOrder:s})}_createLens(e){return this._lensFactory(e.lensId,e.initialLens,e.visibleAlerts,this._focusFirstFilter(e),e.previousState)}_getAlertToFocus(e,t){switch(e.kind){case w.nL.Effect.FocusBehaviorType.noFocus:case w.nL.Effect.FocusBehaviorType.unFocus:return d.YP;case w.nL.Effect.FocusBehaviorType.focusFirst:return w.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):d.YP;case w.nL.Effect.FocusBehaviorType.focusNext:return w.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):d.YP;case w.nL.Effect.FocusBehaviorType.focusAlert:return d.G(e.alertHighlight);default:(0,l.vE)(e)}}constructor(e,t,r,i,a,l,c,d,u,p=w.nL.FocusFirstFilter.defaultFilter){(0,n._)(this,"_checkingState",void 0),(0,n._)(this,"_alertsReader",void 0),(0,n._)(this,"_lenses",void 0),(0,n._)(this,"_alertSearchService",void 0),(0,n._)(this,"_lensPreviewVM",void 0),(0,n._)(this,"_lensFactory",void 0),(0,n._)(this,"_alertsHandlerFactory",void 0),(0,n._)(this,"_capabilities",void 0),(0,n._)(this,"_alertsFilterService",void 0),(0,n._)(this,"_focusFirstFilter",void 0),(0,n._)(this,"_transformAlertsDiffToApplicator",void 0),(0,n._)(this,"_log",void 0),(0,n._)(this,"findClosestAlertHighlight",void 0),(0,n._)(this,"findNextAlertInText",void 0),(0,n._)(this,"_updateMetaSource",void 0),(0,n._)(this,"_lensAlerts",void 0),this._checkingState=e,this._alertsReader=t,this._lenses=r,this._alertSearchService=i,this._lensPreviewVM=a,this._lensFactory=l,this._alertsHandlerFactory=c,this._capabilities=d,this._alertsFilterService=u,this._focusFirstFilter=p,this._transformAlertsDiffToApplicator=e=>t=>r=>w.nL.hasItems(r)?r.patch({currentLens:e(t,k)(r.currentLens)}):r,this._log=s.C8.Logging.getLogger("FocusedLensManagerImpl"),this.findClosestAlertHighlight=this._alertSearchService.findClosestAlertHighlight,this.findNextAlertInText=this._alertSearchService.findNextAlertInText,this._updateMetaSource=e=>t=>r=>e===r.currentLens.id&&w.nL.hasItems(r)?w.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),r):r,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,o.zG)(this._checkingState.get(),h.p.reduce([],((e,{alert:r})=>t(r)?[...e,r]:e)),(e=>e.sort(m.h$.ord.compare)))}}}},60970:(e,t,r)=>{r.d(t,{ad:()=>u,gi:()=>m,is:()=>c,kn:()=>d});var n,i=r(32490),a=r(17613),o=r(36355),s=r(9761),l=r(8080);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return r=>t(e(r))}}(n||(n={}));const c=(e,t)=>r=>{if(o.R.isOutcomeId(r))return l.v.WithSuccess.getAlertHandler(e,t);switch(r){case o.R.SpecialId.Premium:return l.v.Premium.getAlertsHandler(e,t);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return l.v.WithSuccess.getAlertHandler(e,t);default:return(0,a.vE)(r)}},d=(e,t,r,n,i)=>a=>r(a)?l.v.WithBundles.getAlertsHandler(e,t,i):n(a);class u{create(e,t){return this._lensPredicate(t)?l.v.WithBundles.create(e,t,this._itemEq,this._itemOrd):this._inner.create(e,t)}constructor(e,t,r,n){(0,i._)(this,"_lensPredicate",void 0),(0,i._)(this,"_inner",void 0),(0,i._)(this,"_itemEq",void 0),(0,i._)(this,"_itemOrd",void 0),this._lensPredicate=e,this._inner=t,this._itemEq=r,this._itemOrd=n}}class m{create(e,t){const r=()=>l.v.WithSuccess.create(e,t,this._itemEq,this._itemOrd);if(o.R.isOutcomeId(e))return r();switch(e){case o.R.SpecialId.Premium:return l.v.Premium.create(t,this._itemEq,this._itemOrd);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return r();default:return(0,a.vE)(e)}}constructor(e,t){(0,i._)(this,"_itemEq",void 0),(0,i._)(this,"_itemOrd",void 0),this._itemEq=e,this._itemOrd=t}}},90155:(e,t,r)=>{r.d(t,{EQ:()=>N,ay:()=>L,$A:()=>D});var n,i=r(32490),a=r(3190),o=r(90023),s=r(4025),l=r(17613),c=r(52303),d=r(68717),u=r(36355),m=r(74822),p=r(24666),h=r(20161),g=r(36344),f=r(8867),y=r(29416),v=r(59179),x=r(954),I=r(53976),b=r(91089),C=r(77400),S=r(704),A=r(84714),w=r(63532),_=r(10883),k=r(8794),E=r(68545),T=r(90572),M=r(59833),G=r(21147);!function(e){var t=e.eq=(0,G.MW)({alert:(0,G.Uz)((e=>e.id))(G.w4),highlightIndex:G.w4});e.getEq=()=>t,e.getHighlightRange=e=>M.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(n||(n={}));var L,D,N,z=r(9761),P=r(50278);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(L||(L={})),function(e){e.Mock=class{ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}constructor(){(0,i._)(this,"events",new m.x),(0,i._)(this,"focusAlertHighlight",(()=>s.t$(new Error("Method not implemented.")))),(0,i._)(this,"highlightAlertHighlight",(()=>s.t$(new Error("Method not implemented.")))),(0,i._)(this,"moveCursorToHighlight",o.Q1)}},e.getHighlightIndex=function(e,t){return(0,o.zG)(t,s.Vn((()=>new Error("Mark is collapsed"))),s.tS((t=>s.vM((()=>{const r=e.getHighlightRanges(),n=r.length>1?r.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,l.kG)(-1!==n,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:r,targetRange:t}))),n})))))}}(D||(D={})),function(e){var t=e.getHighlightSubscription=(e,t,r)=>e.pipe(p.x(c.Eh(d.h$.ord).equals),h.w((e=>(0,o.zG)(e,c.g_((()=>g.E),(e=>f.y.create((()=>(r.debug(`highlight mark: ${e.id}`),(0,o.zG)(t.highlightAlertHighlight(e),s.g_((t=>(r.error("Cannot highlight mark",t,{alertId:e.id}),o.Q1)),(t=>()=>{r.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),r=(e.getHoverAlertHightlightSource=(e,t,r,n)=>(0,o.zG)(n,y.b(100),v.U((0,o.ls)(c.tS((n=>{const i=e.get();return z.nL.hasCards(i)?i.currentLens.items.find((e=>(0,o.zG)(t.hasActiveAlert(e),c.UI((e=>e.alert)),c.Gg((t=>e.id===n&&r.isRegistered(t.id)))))):c.YP})),c.tS((({value:e})=>t.hasActiveAlert(e))),c.UI((e=>e.alert)))),p.x(c.Eh(d.h$.ord).equals),v.U(c.UI((t=>({alert:t,highlightIndex:0,source:e.get().alertSource})))),x.O(c.YP)),e.highlightMarkByHighlightedCard=(e,r,n,i,a,s)=>{const l=t(e.hovered.pipe(y.b(100),v.U((0,o.ls)(c.tS((e=>{const t=r.get();return z.nL.hasCards(t)?t.currentLens.items.find((t=>(0,o.zG)(a.hasActiveAlert(t),c.UI((e=>e.alert)),c.Gg((r=>t.id===e&&i.isRegistered(r.id)))))):c.YP})),c.tS((({value:e})=>a.hasActiveAlert(e))),c.UI((e=>e.alert))))),n,s);return{id:"highlightMarkByHighlightedAlert",when:u.R.isWithAlertsId,what:z.nL.Effect.Applicator.create(l.pipe(I.c(b.C)))}},e.getAlertHighlightSource=e=>t=>(0,o.zG)(t,p.x(c.Eh(d.h$.ord).equals),v.U(c.UI((t=>({alert:t,source:e,highlightIndex:0})))),x.O(c.YP)),e.getActiveHighlightSource=(e,t,r)=>e.view(z.nL.mapper((({currentLens:e,alertSource:t})=>(0,o.zG)(r(e),c.UI((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(h.w(C.b2.rafScheduler),S.skipBy(c.Eh(n.getEq())),v.U(c.hX((e=>c.pC(t.getRegistered(e.alert.id)))))));e.focusMarkByActiveAlert=(e,t,n,i,a,l=A.of(!0))=>{const m=(0,o.zG)(r(e,n,i),w.b(c.bw((e=>a.trace("new alert highlight: ",e)))),_.M(l),h.w((([e,r])=>(0,o.zG)(e,c.g_((()=>(a.debug("Nothing to focus"),g.E)),(e=>f.y.create((()=>(a.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}, shouldMoveCursor: ${r}`),e.source===d.l$.sidebar&&r&&t.moveCursorToHighlight(e,"start"),(0,o.zG)(t.focusAlertHighlight(e),s.g_((t=>(a.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),o.Q1)),(t=>()=>{a.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))))));return{id:"focusMarkByActiveAlert",when:u.R.isWithAlertsId,what:z.nL.Effect.Applicator.create(m.pipe(I.c(b.C)))}},e.focusAlertByClickedMark=(e,t,r)=>({id:"focusAlertByActiveMark",when:z.nL.Effect.When.isSidebarOpen,what:z.nL.Effect.SwitchAlert.create(e.pipe(k.T(1),E.oA,_.M(t.pipe(T.h(z.nL.hasCards))),T.h((([e,t])=>d.bZ.State.isRegistered(e.alert.state)&&(0,o.zG)(e.alert,P.v.findItemWithAlertInLens(t.currentLens,r),c.pC))),v.U(a.li),v.U((({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:d.l$.text,options:{order:"textOrder"}})))))});e.createOnAlertApplySideEffect=function(e,t){const r=e.pipe(v.U((e=>r=>e.type===L.Type.AppliedAlertAnimationFinished&&r.currentLens.meta.filter(e.alert)&&d.bZ.isApplicableAlert(e.alert)&&z.nL.hasItems(r)?r.patch({currentLens:t.finishApplyAnimation([e.alert])(r.currentLens),alertSource:e.alert.state.source}):r)));return{id:"onAlertApply",when:z.nL.Effect.When.isSidebarOpen,what:z.nL.Effect.Applicator.create(r)}}}(N||(N={}))},92374:(e,t,r)=>{r.d(t,{Sh:()=>y,Bo:()=>v,eh:()=>f,TV:()=>a});var n,i,a,o=r(32490),s=r(90023),l=r(13391),c=r(36355),d=r(74822),u=r(93167),m=r(84910),p=r(78520),h=r(58303),g=r(17613);!function(e){e.Mock=class{get lensPreviews(){return Object.entries(this._previewConfig).reduce(((e,[t,r])=>{const n=this.getLens(t).get();return e[t]=(0,p._)((0,m._)({},c.R.Info.base),{logo:h.YP,id:t,title:n.title,description:n.description,status:r.status,progress:r.progress,isUnavailable:r.isUnavailable}),e}),{})}getLens(e){const t=t=>t.lensId===e;if(c.R.isOutcomeId(e))return l.h.create(new c.R.LensImpl(c.R.Info.createOutcome(e),c.R.Meta.group.empty,t));switch(e){case c.R.SpecialId.AllAlerts:return l.h.create(new c.R.LensImpl(c.R.Info.allAlerts,c.R.Meta.group.empty,t));case c.R.SpecialId.Premium:return l.h.create(new c.R.LensImpl(c.R.Info.premium,c.R.Meta.group.empty,t));case c.R.SpecialId.FreePremiumAlerts:return l.h.create(new c.R.LensImpl(c.R.Info.freePremium,c.R.Meta.group.empty,t));case c.R.SpecialId.Plagiarism:return l.h.create(new c.R.LensImpl(c.R.Info.plagiarism,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionTakeaways:return l.h.create(new c.R.LensImpl(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,t));case c.R.SpecialId.PredictionEmogenie:return l.h.create(new c.R.LensImpl(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,t));case c.R.SpecialId.RealTimeProofit:return l.h.create(new c.R.LensImpl(c.R.Info.realTimeProofit,c.R.Meta.group.empty,t));default:return(0,g.vE)(e)}}findLens(){return h.YP}constructor(e={}){(0,o._)(this,"_previewConfig",void 0),this._previewConfig=e}}}(n||(n={})),function(e){e[e.EngagementHook=0]="EngagementHook",e[e.DeliveryHook=1]="DeliveryHook",e[e.PlagiarismHook=2]="PlagiarismHook",e[e.GbVoxHook=3]="GbVoxHook",e[e.GbEnableVoxHook=4]="GbEnableVoxHook"}(i||(i={})),function(e){e.NotAvailable="NotAvailable",e.DemoDoc="DemoDoc",e.EmptyDocument="EmptyDocument"}(a||(a={}));var f,y,v;!function(e){e.NotAvailable="NotAvailable",e.EmptyDocument="EmptyDocument"}(f||(f={})),function(e){e.NotAvailable="NotAvailable"}(y||(y={})),function(e){let t;!function(e){e.default="default",e.priority="priority"}(t=e.LensTitleType||(e.LensTitleType={}));var r=e.documentActionAvailable={kind:"available"},i=(e.proofitDisabled=e=>({kind:"disabled",reason:e}),e.plagiarismDisabled=e=>({kind:"disabled",reason:e}),e.cheetahDisabled=e=>({kind:"disabled",reason:e}));e.Mock=class{constructor(e={}){(0,o._)(this,"lensPreviews",void 0),(0,o._)(this,"activeLensId",l.h.create(c.R.SpecialId.AllAlerts).view()),(0,o._)(this,"documentActions",l.h.create({proofit:r,plagiarism:r,cheetah:i(y.NotAvailable)})),(0,o._)(this,"premiumButtonData",void 0),(0,o._)(this,"freePremiumButtonData",void 0),(0,o._)(this,"showMuteControl",l.h.create(!1)),(0,o._)(this,"isDocumentActionsDisabled",l.h.create(!1)),(0,o._)(this,"events",new d.x),(0,o._)(this,"lensTitleType",t.default),(0,o._)(this,"dispose",s.Q1),(0,o._)(this,"a11yContrast",!1),(0,o._)(this,"cardVisualMode",l.h.create(u.j.CardVisualMode.RegularLightMode));const a=new n.Mock(e);this.lensPreviews=a.lensPreviews}}}(v||(v={}))},83821:(e,t,r)=>{r.d(t,{O:()=>x,x:()=>v});var n=r(14944),i=r(84242),a=r(97767),o=r(36355),s=r(11953);function l(e){return`${e} ${i._6(e,"alert","alerts")}`}const c=e=>(t,r,n,i)=>t?l(r.count):e(r,n,i),d=(e,t)=>(r,n,i)=>{const a=r.count;return a>0?l(a):i&v.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c(d("No alerts","Looking good"))},m={description:"Helps make your writing easier to understand.",stateMessage:c(((e,t,r)=>{const i=(0,a.WA)(n.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty)return"So far so good";if(e.count>0){if(s.g.isMin(t))return l(e.count);if(i(s.g.fromNumber(20)))return"Unclear";if(i(s.g.fromNumber(70)))return"A bit unclear";if(i(s.g.fromNumber(85)))return"Mostly clear";if(i(s.g.fromNumber(95)))return"Clear"}return"Very clear"}))},p={description:"Helps make your writing more interesting and effective.",stateMessage:c(((e,t,r)=>{const i=r&v.IsFreeUser,o=s.g.isMin(t),c=(0,a.WA)(n.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty||i&&o)return"Nothing yet";if(i||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Bland";if(c(s.g.fromNumber(80)))return"A bit bland";if(c(s.g.fromNumber(95)))return"Engaging"}return"Very engaging"}))},h={description:"Helps you make the right impression on your reader.",stateMessage:c(((e,t,r)=>{const i=r&v.IsFreeUser,o=s.g.isMin(t),c=(0,a.WA)(n.lt(s.g.ord))(t);if(r&v.IsDocumentEmpty||i&&o)return"Nothing yet";if(i||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Serious issues";if(c(s.g.fromNumber(40)))return"Very off";if(c(s.g.fromNumber(95)))return"Slightly off"}return"Just right"}))},g={description:"Your organization’s writing guidelines.",stateMessage:c(d("Nothing yet","All good"))},f={description:"Details on terms",stateMessage:c(d("Nothing yet","All good"))},y={[o.R.SpecialId.Correctness]:u,[o.R.SpecialId.Clarity]:m,[o.R.SpecialId.Engagement]:p,[o.R.SpecialId.Delivery]:h,[o.R.SpecialId.Vox]:g,[o.R.SpecialId.KnowledgeHub]:f,[o.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:c(((e,t,r)=>r&v.IsLensVisited&&!(r&v.IsDocumentEmpty)?r&v.IsLensActive?s.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"))},[o.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`))},[o.R.SpecialId.FreePremiumAlerts]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,r)=>r&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${i._6(e.count,"alert","alerts")}`))}};var v;function x(e){return y[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(v||(v={}))},66299:(e,t,r)=>{r.d(t,{L:()=>A,g:()=>o});var n=r(32490);if(3075==r.j)var i=r(58303);if(3075==r.j)var a=r(90023);var o,s=r(13391);if(3075==r.j)var l=r(1747);if(3075==r.j)var c=r(36355);if(3075==r.j)var d=r(84714);if(3075==r.j)var u=r(90572);if(3075==r.j)var m=r(14969);if(3075==r.j)var p=r(29479);if(3075==r.j)var h=r(68545);if(3075==r.j)var g=r(59179);if(3075==r.j)var f=r(954);if(3075==r.j)var y=r(78129);if(3075==r.j)var v=r(20161);if(3075==r.j)var x=r(63532);if(3075==r.j)var I=r(77400);if(3075==r.j)var b=r(74822);if(3075==r.j)var C=r(9761);if(3075==r.j)var S=r(8080);class A{dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_listenSuccessStateChange(){const e=e=>e.type===o.SuccessType.applied||e.type===o.SuccessType.zero?d.of(e):this._documentModel.checkingState.pipe(u.h((e=>"checking"!==e)),m.P(),p.h(e));return this._lensSwitch.pipe(h.cp((t=>this.textAmount.pipe(g.U(this._textAmountToSuccessType),f.O(t.prevLensType===C.Nm.lensview?{type:o.SuccessType.applied,isAllAlerts:t.isAllAlerts}:this._textAmountToSuccessType(this.textAmount.get())),y.G(),g.U((([e,t])=>e.type===o.SuccessType.applied&&t.type!==o.SuccessType.zero?e:t)),v.w(((t,r)=>0===r?d.of(t):e(t))),x.b((e=>{this._trackSuccessStateChanged(e.type===o.SuccessType.applied?"applied":e.type===o.SuccessType.zero?"nothingToCheck":"noIssues")})))))).subscribe(I.wW(this.successState))}constructor(e,t,r,d,m,p=S.v.WithSuccess.State.isInSuccess(d),h){(0,n._)(this,"_state",void 0),(0,n._)(this,"_documentModel",void 0),(0,n._)(this,"_trackSuccessStateChanged",void 0),(0,n._)(this,"_capabilities",void 0),(0,n._)(this,"mutedAlertsOptions",void 0),(0,n._)(this,"isInSuccess",void 0),(0,n._)(this,"_withBirthday",void 0),(0,n._)(this,"_getTextAmount",void 0),(0,n._)(this,"_subs",void 0),(0,n._)(this,"successState",void 0),(0,n._)(this,"textAmount",void 0),(0,n._)(this,"mutedAlerts",void 0),(0,n._)(this,"actionEvents",void 0),(0,n._)(this,"applicatorEffects",void 0),(0,n._)(this,"_currentLens",void 0),(0,n._)(this,"_listenTextSize",void 0),(0,n._)(this,"_lensSwitch",void 0),(0,n._)(this,"_textAmountToSuccessType",void 0),this._state=e,this._documentModel=t,this._trackSuccessStateChanged=r,this._capabilities=d,this.mutedAlertsOptions=m,this.isInSuccess=p,this._withBirthday=h,this._getTextAmount=e=>0===e?o.TextAmount.zero:e<=l.hD?o.TextAmount.small:o.TextAmount.large,this._subs=[],this.textAmount=s.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new b.x,this.applicatorEffects={id:"successViewModel.effects",when:c.R.isWithAlertsId,what:C.nL.Effect.Applicator.create(this.actionEvents.pipe(u.h((({type:e})=>e===o.ActionType.More)),g.U((()=>e=>(0,a.zG)(C.nL.hasItems(e)?this._capabilities.findFirstAlert(e.currentLens):i.YP,i.g_((()=>e),(t=>e.patch({currentLens:C.nL.hasItems(e)?this._capabilities.selectItemByAlert(t)(e.currentLens):e.currentLens}))))))))},this._currentLens=this._state.view((e=>({isSuccess:this.isInSuccess(e),type:e.currentLens.type,isAllAlerts:c.R.isMainLens(e.currentLens.id)}))),this._listenTextSize=()=>this._currentLens.view((e=>e.isSuccess)).pipe(v.w(I.Ft(this._documentModel.documentLength.view("trimmed"))),g.U(this._getTextAmount)).subscribe(I.wW(this.textAmount)),this._lensSwitch=this._currentLens.pipe(f.O(this._currentLens.get()),y.G(),g.U((([e,t])=>t.isSuccess?i.G({prevLensType:e.type,isAllAlerts:t.isAllAlerts}):i.YP))),this._textAmountToSuccessType=e=>e===o.TextAmount.zero?{type:o.SuccessType.zero,showBirthday:this._withBirthday.get()}:e===o.TextAmount.large?{type:o.SuccessType.large}:{type:o.SuccessType.small},this.successState=s.h.create({type:o.SuccessType.zero,showBirthday:this._withBirthday.get()}),this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.mutedAlerts=(0,a.zG)(m,i.UI((()=>({reviewMutedSuggestions:()=>{},mutedSuggestionsCount:this._state.view((e=>e.currentLens.meta.mutedCount))}))))}}!function(e){let t,r,i;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(r=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(i=e.SuccessType||(e.SuccessType={}));e.Mock=class{reviewMutedSuggestions(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}constructor(){(0,n._)(this,"textAmount",s.h.create(r.zero)),(0,n._)(this,"successState",s.h.create({type:i.zero,showBirthday:!1})),(0,n._)(this,"mutedSuggestionsCount",s.h.create(0))}}}(o||(o={}))},27805:(e,t,r)=>{r.d(t,{$4:()=>P,AP:()=>l,Dn:()=>o,IY:()=>_,bb:()=>F,rD:()=>C});var n=r(56424),i=r(41255),a=r(21016);const o="linear",s=n.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=n.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=n.ux.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),d=n.ux.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),u=n.ux.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),m=n.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),p=n.ux.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=n.ux.keyframes({"0%, 100%":{opacity:0}}),g=n.ux.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=n.ux.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=n.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=n.ux.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),x=n.ux.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),I=n.ux.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),b={position:"relative",margin:`${n.ux.rem(.5)} ${n.ux.rem(2)} ${n.ux.rem(.5)} 0`,userSelect:"none"},C={position:"absolute",width:n.ux.percent(100),pointerEvents:"none"},S={opacity:0,animation:`${s} ${n.ux.seconds(i.v4/4/1e3)} ${o} ${n.ux.seconds(i.v4/1e3)} forwards`},A={transformOrigin:"top",animation:`${l} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},w={transformOrigin:"bottom",animation:`${c} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},_={transformOrigin:"top",willChange:"contents"},k={animation:`${d} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},E={animation:`${u} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},T={animation:`${m} ${n.ux.seconds(i.v4/1e3)} ${o} reverse forwards`},M={animation:`${m} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},G={animation:`${p} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},L={animation:`${p} ${n.ux.seconds(i.v4/1e3)} ${o} reverse forwards`},D={transformOrigin:"top",animation:`${g} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${f} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`}}},N={position:"absolute",width:n.ux.percent(100),transformOrigin:"top",animation:`${y} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${v} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${n.ux.seconds(i.v4/1e3)} ${o} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${n.ux.rem(-1)})`}}},z={transformOrigin:"top",animation:`${x} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${I} ${n.ux.seconds(i.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${n.ux.seconds(i.v4/1e3)} ${o} none`}}},P=n.ux.stylesheet({wrapper:[b],animationWrapper:[{position:"relative"}],shade:[C],focused2renderedMain:[S],focused2renderedShade:[C,A],focused2renderedShadeClockwise:[C,w],rendered2focusedMainBase:[_],rendered2focusedMain:[_,k],rendered2focusedMainClockwise:[_,E],addedMain:[T],rendered2removedShade:[C,M],openedMain:[G],closedMain:[L],focused2successMain:[D],focused2successShade:[N],success2FocusedMain:[z]}),F=new Map([[l,P.focused2renderedShade],[c,P.focused2renderedShadeClockwise],[m,P.rendered2removedShade],[y,P.focused2successShade]])},89605:(e,t,r)=>{r.d(t,{S:()=>A,c:()=>w});var n=r(56424),i=r(41255),a=r(27805),o=r(21016);const s=n.ux.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=n.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=n.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),d=n.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),u=n.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),m=n.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),p=n.ux.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=n.ux.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=n.ux.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=n.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=n.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${s} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},x={transformOrigin:"top",animation:`${a.AP} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},I={transformOrigin:"top",animation:`${u} ${n.ux.seconds(i.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},b={animation:`${m} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${p} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${f} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${p} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${y} ${n.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},A=n.ux.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[a.rD,x],focused2renderedBundleShadeClockwise:[a.rD,I],rendered2focusedBundleMain:[a.IY,b],rendered2focusedBundleMainClockwise:[a.IY,C],rendered2focusedBundleShade:[a.rD,S]}),w=new Map([[a.AP,A.focused2renderedBundleShade],[u,A.focused2renderedBundleShadeClockwise],[y,A.rendered2focusedBundleShade]])},23584:(e,t,r)=>{r.d(t,{N:()=>b,p:()=>n});var n,i=r(49231),a=r(58303),o=r(90023),s=r(9615),l=r(24858),c=r(36344),d=r(84714),u=r(49225),m=r(53976),p=r(68545),h=r(59179),g=r(24666),f=r(704),y=r(20161),v=r(84178),x=r(10883),I=r(954);function b(e=12){const{ref:t,onMount:r}=u.P.useElWatcher(),{cardHeight:c,cardVisibleViewportHeight:m}=i.useContext(n.Context),p=i.useContext(l.u.Context);return{onMount:r,maxHeight:i.useRef(t.pipe(y.w(a.g_((0,o.a9)(d.of(a.YP)),(e=>c.pipe(v.q(1),x.M(m),h.U((([t,r])=>(0,o.zG)(r,a.UI((r=>e.offsetHeight+Math.max(0,r-t)))))))))),I.O(a.YP),x.M(p.pipe(I.O(void 0),h.U(a.ij))),h.U((([t,r])=>(0,o.zG)(t,a.wp((()=>(0,o.zG)(r,a.UI((t=>e*t)))))))),g.x(a.Eh(s.Eq).equals))).current,ref:t}}!function(e){var t=e.Context=i.createContext({cardHeight:c.E,cardVisibleViewportHeight:d.of(a.YP)});e.Provider=e=>{const{ref:r,onMount:n}=u.P.useElWatcher(),o=i.useRef({cardHeight:e.card.pipe(m.c(r.pipe(p.oA,h.U((e=>e.offsetHeight)))),g.x(),f.shareReplay({bufferSize:1,refCount:!0})),cardVisibleViewportHeight:e.cardVisibleViewportHeight.pipe(g.x(a.Eh(s.Eq).equals),f.shareReplay({bufferSize:1,refCount:!0}))});return i.createElement(t.Provider,{value:o.current},e.children(n))}}(n||(n={}))},95140:(e,t,r)=>{r.d(t,{b:()=>ve});var n=r(32490),i=r(49231),a=r(58303),o=r(90023),s=r(47387),l=r(13391),c=r(85272),d=r(31854),u=r(27805),m=r(89605),p=r(1553);const h=({children:e,mount:t})=>i.createElement(s.F.div,{"data-role":"animation-wrapper",className:u.$4.animationWrapper,mount:t},e),g=e=>(0,o.zG)(a.ij(e.activeAlert),a.g_((()=>e.id),(e=>e.id)));class f extends i.Component{_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:d.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:r}=this.props;if(!t.visualState.incomplete)return i.createElement(h,{mount:this.props.mount},i.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const n=r||p.SA,{main:f,shade:y}=n(t.visualState),v=l.h.create(void 0===y?a.YP:(0,o.zG)(t.visualState.from,a.UI((e=>({state:e,className:y})))));return!Boolean(f)&&a.Wi(v.get())&&requestAnimationFrame((()=>e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),i.createElement(c.f.Context.Provider,{value:this._elementState},i.createElement(h,{mount:this.props.mount},v.view((0,o.ls)(a.UI((({state:r,className:n})=>i.createElement(s.F.div,{className:n,key:"shade"+r+g(t),onAnimationEnd:r=>{m.c.get(r.animationName)!==n&&u.bb.get(r.animationName)!==n||(e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>v.set(a.YP))))}},this._stateToElement(r)))),a.FS)),i.createElement(s.F.div,{className:f,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:d.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}constructor(...e){super(...e),(0,n._)(this,"_elementState",c.f.emptyWithName("card"))}}var y=r(84910),v=r(37213),x=r(64538),I=r(73590),b=r(16136),C=r(56424),S=r(57156),A=r(41255);class w extends i.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:r,children:n,counter:a,className:o,hideActivateButton:l,hideDot:c}=this.props;return i.createElement(s.F.div,(0,y._)({"data-aid":t,mount:e=>this._ref.current=e,onClick:t=>{const n=e();r.next({type:d.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,v.Sh)(o,U.wrapper,null!=c&&c?null:U.miniCard)),i.createElement(b.XY,(0,v.Sh)(U.contentWrapper,null!=c&&c?U.contentWrapperWithoutDot:U.contentWrapperWithDot),n),i.createElement("div",{className:U.iconContainer},a&&i.createElement(s.F.div,{className:k},a),null!=l&&l?null:i.createElement("div",{className:T},i.createElement(I.JO.Arrow,{className:U.activeTopIcon}),i.createElement(I.JO.Arrow,{className:U.activeBottomIcon}))))}constructor(...e){super(...e),(0,n._)(this,"_ref",i.createRef()),(0,n._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:d.lY.Type.hover,kind:e,id:this.props.cardId})))}}const _="baseMiniCounterContainer",k=C.ux.joinClasses([_,C.ux.style({position:"absolute",height:C.ux.percent(100),top:0,right:0,zIndex:A.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),E="baseMiniActivateBtnSelector",T=C.ux.joinClasses([E,C.ux.style({position:"absolute",top:0,right:0,height:C.ux.percent(100),zIndex:A.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:x.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),M={position:"relative",display:"flex",overflow:"hidden",borderRadius:C.ux.rem(A.fx),background:x.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:C.ux.seconds(.2)},[`&:hover .${E}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},G={overflow:"hidden",color:S.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:C.ux.rem(1.5)},L={margin:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`},D={paddingLeft:C.ux.rem(.5)},N={position:"absolute",top:0,right:C.ux.rem(.5),bottom:0,display:"flex"},z={display:"flex",margin:`${C.ux.rem(.1)} 0 ${C.ux.rem(-1.25)}`,transform:"rotate(180deg)"},P={$nest:{"&:before":{position:"absolute",width:C.ux.px(10),height:C.ux.px(10),borderRadius:C.ux.percent(50),content:"''",transform:"scale(.5)"}}},F={$nest:{"&:before":{margin:`auto 0 auto ${C.ux.rem(.75)}`}}},U=C.ux.stylesheet({wrapper:[M],contentWrapper:[G],contentWrapperWithDot:[L],contentWrapperWithoutDot:[D],iconContainer:[N],activeTopIcon:[z],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[P],miniCard:[P,F]});var R=r(28108),O=r(14200);class B extends i.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:r,children:n,counter:a,className:o,hideActivateButton:l,hideDot:c,sduiStyle:u}=this.props;return i.createElement(s.F.div,(0,y._)({"data-aid":t,tabIndex:0,role:"button","aria-disabled":!1,mount:e=>this._ref.current=e,onClick:t=>{const n=e();r.next({type:d.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:t.clientX,y:t.clientY}})},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.target.click(),e.preventDefault())},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,v.Sh)(o,null!=u&&u?te.sduiWrapper:te.wrapper,null!=c&&c?null:te.miniCard)),i.createElement(b.XY,(0,v.Sh)(te.contentWrapper,null!=c&&c?te.contentWrapperWithoutDot:te.contentWrapperWithDot),n),i.createElement("div",{className:te.iconContainer},a&&i.createElement(s.F.div,{className:W},a),null!=l&&l?null:i.createElement("div",{className:H},i.createElement(I.JO.Arrow,{className:te.activeTopIcon}),i.createElement(I.JO.Arrow,{className:te.activeBottomIcon}))))}constructor(...e){super(...e),(0,n._)(this,"_ref",i.createRef()),(0,n._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:d.lY.Type.hover,kind:e,id:this.props.cardId})))}}const $="baseMiniCounterContainer",W=C.ux.joinClasses([$,C.ux.style({position:"absolute",height:C.ux.percent(100),top:0,right:0,zIndex:A.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),j="baseMiniActivateBtnSelector",H=C.ux.joinClasses([j,C.ux.style({position:"absolute",top:0,right:0,height:C.ux.percent(100),zIndex:A.VN,display:"flex",flexDirection:"column",margin:"auto 0",opacity:0,justifyContent:"center"})]),Y={position:"relative",display:"flex",overflow:"hidden",borderRadius:C.ux.rem(R.fx),background:x.Il.CoreNeutral0,boxShadow:O.S.z100,cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral10,transitionDuration:C.ux.seconds(.2)},"&:focus":{background:x.Il.CoreNeutral10,boxShadow:`${O.S.z100}, 0 0 0 2px rgb(99 142 235)`,outline:"none"},"&:hover .baseMiniActivateBtnSelector":{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},V={boxShadow:O.s.llamaShadowToken},Z={overflow:"hidden",color:S.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:C.ux.rem(1.5)},J={margin:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`},X={paddingLeft:C.ux.rem(.5)},Q={position:"absolute",top:0,right:C.ux.rem(.5),bottom:0,display:"flex"},q={display:"flex",margin:`${C.ux.rem(.1)} 0 ${C.ux.rem(-1.25)}`,transform:"rotate(180deg)"},K={$nest:{"&:before":{position:"absolute",width:C.ux.px(10),height:C.ux.px(10),borderRadius:C.ux.percent(50),content:"''",transform:"scale(.5)"}}},ee={$nest:{"&:before":{margin:`auto 0 auto ${C.ux.rem(.75)}`}}},te=C.ux.stylesheet({wrapper:[Y],sduiWrapper:[Y,V],contentWrapper:[Z],contentWrapperWithDot:[J],contentWrapperWithoutDot:[X],iconContainer:[Q],activeTopIcon:[q],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[K],miniCard:[K,ee]});var re,ne=r(78520),ie=r(97767),ae=r(39170),oe=r(52574),se=r(31403),le=r(21016);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(re||(re={}));const ce=({actions:e,isLastCard:t})=>{const r=i.useContext(ae.m.Context).successLens.fixedText.titles,n=l.h.create(re.stage0),a=()=>e.next({type:d.lY.Type.switchToNext});return i.createElement(s.F.div,{className:ye.successWrapper},i.createElement(b.P1,{className:ye.successText,onAnimationEnd:()=>{n.set(re.stage1)}},r[(0,ie.TN)(r.length)]),i.createElement(s.F.span,null,n.view((e=>e>=re.stage1&&i.createElement("span",{onAnimationEnd:()=>n.set(re.stage2)},i.createElement(I.JO.CheckmarkAnimated,{className:ye.successCheckMark}))))),i.createElement(s.F.span,{className:ye.successBtnHolder},t.pipe(se.a(n,((e,t)=>t<re.stage2?null:e?i.createElement(oe.zx.Caps,{className:ye.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):i.createElement(oe.zx.Caps,{className:ye.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},de=C.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),ue={fontWeight:"bold",lineHeight:C.ux.rem(2),animation:`${de} ${C.ux.seconds(.2)} linear forwards`},me={position:"relative",borderRadius:C.ux.rem(A.Jr),background:x.Il.CoreNeutral0,boxShadow:`0 ${C.ux.rem(.625)} ${C.ux.rem(A.mJ)} 0 rgba(198, 203, 222, .45)`},pe={display:"flex",padding:`${C.ux.rem(1.5)} ${C.ux.rem(2)}`,alignItems:"center"},he={marginLeft:C.ux.rem(1),minWidth:0,minHeight:0,width:C.ux.rem(1.325),height:C.ux.rem(1.325),animation:`${de} ${C.ux.seconds(.2)} linear forwards`},ge={float:"right",width:C.ux.rem(4),textAlign:"center",animation:`${de} ${C.ux.seconds(.2)} linear forwards`},fe={backgroundColor:x.Il.CoreGreen50,color:x.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:S.mb}}},ye=(0,ne._)((0,y._)({},C.ux.stylesheet({successText:[ue],successCheckMark:[he],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[ge],doneBtn:[ge,fe]})),{fullCard:C.ux.joinClasses([le.g.fullCardSelector,C.ux.style(me)]),successWrapper:C.ux.joinClasses([le.g.successWrapperSelector,C.ux.style(me,pe)])});var ve;!function(e){e.Mini=w,e.MiniContrast=B,e.Card=f,e.Success=ce}(ve||(ve={}))},21016:(e,t,r)=>{r.d(t,{g:()=>I,m:()=>b});var n=r(84910),i=r(78520),a=r(64538),o=r(56424),s=r(57156),l=r(41255);const c={position:"relative",borderRadius:o.ux.rem(l.Jr),background:a.Il.CoreNeutral0,boxShadow:`0 ${o.ux.rem(.625)} ${o.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},d={$nest:{"&:before":{position:"absolute",width:o.ux.px(10),height:o.ux.px(10),borderRadius:o.ux.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:s.kl}}},m={$nest:{"&:before":{backgroundColor:s.AX}}},p={$nest:{"&:before":{backgroundColor:a.Il.CoreRed50}}},h={$nest:{"&:before":{backgroundColor:a.Il.CoreBlue50}}},g={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen50}}},f={$nest:{"&:before":{backgroundColor:a.Il.CorePurple50}}},y={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},v={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},x={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen60}}},I={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},b=(0,i._)((0,n._)({},o.ux.stylesheet({dot:[d],dotAdvanced:[m],dotCritical:[u],dotCorrectness:[p],dotClarity:[h],dotEngagement:[g],dotDelivery:[f],dotVox:[y],knowledgeHub:[v],dotWritingExpert:[x]})),{fullCard:o.ux.joinClasses([I.fullCardSelector,o.ux.style(c)])})},1553:(e,t,r)=>{r.d(t,{CE:()=>n,SA:()=>d,a:()=>u});var n,i=r(58303),a=r(90023),o=r(19813),s=r(97767),l=r(27805),c=r(89605);function d({from:e,transition:t,incomplete:r}){if(!r)return{};const n=m("transitionClassMapper");return(0,a.zG)(e,i.UI((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(n.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),i.fS((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function u({from:e,transition:t,incomplete:r}){return r?(0,a.zG)(e,i.UI((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return m("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(m("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),i.fS((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:r,shade:n}=e(t);return{main:i.ij(r),shade:i.ij(n)}}}}(n||(n={}));const m=(0,s.HP)(o.C8.Logging.getLogger)},24611:(e,t,r)=>{r.d(t,{$x:()=>C,Im:()=>S,a0:()=>n,oL:()=>N});var n,i=r(84910),a=r(49231),o=r(90023),s=r(37213),l=r(52303),c=r(39170),d=r(52574),u=r(80606),m=r(73590),p=r(49351),h=r(16136),g=r(36355),f=r(68717),y=r(48922),v=r(93167),x=r(21016),I=r(57761),b=r(11532);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(n||(n={}));const C=({className:e,vox:t,isMinimalCard:r})=>{const{vox:{styleGuide:n}}=a.useContext(c.m.Context);return a.createElement("div",(0,s.Sh)(e,b.h.voxTitle,r?b.h.minimalTitle:void 0),a.createElement("span",null,t.companyName," ",n))},S=({logoUrl:e,className:t})=>a.createElement("img",(0,i._)({alt:"company logo","aria-hidden":!0,src:e},(0,s.Sh)(t,b.h.voxLogo))),A=({title:e,layoutDensity:t})=>a.createElement(h.XY,{className:(0,o.zG)(t,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>b.h.minimalTitle),(()=>b.h.toneTitle)))},a.createElement(u.dy,{emojiClassName:b.h.toneLogo},e));function w(e){return I.y.getDotStyle(e)}function _(e){return g.R.outcomeTypeMatch({correctness:a.createElement(m.JO.Correctness,{className:b.h.cardLogo}),clarity:a.createElement(m.JO.ClarityOutcome,{className:b.h.cardLogo}),premium:a.createElement(m.JO.Star,{className:b.h.cardLogo}),engagement:a.createElement(m.JO.EngagementOutcome,{className:b.h.cardLogo}),delivery:a.createElement(m.JO.DeliveryOutcome,{className:b.h.cardLogo}),vox:null,knowledgeHub:null})(e.lensType)}function k({activeAlert:e}){const t=a.useContext(c.m.Context);return a.createElement(h.XY,{className:b.h.minimalTitle},(0,o.zG)(e.result,l.hX((e=>e.length>0)),l.fS((()=>t.card.writingExpert.title))))}function E(e,t,r,n,c,d){const{extraProperties:p}=e;return y.$.isTakeaway(e)?function(e,t,r){return{style:"",description:a.createElement("div",{className:(0,o.zG)(t,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>b.h.minimalTitle),(()=>{})))},l.FX(f.TO.correctlyDetected)(e.takeawayFeedback)&&e.takeawayIsLikelyToBeRead?a.createElement(m.JO.ValidationOk,(0,i._)({width:16},(0,s.Sh)(b.h.cardLogo,b.h.takeawayIcon))):a.createElement(m.JO.Megaphone,(0,i._)({width:16},(0,s.Sh)(b.h.cardLogo,b.h.takeawayIcon))),t===v.j.Density.minimal?r:e.lensName)}}(e,r,d):y.$.isShortenIt(e)?T(e,r,c,d):y.$.isToneAI(e)?function(e){return{style:w(e),description:a.createElement(h.XY,{className:b.h.minimalTitle},e.title)}}(e):y.$.isEthicalAI(e)?function(e){return{style:"",description:a.createElement("div",null,void 0!==e.emojiID?a.createElement(u.In,{id:e.emojiID,className:b.h.toneLogo}):a.createElement(m.JO.EthicalAI.Heart,(0,s.Sh)(b.h.cardLogo)),a.createElement(h.x4,{className:b.h.ethicalAILabel},e.miniCardTitle))}}(e):y.$.isSuggestedSnippet(e)?function(e){return{style:w(e),description:a.createElement(h.XY,{className:b.h.minimalTitle},e.title)}}(e):y.$.isKnowledgeHubSuggestedTerm(e)?function(e){return{style:w(e),description:a.createElement(h.XY,{className:b.h.minimalTitle},e.miniCardTitle)}}(e):y.$.isWritingExpert(e)?function(e){return{style:w(e),description:a.createElement(k,{activeAlert:e})}}(e):l.pC(p.tone)?function(e,t){return{style:w(e),description:a.createElement(A,{title:e.title,layoutDensity:t})}}(e,r):t?l.pC(p.vox)?function(e,t){return{style:x.m.dotVox,description:a.createElement(a.Fragment,null,(0,o.zG)(e.logoUrl,l.g_((()=>null),(e=>a.createElement(S,{logoUrl:e,className:b.h.cardLogo})))),a.createElement(C,{vox:e,isMinimalCard:t===v.j.Density.minimal}))}}(p.vox.value,r):y.$.isFree(e)?T(e,r,c,d):function(e,t,r,n){return{style:(0,o.zG)(n,v.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.zG)(n,v.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),a.createElement("div",(0,s.Sh)(b.h.dualItemLabel,(0,o.zG)(r,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>b.h.minimalTitle),(()=>{})))),a.createElement("span",{className:b.h.dualItemLabel},e.lensName,a.createElement(L,{highlightStyle:t}))))}}(e,n,r,c):null}function T(e,t,r,n){return(0,o.zG)(t,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>function(e,t,r){return{style:(0,o.zG)(t,v.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:Boolean(r)?r:a.createElement(a.Fragment,null,(0,o.zG)(t,v.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),a.createElement(h.XY,{className:b.h.minimalTitle},e.miniCardTitle))}}(e,r,n)),(()=>function(e,t){return{style:(0,o.zG)(t,v.j.CardVisualMode.match({onRegular:()=>w(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.zG)(t,v.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>_(e)})),e.lensName)}}(e,r))))}const M=({label:e})=>a.createElement("span",{className:b.h.fluencyLabel},e,a.createElement(d.RZ,{iconWidth:10,buttonClass:b.h.fluencyInfo,iconClass:b.h.fluencyInfo,title:a.useContext(c.m.Context).card.fluency.tooltip})),G=({style:e,description:t})=>a.createElement("span",(0,s.Sh)(b.h.lens,b.h.dot,e),t),L=({highlightStyle:e})=>{const t=a.useContext(c.m.Context);if(e===n.none)return null;const r=e===n.new?a.createElement("div",{className:b.h.newPremiumLabel},t.premiumAlertLabel.new,a.createElement(m.JO.Paid,{className:b.h.newPremiumLabelIcon,width:12})):a.createElement(m.JO.Paid,{className:b.h.premiumPersistentTooltipIcon,width:10});return a.createElement(p.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},r)},D=({style:e,description:t,extraStyle:r})=>a.createElement("span",(0,s.Sh)(r,b.h.lensMinimal,b.h.lens,b.h.dot,e),t),N=e=>(0,o.zG)(E(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.cardVisualMode,e.children),l.ij,l.UI((t=>a.createElement("div",{className:e.className},(0,o.zG)(e.activeAlert.extraProperties.fluencyMessage,l.g_((()=>(0,o.zG)(e.layoutDensity,v.j.Density.matchOrDefault(v.j.Density.minimal)((()=>a.createElement(D,t)),(()=>a.createElement(G,t))))),(r=>(0,o.zG)(e.layoutDensity,v.j.Density.match(a.createElement(a.Fragment,null,a.createElement(G,t),a.createElement(M,{label:r})),a.createElement(G,t),a.createElement(D,{style:t.style,extraStyle:b.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),l.g_((()=>a.createElement("div",{"data-purpose":"label-placeholder"})),(t=>a.createElement(z,null,t,e.badge)))),z=({children:e})=>a.createElement("div",{role:"definition",className:b.h.labelContainer},e)},57761:(e,t,r)=>{r.d(t,{y:()=>l});var n=r(36355),i=r(12281),a=r(48922),o=r(21016);const s=["b","i","br","ul","li"];var l;!function(e){e.renderToHtml=function(e,t){const r=t?{allowedTags:s.concat(["a"]),linkRegExp:t}:{allowedTags:s};return i.yG(e,r)};e.getDotStyle=e=>a.$.isWritingExpert(e)?o.m.dotWritingExpert:n.R.outcomeTypeMatch({correctness:o.m.dotCorrectness,clarity:o.m.dotClarity,premium:o.m.dotAdvanced,engagement:o.m.dotEngagement,delivery:o.m.dotDelivery,vox:o.m.dotVox,knowledgeHub:o.m.knowledgeHub})(e.lensType)}(l||(l={}))},14200:(e,t,r)=>{r.d(t,{S:()=>n,s:()=>i});const n={z100:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 1px 8px rgba(0, 0, 0, .15)",z300:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 4px 20px rgba(0, 0, 0, .15)"},i={llamaShadowToken:"0px 2px 8px 0px #1A213433, 0px 0px 0.5px 0px #000000B2"}},42983:(e,t,r)=>{r.d(t,{G3:()=>p,Vh:()=>m});var n=r(49231),i=r(1747),a=r(39170),o=r(52574),s=r(73590),l=r(12281),c=r(57326),d=r(31854),u=r(11532);const m=({card:{activeAlert:e,id:t,visualState:r},actions:m,mode:p,className:g,disabled:f})=>{const y=n.useContext(a.m.Context),v="mini"===p?h(r,y):"";return n.createElement(o.zx.Tertiary,{key:"toggle-more",name:h(r,y),title:v,"aria-label":v,className:g,disabled:f,onClick:l.hz((()=>{const n=c.X.isCardOpen(r);m.next({type:d.eI.Kind.startTransitionTo,id:t,transition:{type:n?"focused":"expanded",clockwise:!0}}),n||m.next({type:d.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},c.X.isCardOpen(r)?n.createElement(s.JO.Arrow,{key:"more",className:u.h.lessIcon}):n.createElement(s.JO.QuestionMark,{key:"expand"}),"default"===p&&h(r,y))},p=({visualState:e,children:t,className:r})=>n.createElement("div",{className:(c.X.isCardOpen(e)?u.h.more:u.h.moreHidden)+" "+r},t);function h(e,t){const r=t.card;return c.X.isCardOpen(e)?r.less:r.more}},11532:(e,t,r)=>{r.d(t,{h:()=>C});var n=r(64538),i=r(56424),a=r(41255);const o={$nest:{"&:before":{position:"absolute",width:i.ux.px(10),height:i.ux.px(10),borderRadius:i.ux.percent(50),content:"''",transform:"scale(.5)"}}},s={opacity:1,transition:"opacity .3s"},l={color:n.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:n.xv.SubheadingLetterSpacing,fontSize:i.ux.rem(n.xv.SubheadingSize),lineHeight:i.ux.rem(n.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.ux.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.ux.px(2),left:i.ux.rem(-1.1),margin:"auto 0"}}},d={$nest:{"&:before":{top:0,bottom:0,left:i.ux.rem(-1.1),margin:`${i.ux.rem(.25)} 0 auto 0`}}},u={margin:`0 ${i.ux.rem(.4)} 0 ${i.ux.rem(.2)}`,width:i.ux.rem(.85),height:i.ux.rem(.85),objectFit:"contain"},m={position:"absolute",top:0,bottom:0,left:i.ux.rem(-1),margin:"auto",transform:"translateX(-50%)"},p={minWidth:"initial",minHeight:"initial",padding:`${i.ux.rem(.3)} ${i.ux.rem(.25)}`,cursor:"pointer",borderRadius:i.ux.percent(100),marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:n.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),cursor:"pointer",background:n.Il.CoreYellow20,color:n.Il.CoreYellow80,marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:n.Il.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:n.Il.CoreYellow80,marginLeft:i.ux.rem(.3)},f={display:"flex",alignItems:"flex-start",top:i.ux.rem(.125),minWidth:"initial",minHeight:"initial",background:n.Il.CoreNeutral0},y={color:n.Il.CoreNeutral90,textTransform:"none",letterSpacing:n.xv.SmallLetterSpacing,fontWeight:n.xv.SmallWeight,fontSize:i.ux.rem(n.xv.SmallSize),lineHeight:i.ux.rem(n.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:n.Il.CoreNeutral50,textTransform:"none"},x={width:i.ux.rem(1),height:i.ux.rem(1)},I={display:"inline-flex",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},b={display:"inline-flex",marginLeft:i.ux.rem(.1),minWidth:0,minHeight:0},C=i.ux.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[s],moreHidden:[s,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[d],voxLogo:[u],cardLogo:[m],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[p],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[m,x],fluencyLabel:[l,I],fluencyInfo:[b],dot:[o],ethicalAILabel:[{textTransform:"none"}]})},8024:(e,t,r)=>{r.d(t,{Z:()=>f});var n=r(84910),i=r(78520),a=r(49231),o=r(58303),s=r(47387),l=r(37213),c=r(59179),d=r(77400),u=r(49225),m=r(39170),p=r(56424),h=r(1553),g=r(21016);const f=e=>{const{shade:t}=(0,h.SA)(e.visualState),r=a.useContext(m.m.Context),{rect:p,onMount:g}=u.P.useRectWatcher(),f=p.pipe(c.U(o.Gg((e=>e.height>0))));a.useEffect((()=>{Boolean(t)||e.onFocus()}),[]);const y=e.theme||{};return a.createElement(s.F.div,{className:y.container},e.header,a.createElement(s.F.div,{className:y.innerContainer},a.createElement(s.F.div,(0,i._)((0,n._)({},(0,l.Sh)(_.wrapper,y.wrapper)),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),a.createElement(s.F.div,(0,l.Sh)(_.grid,y.content),a.createElement(s.F.div,(0,n._)({role:"region","aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.description}: ${e}`)))},(0,l.Sh)(_.mainContent,y.contentBody)),e.body),Boolean(e.footer)?a.createElement(s.F.div,{role:"complementary",mount:g,"aria-hidden":d.U_(f),"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.more}: ${e}`))),className:_.footerContent},e.footer):null,Boolean(e.subActions)||Boolean(e.navigation)||Boolean(e.mainActions)?a.createElement(s.F.nav,{"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${r.card.cardActions}: ${e}`))),className:_.actions},e.subActions,a.createElement("div",{className:_.spacerOne}),e.navigation,a.createElement("div",{className:_.spacerFloat}),e.mainActions):null)),e.extra))},y="& > * + *",v=.75,x={position:"relative"},I={padding:`${p.ux.rem(1)} ${p.ux.rem(.5)} ${p.ux.rem(v)} ${p.ux.rem(1)}`},b={padding:`0 ${p.ux.rem(.5)} 0 ${p.ux.rem(1)}`,$nest:{[y]:{marginTop:p.ux.rem(v)}}},C={padding:`0 ${p.ux.rem(.5)} 0 ${p.ux.rem(1)}`,$nest:{[y]:{marginTop:p.ux.rem(v)}}},S={display:"flex",marginLeft:p.ux.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},A={width:p.ux.rem(1),flexShrink:1},w={$nest:{[y]:{marginTop:p.ux.rem(v)}}},_=(0,i._)((0,n._)({},p.ux.stylesheet({mainContent:[b],footerContent:[C],actions:[S],spacerOne:[A],spacerFloat:[{flex:1}],grid:[w]})),{fullCard:p.ux.joinClasses([g.g.fullCardSelector,p.ux.style(x)]),wrapper:p.ux.joinClasses([g.g.fullCardSelector,p.ux.style(x,I)])})},2087:(e,t,r)=>{r.d(t,{PS:()=>_t,mQ:()=>At,o:()=>Ct,jt:()=>St,Kg:()=>nt,dk:()=>Ke,lJ:()=>ut,hl:()=>xt,__:()=>vt,M9:()=>kt,ko:()=>et,hT:()=>ht,q4:()=>mt,Dx:()=>gt,jg:()=>ft,Ot:()=>yt,Nm:()=>dt,VM:()=>Rt,eb:()=>Ot,k_:()=>Sr,m_:()=>It,Bn:()=>Ar,IH:()=>Wt,ce:()=>Ut});var n=r(84910),i=r(78520),a=r(49231),o=r(59833),s=r(90023),l=r(26278),c=r(97903),d=r(37213),u=r(47387),m=r(13391),p=r(19813),h=r(1747),g=r(71238),f=r(97767),y=r(52303),v=r(84242),x=r(64538),I=r(95501),b=r(39170),C=r(88752),S=r(52574),A=r(44737),w=r(73590),_=r(42847),k=r(80100),E=r(99210),T=r(85184),M=r(32490),G=r(67225),L=r(98192),D=r(3143),N=r(17613),z=r(67397),P=r(56424),F=r(84103),U=2*Math.PI*32,R=36,O="#f1f2fa",B="#fff",$=function(e,t,r){return e<t?t:e>r?r:e},W=function(e){switch(e){case V.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:O,outline:B};case V.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:O,outline:B};case V.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:O,outline:B};case V.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:O,outline:B};case V.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:O,outline:B};case V.ColorType.logan:return{type:"plain",value:"#a6adc9",background:O,outline:B};case V.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case V.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case V.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case V.ColorType.green:return{type:"plain",value:D.I.Background.Brand.Default,background:D.I.Background.Brand.Subdued};case V.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case V.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case V.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case V.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,N.vE)(e)}},j=function(e){switch(e){case V.FontSize.normal:return 32;case V.FontSize.small:return 24;default:return(0,N.vE)(e)}},H=function(e){switch(e){case V.IconSize.pdf:case V.IconSize.normal:case V.IconSize.outcome:return 5;case V.IconSize.small:return 3;case V.IconSize.extraSmall:return 10;default:return(0,N.vE)(e)}},Y=function(e){switch(e){case V.IconSize.pdf:return 110;case V.IconSize.normal:return 52;case V.IconSize.outcome:return 32;case V.IconSize.small:return 24;case V.IconSize.extraSmall:return 16;default:return(0,N.vE)(e)}},V=function(e){(0,G._)(r,e);var t=(0,L._)(r);function r(){var e;return(0,E._)(this,r),e=t.apply(this,arguments),(0,M._)((0,k._)(e),"_gradientId",void 0),e}return(0,T._)(r,[{key:"render",value:function(){var e,t,o,s,l,c=this.props,u=c.percentage,m=c.aimValue,p=void 0===m?100:m,h=c.colorType,g=void 0===h?r.ColorType.logan:h,f=c.fontSize,y=void 0===f?r.FontSize.normal:f,v=c.iconSize,x=void 0===v?r.IconSize.normal:v,b=c.description,C=c.theme,S=void 0===C?Q:C,A=[a.createElement("circle",{key:"circle",id:"circle",cx:R,cy:R,r:32,fill:"none"})],_=j(y),k=H(x),E=$(u,0,100),T=$(p,E,100),M=E*U/100,G=T*U/100,L=360*k/U,D=E?U-M-2*k:U,N=W(g);if("plain"===N.type)e=N.value,t=e,o=N.outline,s=N.background,l=void 0===N.backgroundOpacity?1:N.backgroundOpacity;else{var P=N.value;this._gradientId=Boolean(this._gradientId)?this._gradientId:"pb-gradient-".concat(r._nextGradientId++),A.push(a.createElement("linearGradient",(0,n._)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},P.coordinates),a.createElement("stop",{stopColor:P.start,offset:"0%"}),a.createElement("stop",{stopColor:P.end,offset:"100%"}))),e="url(#".concat(this._gradientId,")"),t="#2b2d38",o=N.outline,s=N.background,l=void 0===N.backgroundOpacity?1:N.backgroundOpacity}return a.createElement(I.a.Context.Consumer,null,(function(r){return a.createElement(w.a1,(0,i._)((0,n._)({},(0,d.Sh)(Q.iconWrapper,S.radialProgressBar)),{width:Y(x),viewBox:"0 0 ".concat(72," ").concat(72)}),a.createElement("defs",null,A),a.createElement("g",null,a.createElement("use",{className:Q.valueCircle,stroke:E>=94&&Boolean(o)?o:s,strokeOpacity:l,strokeWidth:k,strokeDasharray:U,strokeDashoffset:U-G,transform:"rotate(-90 ".concat(R," ").concat(R,")"),strokeLinecap:"round",xlinkHref:"#circle"}),Boolean(o)?a.createElement("use",{className:Q.valueCircle,stroke:o,strokeWidth:k,strokeDasharray:U,strokeDashoffset:D,transform:"rotate(".concat(-90-L," ").concat(R," ").concat(R,")"),strokeLinecap:"round",xlinkHref:"#circle"}):null,a.createElement("use",{className:Q.valueCircle,stroke:e,strokeDasharray:U,strokeDashoffset:U-M,strokeLinecap:"round",transform:"rotate(-90 ".concat(R," ").concat(R,")"),strokeWidth:k,xlinkHref:"#circle"}),a.createElement("text",(0,n._)({className:S.radialProgressText,y:"38",x:"36",fill:t,fontSize:_,fontStyle:"normal",textAnchor:"middle"},z.h5(r.has(I.a.Flag.supportsSVGDominantBaseline))),E),Boolean(b)?a.createElement("text",{className:S.radialProgressDescription,fill:t,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},b):null))}))}}]),r}(a.Component);(0,M._)(V,"_nextGradientId",0),function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(V||(V={}));var Z={width:P.ux.percent(100),height:P.ux.percent(100),fontWeight:"bold",fill:x.Il.CoreNeutral90},J={fontSize:P.ux.rem(2),fill:x.Il.CoreNeutral90},X={fontWeight:"normal",fontSize:P.ux.px(11),fill:F.UE},Q=P.ux.stylesheet({radialProgressBar:[Z],radialProgressText:[J],radialProgressDescription:[X],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]}),q=r(97469),K=r(73204),ee=r(49351),te=r(16136),re=r(68717),ne=r(41255),ie=r(49225),ae=r(68545),oe=r(20161),se=r(44071),le=r(63532),ce=r(17705),de=r(64271),ue=r(36344),me=r(29479),pe=r(11953),he=r(59179),ge=r(12281),fe=r(74822),ye=r(84308),ve=r(90572),xe=r(8794),Ie=r(48922),be=r(57326),Ce=r(19103),Se=r(31854),Ae=r(42596),we=r(93167),_e=r(51607),ke=r(32356),Ee=r(21016),Te=r(24611),Me=r(57761),Ge=r(42983),Le=r(8024),De=r(6192),Ne=r(58303),ze=r(36234),Pe=r(63283);const Fe=({examples:e,layoutDensity:t})=>a.createElement(ze.Z,{nodeType:"table",styleType:ze.Z.Type.Base,className:Ze.wrapper},e.map(((e,r)=>a.createElement("tbody",{key:r,className:Ze.group},e.map((({text:e,title:r,color:i,hasItalic:o},l)=>a.createElement("tr",{key:l,className:(0,s.zG)(t,we.j.Density.matchL((()=>Ze.item),(()=>Ze.itemCompact),(()=>Ze.itemMinimal)))},(0,s.zG)(r,Ne.UI((e=>a.createElement("td",{className:Pe.J.colorMatch(i)(Ze)},(e=>e.split("/").reduce(((e,t,r)=>(0!==r&&e.push(a.createElement("br",{key:r})),e.push(t),e)),[]))(e)))),Ne.WG),a.createElement("td",(0,n._)({colSpan:Ne.Wi(r)?2:void 0,className:o?Ze.content:Ze.contentItalic},ge.yG(e)))))))))),Ue={$nest:{"&:not(:last-child):after":{display:"block",height:P.ux.rem(1.75),content:"''"}}},Re={$nest:{"&:not(:last-child)":{borderBottom:`${P.ux.rem(.5)} solid transparent`}}},Oe={display:"flex",flexDirection:"column",lineHeight:P.ux.rem(1.3125)},Be={padding:0,verticalAlign:"top",lineHeight:P.ux.rem(1.25)},$e={paddingRight:P.ux.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},We={color:x.Il.CoreNeutral50,fontFeatureSettings:`${ne.g_}, ${ne.xL}`},je={color:x.Il.CoreRed50},He={color:x.Il.CoreGreen70},Ye={color:x.Il.CoreNeutral90},Ve={color:x.Il.CoreNeutral90},Ze=P.ux.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[Ue],item:[Re],itemCompact:[Re,{display:"flex",flexDirection:"column"}],itemMinimal:[Re,Oe],baseBlock:[Be],title:[Be,$e],content:[Be,We],contentItalic:[Be,We,{fontStyle:"italic"}],red:[Be,$e,je],green:[Be,$e,He],yellow:[Be,$e,Ye],fallback:[Be,$e,Ve]});var Je=r(85138),Xe=r(31363);const Qe=(0,f.HP)(p.C8.Logging.getLogger);var qe;!function(e){var t=e.actionRegex=/^#([\w\d_-]+)$/;e.parse=e=>(0,s.zG)(y.ij(e.match(t)),y.tS((e=>{switch(e[1]){case"set-goals":return y.G(Se.lY.Type.openSetGoals);case"ideas-gallery":return y.G(Se.lY.Type.openIdeasGallery);default:return y.YP}})))}(qe||(qe={}));const Ke=({description:e,actions:t,layoutDensity:r,className:i})=>{const o=a.useContext(b.m.Context),l=a.useContext(K.G.Context),{ref:c,onMount:u}=ie.P.useElWatcher();ie.P.useSubscriptionTo(c.pipe(ae.oA,oe.w((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,r)=>{const n=se.R(r,"click").pipe(le.b((e=>e.preventDefault())));return(0,s.zG)(y.ij(r.getAttribute("href")),y.tS(qe.parse),y.g_((()=>(Qe("Description").error("Invalid action",r),e.pipe(ce.T(n)))),(i=>de.T(e,i in o.card.actionDescription&&i!==Se.lY.Type.openIdeasGallery?l.getTooltipObservable(r,o.card.actionDescription[i],"auto",y.YP):ue.E,n.pipe(me.h({type:i}),le.b((e=>t.next((0,s.MZ)(e)))))))))}),ue.E)))));const m=(0,s.zG)(r,we.j.Density.matchOrDefault(we.j.Density.minimal)((()=>_r.minimalDescription),(()=>_r.description)));return a.createElement(te.XY,(0,n._)({mount:u},(0,d.Sh)(m,i),Me.y.renderToHtml(e,qe.actionRegex)))},et=({card:e,isChecking:t})=>re.bZ.isRated(e.activeAlert)?a.createElement(A.B,{value:be.X.isCardPresuccess(e.visualState)?pe.g.MAX:e.meta.percentile,initValue:be.X.isCardPresuccess(e.visualState)?e.meta.percentile:pe.g.MIN,isLoading:t}):null,tt=({card:e})=>{const t=(0,A.N)(be.X.isCardPresuccess(e.visualState)?pe.g.MAX:e.meta.percentile,be.X.isCardPresuccess(e.visualState)?e.meta.percentile:pe.g.MIN);return a.createElement(u.F.Fragment,null,t.pipe(he.U(pe.g.prism.reverseGet),he.U((e=>a.createElement(V,{percentage:e,colorType:V.ColorType.neoBlue,iconSize:V.IconSize.extraSmall,theme:{radialProgressBar:_r.circleProgress,radialProgressText:_r.circleText}})))))},rt=({card:e,feedbackActions:t,onClick:r,disabled:n})=>{const i=a.useContext(b.m.Context);return a.createElement(S.zx.Tertiary,{name:"ignore",title:i.dismiss,"aria-label":i.dismiss,onClick:ge.hz((()=>{t.next({type:Se.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:be.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:Ae.i.isSynfonyItem(e)?(0,s.zG)(e.synfonySelection,y.fS((()=>[]))):void 0}),r&&r()})),disabled:n},a.createElement(l.J,{icon:c.o,accessibilityLabel:"Dismiss",variant:"inherit"}))},nt=({card:e,feedbackActions:t,disabled:r,onClickDismissButton:n,alwaysShowWrongAndOffensiveButtons:i})=>a.createElement(a.Fragment,null,a.createElement(rt,{card:e,feedbackActions:t,onClick:n,disabled:r}),a.createElement(lt,{id:e.id,activeAlert:e.activeAlert,onMute:(0,s.zG)(e.muteCategory,y.UI((r=>ge.hz((()=>t.next({type:Se.lY.Type.muteAlertCategory,categoryId:r.id,id:e.id,viewType:e.activeAlert.type})))))),onWrong:ge.hz(ge.hz((()=>t.next({type:Se.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:h.PZ.WRONG_SUGGESTION})))),onOffensive:ge.hz(ge.hz((()=>t.next({type:Se.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:h.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:Se.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"}),alwaysShowWrongAndOffensiveButtons:i})),it=()=>{const e=a.useContext(b.m.Context);return a.createElement(a.Fragment,null,a.createElement(w.JO.Mute,null),e.card.mute)},at=()=>{const e=a.useContext(b.m.Context);return a.createElement(a.Fragment,null,a.createElement(w.JO.Report,null),e.card.wrong)},ot=()=>{const e=a.useContext(b.m.Context);return a.createElement(a.Fragment,null,a.createElement(w.JO.Report,null),e.card.offensive)},st=e=>(0,s.zG)(e.extraProperties.vox,y.dH((()=>null),a.createElement(ot,null))),lt=({id:e,activeAlert:t,onMute:r,onWrong:n,onOffensive:i,alwaysShowWrongAndOffensiveButtons:l=!1})=>{const c=a.useContext(b.m.Context),d=y.pC(t.getTransform()),u=y.pC(r),m=d||l,p={turnoff:(0,s.zG)(r,y.fS((()=>s.Q1))),incorrect:n,offensive:i};return(0,s.zG)(u||m,y.DT(s.yR),y.UI((()=>a.createElement(g.v.Dropdown,{id:e,placement:"bottom end",label:a.createElement(w.T1.MoreVertical,null),"aria-label":c.card.moreActions,onAction:e=>p[e](),items:(0,s.zG)([(0,s.zG)(r,y.UI((()=>[a.createElement(g.v.Item,{key:"turnoff",textValue:"turnoff"},a.createElement(it,null))])),y.UI((e=>({key:"turnoff",children:e})))),(0,s.zG)(d||l,y.DT(s.yR),y.UI((()=>{const e=[a.createElement(g.v.Item,{key:"incorrect",textValue:"incorrect"},a.createElement(at,null))],r=st(t);return r&&e.push(a.createElement(g.v.Item,{key:"offensive",textValue:"offensive"},r)),e})),y.UI((e=>({key:"wrongAndOffensive",children:e}))))],o.DZ(s.yR))},(e=>a.createElement(g.v.Section,{key:e.key},e.children))))),y.QP)},ct=({card:e,onClick:t,mode:r="default"})=>{const o=a.useContext(b.m.Context),s=a.useContext(I.a.Context),l=a.useCallback((e=>{s.has(I.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),c=e.renderOptions.features.has(we.j.Features.showAnonymousUserFooters)?{disabled:!0,title:o.card.disabledForAnonymous}:{title:"mini"===r?o.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?a.createElement(S.zx.Tertiary,(0,i._)((0,n._)({},c),{name:"add-to-dict",onClick:l}),a.createElement(w.JO.Dict,null),o.card.addToDict):null},dt=({title:e,checkingInProgress:t,checkingMessage:r,applyMessage:o,onClick:s,disabled:l,className:c,spinnerClassName:m,messageClassName:p})=>a.createElement(S.zx.Primary,(0,i._)((0,n._)({key:"update-all",name:"update-all",title:e},(0,d.Sh)(t.pipe(he.U((0,f.RN)(De.V.updateAllBtnLoading,De.V.updateAllBtn))),c)),{disabled:t.view((e=>e||!0===l)),children:a.createElement(u.F.Fragment,null,t.pipe(he.U((0,f.RN)(a.createElement(a.Fragment,{key:"update-all-checking"},a.createElement("span",{className:p},v.kC(r)),a.createElement(q.$,{size:18,strokeWidth:2,wrapperClassName:(0,d.Sh)(De.V.updateBtnSpinner,m).className,variation:"white"})),a.createElement(a.Fragment,{key:"update-all-checked"},v.kC(o)))))),onClick:ge.hz(s)})),ut=({card:e})=>(0,s.zG)(bt(e.activeAlert,e.renderOptions.layoutDensity),y.UI((t=>a.createElement(Ge.G3,{key:"card-actions-details",visualState:e.visualState,className:_r.more},t))),y.WG),mt=({card:e,actions:t})=>It(e.activeAlert,e.renderOptions.layoutDensity)?a.createElement(Ge.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):Ae.i.isDefaultItem(e)?a.createElement(ct,{key:"card-actions-button",card:e,mode:"default",onClick:ge.hz((()=>t.next({type:Se.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:h.PZ.ADD_TO_DICTIONARY})))}):null,pt=e=>{const t=e.showDemoDocOnboardingA11yUpdates?{title:"Review suggestions",message:"Grammarly checks for mistakes and suggests ways to improve your text."}:{message:"Click a suggestion to accept it."};return a.createElement(ke.TG,{alignment:"bottom",eventType:"onclick",stepId:_e.X.StepId.Step4,title:t.title,message:t.message,dotPosition:{kind:"findFirstButton",position:ke.E2.rightTop},themes:{containerWrapperClassName:_r.onboardingNotification}},e.children)},ht=({onClick:e,rl:t,layoutDensity:r,a11yContrast:n,showDemoDocOnboardingA11yUpdates:i})=>a.createElement(pt,{showDemoDocOnboardingA11yUpdates:i},a.createElement(Je.zO,{replacementsLabels:t,onClick:e,layoutDensity:r,a11yContrast:n})),gt=({text:e})=>a.createElement(te.P1,(0,n._)({className:_r.title},Me.y.renderToHtml(e))),ft=({text:e})=>a.createElement(te.P1,(0,n._)({className:_r.titleMinimal},Me.y.renderToHtml(e))),yt=({alert:e})=>a.createElement(te.H4,(0,n._)({className:_r.title},Me.y.renderToHtml(e.title))),vt=({alert:e,options:t,children:r,className:o,badge:s})=>{const l=a.useContext(b.m.Context);return a.createElement(u.F.Fragment,null,t.cardVisualMode.pipe(he.U((c=>a.createElement(Te.oL,(0,i._)((0,n._)({activeAlert:e,cardVisualMode:c,showCardLabel:t.features.has(we.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(we.j.Features.showNewPremiumCardLabels)?Te.a0.new:t.features.has(we.j.Features.showPersistentPremiumCardLabels)?Te.a0.persistent:Te.a0.none,layoutDensity:t.layoutDensity},(0,d.Sh)(_r.label,o)),{badge:e.extraProperties.isBeta?a.createElement(C.C.Regular,{a11yContrast:t.features.has(we.j.Features.a11yContrast)},l.beta):s}),r)))))},xt=({text:e,layoutDensity:t})=>a.createElement("div",{className:_r.highlightedTextBox},a.createElement(te.XY,{className:(0,s.zG)(t,we.j.Density.matchOrDefault(we.j.Density.minimal)((()=>_r.minimalHighlightedTextInnerBox),(()=>_r.highlightedTextInnerBox)))},e));function It(e,t){return!e.extraProperties.hasAddToDictionary&&(!(!y.pC(e.examples)&&!y.pC(e.details))||!(t!==we.j.Density.minimal||!y.pC(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation))}const bt=(e,t)=>{if(!It(e,t))return y.cS();const r=(0,s.zG)(t,we.j.Density.matchOrDefault(we.j.Density.minimal)((()=>_r.minimalDescription),(()=>_r.description)));return y.G(a.createElement(a.Fragment,null,(0,s.zG)(t,we.j.Density.matchOrDefault(we.j.Density.minimal)((()=>y.Wi(e.details)?a.createElement(te.XY,(0,n._)({className:r},Me.y.renderToHtml(e.explanation,qe.actionRegex))):null),(()=>null))),(0,s.zG)(e.details,y.UI((e=>a.createElement(te.XY,(0,n._)({className:r},Me.y.renderToHtml(e))))),y.WG),(0,s.zG)(e.examples,y.UI((e=>a.createElement(Fe,{layoutDensity:t,examples:e}))),y.WG)))},Ct=({isChecking:e})=>a.createElement(u.F.Fragment,null,e.pipe(he.U((e=>a.createElement(q.$,{className:e?_r.spinner:_r.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),St=e=>{const[t,r]=a.useState(!0);return t?a.createElement(Et,{type:e.type,actions:e.actions,onClose:()=>r(!1)}):null},At=({card:e,actions:t})=>{if(Ae.i.isEthicalAIItem(e)||Ae.i.isSuggestedSnippetItem(e)||Ae.i.isKnowledgeHubSuggestedTermItem(e))return null;if(!(0,s.zG)(e.activeAlert.isFree)&&e.renderOptions.features.has(we.j.Features.showYellowFooterForTrialUsers))return a.createElement(Nt,null);if((0,s.zG)(e.activeAlert.extraProperties.freePremium,y.FX("unlocked")))return a.createElement(Lt,null);if((0,s.zG)(e.activeAlert.extraProperties.premiumYellowFooterVariant,y.pC))return(0,s.zG)(e.activeAlert.extraProperties.premiumYellowFooterVariant,y.g_((()=>null),(e=>a.createElement(Dt,{variant:e}))));if(!Ie.$.isFree(e.activeAlert)&&e.renderOptions.features.has(we.j.Features.showPremiumOnboarding))return a.createElement(zt,null);if(!Ie.$.isFree(e.activeAlert)&&e.renderOptions.features.has(we.j.Features.showPremiumTrialFooters))return a.createElement(Gt,{actions:t});if(e.renderOptions.features.has(we.j.Features.showAnonymousUserFooters))return a.createElement(Mt,{actions:t,card:e});const r=e.renderOptions.isPremiumOnboarding||m.h.create(!1);return a.createElement(u.F.Fragment,null,r.view((r=>!Ie.$.isFree(e.activeAlert)&&Boolean(r)?a.createElement(zt,null):(0,s.zG)(e.renderOptions.layoutDensity,we.j.Density.matchOrDefault(we.j.Density.cozy)((()=>a.createElement(Tt,{card:e,actions:t})),(()=>(0,s.zG)(e.activeAlert.extraProperties.fluencyMessage,y.g_((()=>a.createElement(Tt,{card:e,actions:t})),(e=>a.createElement(Pt,{fluencyLabel:e}))))))))))};function wt(e,t,r){r.next({type:Se.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const _t=({card:e,actions:t})=>{const r=a.useContext(b.m.Context).card.matchesNavigation;return a.createElement(u.F.Fragment,null,(0,s.zG)(e,he.U((e=>a.createElement("div",{key:e.activeAlert.id,className:_r.bundleNavWrapper},a.createElement(te.XY,{className:_r.bundleTitle},Ce.R.bundleTitle(e)),a.createElement("div",{className:_r.bundleNavMatchesRow},a.createElement(S.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:_r.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>wt("left",e,t)},a.createElement(w.JO.Arrow,{className:_r.bundleNavLeftButtonIcon})),a.createElement(te.ck,{className:_r.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),a.createElement(S.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:_r.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>wt("right",e,t)},a.createElement(w.JO.Arrow,{className:_r.bundleNavRightButtonIcon}))))))))},kt=({card:e,actions:t,isChecking:r})=>a.createElement(a.Fragment,null,(0,s.zG)(e.renderOptions.layoutDensity,we.j.Density.matchOrDefault(we.j.Density.minimal)((()=>re.bZ.isRated(e.activeAlert)?a.createElement(a.Fragment,null,a.createElement(tt,{card:e}),a.createElement(ft,{text:e.activeAlert.miniCardTitle})):a.createElement(vt,{alert:e.activeAlert,options:e.renderOptions},a.createElement(ft,{text:e.activeAlert.miniCardTitle}))),(()=>a.createElement(a.Fragment,null,a.createElement(vt,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(gt,{text:e.activeAlert.title}),a.createElement(et,{card:e,isChecking:r}))))),a.createElement(Ke,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),Et=e=>{const t=a.useContext(b.m.Context),{title:r,content:n}=t.card.onboarding[e.type];return a.useLayoutEffect((()=>()=>e.actions.next({type:Se.lY.Type.onboardingClose,value:e.type}))),a.createElement(_.DI.AdHoc,{key:"new-notification",title:a.createElement(a.Fragment,null,r,a.createElement(C.C.Regular,{className:_r.newLabel},t.new)),className:_r.newCheckNotification,onClose:e.onClose},n)},Tt=({actions:e,card:t})=>{const r=a.useContext(b.m.Context);return ie.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:Se.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?a.createElement(Ft.Base,{className:nr},a.createElement("span",null,r.card.muteCitedText(a.createElement("button",{"data-name":"open-preferences-link",onClick:()=>e.next({type:Se.lY.Type.openPreferences})},r.documentSettings.editorSettings))),a.createElement(S.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:Se.lY.Type.dismissMuteQuotedAdvice})},a.createElement(w.JO.Close,null))):null},Mt=({actions:e,card:t})=>{const r=a.useContext(b.m.Context),n=t.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return a.createElement(Ft.Base,{className:_r.anonymousUserNotice},n((()=>{e.next({type:Se.lY.Type.toSignIn})})))},Gt=({actions:e})=>a.createElement(Ft.Small,{className:ar},a.createElement(w.JO.PaidLink,{className:_r.iconWrapper,width:12}),a.useContext(b.m.Context).premiumFreeTrial((()=>{e.next({type:Se.lY.Type.premiumTrialFooterCtaClick})}))),Lt=()=>{const{beforeIcon:e,afterIcon:t}=a.useContext(b.m.Context).freePremiumAlertFooter;return a.createElement(Ft.Small,{className:lr},e,a.createElement(w.JO.PaidLink,{width:12}),t)},Dt=({variant:e})=>{const t=a.useContext(b.m.Context).premiumFooter;return a.createElement(Ft.Small,{className:cr},a.createElement(w.JO.PaidLink,{width:12}),t[e])},Nt=()=>{const{freeTrialAlertFooter:e}=a.useContext(b.m.Context);return a.createElement(Ft.Small,{className:lr},a.createElement(w.JO.PaidLink,{width:12}),e)},zt=()=>{const{premiumOnboardingFooter:e}=a.useContext(b.m.Context);return a.createElement(Ft.Small,{className:sr},a.createElement(w.JO.PaidLink,{width:12}),e)},Pt=({fluencyLabel:e})=>{const t=a.useContext(b.m.Context).card.fluency;return a.createElement(te.x4,{className:_r.fluencyNotice},e,a.createElement(ee.u,{title:t.tooltip},a.createElement(w.JO.Info,{width:10,className:_r.fluencyInfo})))};var Ft;!function(e){function t(e){return({children:t,className:r})=>a.createElement(e,(0,d.Sh)(_r.cardFooter,r),t)}e.Small=t(te.x4),e.Base=t(te.XY)}(Ft||(Ft={}));function Ut(e){const{transformHidden:t,isMouseInside:r,transformHiddenObservable:n}=ie.P.useMemoOnDidMount((()=>{const t=m.h.create(!1),r=new fe.x,n=de.T(ye.a([r,e]).pipe(he.U((([e,t])=>e&&t)),ve.h((e=>!0===e)),le.b((()=>t.set(!0)))),e.pipe(xe.T(1),ve.h((e=>!e)),le.b((()=>t.set(!1)))));return{transformHidden:t,isMouseInside:r,transformHiddenObservable:n}}));return ie.P.useSubscriptionTo(n),{transformHidden:t,isMouseInside:r}}const Rt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,cardTheme:o,cardBody:s,cardFooter:l,mainActions:c,subActions:d,cardExtra:u})=>{var m,p,h,g;const{transformHidden:y,isMouseInside:v}=Ut(r);return a.createElement(Le.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:Se.lY.Type.alertCardShow,cardType:Se.lY.getCardType(e),alertId:e.activeAlert.id})},onMouseOver:()=>{t.next({type:Se.lY.Type.hover,kind:"hover",id:e.id}),v.next(!0)},onMouseOut:()=>{t.next({type:Se.lY.Type.hover,kind:"unhover",id:e.id}),v.next(!1)},theme:(0,n._)({content:i.pipe(he.U((0,f.RN)(_r.loadingWrapperInvisible,_r.loadingWrapper)))},(0,Xe.Gh)(e.renderOptions),o),extra:a.createElement(a.Fragment,null,a.createElement(Ct,{isChecking:i}),null===(m=u)||void 0===m?void 0:m()),body:s(y),mainActions:null===(p=c)||void 0===p?void 0:p(),footer:null===(h=l)||void 0===h?void 0:h(y),subActions:null===(g=d)||void 0===g?void 0:g()})},Ot=({card:e,actions:t,isChecking:r,body:n,footer:i,alwaysShowWrongAndOffensiveButtons:o})=>a.createElement(Le.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:Se.lY.Type.alertCardShow,cardType:Se.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,Xe.Gh)(e.renderOptions),body:null!=n?n:a.createElement(kt,{card:e,actions:t,isChecking:r}),mainActions:a.createElement(nt,{card:e,feedbackActions:t,alwaysShowWrongAndOffensiveButtons:o}),footer:null!=i?i:a.createElement(ut,{card:e}),subActions:a.createElement(mt,{card:e,actions:t}),extra:a.createElement(At,{card:e,actions:t})}),Bt={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",display:"inline",textDecoration:"none",$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${ne.g_}, ${ne.xL}`},"& ul":{margin:`${P.ux.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:P.ux.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:P.ux.rem(.5)}}},$t={lineHeight:P.ux.rem(1.3125),$nest:{"& a":{display:"initial"}}},Wt={$nest:{"& i":{color:x.Il.CoreNeutral50},"& > * + *":{marginTop:P.ux.rem(.75)}}},jt={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:x.Il.CoreRed50}}},Ht={marginTop:P.ux.important(0),lineHeight:P.ux.rem(1.125)},Yt={fontSize:P.ux.rem(x.xv.SubheadingSize),lineHeight:P.ux.rem(x.xv.SubheadingLineHeight)},Vt={width:P.ux.rem(2),height:P.ux.rem(2)},Zt={position:"absolute",top:`calc(50% - ${P.ux.rem(1)})`,left:`calc(50% - ${P.ux.rem(1)})`,width:P.ux.rem(2),height:P.ux.rem(2),transition:"opacity .2s"},Jt={marginLeft:P.ux.rem(.5),backgroundColor:x.Il.CoreGreen50,color:x.Il.CoreNeutral0,fontWeight:600},Xt={position:"absolute",marginTop:P.ux.rem(-8.5),marginLeft:P.ux.rem(-2),$nest:{"&:after":{position:"absolute",bottom:P.ux.rem(-.525),left:P.ux.rem(.7),borderTop:`${P.ux.rem(.625)} solid ${x.Il.BackgroundNotification}`,borderRight:`${P.ux.rem(.5)} solid transparent`,borderLeft:`${P.ux.rem(.5)} solid transparent`,content:"' '"}}},Qt={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},qt={position:"absolute",top:P.ux.rem(.75),left:P.ux.rem(.4)},Kt={color:x.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:x.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${x.Il.CoreBlue40}`,color:x.Il.CoreBlue40}}}}},er={display:"flex",borderRadius:`${ne.LB} ${ne.LB} ${P.ux.rem(ne.Jr)} ${P.ux.rem(ne.Jr)}`,color:x.Il.CoreNeutral50,padding:`${P.ux.rem(.5)} ${P.ux.rem(.75)} ${P.ux.rem(.5)} ${P.ux.rem(1)}`,fontSize:P.ux.rem(.6875),lineHeight:P.ux.rem(1.125)},tr={padding:`0 ${P.ux.rem(.6)}`,minWidth:P.ux.rem(.625),minHeight:P.ux.rem(.625)},rr="muteQuotedAdvice",nr=P.ux.joinClasses([rr,P.ux.style({$nest:{"& button":{border:0,textDecoration:"underline",textUnderlineOffset:2,color:x.Il.CoreBlue50,background:"none",padding:0,$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50},"&:hover":{color:x.Il.CoreBlue40}}},"& i:hover":{strokeWidth:P.ux.px(2)}}})]),ir="premiumFreeTrial",ar=P.ux.joinClasses([ir,P.ux.style({$nest:{"& svg":{fill:x.Il.CoreYellow80},"& a":{fontWeight:800,color:x.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:x.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${x.Il.CoreYellow60}`,color:x.Il.CoreYellow60}}}}})]),or="premiumAlertFooter",sr=P.ux.joinClasses([or,P.ux.style({justifyContent:"center"})]),lr=P.ux.joinClasses([or,P.ux.style({justifyContent:"start",padding:P.ux.important(`${P.ux.rem(.5)} ${P.ux.rem(1)}`)})]),cr=P.ux.joinClasses([or,P.ux.style({justifyContent:"start",padding:P.ux.important(`${P.ux.rem(.5)} ${P.ux.rem(1)} ${P.ux.rem(.5)} ${P.ux.rem(1.75)}`)})]),dr={display:"block",boxSizing:"border-box",padding:`${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(1.5)}`,width:P.ux.percent(100),borderRadius:`${ne.LB} ${ne.LB} ${P.ux.rem(ne.Jr)} ${P.ux.rem(ne.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(2)}`,background:x.Il.CoreNeutral10,color:x.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(1)} ${P.ux.rem(2)}`,position:"relative",background:x.Il.CoreYellow20,color:x.Il.CoreNeutral90},"&.premiumAlertFooter":{display:"flex",alignItems:"center",padding:P.ux.rem(.5),background:x.Il.CoreYellow20,color:x.Il.CoreYellow80,$nest:{"& svg":{margin:`0 ${P.ux.rem(.25)}`,fill:x.Il.CoreYellow80}}}}},ur={position:"absolute",top:P.ux.rem(.8),left:P.ux.rem(.5),minWidth:P.ux.rem(1),minHeight:P.ux.rem(1)},mr={fontWeight:"bold",fontSize:P.ux.rem(.875),lineHeight:P.ux.rem(1.125),flex:2},pr={padding:`${P.ux.rem(.625)} 0 ${P.ux.rem(.1875)} ${P.ux.rem(.5)}`,marginBottom:P.ux.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},hr={fontSize:P.ux.rem(.75),lineHeight:P.ux.rem(1.125),color:x.Il.CoreNeutral90},gr={display:"flex",justifyContent:"flex-end",alignItems:"center",height:P.ux.rem(1.5),$nest:{"& > * + *":{marginLeft:P.ux.rem(.25)},"& > *":{borderRadius:P.ux.rem(ne.fx)}}},fr={height:P.ux.rem(2),minHeight:P.ux.rem(2),width:P.ux.rem(2),fill:x.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:x.Il.CoreBlue50},"&[data-disabled='true']":{fill:x.Il.CoreNeutral30}}},yr={borderRadius:P.ux.rem(.75),background:x.Il.CoreNeutral20,margin:`${P.ux.rem(-.25)} ${P.ux.rem(-.25)}`,padding:`${P.ux.rem(.25)} ${P.ux.rem(.25)}`,$nest:{[`& .${Ee.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${Ee.g.fullCardSelector}`]:{padding:`${P.ux.rem(.75)} ${P.ux.rem(.5)} ${P.ux.rem(.5)} ${P.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${P.ux.rem(-.5)})`}}},vr={paddingTop:P.ux.rem(.25),paddingBottom:P.ux.rem(.5),paddingLeft:P.ux.rem(.5),paddingRight:P.ux.rem(.5),fontWeight:"bold",fontSize:P.ux.rem(.875),lineHeight:P.ux.rem(1.125)};function xr(e,t){return{display:["block","-webkit-box"],maxHeight:P.ux.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const Ir=(0,i._)((0,n._)({},xr(1.5,3)),{lineHeight:P.ux.rem(1.5)}),br=(0,i._)((0,n._)({},xr(1.3125,3)),{lineHeight:P.ux.rem(1.3125)}),Cr={padding:P.ux.rem(.5),borderRadius:P.ux.rem(ne.fx),background:x.Il.CoreNeutral10,color:x.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${ne.g_}, ${ne.xL}`},Sr=.25,Ar={opacity:0,pointerEvents:"none"},wr={transition:`opacity ${P.ux.seconds(Sr)}`},_r=P.ux.stylesheet({loadingWrapper:[wr],loadingWrapperInvisible:[wr,Ar],description:[Bt],minimalDescription:[Bt,$t],more:[Wt],onboardingNotification:[{display:"block"}],title:[jt],titleMinimal:[jt,Ht],label:[Yt],dropdownContainer:[Vt],spinner:[Zt],spinnerInvisible:[Zt,{opacity:0,pointerEvents:"none"}],newLabel:[Jt],newCheckNotification:[Xt],baseNotice:[Qt],iconWrapper:[qt],anonymousUserNotice:[Qt,Kt],fluencyNotice:[Qt,er],fluencyInfo:[tr],cardFooter:[dr],circleProgress:[ur],circleText:[{display:"none"}],bundleTitle:[mr],bundleNavWrapper:[pr],bundleNavCount:[hr],bundleNavMatchesRow:[gr],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[fr],bundleNavLeftButtonIcon:[fr,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[fr,{transform:"rotate(270deg)"}],cardWrapper:[yr],cardWrapperTitle:[vr],highlightedTextBox:[Cr],highlightedTextInnerBox:[Ir],minimalHighlightedTextInnerBox:[br]})},38713:(e,t,r)=>{r.d(t,{J:()=>Xt});var n,i=r(84910),a=r(78520),o=r(49231),s=r(90023),l=r(13391),c=r(47387),d=r(19813),u=r(50094),m=r(73590),p=r(52574),h=r(97767),g=r(52303),f=r(17613),y=r(64538),v=r(39170),x=r(55441),I=r(88752),b=r(88873),C=r(16136),S=r(56424),A=r(77400),w=r(59179),_=r(12281),k=r(49225),E=r(8794),T=r(63532),M=r(31403),G=r(954),L=r(57326),D=r(31854),N=r(42596),z=r(93167),P=r(68334),F=r(8024),U=r(2087),R=r(31363);!function(e){e.Full=({card:e,actions:t,isChecking:r})=>o.createElement(F.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:D.lY.Type.alertCardShow,cardType:D.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,R.Gh)(e.renderOptions),body:o.createElement(U.M9,{card:e,actions:t,isChecking:r}),mainActions:o.createElement(U.Kg,{card:e,feedbackActions:t}),footer:o.createElement(U.lJ,{card:e}),subActions:o.createElement(p.zx.Primary,{href:e.activeAlert.knowledgeHubTermCreationUrl,target:"_blank",rel:"noopener noreferrer",onClick:()=>t.next({type:D.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},o.createElement(m.JO.New,null),"Add term"),extra:o.createElement(U.mQ,{card:e,actions:t})})}(n||(n={}));var O=r(58303),B=r(91817),$=r(5876),W=r(68717),j=r(86625),H=r(37213),Y=r(68823),V=function(e){var t=e.theme,r=void 0===t?{}:t;return o.createElement(c.F.div,(0,H.Sh)(J.container,r.container),o.createElement(c.F.div,(0,H.Sh)(J.swoosh,r.animation)))},Z=S.ux.keyframes({to:{backgroundPosition:"0 100%"}}),J=S.ux.prefixedStylesheet("ai-animation-v2",{container:[{position:"relative",width:S.ux.rem(2),height:S.ux.rem(2),display:"inline-block"}],swoosh:[{position:"absolute",left:0,right:0,top:0,bottom:0,animationName:Z,animationTimingFunction:"steps(".concat(119,", start)"),animationFillMode:"forwards",animationDuration:S.ux.seconds(2),animationIterationCount:"infinite",background:"transparent url('".concat(Y.y,"swoosh.png') 0 0 no-repeat"),backgroundSize:S.ux.percent(100)}]}),X=r(84714),Q=r(42983);const q=({card:e,actions:t,disabled:r})=>(0,U.m_)(e.activeAlert,e.renderOptions.layoutDensity)?o.createElement(Q.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e,disabled:r}):null,K=$.UI.Grid.make((({slots:e,state:t,notify:r})=>o.createElement(c.F.Fragment,null,t.pipe(w.U((t=>o.createElement(U.VM,{card:t,actions:{next:e=>r(e)(),error:s.Q1,complete:s.Q1},isChecking:X.of(!1),isCheckingGlobal:X.of(!1),cardBody:(0,s.a9)(o.createElement(c.F.Fragment,null,e.body)),cardTheme:{contentBody:ee.contentBody}}))))))),ee=S.ux.stylesheet({contentBody:[{paddingLeft:0}]}),te=$.UI.Knot.make(K,{body:$.UI.Node.make((()=>{const e=o.useContext(v.m.Context);return o.createElement("div",{className:ie.container},o.createElement(V,{theme:{container:ie.animation}}),o.createElement(C.XY,{className:ie.label},e.card.shortenIt.loadingLabel))}))}),re={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:S.ux.rem(.25)},ne={paddingLeft:S.ux.rem(.5)},ie=S.ux.stylesheet({container:[re],animation:[{transform:"scale(.7)"}],label:[ne]}),ae=(e,t)=>$.Z.composeKnot({body:$.Z.emptyFlow,root:$.Z.fromSideEffect((e=>{t.next(e)}),e)}),oe=$.UI.Knot.make(K,{body:$.UI.Node.make((()=>{const e=o.useContext(v.m.Context);return o.createElement("div",{className:ce.container},o.createElement(m.JO.ValidationOk,null),o.createElement(C.XY,{className:ce.label},e.card.shortenIt.notFoundLabel))}))}),se={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:S.ux.rem(.25)},le={paddingLeft:S.ux.rem(.5)},ce=S.ux.stylesheet({container:[se],label:[le]}),de=(e,t)=>$.Z.composeKnot({body:$.Z.emptyFlow,root:$.Z.fromSideEffect((e=>{t.next(e)}),e)});var ue=r(42927),me=r(67397),pe=r(41255),he=r(68545),ge=r(24666),fe=r(20161),ye=r(82589),ve=r(59833),xe=r(51028),Ie=r(18819),be=r(46193);const Ce=$.UI.Node.make((({state:e})=>o.createElement(c.F.Fragment,null,e.pipe(w.U((({collapsed:e,text:t})=>e?o.createElement("span",{className:je.shortenItCollapsedDelete},o.createElement(m.JO.EllipsisSmall,{width:13,className:je.shortenItCollapsedIcon})):o.createElement("span",{className:je.shortenItDelete},t))))))),Se=/^\W/,Ae=$.UI.Node.make((({state:e})=>o.createElement(c.F.span,{className:e.pipe(w.U((e=>Se.test(e.text)?je.shortenItInsertPunctuation:je.shortenItInsert)))},e.pipe(w.U((e=>e.text)))))),we=$.UI.Node.make((({state:e})=>o.createElement(c.F.span,null,e.pipe(w.U((e=>e.text)))))),_e=$.UI.Union.make("kind",{insert:Ae,delete:Ce,text:we}),ke=$.UI.Grid.make((({slots:e,state:t,notify:r})=>{const n=o.useContext(v.m.Context).card.shortenIt.collapsedButtonTooltip;return o.createElement(c.F.Fragment,null,t.pipe(w.U((({isReviewableGroup:t,isInReview:i,group:a})=>(0,s.zG)(a,g.hX((()=>t)),g.g_((()=>o.createElement(c.F.Fragment,null,e.parts)),(t=>i?o.createElement(c.F.span,{ref:e=>{e&&(0,s.zG)(g.ij(e.offsetParent),g.UI((e=>e.getBoundingClientRect())),g.bw((n=>{const i=e.getBoundingClientRect();r({kind:"editGroupExpanded",group:t,offsetRect:{width:i.width,height:i.height,top:i.top-n.top,left:i.left-n.left},offsetParentSize:{width:n.width,height:n.height}})()})))},className:je.shortenItEditGroupExpanded},e.parts):o.createElement(p.zx,{name:"shorten-it-review-change",className:je.shortenItEditGroupButton,animationMode:xe.m.FromClickPoint,title:n,"aria-label":n,tag:Ie.X.div,onClick:r({kind:"reviewEdit",group:t})},o.createElement(c.F.Fragment,null,e.parts)))))))))})),Ee=$.UI.Knot.make(ke,{parts:$.UI.List.make(ve.IX,_e)}),Te=$.UI.List.make(ve.IX,Ee),Me=$.UI.Grid.make((({slots:e,state:t})=>o.createElement(C.XY,{className:t.pipe(w.U((e=>(0,s.zG)(e,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>je.minimalShortenItBackground),(()=>je.shortenItBackground))))))},e.labels))),Ge=$.UI.Knot.make(Me,{labels:Te}),Le="cards-replacements_labels-",De={shortenItBackground:`${Le}shortenItBackground`,minimalShortenItBackground:`${Le}minimalShortenItBackground`,shortenItDelete:`${Le}shortenItDelete`,shortenItInsert:`${Le}shortenItInsert`,shortenItInsertPunctuation:`${Le}shortenItInsertPunctuation`,shortenItEditGroupButton:`${Le}shortenItEditGroupButton`,shortenItEditGroupExpanded:`${Le}shortenItEditGroupExpanded`,shortenItCollapsedDelete:`${Le}shortenItCollapsedDelete`,shortenItCollapsedDeleteButton:`${Le}shortenItCollapsedDeleteButton`,shortenItCollapsedIcon:`${Le}shortenItCollapsedIcon`},Ne={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${S.ux.rem(1)} 0`,color:y.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${pe.g_}, ${pe.xL}`},ze={color:y.Il.CoreRed50,textDecoration:"line-through",fontWeight:400},Pe={color:y.Il.CoreBlue60,fontWeight:600},Fe={transitionProperty:"background-color",transitionDuration:".2s",padding:`0 0 ${S.ux.rem(.2)} 0`,display:"inline",whiteSpace:"unset",verticalAlign:"unset",borderWidth:"1px",borderStyle:"solid",borderRadius:S.ux.rem(pe.fx)},Ue=(0,a._)((0,i._)({},Fe),{backgroundColor:y.Il.CoreNeutral1,borderColor:y.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:y.Il.CoreBlue10,borderColor:y.Il.CoreBlue10}}}),Re=(0,a._)((0,i._)({},Fe),{backgroundColor:y.Il.CoreBlue10,borderColor:y.Il.CoreBlue10,position:"relative"}),Oe={display:"inline-block",width:S.ux.rem(1),lineHeight:S.ux.rem(.625),height:S.ux.rem(.625),margin:`0 ${S.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:S.ux.rem(pe.mA)},Be=(0,i._)({},Oe),$e=(0,a._)((0,i._)({},Oe),{backgroundColor:y.Il.CoreNeutral20,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:y.Il.CoreBlue10}}}),We={minWidth:"unset",minHeight:"unset",paddingBottom:S.ux.rem(.125),fill:y.Il.CoreBlue60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:y.Il.CoreNeutral50}}},je={shortenItBackground:S.ux.joinClasses([De.shortenItBackground,S.ux.style(Ne),be.E.style(Ne)]),minimalShortenItBackground:S.ux.joinClasses([De.minimalShortenItBackground,S.ux.style(Ne,{lineHeight:S.ux.rem(1.3125)}),be.E.style(Ne,{lineHeight:S.ux.rem(1.3125)})]),shortenItDelete:S.ux.joinClasses([De.shortenItDelete,S.ux.style(ze),be.E.style(ze)]),shortenItInsert:S.ux.joinClasses([De.shortenItInsert,S.ux.style(Pe),be.E.style(Pe)]),shortenItInsertPunctuation:S.ux.joinClasses([De.shortenItInsertPunctuation,S.ux.style(Pe),be.E.style(Pe)]),shortenItEditGroupButton:S.ux.joinClasses([De.shortenItEditGroupButton,S.ux.style(Ue),be.E.style(Ue)]),shortenItEditGroupExpanded:S.ux.joinClasses([De.shortenItEditGroupExpanded,S.ux.style(Re),be.E.style(Re)]),shortenItCollapsedDelete:S.ux.joinClasses([De.shortenItCollapsedDelete,S.ux.style(Be),be.E.style(Be)]),shortenItCollapsedDeleteButton:S.ux.joinClasses([De.shortenItCollapsedDeleteButton,S.ux.style($e),be.E.style($e)]),shortenItCollapsedIcon:S.ux.joinClasses([De.shortenItCollapsedIcon,S.ux.style(We),be.E.style(We)])};S.ux.cssRule(`.${De.shortenItDelete} + .${De.shortenItInsert}`,{marginLeft:S.ux.rem(.25)});const He=$.UI.Grid.make((({state:e,view:t,notify:r,slots:n})=>{const d=o.useContext(v.m.Context),u=(0,a._)((0,i._)({},A.UF()),{next:e=>r(e)()}),m=k.P.useMemoOnDidMount((()=>l.h.create(!1)));return k.P.useSubscriptionTo(t("transformHidden").pipe(T.b(A.wW(m)))),o.createElement(c.F.Fragment,null,e.pipe(w.U((({item:e})=>o.createElement(F.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:r({type:D.lY.Type.alertCardShow,cardType:D.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOut:r({type:D.lY.Type.hover,kind:"unhover",id:e.id}),onMouseOver:r({type:D.lY.Type.hover,kind:"hover",id:e.id}),theme:(0,i._)({content:t("isCheckingGlobal").pipe(w.U((0,h.RN)(tt.loadingWrapperInvisible,tt.loadingWrapper)))},(0,R.Gh)(e.renderOptions)),mainActions:o.createElement(U.Kg,{card:e,feedbackActions:u}),subActions:o.createElement(q,{card:e,actions:u}),body:o.createElement(o.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(I.C.Regular,null,d.beta)}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:{next:e=>r(e)(),error:s.Q1,complete:s.Q1},layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(c.F.div,{className:t("transformHidden").pipe(w.U((0,h.RN)(tt.transformHidden,void 0)))},n.transform)),footer:o.createElement(o.Fragment,null,o.createElement(U.lJ,{card:e}),o.createElement(c.F.div,{className:tt.footerBtns},o.createElement(U.Nm,{className:tt.applyButton,spinnerClassName:tt.applyButtonSpinner,messageClassName:tt.applyButtonMessage,applyMessage:e.activeAlert.todoAction,checkingMessage:d.card.shortenIt.acceptButtonCheckingLabel,checkingInProgress:m,onClick:_.hz(r({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),cardType:D.lY.getCardType(e)}))}))),extra:o.createElement(U.o,{isChecking:t("isCheckingGlobal")})})))))})),Ye=$.UI.Grid.make((({slots:e,state:t,notify:r})=>{const n=o.useContext(v.m.Context).card.shortenIt,{ref:l,onMount:d}=k.P.useElWatcher(),u=he.oA(t).pipe(w.U((e=>e.group)),ge.x(),fe.w((e=>l.pipe(he.cp((t=>ye.YC(t).pipe(w.U((()=>({width:t.clientWidth,height:t.clientHeight}))),G.O({width:t.clientWidth,height:t.clientHeight}),ge.x(me.xu.eq.equals),T.b((t=>r((0,a._)((0,i._)({kind:"editPopupSize"},t),{group:e}))())))))))));return k.P.useSubscriptionTo(u),o.createElement(c.F.div,{className:tt.editPopupContainer},e.replacementLabels,t.pipe(w.U(O.g_(s.gn,(e=>{var{group:t}=e,i=(0,ue._)(e,["group"]);return o.createElement(c.F.div,{className:tt.editPopup,style:"withPosition"===i.kind?{transform:`translate(${i.left}px, ${i.top}px)`,visibility:"visible",opacity:1}:"withoutPosition"===i.kind?{visibility:"hidden",opacity:0}:(0,f.vE)(i),mount:d},o.createElement(p.zx.Primary,{name:"shorten-it-keep-change",onClick:r({kind:"keepEdit",group:t})},n.editPopupKeepButtonLabel),o.createElement(p.zx.Tertiary,{name:"shorten-it-dismiss-change",onClick:r({kind:"dismissEdit",group:t})},n.editPopupDismissButtonLabel))})))))})),Ve=$.UI.Knot.make(Ye,{replacementLabels:Ge}),Ze=$.UI.Knot.make(He,{transform:Ve}),Je={padding:`0 ${S.ux.rem(1)}`},Xe={display:"flex",flexDirection:"row",padding:S.ux.rem(.25),position:"absolute",backgroundColor:y.Il.CoreNeutral0,boxShadow:"0px 0px 0.5px rgba(0, 0, 0, 0.7), 0px 2px 8px rgba(26, 33, 52, 0.2)",borderRadius:S.ux.rem(pe.fx),zIndex:1,top:0,left:0,transition:"visibility 0.15s linear, opacity 0.15s linear"},Qe={$nest:{"&[data-disabled='true']":{backgroundColor:y.Il.CoreNeutral10,color:y.Il.CoreNeutral40}}},qe={$nest:{"& circle":{stroke:y.Il.CoreNeutral40}}},Ke={paddingRight:S.ux.rem(.25)},et={transition:`opacity ${S.ux.seconds(U.k_)}`},tt=S.ux.stylesheet({loadingWrapper:[et],loadingWrapperInvisible:[et,{opacity:0,pointerEvents:"none"}],footerBtns:[{display:"flex"}],expandEditsBtn:[Je],editPopupContainer:[{position:"relative"}],editPopup:[Xe],applyButton:[Qe],applyButtonSpinner:[qe],applyButtonMessage:[Ke],transformHidden:[{pointerEvents:"none",opacity:.5}]});var rt=r(64271),nt=r(91089),it=r(704),at=r(10883),ot=r(24332),st=r(9141);const lt=(e,t,r)=>$.Z.composeKnot({root:$.Z.fromSideEffect(s.Q1,e.pipe(w.U((e=>e.renderOptions.layoutDensity)))),labels:n=>rt.T(n.pipe(at.M(e),T.b((([e,n])=>{const o=e.action.action;switch(o.kind){case"reviewEdit":t.set(O.G({groupId:o.group,expandedEdit:O.YP,popupSize:O.YP,popupPosition:O.YP})),r.next({type:D.lY.Type.shortenItReviewEdit,alertId:n.activeAlert.id,itemId:n.id,group:o.group});break;case"editGroupExpanded":t.set((0,s.zG)(t.get(),O.hX((e=>e.groupId===o.group)),O.g_((()=>O.G({groupId:o.group,popupSize:O.YP,popupPosition:O.YP,expandedEdit:O.G({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})})),(e=>O.G((0,a._)((0,i._)({},e),{expandedEdit:O.G({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})}))))));break;default:(0,f.vE)(o)}})),fe.w((()=>nt.C))),it.sequenceS({item:e,editsInReview:t}).pipe(w.U((({item:e,editsInReview:t})=>(0,s.zG)(e.transform,O.hX(j.b$.isShortenIt),O.UI(B.ei("labels")),O.UI((t=>(0,s.zG)(t,ve.DZ((t=>(0,s.zG)(t.group,O.g_(s.jv,(t=>e.activeAlert.dismissedTransformGroups.has(t))))?t.type===j.GP.Delete?O.G((0,a._)((0,i._)({},t),{type:j.GP.Text})):t.type===j.GP.Insert?O.YP:O.G(t):O.G(t)))))),O.g_((()=>[]),(0,s.ls)(ve.u4([],((e,r)=>{var n;const i=r.type===j.GP.Delete?{kind:r.type,text:r.text,collapsed:(0,s.zG)(r.group,O.g_((()=>null!==(n=r.shouldBeCollapsed)&&void 0!==n&&n),(e=>!(0,s.zG)(t,O.Gg((t=>t.groupId===e)))))),group:r.group}:r.type===j.GP.Insert||r.type===j.GP.Text?{kind:r.type,text:r.text,group:r.group}:(0,f.vE)(r);return e.length>0&&O.Eh(st.Eq).equals(e[e.length-1].group,r.group)&&O.pC(r.group)?e.slice(0,-1).concat({group:r.group,parts:e[e.length-1].parts.concat(i)}):e.concat({group:r.group,parts:[i]})})),ve.UI((e=>({root:{isReviewableGroup:e.parts.length>1||1===e.parts.length&&e.parts[0].kind!==j.GP.Text,isInReview:(0,s.zG)(e.group,O.g_(s.jv,(e=>(0,s.zG)(t,O.Gg((t=>t.groupId===e)))))),group:(0,s.zG)(e.parts.map((e=>e.group)),(0,ot.g_)(O.gW()))},parts:e.parts}))))))))))}),ct=(e,t,r,n,i,a)=>$.Z.composeKnot({root:n=>rt.T(n.pipe(T.b((e=>{e.type===D.lY.Type.hover&&a.next("hover"===e.kind),r.next(e)})),fe.w((()=>nt.C))),it.sequenceS({item:e,isCheckingGlobal:t,transformHidden:i})),transform:$.Z.composeKnot({root:dt(e,n,r),replacementLabels:lt(e,n,r)})});const dt=(e,t,r)=>n=>rt.T(n.pipe(at.M(e),T.b((([e,n])=>{"editPopupSize"===e.kind?t.set((0,s.zG)(t.get(),O.hX((t=>t.groupId===e.group)),O.g_((()=>O.G({groupId:e.group,expandedEdit:O.YP,popupPosition:O.YP,popupSize:O.G({width:e.width,height:e.height})})),(t=>O.G((0,a._)((0,i._)({},t),{popupSize:O.G({width:e.width,height:e.height})})))))):function(e,t,r,n){switch(r.set((0,s.zG)(r.get(),O.hX((e=>e.groupId!==t.group)))),t.kind){case"dismissEdit":n.next({type:D.lY.Type.shortenItDismissEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group}),e.activeAlert.transformGroups.size===new Set(e.activeAlert.dismissedTransformGroups).add(t.group).size&&n.next({type:D.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:L.X.isEligibleForDismissSurvey(e)});break;case"keepEdit":n.next({type:D.lY.Type.shortenItKeepEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group});break;default:(0,f.vE)(t.kind)}}(n,e,t,r)})),fe.w((()=>nt.C))),t.view(O.tS((e=>(0,s.zG)(e.expandedEdit,O.UI((t=>(0,s.zG)(e.popupSize,O.g_((()=>({kind:"withoutPosition",group:e.groupId})),(r=>(0,i._)({kind:"withPosition",group:e.groupId},function(e,t,r=-10){const n=t.offsetRect.top+t.offsetRect.height,i=t.offsetRect.left+r;if(i+e.width>t.offsetParentSize.width)return{top:n,left:t.offsetParentSize.width-e.width};return{top:n,left:i}}(r,t))))))))))));const ut={loading:te,summary:Ze,notFound:oe},mt=$.UI.Union.make("kind",ut),pt=e=>e.pipe(w.U((e=>{const t=e.activeAlert.summaryState,r=O.g_(s.jv,j.b$.isShortenIt)(e.transform);switch(t){case W.vQ.SummaryState.notFound:return{kind:"notFound"};case W.vQ.SummaryState.notRequested:return{kind:"loading"};case W.vQ.SummaryState.requestSent:return r?{kind:"summary"}:{kind:"loading"};case W.vQ.SummaryState.invalidated:case W.vQ.SummaryState.received:return{kind:"summary"};default:(0,f.vE)(t)}})));var ht,gt=r(84308);!function(e){e.Full=e=>{const t=k.P.useAtomOf(e.card),{isChecking:r,isCheckingGlobal:n}=function(e,t,r){const n=k.P.useAtomOf({isWaiting:e.activeAlert.summaryState===W.vQ.SummaryState.requestSent||e.activeAlert.summaryState===W.vQ.SummaryState.invalidated,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return k.P.useMemoOnDidMount((()=>({isChecking:gt.a([t,n]).pipe(w.U((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),ge.x()),isCheckingGlobal:gt.a([r,n]).pipe(w.U((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),ge.x())})))}(e.card,e.isChecking,e.isCheckingGlobal),{transformHidden:i,isMouseInside:a}=(0,U.ce)(r),c=k.P.useMemoOnDidMount((()=>l.h.create(O.YP))),d=k.P.useMemoOnDidMount((()=>t.pipe(w.U((0,s.ls)(B.ei("transform"),O.hX(j.b$.isShortenIt))),it.skipBy(O.Eh(j.b$.ShortenIt.eq)),w.U((()=>O.YP)),T.b(A.wW(c)))));return k.P.useSubscriptionTo(d),o.createElement(o.Fragment,null,$.UI.mount(mt,((e,t,r,n,i,a)=>$.Z.composeUnion({loading:ae(e,r),notFound:de(e,r),summary:ct(e,t,r,n,i,a)},(()=>pt(e))))(t,n,e.actions,c,i,a)))}}(ht||(ht={}));var ft=r(74843),yt=r(26278),vt=r(97903);const xt=({card:e,actions:t})=>{const r=o.useContext(v.m.Context),n=g.Wi(e.activeAlert.takeawayFeedback)?r.card.takeaway.defaultTitle:e.activeAlert.title,i=g.ij(e.activeAlert.highlightTexts[0]),a=(0,s.zG)(e.activeAlert,g.DT((e=>!e.takeawayIsLikelyToBeRead&&g.FX(W.TO.correctlyDetected)(e.takeawayFeedback))),g.UI((()=>e.meta.explanation)));return o.createElement(o.Fragment,null,(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions},o.createElement(U.jg,{text:L.X.miniTitle(e,r)}))),(()=>o.createElement(o.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(U.Dx,{text:n}))))),(0,s.zG)(i,g.g_(s.gn,(t=>o.createElement(U.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,s.zG)(a,g.g_(s.gn,(r=>o.createElement(U.dk,{description:r,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))};var It;const bt=({card:e,feedbackActions:t})=>o.createElement(o.Fragment,null,o.createElement(p.zx.Ghost,{name:"takeaway-like",onClick:_.hz((()=>t.next({type:D.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(It=e.activeAlert.highlightTexts[0])&&void 0!==It?It:"",isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(m.JO.YesCircle,null)," Yes"),o.createElement(p.zx.Ghost,{name:"takeaway-dislike",onClick:_.hz((()=>t.next({type:D.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},o.createElement(m.JO.NoCircle,null)," No")),Ct=({card:e,feedbackActions:t})=>{const r=o.useContext(v.m.Context);return o.createElement(o.Fragment,null,o.createElement(p.zx.Tertiary,{name:"resolve",title:r.resolve,"aria-label":r.resolveLabel,onClick:_.hz((()=>t.next({type:D.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(m.JO.YesCircle,null)),o.createElement(p.zx.Tertiary,{name:"ignore",title:r.dismiss,"aria-label":r.dismiss,onClick:_.hz((()=>t.next({type:D.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(yt.J,{icon:vt.o,accessibilityLabel:"Dismiss",variant:"inherit"})))};function St(e){return!O.Wi(e.takeawayFeedback)&&!(!O.pC(e.examples)&&!O.pC(e.details))}var At;!function(e){e.Full=({card:e,actions:t})=>{return o.createElement(F.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:D.lY.Type.alertCardShow,cardType:D.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(r=e.renderOptions,(0,a._)((0,i._)({},(0,R.f8)(r.layoutDensity)),{wrapper:(0,s.zG)(r.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>_t.minimalCardWrapper),(()=>{})))})),body:o.createElement(xt,{card:e,actions:t}),mainActions:O.Wi(e.activeAlert.takeawayFeedback)?o.createElement(bt,{card:e,feedbackActions:t}):o.createElement(Ct,{card:e,feedbackActions:t}),footer:St(e.activeAlert)?o.createElement(U.lJ,{card:e}):null,subActions:St(e.activeAlert)?o.createElement(Q.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var r}}(At||(At={}));const wt={padding:`${S.ux.rem(.75)} ${S.ux.rem(.5)} ${S.ux.rem(.5)} ${S.ux.rem(1)}`},_t=S.ux.stylesheet({minimalCardWrapper:[wt]});var kt=r(83207),Et=r(85138),Tt=r(28108);const Mt=e=>S.ux.style({textDecoration:"line-through",color:e,fontWeight:"bold"}),Gt=e=>S.ux.style({fontWeight:"bold",padding:`${S.ux.rem(.0625)} ${S.ux.rem(.21875)} ${S.ux.rem(.0625)} ${S.ux.rem(.21875)}`,border:`1px solid ${e}`,borderRadius:S.ux.rem(.125),color:e}),Lt=S.ux.style({fontSize:S.ux.rem(.875),letterSpacing:"0px",lineHeight:S.ux.rem(1.3125),padding:`${S.ux.rem(.15625)} 0`}),Dt=S.ux.style({fontWeight:"bold",padding:`${S.ux.rem(.0625)} ${S.ux.rem(.21875)} ${S.ux.rem(.0625)} ${S.ux.rem(.21875)}`,borderRadius:S.ux.rem(.125),color:Tt.Qi,background:Tt.T1}),Nt=S.ux.style({fontStyle:"italic"}),zt=[Dt,Lt],Pt=/[\d\w&]/,Ft=e=>1===e.length&&!Pt.test(e),Ut=(e,t,r)=>(n,i,a)=>{const o=a[i-1];switch(n.type){case"insert":return e(n,i,o);case"delete":return t(n,i,o);case"text":return r(n,i,o);default:throw new Error("Unexpected citation alert transform part:"+JSON.stringify(n))}},Rt=(e,t)=>{var r;return"text"===(null===(r=t)||void 0===r?void 0:r.type)?null:o.createElement("span",{key:"s"+e,className:Lt}," ")},Ot=e=>o.createElement(o.Fragment,null,e.replacement.labels.map(e.isCitationGap?Ut(((e,t,r)=>o.createElement(o.Fragment,{key:t},Rt(t,r),o.createElement("span",(0,a._)((0,i._)({},(0,H.Sh)(...zt)),{key:t}),e.text))),((e,t)=>o.createElement(o.Fragment,{key:t})),((e,t)=>o.createElement("span",{key:t,className:Lt},e.text))):Ut(((e,t,r)=>{return o.createElement(o.Fragment,{key:t},Rt(t,r),o.createElement("span",(0,i._)({key:t},(0,H.Sh)(...(n=e.text,[Ft(n)?Gt(Tt.Wi):(a=Tt.Wi,S.ux.style({color:a,fontWeight:"bold"})),Lt,Nt]))),e.text));var n,a}),((e,t,r)=>{return o.createElement(o.Fragment,{key:t},Rt(t,r),o.createElement("span",(0,i._)({key:t},(0,H.Sh)(...(n=e.text,Ft(n)?[Gt(Tt._b),(a=Tt._b,S.ux.style({backgroundImage:`linear-gradient(to top left,\n        rgba(0,0,0,0) 0%,\n        rgba(0,0,0,0) calc(50% - 0.5px),\n        ${a} 50%,\n        rgba(0,0,0,0) calc(50% + 0.5px),\n        rgba(0,0,0,0) 100%)`})),Lt,Nt]:[Mt(Tt._b),Lt,Nt]))),e.text));var n,a}),((t,r)=>o.createElement("span",(0,i._)({key:r},(0,H.Sh)(Lt,("italic"===t.style||!e.isCitationItalicization)&&Nt)),t.text))))),Bt=({transformHidden:e})=>{const t=o.useContext(v.m.Context);return o.createElement(C.Xk,{"aria-hidden":A.U_(e),className:e.pipe(w.U((0,h.RN)(rr.transformHint,rr.transformHintInvisible)))},t.card.updatingSuggestion)},$t=({card:e,actions:t,isChecking:r,isCheckingGlobal:n})=>{const i=o.useContext(v.m.Context);return o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:(0,s.a9)(o.createElement(U.M9,{card:e,actions:t,isChecking:r})),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(U.lJ,{card:e}),o.createElement("div",{className:rr.fullSentenceCardFooterBtns},o.createElement(U.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:_.hz((()=>{t.next({type:D.lY.Type.alertApply,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),alertId:e.activeAlert.id,alternativeIndex:0,cardType:D.lY.getCardType(e)})}))})))})},Wt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:i})=>{const a=o.useContext(v.m.Context),u=l.h.create(!0);return k.P.useSubscriptionTo((0,s.zG)(u,E.T(1),T.b((e=>t.next({type:D.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:(0,s.a9)(o.createElement(c.F.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Qt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(x.T9,{classes:{rendered:rr.replacement,removing:rr.replacementHidden},timeout:250,content:u.pipe(M.a(i,((t,r)=>(0,s.zG)(r,g.g_((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(r=>o.createElement(Et.n4,{replacements:r,showDiff:t,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(z.j.Features.a11yContrast)})))))))}),o.createElement(U.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(U.lJ,{card:e}),o.createElement(c.F.div,{className:rr.fullSentenceCardFooterBtns},o.createElement(U.Nm,{title:i.pipe(w.U(g.g_((()=>""),(e=>a.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:_.hz((()=>{t.next({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),cardType:D.lY.getCardType(e)})}))}),o.createElement(b.X,{className:rr.fullSentenceCardCheckbox,checked:u,name:"set-goals"},a.card.showChangesToggle)))})},jt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:i})=>{const a=o.useContext(v.m.Context),l=(0,s.zG)(e.activeAlert.extraProperties.citationGap,g.FX(!0)),d=(0,s.zG)(e.activeAlert.extraProperties.citationItalicization,g.FX(!0));return o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:(0,s.a9)(o.createElement(c.F.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Qt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity,className:nr.description})))),o.createElement(x.T9,{classes:{rendered:rr.replacement,removing:rr.replacementHidden},timeout:250,content:i.pipe(w.U((e=>o.createElement(Ot,{replacement:e.value,isCitationGap:l,isCitationItalicization:d}))))}),o.createElement(U.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(U.lJ,{card:e}),o.createElement(c.F.div,{className:rr.fullSentenceCardFooterBtns},!l&&o.createElement(U.Nm,{title:a.card.todoAction(e.activeAlert.todoAction),applyMessage:"Reformat",checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:_.hz((()=>{t.next({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),cardType:D.lY.getCardType(e)})}))})))})},Ht=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:i})=>{const a=(0,s.zG)(e.userInput,g.fS((0,s.a9)("")));return o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:n=>o.createElement(o.Fragment,{key:"content"},o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Qt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(c.F.div,{className:n.pipe(w.U((0,h.RN)(rr.transformContainerInvisible,rr.transformContainer)))},o.createElement(x.T9,{classes:{rendered:rr.replacement,removing:rr.replacementHidden},timeout:250,content:i.pipe(w.U(g.g_((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>o.createElement(Et.$s,{key:"label",gapValue:a,replacements:r,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(z.j.Features.a11yContrast),onFocus:()=>t.next({type:D.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:r=>t.next({type:D.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:r}),onApply:_.hz((()=>t.next({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),cardType:D.lY.getCardType(e)})))})))))})),o.createElement(Bt,{transformHidden:n}),o.createElement(U.ko,{card:e,isChecking:r}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(U.lJ,{card:e}))})},Yt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n})=>{(0,f.kG)(g.pC(e.activeAlert.extraProperties.citationDetection),"Should contain citation detection");const i=o.useContext(v.m.Context),a=l.h.create(g.MH(e.activeAlert.extraProperties.citationDetection));return o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:(0,s.a9)(o.createElement(c.F.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Qt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),o.createElement("div",{className:(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.cozy)((()=>ir.dropdownContainer),(()=>ir.minimalDropdownContainer)))},o.createElement(u.L,{name:"citationStyle",label:o.createElement(c.F.div,null,a.pipe(w.U((e=>o.createElement("span",{className:ir.dropdownLabel,key:e},i.citation.essayDetectionCard.dropdownOptions[e],o.createElement(m.JO.TriangleArrow,{className:ir.arrowIcon}))))))},Object.entries(i.citation.essayDetectionCard.dropdownOptions).map((([t,r])=>o.createElement(p.zx.Flat,{key:t,name:t,onClick:()=>a.set(t),textPosition:"right"},o.createElement(c.F.Fragment,null,a.pipe(w.U((e=>t===e?o.createElement(m.JO.DocumentSettings.Selected,null):o.createElement("div",{className:ir.placeholder}))))),r,void 0!==i.citation.essayDetectionCard.examples[t]&&(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.cozy)((()=>o.createElement("span",{className:ir.example},i.citation.essayDetectionCard.examples[t])),(()=>null)))))))),o.createElement(U.ko,{card:e,isChecking:r}))),cardFooter:r=>o.createElement(o.Fragment,null,o.createElement(U.lJ,{card:e}),o.createElement(c.F.div,{className:rr.fullSentenceCardFooterBtns},o.createElement(U.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:"Set style",checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:_.hz((()=>{t.next({type:D.Wh.Kind.setAcademicDomainAndCitationStyle,citationStyle:a.get(),id:e.id}),t.next({type:D.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})}))})))})},Vt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:i})=>{const a=o.useContext(v.m.Context);return o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:n=>o.createElement(o.Fragment,null,o.createElement(c.F.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(I.C.Regular,{a11yContrast:e.renderOptions.features.has(z.j.Features.a11yContrast)},a.beta)})),o.createElement(c.F.div,{className:n.pipe(w.U((0,h.RN)(rr.transformContainerInvisible,rr.transformContainer)))},o.createElement(x.T9,{classes:{rendered:rr.replacement,removing:rr.replacementHidden},timeout:250,content:i.pipe(w.U(g.g_((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>{const n=(0,s.zG)(e.synfonySelection,g.fS((()=>[])));return o.createElement(Et.Px,{replacements:r,onClick:r=>_.hz((()=>{t.next({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,cardType:D.lY.getCardType(e),id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),drilldownSuggestionIds:n})})),onDive:(r,i)=>t.next({type:D.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:r,cardId:e.id,alternativeId:i,drilldownSuggestionIds:n}),onBack:()=>t.next({type:D.GM.Kind.back,cardId:e.id}),selection:n,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(z.j.Features.a11yContrast)})}))))})),o.createElement(Bt,{transformHidden:n}),o.createElement(U.ko,{card:e,isChecking:r}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(U.lJ,{card:e}))})},Zt=({card:e,actions:t,isChecking:r,isCheckingGlobal:n,transform:i})=>o.createElement(Jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:n=>o.createElement(o.Fragment,null,o.createElement(U.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(c.F.div,{className:n.pipe(w.U((0,h.RN)(rr.transformContainerInvisible,rr.transformContainer)))},o.createElement(x.T9,{classes:{rendered:rr.replacement,removing:rr.replacementHidden},timeout:250,content:i.pipe(w.U(g.g_((()=>(d.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(r=>o.createElement(U.hT,{rl:r,onClick:r=>_.hz((()=>{t.next({type:D.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r,id:e.id,eligibleForSurvey:L.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:L.X.isEligibleForGbPrompt(e),cardType:D.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(z.j.Features.a11yContrast),showDemoDocOnboardingA11yUpdates:e.renderOptions.features.has(z.j.Features.showOnboardingTourA11yUpdates)})))))})),o.createElement(Bt,{transformHidden:n}),o.createElement(U.ko,{card:e,isChecking:r}),(0,s.zG)(e.renderOptions.layoutDensity,z.j.Density.matchOrDefault(z.j.Density.minimal)((()=>null),(()=>o.createElement(U.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(U.lJ,{card:e}))}),Jt=e=>{var t,r,n;return o.createElement(U.VM,(0,a._)((0,i._)({},e),{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,s.a9)(o.createElement(U.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(r=e.mainActions)&&void 0!==r?r:(0,s.a9)(o.createElement(U.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(n=e.subActions)&&void 0!==n?n:(0,s.a9)(o.createElement(U.q4,{card:e.card,actions:e.actions}))}))},Xt=({card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a})=>N.i.isTakeawayItem(e)?o.createElement(At.Full,{card:e,actions:t}):N.i.isShortenItItem(e)?o.createElement(ht.Full,{card:e,actions:t,isChecking:r,isCheckingGlobal:i}):N.i.isToneAIItem(e)?o.createElement(kt.Y.Full,{card:e,actions:t,isChecking:r,isCheckingGlobal:i}):N.i.isEthicalAIItem(e)?o.createElement(P.T.Full,{card:e,actions:t,isChecking:r}):N.i.isSuggestedSnippetItem(e)?o.createElement(ft.w.Full,{card:e,actions:t,isChecking:r}):N.i.isKnowledgeHubSuggestedTermItem(e)?o.createElement(n.Full,{card:e,actions:t,isChecking:r}):L.X.isCitationDetectionCard(e)?o.createElement(Yt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i}):L.X.hasTransform(e)?L.X.hasFullSentenceTransform(e)||L.X.hasWritingExpertTransform(e)?o.createElement(Wt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):L.X.hasCitationTransform(e)?o.createElement(jt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):L.X.hasOneGapTransform(e)?o.createElement(Ht,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):L.X.hasSynfonyTransform(e)?o.createElement(Vt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):o.createElement(Zt,{card:e,actions:t,isChecking:r,isCheckingGlobal:i,transform:a}):L.X.isSimple(e)?o.createElement($t,{card:e,actions:t,isChecking:r,isCheckingGlobal:i}):o.createElement(U.eb,{card:e,actions:t,isChecking:r}),Qt=e=>o.createElement(c.F.Fragment,null,e.isNew.pipe(w.U(g.g_(s.gn,(t=>o.createElement(U.jt,{type:t,actions:e.actions,key:"new-notification"})))),G.O(null))),qt={transition:`opacity ${S.ux.seconds(U.k_)}`,transitionDelay:S.ux.seconds(U.k_)},Kt={position:"absolute",top:S.ux.rem(2),color:y.Il.CoreNeutral40,lineHeight:S.ux.rem(2),transition:`opacity ${S.ux.seconds(U.k_)}`,transitionDelay:S.ux.seconds(U.k_)},er={transition:`opacity ${S.ux.seconds(U.k_)}`},tr={fontSize:S.ux.rem(y.xv.BodySize),lineHeight:S.ux.rem(2.0625)},rr=(0,i._)({},S.ux.stylesheet({invisible:[U.Bn],transformContainer:[qt],transformContainerInvisible:[qt,U.Bn,{transitionDelay:"initial"}],transformHint:[Kt],transformHintInvisible:[Kt,U.Bn,{transitionDelay:"initial"}],replacement:[er],replacementHidden:[er,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[tr]})),nr=S.ux.prefixedStylesheet("withCitation",{description:[{$nest:{"& a":{backgroundImage:`repeating-linear-gradient(90deg, ${y.Il.CoreBlue50}, ${y.Il.CoreBlue50} 1px, transparent 1px, transparent 2px, ${y.Il.CoreBlue50} 2px)`,backgroundSize:"100% 1px",backgroundPosition:"0 100%",backgroundRepeat:"no-repeat",borderBottom:"none",paddingBottom:S.ux.px(1)}}}]}),ir=S.ux.prefixedStylesheet("withCitationDetection",{dropdownLabel:[{color:y.Il.CoreBlue50,fontSize:S.ux.rem(.875),fontWeight:700,lineHeight:S.ux.rem(1.3125),cursor:"pointer"}],dropdownContainer:[{width:S.ux.rem(18.75)}],minimalDropdownContainer:[{width:S.ux.rem(10)}],arrowIcon:[{transform:"rotate(180deg)",position:"absolute",marginLeft:S.ux.rem(-.5625),top:S.ux.rem(-.34375),$nest:{"*":{fill:y.Il.CoreBlue50}}}],placeholder:[{width:S.ux.rem(2),margin:`0 ${S.ux.rem(.25)} 0 0`}],example:[{display:"inline-block",marginLeft:"auto",marginRight:0,color:y.Il.CoreNeutral50,fontStyle:"italic",fontSize:S.ux.rem(.75),lineHeight:S.ux.rem(2)}]})},93127:(e,t,r)=>{r.d(t,{P:()=>F});var n=r(84910),i=r(78520),a=r(49231),o=r(58303),s=r(90023),l=r(37213),c=r(47387),d=r(59179),u=r(39170),m=r(88752),p=r(16136),h=r(19103),g=r(93167),f=r(95140),y=r(57761),v=r(16353),x=r(13391),I=r(52303),b=r(80606),C=r(73590),S=r(36355),A=r(12281),w=r(57326),_=r(42596),k=r(24611);function E(e,t){return S.R.outcomeTypeMatch({correctness:a.createElement(C.JO.Correctness,{className:t}),clarity:a.createElement(C.JO.ClarityOutcome,{className:t}),premium:a.createElement(C.JO.Star,{className:t}),engagement:a.createElement(C.JO.EngagementOutcome,{className:t}),delivery:a.createElement(C.JO.DeliveryOutcome,{className:t}),vox:null,knowledgeHub:null})(e)}const T=({text:e,className:t})=>a.createElement("div",(0,n._)({className:t},A.yG(e,{allowedTags:["i","b"]}))),M=(e,t,r)=>{const o=w.X.miniTitle(e,t),c=(0,s.zG)(e.activeAlert.extraProperties.vox,I.UI((e=>(({vox:e,theme:t={}})=>({icon:(0,s.zG)(e.logoUrl,I.UI((e=>a.createElement(k.Im,(0,i._)((0,n._)({},(0,l.Sh)(t.logo)),{logoUrl:e}))))),action:a.createElement(k.$x,(0,i._)((0,n._)({vox:e},(0,l.Sh)(t.label)),{isMinimalCard:!1}))}))({vox:e,theme:{logo:r.voxLogo,label:r.voxLabel}})))),d=(0,s.zG)(((e,t)=>(0,s.zG)(e.activeAlert.extraProperties.tone,I.UI((({emojiId:e})=>({action:t.replace(b.Vg,""),emojiId:e})))))(e,o),I.UI((({action:e,emojiId:t})=>({icon:I.G(a.createElement(b.In,{id:t,className:(0,l.Sh)(r.emojiLogo).className})),action:a.createElement(T,{text:e,className:r.wrapper})})))),u=({className:e})=>a.createElement(C.JO.PaidLink,{width:14,className:e});return(0,s.zG)(c,I.vx(d),I.fS((()=>{return{icon:(t=e.activeAlert,(0,s.zG)(t.freePremium,I.Gg((e=>"unlocked"===e)))?I.G(a.createElement(u,{className:(0,l.Sh)(r.freePremiumIcon).className})):_.i.isTakeawayItem(e)?I.G(a.createElement(C.JO.Megaphone,{width:16,className:r.takeawayLogo})):I.YP),action:a.createElement(T,{text:o,className:r.wrapper})};var t})))},G=(e,t,r)=>{const{action:n,icon:i}=M(e,t,r);return{actionComponent:n,iconComponent:(0,s.zG)(i,I.g_((()=>e.renderOptions.cardVisualMode.view(g.j.CardVisualMode.match({onRegular:()=>I.YP,onContrast:()=>I.ij(E(e.activeAlert.lensType,r.lensLogo))}))),(e=>x.h.create(I.G(e)))))}},L=e=>e?f.b.MiniContrast:f.b.Mini,D=e=>[y.y.getDotStyle(e),v.FW.cta],N=()=>{const e=a.useContext(u.m.Context);return a.createElement(m.C.Regular,{className:v.FW.newLabel},e.new)},z=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.a11yContrast),P=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.sduiContainerStyle);var F;!function(e){e.Bundle=({card:e,actions:t})=>{const[r]=D(e.activeAlert),o=(0,s.zG)(e.renderOptions,z,L);return a.createElement(o,(0,i._)((0,n._)({},(0,l.Sh)(v.l$.wrapper,v.l$.bundleContainer,v.l$.dot,r)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,counter:a.createElement(p.CL,{className:v.l$.alertsCounter},e.alerts.length),sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.l$.miniContainer),a.createElement("div",{className:v.l$.highlightedText},h.R.bundleTitle(e))))},e.Standard=({card:e,actions:t})=>{const r=a.useContext(u.m.Context),[m,p]=D(e.activeAlert),h=(0,s.zG)(e.renderOptions,z,L),{actionComponent:g,iconComponent:f}=G(e,r,{wrapper:(0,l.Sh)(p,v.FW.ctaText).className,voxLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,voxLabel:v.FW.cta,emojiLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,lensLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconStandard,freePremiumIcon:(0,l.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.l$.cardLogo).className});return a.createElement(h,(0,i._)((0,n._)({},(0,l.Sh)(v.l$.wrapper,f.view((e=>o.pC(e)?v.l$.invisibleDot:v.l$.dot)),m)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.l$.miniContainer),(0,s.zG)(f.view(o.WG)),a.createElement("div",{className:v.l$.highlightedText},e.activeAlert.highlightTexts[0]),a.createElement("div",{className:v.l$.middleDot},"·"),g,(0,s.zG)(e.renderOptions.isNew,d.U((e=>o.pC(e)?a.createElement(N,{key:"new-label"}):null)))))},e.TwoLined=({card:e,actions:t})=>{const r=a.useContext(u.m.Context),[d,m]=D(e.activeAlert),p=(0,s.zG)(e.renderOptions,z,L),{actionComponent:h,iconComponent:g}=G(e,r,{wrapper:(0,l.Sh)(m,v.FW.ctaText,v.nu.ctaText,v.nu.subTitle).className,voxLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,voxLabel:(0,l.Sh)(v.FW.cta,v.nu.subTitle).className,emojiLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,lensLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.lensIcon,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconMini,freePremiumIcon:(0,l.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.nu.cardLogo).className});return a.createElement(p,(0,i._)((0,n._)({},(0,l.Sh)(v.nu.wrapper,g.view((e=>o.pC(e)?v.nu.invisibleDot:v.nu.dot)),d)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.nu.miniContainer),h,(0,s.zG)(g.view(o.WG)),a.createElement("div",{className:v.Es},e.activeAlert.highlightTexts[0])))}}(F||(F={}))},16353:(e,t,r)=>{r.d(t,{Es:()=>m,FW:()=>z,l$:()=>E,nu:()=>x});var n=r(84910),i=r(78520),a=r(64538),o=r(56424),s=r(57156),l=r(41255);const c="0 1px 8px rgba(109, 117, 141, .18)",d={$nest:{"&:before":{top:o.ux.rem(.85),left:0}}},u="miniTwoLinedHighlightedText",m=o.ux.joinClasses([u,o.ux.style({overflow:"hidden",marginTop:o.ux.rem(-.25),color:a.Il.CoreNeutral90,textOverflow:"ellipsis"})]),p={height:o.ux.rem(3.25),borderRadius:o.ux.rem(l.Jr),boxShadow:c,$nest:{"&:hover":{boxShadow:c},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},h={top:o.ux.rem(.7)},g={top:o.ux.rem(.1)},f={fontWeight:o.ux.important(400),fontSize:o.ux.rem(.75)},y={position:"absolute",left:o.ux.rem(.5),minWidth:"initial",minHeight:"initial",background:a.Il.CoreNeutral0},v=(0,i._)((0,n._)({},y),{top:o.ux.rem(.6)}),x=o.ux.stylesheet({dot:[d],invisibleDot:[d,{$nest:{"&:before":{visibility:"hidden"}}}],wrapper:[p],miniContainer:[{flexDirection:"column"}],cardLogo:[h],lensIcon:[g],subTitle:[f],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[v],takeawayIconStandard:[y]}),I={height:o.ux.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},b={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0}}},C={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0,visibility:"hidden"}}},S={height:o.ux.important(o.ux.rem(2.5)),borderRadius:o.ux.rem(l.Jr)},A={color:a.Il.CoreNeutral50,display:"flex",width:o.ux.rem(2),height:o.ux.percent(100),justifyContent:"center",alignItems:"center"},w={overflow:"hidden",color:a.Il.CoreNeutral90,textOverflow:"ellipsis"},_={display:"inline-block",padding:`0 ${o.ux.rem(.5)}`},k={top:0,bottom:0,left:o.ux.rem(.5),margin:"auto"},E=o.ux.stylesheet({wrapper:[I],dot:[b],invisibleDot:[b,C],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[S],alertsCounter:[A],highlightedText:[w],middleDot:[_],cardLogo:[k]}),T={color:a.Il.CoreNeutral50,fontWeight:300},M={position:"absolute",left:o.ux.rem(.5),width:o.ux.rem(1),height:o.ux.rem(1),background:s.Zn},G={left:o.ux.rem(0)},L={marginLeft:o.ux.rem(.5)},D={marginLeft:o.ux.rem(-.5)},N={minHeight:"auto",left:o.ux.rem(.4)},z=o.ux.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[T],cardLogo:[M],lensIcon:[D],outcomesCardLogo:[M,G],newLabel:[L],diamondIcon:[N]})},85138:(e,t,r)=>{r.d(t,{Px:()=>Xe,n4:()=>Je,$s:()=>qe,zO:()=>tt,RF:()=>it});var n=r(84910),i=r(78520),a=r(49231),o=r(58303),s=r(90023),l=r(37213),c=r(13391),d=r(47387),u=r(84242),m=r(91817),p=r(17613),h=r(97767),g=r(39170),f=r(52574),y=r(51028),v=r(18819),x=r(73590),I=r(92544),b=r(16136),C=r(51607),S=r(59179),A=r(86625),w=r(93167),_=r(23584),k=r(32356),E=r(3143),T=r(57129),M=r(94882),G=r(64538),L=r(56424),D=r(46193),N=r(41255);const z=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:L.ux.rem(.5*e)}}}),P=(e,t,r,n)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:n,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${r}) '. '`}}}}}),F=e=>[P(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),P(e,5,"lower-roman","card-list6 card-list7 card-list8"),P(e,6,"decimal","card-list7 card-list8"),P(e,7,"lower-alpha","card-list8"),P(e,8,"lower-roman","none")],U="cards-replacements_labels-",R={list:`${U}list`,item:`${U}item`,diff:`${U}diff`,columnList:`${U}columnList`,itemInsert:`${U}itemInsert`,deleteAll:`${U}deleteAll`,crossed:`${U}crossed`,deleteQuote:`${U}deleteQuote`,deletePunctuation:`${U}deletePunctuation`,deleteDoubleComma:`${U}deleteDoubleComma`,deleteApostrophe:`${U}deleteApostrophe`,deleteLetter:`${U}deleteLetter`,deletePunctuationBeforeLetter:`${U}deletePunctuationBeforeLetter`,itemOriginal:`${U}itemOriginal`,itemOriginalStrikeThrough:`${U}itemOriginalStrikeThrough`,itemOriginalContent:`${U}itemOriginalContent`,spacesOnlyContent:`${U}spacesOnlyContent`,removeOrContainer:`${U}removeOrContainer`,itemContext:`${U}itemContext`,itemContextShifted:`${U}itemContextShifted`,or:`${U}or`,arrowInsertsList:`${U}arrowInsertsList`,cozyArrowInsertsList:`${U}cozyArrowInsertsList`,inlineHeader:`${U}inlineHeader`,fullSentenceBackground:`${U}fullSentenceBackground`,minimalFullSentenceBackground:`${U}minimalFullSentenceBackground`,fullSentenceDelete:`${U}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${U}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${U}fullSentenceHidden`,fullSentenceListItem:`${U}fullSentenceListItem`,fullSentenceBulletListItem:`${U}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${U}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${U}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:U+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:U+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:U+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${U}fullSentenceInsert`,fullSentenceInsertPunctuation:`${U}fullSentenceInsertPunctuation`,toneAIInsert:`${U}toneAIInsert`,itemRemove:`${U}itemRemove`,oneGapInsert:`${U}oneGapInsert`,oneGapInput:`${U}oneGapInput`,drilldownInsertGroup:`${U}drilldownInsertGroup`,drilldownArrowButton:`${U}drilldownArrowButton`,drilldownIcon:`${U}drilldownIcon`,drilldownOriginalRow:`${U}drilldownOriginalRow`,drilldownBackButton:`${U}drilldownBackButton`,collapsibleDelete:`${U}collapsibleDelete`,collapsibleInsert:`${U}collapsibleInsert`,collapsiblePartContent:`${U}collapsiblePartContent`},O={position:"relative",overflow:"hidden",margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 0`,padding:`${L.ux.rem(.25)} ${L.ux.rem(.5)}`,borderRadius:L.ux.rem(N.fx),color:G.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:L.ux.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},B={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:L.ux.rem(.3125),width:"1px",height:"120%",background:G.Il.CoreNeutral0,content:"''",opacity:.8}}},$={position:"relative",marginRight:L.ux.rem(.5),whiteSpace:"nowrap"},W=e=>({overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${L.ux.rem(1)} 0`,padding:e?0:L.ux.rem(.5),maxHeight:L.ux.rem(12),borderRadius:L.ux.rem(N.fx),background:e?G.Il.CoreNeutral0:G.Il.CoreNeutral10,color:G.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${N.g_}, ${N.xL}`}),j={position:"relative",marginRight:L.ux.rem(.5),maxWidth:`calc(100% - ${L.ux.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:L.ux.rem(.5),color:G.Il.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},H={textDecoration:"line-through",color:G.Il.CoreRed40,textDecorationLine:"line-through"},Y=[z(0),z(1),z(2),z(3),z(4),z(5),z(6),z(7),z(8)],V={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${N.g_}, ${N.xL}`},Z=e=>({display:"inline-block",background:e?E.I.Background.Brand.Default:G.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:e?T.Blue80:G.Il.CoreGreen50},"&[data-disabled='true']":{background:e?E.I.Background.Brand.Default:G.Il.CoreGreen40,opacity:.4}}}),J={$nest:{"&:after":{transform:"rotate(-25deg)"}}},X={paddingRight:L.ux.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},Q=e=>({color:e?E.I.Background.Brand.Default:G.Il.CoreGreen60,fontWeight:600}),q={paddingRight:L.ux.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},K={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},ee={display:"flex",flexBasis:"100%"},te={margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 2px`,color:G.Il.CoreNeutral60},re={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},ne={marginBottom:L.ux.rem(.25),color:G.Il.CoreNeutral60,fontWeight:400,fontSize:L.ux.rem(.8),lineHeight:L.ux.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ie={color:E.I.Background.Critical.Default,textDecoration:"line-through",fontWeight:600},ae=(0,i._)((0,n._)({},ie),{textDecoration:"none"}),oe={fontWeight:"bold",color:G.Il.CorePurple50},se={background:E.I.Background.Critical.Default,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:T.Red80}}},le={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},ce={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},de={width:"100%",marginTop:L.ux.rem(.5),marginBottom:L.ux.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:G.Il.CoreNeutral40}}},ue={marginTop:L.ux.rem(.5),lineHeight:`calc(${L.ux.rem(2)} - ${L.ux.px(2)})`,padding:`0 ${L.ux.rem(.5)}`,border:L.ux.important(`${L.ux.px(1)} solid ${G.Il.CoreNeutral50}`),color:G.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:L.ux.important(G.Il.CoreNeutral20)}}},me=D.E.style(O,Z(!1)),pe={margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 0`,$nest:{[`& .${R.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${R.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${R.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},he={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:L.ux.rem(.1875),paddingRight:L.ux.rem(.3125)},ge={width:L.ux.rem(1),height:L.ux.rem(1),minWidth:L.ux.rem(1),minHeight:L.ux.rem(1),verticalAlign:"top",marginTop:L.ux.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:L.ux.important("white")}}},fe={width:L.ux.percent(100),marginBottom:L.ux.rem(.5),display:"flex",$nest:{"& > *":{marginRight:L.ux.rem(.5)}}},ye={background:G.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:G.Il.CoreNeutral10}}},ve={display:"inline-block",width:L.ux.rem(1),lineHeight:L.ux.rem(.625),height:L.ux.rem(.625),margin:`0 ${L.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:L.ux.rem(N.mA)},xe={lineHeight:L.ux.rem(.2),verticalAlign:"super",marginLeft:"1px"},Ie=(0,i._)((0,n._)({},ve),{backgroundColor:G.Il.CoreRed10}),be=(0,i._)((0,n._)({},ve),{backgroundColor:G.Il.CoreGreen10}),Ce={list:L.ux.joinClasses([R.list,L.ux.style(V),D.E.style(V)]),item:L.ux.joinClasses([R.item,L.ux.style(O),D.E.style(O)]),itemInsert:L.ux.joinClasses([R.itemInsert,L.ux.style(O,Z(!1)),me]),deleteAll:L.ux.joinClasses([R.deleteAll,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),crossed:L.ux.joinClasses([R.crossed,L.ux.style(B)]),deleteQuote:L.ux.joinClasses([R.deleteQuote,L.ux.style(B,J),D.E.style(B,J)]),deletePunctuation:L.ux.joinClasses([R.deletePunctuation,L.ux.style(B,X),D.E.style(B,X)]),deleteDoubleComma:L.ux.joinClasses([R.deleteDoubleComma,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),deleteApostrophe:L.ux.joinClasses([R.deleteApostrophe,L.ux.style(B,q),D.E.style(B,q)]),deleteLetter:L.ux.joinClasses([R.deleteLetter,L.ux.style(K),D.E.style(K)]),deletePunctuationBeforeLetter:L.ux.joinClasses([R.deletePunctuationBeforeLetter,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),itemOriginal:L.ux.joinClasses([R.itemOriginal,L.ux.style(j),D.E.style(j)]),itemOriginalStrikeThrough:L.ux.joinClasses([R.itemOriginalStrikeThrough,L.ux.style(H),D.E.style(H)]),itemOriginalContent:L.ux.joinClasses([R.itemOriginalContent,L.ux.style({color:G.Il.CoreNeutral90}),D.E.style({color:G.Il.CoreNeutral90})]),spacesOnlyContent:L.ux.joinClasses([R.spacesOnlyContent,L.ux.style({whiteSpace:"pre"})]),removeOrContainer:L.ux.joinClasses([R.removeOrContainer,L.ux.style(ee),D.E.style(ee)]),itemContext:L.ux.joinClasses([R.itemContext,L.ux.style($)]),itemContextShifted:L.ux.joinClasses([R.itemContextShifted,L.ux.style($,{marginRight:"2px"}),D.E.style($,{marginRight:"2px"})]),or:L.ux.joinClasses([R.or,L.ux.style(te),D.E.style(te)]),arrowInsertsList:L.ux.joinClasses([R.arrowInsertsList,L.ux.style(re),D.E.style(re)]),columnList:L.ux.joinClasses([R.columnList,L.ux.style(re,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),D.E.style(re)]),cozyArrowInsertsList:L.ux.joinClasses([R.arrowInsertsList,L.ux.style(re,{flex:2,flexBasis:"0%"}),D.E.style(re)]),inlineHeader:L.ux.joinClasses([R.inlineHeader,L.ux.style(ne),D.E.style(ne)]),toneAIInsert:L.ux.joinClasses([R.toneAIInsert,L.ux.style(oe),D.E.style(oe)]),fullSentenceBackground:L.ux.joinClasses([R.fullSentenceBackground,L.ux.style(W(!1)),D.E.style(W(!1))]),minimalFullSentenceBackground:L.ux.joinClasses([R.minimalFullSentenceBackground,L.ux.style(W(!1),{lineHeight:L.ux.rem(1.3125)}),D.E.style(W(!1),{lineHeight:L.ux.rem(1.3125)})]),fullSentenceDelete:L.ux.joinClasses([R.fullSentenceDelete,L.ux.style(ie),D.E.style(ie)]),fullSentenceDeleteCollapsed:L.ux.joinClasses([R.fullSentenceDeleteCollapsed,L.ux.style(ae),D.E.style(ae)]),fullSentenceHidden:L.ux.joinClasses([R.fullSentenceHidden,L.ux.style({display:"none"})]),fullSentenceListItem:L.ux.joinClasses([R.fullSentenceListItem,L.ux.style(...Y),D.E.style(...Y)]),fullSentenceBulletListItem:L.ux.joinClasses([R.fullSentenceBulletListItem,L.ux.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),D.E.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:L.ux.joinClasses([R.fullSentenceDashedListItem,L.ux.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),D.E.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:L.ux.joinClasses([R.fullSentenceOrderedListItem,L.ux.style(...F(""),...Y),D.E.style(...F(""),...Y)]),fullSentenceOrderedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,L.ux.style(...F("¶"),...Y,Q(!1)),D.E.style(...F("¶"),...Y,Q(!1))]),fullSentenceBulletListItemWithFormatting:L.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,L.ux.style(...Y,ce,Q(!1)),D.E.style(...Y,ce)]),fullSentenceDashedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,L.ux.style(...Y,le,Q(!1)),D.E.style(...Y,le)]),fullSentenceInsert:L.ux.joinClasses([R.fullSentenceInsert,L.ux.style(Q(!1))]),fullSentenceInsertPunctuation:L.ux.joinClasses([R.fullSentenceInsertPunctuation,L.ux.style(Q(!1))]),diff:L.ux.joinClasses([R.diff,L.ux.style({fontWeight:"bolder"}),D.E.style({fontWeight:"bolder"})]),itemRemove:L.ux.joinClasses([R.itemRemove,L.ux.style(O,se)]),oneGapInsert:L.ux.joinClasses([R.oneGapInsert,L.ux.style(O,Z(!1),de),me]),oneGapInput:L.ux.joinClasses([R.oneGapInput,L.ux.style(ue)]),drilldownInsertGroup:L.ux.joinClasses([R.drilldownInsertGroup,L.ux.style(pe)]),drilldownArrowButton:L.ux.joinClasses([R.drilldownArrowButton,L.ux.style(he)]),drilldownIcon:L.ux.joinClasses([R.drilldownIcon,L.ux.style(ge)]),drilldownOriginalRow:L.ux.joinClasses([R.drilldownOriginalRow,L.ux.style(fe)]),drilldownBackButton:L.ux.joinClasses([R.drilldownBackButton,L.ux.style(ye)]),collapsibleDelete:L.ux.joinClasses([R.collapsibleDelete,L.ux.style(Ie)]),collapsibleInsert:L.ux.joinClasses([R.collapsibleInsert,L.ux.style(be)]),collapsiblePartContent:L.ux.joinClasses([R.collapsiblePartContent,L.ux.style(xe)])};L.ux.cssRule(`.${R.fullSentenceDelete} + .${R.fullSentenceInsert}`,{marginLeft:L.ux.rem(.25)});const Se=(0,i._)((0,n._)({},Ce),{itemInsert:L.ux.joinClasses([R.itemInsert,L.ux.style(O,Z(!0)),me,M.T$]),oneGapInsert:L.ux.joinClasses([R.oneGapInsert,me,L.ux.style(O,Z(!0),de),M.T$]),fullSentenceOrderedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,D.E.style(...F("¶"),...Y,Q(!1)),L.ux.style(...F("¶"),...Y,Q(!0))]),fullSentenceBulletListItemWithFormatting:L.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,L.ux.style(...Y,ce,Q(!0)),D.E.style(...Y,ce)]),fullSentenceDashedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,L.ux.style(...Y,le,Q(!0)),D.E.style(...Y,le)]),fullSentenceInsert:L.ux.joinClasses([R.fullSentenceInsert,L.ux.style(Q(!0))]),fullSentenceInsertPunctuation:L.ux.joinClasses([R.fullSentenceInsertPunctuation,L.ux.style(Q(!0))]),fullSentenceBackground:L.ux.joinClasses([R.fullSentenceBackground,L.ux.style(W(!0)),D.E.style(W(!1))]),minimalFullSentenceBackground:L.ux.joinClasses([R.minimalFullSentenceBackground,L.ux.style(W(!0),{lineHeight:L.ux.rem(1.3125)}),D.E.style(W(!0),{lineHeight:L.ux.rem(1.3125)})])});var Ae;function we(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}function _e(e,t){if(e===t)return;const r=e.length,n=t.length;if(n>r){if(t.substr(0,r)===e)return{from:r,to:r,oldFragment:"",newFragment:t.substr(r)};if(t.substr(n-r)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,n-r)}}if(n<r){if(e.substr(r-n)===t)return{from:0,to:r-n,oldFragment:e.substr(0,r-n),newFragment:""};if(e.substr(0,n)===t)return{from:n,to:r,oldFragment:e.substr(n),newFragment:""}}const i=n<r?n:r,a=function(e,t,r){let n=0;for(;e[n]===t[n]&&n<r;)n+=1;return n}(e,t,i);let o=function(e,t,r,n,i){let a=0;for(;e[r-a-1]===t[n-a-1]&&i-a>=0;)a+=1;return a}(e,t,r,n,i);return a+o>r&&(o-=a+o-r),a+o>n&&(o-=a+o-n),{from:a,to:r-o,oldFragment:e.substr(a,r-o-a),newFragment:t.substr(a,n-o-a)}}!function(e){e.getClass=function(e,t){return null!==(r=t)&&1===r.length&&/["'”’]/.test(r)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:we(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:Boolean(function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t))?e.deletePunctuationBeforeLetter:e.deleteAll;var r}}(Ae||(Ae={}));const ke=e=>e?Se:Ce,Ee=({theme:e,children:t})=>a.createElement(b.Xk,{className:e.list},t),Te=({transform:e,title:t,disabled:r,boldifier:n=ze,classes:i,onClick:o})=>a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:v.X.div,onClick:o,title:t,disabled:r,className:i.itemInsert},e.map(((e,t)=>a.createElement(a.Fragment,{key:t},n(e,i.diff))))),Me=({transform:e,theme:t,showOnboarding:r,onClick:i,onExpand:o})=>{const s=a.useContext(g.m.Context),c=e.label.map(((e,t)=>a.createElement(a.Fragment,{key:t},e.text))),d=a.createElement(f.zx,(0,n._)({animationMode:y.m.FromClickPoint,name:"expand-insert",onClick:o,title:s.synfony.drilldownTooltip(c)},(0,l.Sh)(t.itemInsert,t.drilldownArrowButton)),a.createElement(x.JO.Arrow,{direction:x.n4.right,className:t.drilldownIcon}));return a.createElement("div",{className:t.drilldownInsertGroup},a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:v.X.div,onClick:i,title:s.synfony.applyTooltip,className:t.itemInsert},c),Boolean(e.subLabels.length)&&(r?a.createElement(Qe,null,d):d))},Ge=({transform:e,title:t,theme:r,onClick:n})=>a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-remove",role:"deletion",tag:v.X.div,onClick:n,title:t,className:r.itemRemove},e.map(((e,t)=>a.createElement(Fe,{key:t,element:e,theme:r})))),Le=({transform:e,title:t,theme:r,onClick:n,children:i})=>a.createElement("div",{className:r.removeOrContainer},e.map(((i,o)=>"text"===i.type?a.createElement("span",{key:o,className:o===e.length-1?r.itemContextShifted:r.itemContext},i.text):a.createElement(f.zx,{key:o,animationMode:y.m.FromClickPoint,name:"apply-remove-or",role:"deletion",tag:v.X.div,onClick:n,title:t,className:r.itemRemove},a.createElement(Fe,{element:i,theme:r})))),i),De=e=>a.createElement("span",{className:e.classes.or},a.useContext(g.m.Context).card.or),Ne=({transform:e,replacements:t,boldifier:r=ze,theme:n,strikeThrough:i=!0})=>{var o;const c=e.every((e=>null===e.text.match(/\n/))),d=_e(e.map((e=>e.text)).join(""),1===t.length?t[0].map((e=>e.text)).join(""):""),m=(0,s.zG)(null===(o=d)||void 0===o?void 0:o.oldFragment,(e=>Boolean(e)&&u.tj(e))),p=c&&m;return a.createElement("div",(0,l.Sh)(n.itemOriginal,i&&n.itemOriginalStrikeThrough),a.createElement("span",(0,l.Sh)(n.itemOriginalContent,p&&n.spacesOnlyContent),e.map(((e,t)=>a.createElement(a.Fragment,{key:t},r(e,n.diff))))))},ze=m.ei("text"),Pe=({text:e,type:t},r)=>"text"===t?e:a.createElement("span",{className:r},e),Fe=({element:e,strikeClass:t,theme:r})=>"delete"===e.type?a.createElement("span",(0,l.Sh)(Ae.getClass(r,e.text),t),e.text):a.createElement(a.Fragment,null,e.text);function Ue({labels:e,original:t,onlyReplacements:r},n,i,o,s){const l=1===t.length,[c]=l?[t[0].text,e[0][0].text].map((e=>(t,r)=>n=>a.createElement(Ze,{index:r,oldText:t,newText:n.text,theme:e}))(o)):[Pe,Pe];return a.createElement(Ee,{theme:o},!r&&a.createElement(Ne,{transform:t,theme:o,replacements:e}),a.createElement("div",{className:i===w.j.Density.cozy?o.cozyArrowInsertsList:e.length>2?o.columnList:o.arrowInsertsList},e.map(((e,t)=>a.createElement(Te,{key:t,title:n,onClick:s(t),transform:e,boldifier:c,classes:o})))))}const Re=/^\W/,Oe=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceDelete;case A.GP.Insert:return Re.test(e.text)?t.fullSentenceInsertPunctuation:t.fullSentenceInsert;case A.GP.Text:case A.GP.List:return"";default:return(0,p.vE)(e)}},Be=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:case A.GP.Text:case A.GP.Insert:return"";default:return(0,p.vE)(e)}},$e=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?t.fullSentenceDashedListItemWithFormatting:t.fullSentenceOrderedListItemWithFormatting;case A.GP.Insert:case A.GP.Text:return"";default:return(0,p.vE)(e)}},We=(e,t)=>{switch(e.type){case A.GP.Delete:return t.fullSentenceHidden;case A.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItem:"dashed"===e.kind?t.fullSentenceDashedListItem:t.fullSentenceOrderedListItem;case A.GP.Insert:case A.GP.Text:return"";default:return(0,p.vE)(e)}},je=({p:e,theme:t})=>{const r=c.h.create(e.shouldBeCollapsed);return a.createElement(d.F.Fragment,null,r.view((0,h.RN)(a.createElement("span",{className:e.type===A.GP.Delete?t.collapsibleDelete:t.collapsibleInsert,onClick:()=>r.set(!1),role:"button",tabIndex:0},a.createElement("span",{className:t.collapsiblePartContent},"…")),a.createElement(a.Fragment,null,e.text))))},He=(e,t,r)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case A.GP.Insert:case A.GP.Delete:return t?a.createElement(je,{p:e,theme:r}):e.text;case A.GP.Text:return a.createElement("span",null," … ");default:(0,p.vE)(e)}},Ye=e=>{const t=(0,s.zG)(e.showDiff,(0,h.RN)(Oe,Be),(t=>t(e.transformPart,e.theme)));return a.createElement("span",{className:t},He(e.transformPart,e.showDiff,e.theme))},Ve=e=>{const t=(0,s.zG)(e.showDiff,(0,h.RN)($e,We),(t=>t(e.transformPart,e.theme)));return e.transformPart.type===A.GP.List?a.createElement("span",{className:t,"data-indent":e.transformPart.indent}):a.createElement("span",{className:t},He(e.transformPart,e.showDiff,e.theme))},Ze=({index:e=0,oldText:t,theme:r,newText:n})=>{const i=function(e,t){if(e.length<=4)return null;const r=_e(e,t);if(void 0===r)return null;const{from:n,to:i,oldFragment:a,newFragment:o}=r,s=1===o.length&&n>0&&e[n-1]===o,l=1===a.length&&0===o.length&&t[n-1]===a;let c=n,d=o;return(s||l)&&(c=n-1),s&&(d=o+o),l&&(d=a),d.length>3?null:[e.substring(0,c),d,e.substring(i)]}(t,n),o=!!i&&u.tj(i[1]);return a.createElement(a.Fragment,null,i?[i[0],a.createElement("span",{key:e,className:o?r.spacesOnlyContent:r.diff},i[1]),i[2]]:n)},Je=e=>{const{onMount:t,maxHeight:r}=(0,_.N)(),n=ke(e.a11yContrast);return a.createElement(b.XY,{mount:t,style:{maxHeight:r.pipe(S.U(o.fS(s.r5)))},tabIndex:0,className:(0,s.zG)(e.layoutDensity,w.j.Density.matchOrDefault(w.j.Density.minimal)((()=>n.minimalFullSentenceBackground),(()=>n.fullSentenceBackground)))},e.replacements.kind===A._k.WithFormatting?e.replacements.labels.map(((t,r)=>a.createElement(Ve,{showDiff:e.showDiff,transformPart:t,key:r,theme:n}))):e.replacements.labels.map(((t,r)=>a.createElement(Ye,{showDiff:e.showDiff,transformPart:t,key:r,theme:n}))))},Xe=({replacements:e,layoutDensity:t,a11yContrast:r,selection:n,onClick:i,onDive:o,onBack:s})=>{const l=a.useContext(g.m.Context),{activeLabels:c,original:d}=A.ey.getSelectedItems(e,n),u=ke(r);return a.createElement(Ee,{theme:u},a.createElement("div",{className:u.drilldownOriginalRow},n.length>0&&a.createElement(f.zx.Ghost,{name:"go-back",title:l.synfony.back,onClick:s,className:u.drilldownBackButton},a.createElement(x.JO.Arrow,{direction:x.n4.left})),a.createElement(Ne,{transform:d,theme:u,replacements:[],strikeThrough:!Boolean(n)||0===n.length})),a.createElement("div",{className:t===w.j.Density.cozy?u.cozyArrowInsertsList:u.arrowInsertsList},c.map(((e,t)=>a.createElement(Me,{key:t,transform:e,showOnboarding:2===t,theme:u,onClick:i(e.alternativeId),onExpand:()=>o(t,e.alternativeId)})))))},Qe=e=>{const t=a.useContext(g.m.Context);return a.createElement(k.TG,{alignment:"topLeft",eventType:"onclick",stepId:C.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:k.E2.rightCenter}},e.children)},qe=e=>{const t=a.useContext(g.m.Context).card,r=""===e.gapValue,n=ke(e.a11yContrast);return a.createElement(a.Fragment,null,a.createElement(I.B2,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:n.oneGapInput}),a.createElement(Te,{title:r?"":t.todoAction(e.replacements.tooltipText),boldifier:Pe,onClick:e.onApply,classes:{itemInsert:n.oneGapInsert,inlineHeader:n.inlineHeader,diff:n.diff},disabled:r,transform:Ke(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ke=(e,t,r)=>[...e,{type:A.GP.Insert,text:et(e)+(t||"…")+et(r),shouldBeCollapsed:!1},...r],et=e=>e.length?" ":"",tt=({replacementsLabels:e,layoutDensity:t,a11yContrast:r,onClick:n})=>{const i=a.useContext(g.m.Context).card.todoAction(e.tooltipText),o=ke(r);switch(e.type){case A.b$.Type.InsertList:return a.createElement(Ee,{theme:o},e.labels.map(((e,t)=>a.createElement(Te,{key:t,title:i,onClick:n(t),transform:e,classes:o}))));case A.b$.Type.DeleteList:return a.createElement(Ee,{theme:o},e.labels.map(((e,t)=>a.createElement(Ge,{key:t,title:i,onClick:n(t),transform:e,theme:o}))));case A.b$.Type.Arrow:return Ue(e,i,t,o,n);case A.b$.Type.InsertOr:return a.createElement(Ee,{theme:o},a.createElement(Te,{transform:e.labels[0],title:i,onClick:n(0),boldifier:Pe,classes:o}),a.createElement(De,{classes:o}),a.createElement(Te,{transform:e.labels[1],title:i,onClick:n(1),boldifier:Pe,classes:o}));case A.b$.Type.DeleteOr:return a.createElement(Ee,{theme:o},e.labels.map(((t,r)=>a.createElement(Le,{key:r,title:i,onClick:n(r),theme:o,transform:t},r===e.labels.length-2&&a.createElement(De,{classes:o})))));case A.b$.Type.Citation:case A.b$.Type.FullSentence:case A.b$.Type.OneGap:case A.b$.Type.Drilldown:case A.b$.Type.ShortenIt:case A.b$.Type.ToneAI:case A.b$.Type.WritingExpert:return null;default:return(0,p.vE)(e)}},rt=({label:e,a11yContrast:t})=>{const r=e.findIndex((e=>e.type===A.GP.Delete));let o=e.reduce(((e,t)=>e=e.concat(t.text.split(" ").map((e=>({word:e,isDelete:t.type===A.GP.Delete,shouldHighlight:!1}))))),[]).filter((e=>""!==e.word));return o=0===r?o.filter((e=>!e.isDelete)).map(((e,t)=>{let r=!1;return t-2<0&&(r=!0),(0,i._)((0,n._)({},e),{shouldHighlight:r})})):r===e.length-1?o.filter((e=>!e.isDelete)).map(((e,t,r)=>{let a=!1;return t+2>=r.length&&(a=!0),(0,i._)((0,n._)({},e),{shouldHighlight:a})})):o.map(((e,t,r)=>{let a=!1;return(void 0!==r[t+1]&&r[t+1].isDelete||void 0!==r[t-1]&&r[t-1].isDelete)&&(a=!0),(0,i._)((0,n._)({},e),{shouldHighlight:a})})).filter((e=>!e.isDelete)),a.createElement(a.Fragment,null,o.map(((e,r,n)=>a.createElement("span",{key:`${e.word}-${r}`,className:e.shouldHighlight?ke(t).toneAIInsert:void 0},e.word,void 0===n[r+1]||we(n[r+1].word)?"":" "))))},nt=({label:e,a11yContrast:t})=>a.createElement(a.Fragment,null,e.filter((e=>e.type!==A.GP.Delete)).map((e=>a.createElement("span",{key:e.text,className:e.type===A.GP.Insert?ke(t).toneAIInsert:void 0},e.text)))),it=({label:e,className:t,a11yContrast:r})=>{let n;return n=!e.some((e=>e.type===A.GP.Insert))?a.createElement(rt,{label:e,a11yContrast:r}):a.createElement(nt,{label:e,a11yContrast:r}),a.createElement("div",{className:t},n)}},31363:(e,t,r)=>{r.d(t,{Gh:()=>p,f8:()=>m});var n=r(84910),i=r(78520),a=r(90023),o=r(64538),s=r(56424),l=r(41255),c=r(93167),d=r(21016),u=r(14200);const m=e=>({container:(0,a.zG)(e,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>x.cozyCardContainer),(()=>x.compactCardContainer)))}),p=e=>(0,i._)((0,n._)({},e.hasOwnProperty("features")&&e.features.has(c.j.Features.a11yContrast)?(e=>({container:(0,a.zG)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>e.features.has(c.j.Features.sduiContainerStyle)?x.cozyCardContainerContrastSdui:x.cozyCardContainerContrast),(()=>x.compactCardContainer)))}))(e):m(e.layoutDensity)),{wrapper:(0,a.zG)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.minimal)((()=>x.minimalCardWrapper),(()=>{})))}),h={padding:`${s.ux.rem(.75)} ${s.ux.rem(.5)} ${s.ux.rem(.5)} ${s.ux.rem(1)}`},g={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:`0 ${s.ux.rem(.625)} ${s.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},f={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:u.S.z300},y={boxShadow:u.s.llamaShadowToken},v={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0},x=(0,i._)((0,n._)({},s.ux.stylesheet({minimalCardWrapper:[h],compactCardContainer:[v]})),{cozyCardContainer:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(g)]),cozyCardContainerContrast:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f)]),cozyCardContainerContrastSdui:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f),s.ux.style(y)])})},68334:(e,t,r)=>{r.d(t,{T:()=>n});var n,i=r(84910),a=r(78520),o=r(49231),s=r(37213),l=r(47387),c=r(13391),d=r(63532),u=r(84242),m=r(64538),p=r(39170),h=r(52574),g=r(80606),f=r(73590),y=r(56424),v=r(41255),x=r(49225),I=r(31854),b=r(95140),C=r(2087);!function(e){e.Mini=({card:e,actions:t,twoLined:r,useBundleContainer:n})=>o.createElement(b.b.Mini,(0,a._)((0,i._)({},(0,s.Sh)(!0===r?E.twoLinedWrapper:E.standardWrapper,!0===n?E.bundleContainer:null)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,hideDot:!0}),o.createElement(l.F.div,{className:E.content},void 0!==e.activeAlert.emojiID?o.createElement(g.In,{id:e.activeAlert.emojiID,className:E.icon}):o.createElement(f.JO.EthicalAI.Heart,{className:E.icon}),o.createElement("div",{className:E.highlightedText},e.activeAlert.miniCardTitle))),e.Full=({card:e,actions:t,isChecking:r})=>{const n=o.useContext(p.m.Context),i=c.h.create(!1);return x.P.useSubscriptionTo(r.pipe(d.b((e=>i.set(e))))),o.createElement(C.eb,{card:e,actions:t,isChecking:r,body:o.createElement(o.Fragment,null,o.createElement(C.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(C.Dx,{text:e.activeAlert.title}),void 0!==e.activeAlert.bannerColors?o.createElement("div",null,e.activeAlert.bannerColors.map((e=>o.createElement("div",{className:D.bannerStripe,style:{backgroundColor:e}})))):null,o.createElement(C.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),footer:o.createElement(o.Fragment,null,o.createElement(C.lJ,{card:e}),o.createElement(h.zx.Primary,{key:"ethical-ai-external-link",name:"ethical-ai-external-link",href:e.activeAlert.externalLink,target:"_blank",rel:"noopener noreferrer",title:n.card.todoAction(e.activeAlert.todoAction),onClick:()=>{t.next({type:I.lY.Type.ethicalAIOpenExternalLink,alertId:e.activeAlert.id,itemId:e.id,externalLink:e.activeAlert.externalLink}),e.activeAlert.shouldDismissAfterOpeningLink&&t.next({type:I.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},className:D.externalLinkButton},o.createElement("div",{className:D.externalLinkButtonContent},u.kC(e.activeAlert.todoAction),o.createElement(f.JO.EthicalAI.ExternalLink,{className:D.externalLinkButtonContentIcon})))),alwaysShowWrongAndOffensiveButtons:e.activeAlert.isFlaggable})}}(n||(n={}));const S={height:y.ux.rem(3.25),borderRadius:y.ux.rem(v.Jr),boxShadow:"0 1px 8px rgba(109, 117, 141, .18)"},A={height:y.ux.rem(3)},w={height:y.ux.important(y.ux.rem(2.5)),borderRadius:y.ux.rem(v.Jr)},_={width:y.ux.rem(1),height:y.ux.rem(1),marginRight:y.ux.rem(.5)},k={overflow:"hidden",color:m.Il.CoreNeutral90,textOverflow:"ellipsis"},E=y.ux.stylesheet({twoLinedWrapper:[S],standardWrapper:[A],bundleContainer:[w],content:[{display:"flex",alignItems:"center"}],icon:[_],highlightedText:[k]}),T={width:y.ux.percent(100),$nest:{a:{color:m.Il.CoreNeutral0,textDecoration:"none"}}},M={width:y.ux.percent(100),position:"relative",textAlign:"center"},G={position:"absolute",top:y.ux.rem(.25),right:y.ux.rem(.25)},L={width:y.ux.percent(100),height:y.ux.rem(.5)},D=y.ux.stylesheet({externalLinkButton:[T],externalLinkButtonContent:[M],externalLinkButtonContentIcon:[G],bannerStripe:[L]})},44059:(e,t,r)=>{r.d(t,{A:()=>Le});var n=r(49231),i=r(90023),a=r(47387),o=r(24666),s=r(59179),l=r(57326),c=r(42596),d=r(93167),u=r(95140),m=r(84910),p=r(78520),h=r(58303),g=r(13391),f=r(19813),y=r(78294),v=r(36234),x=r(97767),I=r(17613),b=r(39170),C=r(52574),S=r(73590),A=r(92544),w=r(16136),_=r(68717),k=r(12281),E=r(48922),T=r(31854),M=r(8024),G=r(64538),L=r(56424);const D=L.ux.style({margin:`${L.ux.rem(1)} 0`}),N=(L.ux.style({marginLeft:L.ux.rem(.5),lineHeight:L.ux.rem(1.3125),fontSize:L.ux.rem(.875),color:G.Il.CoreNeutral90}),L.ux.style({marginLeft:L.ux.rem(1)})),z={color:G.Il.CoreRed60,fontSize:L.ux.rem(.75),lineHeight:L.ux.rem(1.125)},P=L.ux.style(z),F=L.ux.style(z,{visibility:"hidden"}),U=L.ux.style({padding:0}),R=L.ux.style({paddingTop:L.ux.rem(1),paddingLeft:L.ux.rem(1),paddingRight:L.ux.rem(1),display:"flex"}),O=L.ux.style({minWidth:L.ux.rem(1)}),B=L.ux.style({paddingTop:L.ux.rem(.25),paddingLeft:L.ux.rem(.5)}),$=L.ux.style({paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),marginTop:L.ux.rem(.5)}),W=L.ux.style({display:"flex",alignItems:"center",gap:L.ux.rem(.75),marginTop:L.ux.rem(1)}),j=L.ux.style({flexGrow:1}),H=L.ux.style({marginTop:L.ux.rem(1.5)}),Y=L.ux.style({fontWeight:"bold",paddingBottom:L.ux.rem(.25)}),V=L.ux.style({height:L.ux.rem(2.5),paddingLeft:L.ux.rem(.5)}),Z=L.ux.style({height:L.ux.rem(6),paddingLeft:L.ux.rem(.5)}),J=L.ux.style({paddingTop:L.ux.rem(1.5),color:G.Il.CoreNeutral50}),X=L.ux.style({display:"flex",flexDirection:"row",columnGap:L.ux.rem(.5),alignItems:"center",paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(1),paddingBottom:L.ux.rem(.5)}),Q=L.ux.style({flex:3,textAlign:"center"}),q=L.ux.style({color:G.Il.CoreNeutral50,border:`1px solid ${G.Il.CoreNeutral20}`,borderRadius:L.ux.rem(.25)});var K=r(31363);const ee=({card:e,actions:t})=>(0,i.zG)(e.visualState.transition,h.DT((e=>"feedback_form"===e.type)),h.g_((()=>(f.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(r=>"survey"===r.formType?n.createElement(te,{card:e,data:r,actions:t}):n.createElement(re,{card:e,data:r,actions:t})))),te=({card:e,data:t,actions:r})=>{const i=n.useContext(b.m.Context).card.feedbackForm,o=g.h.create(void 0),s=g.h.create(!1),l=n=>r.next((0,m._)({alertId:e.activeAlert.id,reason:n},t.submitActionType===T.lY.Type.alertApplyFormSubmit?{type:T.lY.Type.alertApplyFormSubmit,alertApplyActionProps:t.alertApplyActionProps}:{type:T.lY.Type.alertIgnoreFormSubmit})),c=`survey-title-${e.id}`;return n.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>r.next({type:T.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,K.Gh)(e.renderOptions),visualState:e.visualState,body:n.createElement(n.Fragment,null,n.createElement(w.H4,{id:c,className:D},t.survey.question||i.dismissReason),n.createElement(y.V.Group,{id:`survey-${e.id}`,selectedItemIndex:o,"aria-labelledby":c,items:t.survey.options.map((e=>e.text)),onChange:()=>s.set(!1)})),mainActions:n.createElement(n.Fragment,null),footer:n.createElement(n.Fragment,null,n.createElement(a.F.div,{"aria-hidden":s,className:s.view((0,x.RN)(P,F))},i.error),n.createElement("div",null,n.createElement(C.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const e=o.get();return void 0===e?s.set(!0):k.hz((()=>l(t.survey.options[e].key)))()}},i.submit),n.createElement(C.zx.Ghost,{className:N,name:"skipCardFeedbackForm",onClick:k.hz((()=>l("skipped")))},i.skip))),subActions:n.createElement(n.Fragment,null)})},re=({card:e,data:t,actions:r})=>{const i=ae(e,t),a="background"===t.gbPrompt.promptType&&_.BY.isVox(t.gbPrompt),[o,s]=n.useState("initial"),[l,c]=n.useState(i.source),[d,u]=n.useState(i.target),[h,g]=n.useState(""),f=!("createRule"!==o||l&&d),y=n=>{const i={alertId:e.activeAlert.id,alertApplyActionProps:t.alertApplyActionProps,gbPrompt:t.gbPrompt,patternName:e.activeAlert.patternName,source:l,target:d,description:h};switch(n){case T.lY.Type.gbPromptDismiss:r.next((0,p._)((0,m._)({},i),{type:n,step:o}));break;case T.lY.Type.gbPromptApply:case T.lY.Type.gbPromptCreateRule:r.next((0,p._)((0,m._)({},i),{type:n}));break;default:(0,I.vE)(n)}},x="initial"===o?t.gbPrompt.description:n.createElement(n.Fragment,null,n.createElement("div",{className:W},n.createElement("div",{className:j},n.createElement(v.Z.Base,{className:Y},"Original"),n.createElement(A.B2,{name:"gbprompt-source",className:V,value:l,onChange:e=>c(e.target.value)})),n.createElement(v.Z.Paper,{className:J},"→"),n.createElement("div",{className:j},n.createElement(v.Z.Base,{className:Y},"Change to"),n.createElement(A.B2,{name:"gbprompt-target",className:V,value:d,onChange:e=>u(e.target.value)}))),n.createElement("div",{className:H},n.createElement(v.Z.Base,{className:Y},"Explanation"),n.createElement(A.E_,{className:Z,value:h,onChange:e=>g(e.target.value),placeholder:"Add it here...",blockExtension:!0})));return n.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>r.next({type:T.lY.Type.gbPromptShow,patternName:e.activeAlert.patternName}),theme:(0,p._)((0,m._)({},(0,K.Gh)(e.renderOptions)),{wrapper:U}),visualState:e.visualState,header:n.createElement("div",{className:R},n.createElement(S.JO.StyleGuide,null),n.createElement(w.H4,{className:B},t.gbPrompt.title)),body:n.createElement("div",{className:$},x),mainActions:n.createElement(n.Fragment,null),footer:n.createElement("div",{className:X},n.createElement(ne,{step:o,disabled:f,onClick:()=>{"initial"===o&&a?(s("createRule"),y(T.lY.Type.gbPromptCreateRule)):y(T.lY.Type.gbPromptApply)}}),n.createElement(ie,{step:o,onClick:()=>y(T.lY.Type.gbPromptDismiss)})),subActions:n.createElement(n.Fragment,null)})},ne=({step:e,disabled:t,onClick:r})=>{const i=n.useContext(b.m.Context).card.gbPrompt;return"initial"===e?n.createElement(C.zx.Primary,{name:"submitGbPromptFeedbackForm",className:Q,disabled:t,onClick:k.hz(r)},n.createElement(S.JO.StyleGuideWhite,{width:18,className:O}),i.addRule):n.createElement(C.zx.Primary,{name:"submitGbPromptFeedbackForm",className:Q,disabled:t,onClick:k.hz(r)},i.saveRule)},ie=({step:e,onClick:t})=>{const r=n.useContext(b.m.Context).card.gbPrompt;return"initial"===e?n.createElement(C.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:q,onClick:k.hz(t)},r.dismiss):n.createElement(C.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:q,onClick:k.hz(t)},r.cancelSavingRule)},ae=(e,t)=>{const r=e.activeAlert,n=t.alertApplyActionProps.alternativeIndex;return E.$.isSuper(r)?_.BY.isVox(t.gbPrompt)?oe(r,n):se(r,n):{source:"",target:""}},oe=(e,t)=>{const r=e.labels;return{source:r.filter(((e,r)=>r!==t)).map(le)[0],target:le(r[t])}},se=(e,t)=>({source:"",target:e.labels[t].label}),le=({replacementTexts:e})=>[...e].sort()[0];var ce=r(38713),de=r(93127),ue=r(49225),me=r(2087);const pe=L.ux.style({marginRight:L.ux.rem(-.5),marginTop:L.ux.rem(.5)}),he=L.ux.style({padding:`0 ${L.ux.rem(1.625)} !important`,marginRight:L.ux.rem(.125)}),ge=L.ux.style({marginRight:0}),fe=({card:e,actions:t,showLabel:r=!0})=>{const a=n.useRef(g.h.create(!1));ue.P.useEffectOnWillUnmount((()=>{a.current.get()||(0,i.zG)(e.muteCategory,h.UI((r=>t.next({type:T.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:r.id}))))}));const o=n.useContext(b.m.Context).card.mutedAlertCard;return n.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:T.lY.Type.mutedAlertSuccessShow}),theme:(0,K.Gh)(e.renderOptions),visualState:e.visualState,body:n.createElement(n.Fragment,null,r?n.createElement(me.__,{alert:e.activeAlert,options:e.renderOptions}):null,n.createElement(w.XY,null,o.description((0,i.zG)(e.muteCategory,h.g_((()=>""),(e=>e.description)))))),mainActions:n.createElement(n.Fragment,null),footer:n.createElement("div",{className:pe},n.createElement(C.zx.Primary,{name:"gotIt",className:he,onClick:()=>k.hz((()=>t.next({type:T.lY.Type.switchToNext})))()},o.successButtonLabel),n.createElement(C.zx.Ghost,{name:"turnBackOn",onClick:k.hz((()=>{a.current.set(!0),(0,i.zG)(e.muteCategory,h.UI((r=>t.next({type:T.lY.Type.undoMuteAlertCategory,categoryId:r.id,viewType:e.activeAlert.type,id:e.id}))))}))},o.undoButtonLabel,n.createElement(S.JO.Undo,{color:G.Il.CoreBlue50,className:ge}))),subActions:n.createElement(C.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:T.lY.Type.mutedAlertSuggestionManagementClick})},o.settingsLabel,n.createElement(S.JO.OuterLink,null))})};var ye=r(68334),ve=r(74843),xe=r(42983),Ie=r(63532),be=r(37213);const Ce=({onLeftClick:e,onRightClick:t,currentMatch:r,totalMatch:i,replaceOneMatch:a=!0,disableOnEnd:o=!0,style:s})=>{const l=n.useContext(b.m.Context).card.matchesNavigation;return 0===i?null:1===i&&a?n.createElement("div",(0,be.Sh)(we.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),n.createElement(w.ck,(0,be.Sh)(we.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.numberOfMatches(i))):n.createElement("div",(0,be.Sh)(we.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),n.createElement(C.zx.Ghost,{disabled:o&&0===r,name:"left",title:l.prev,"aria-label":l.prev,onClick:e},n.createElement(S.JO.Arrow,(0,be.Sh)(we.leftButtonIcon,!!Boolean(s.leftButtonIcon)&&s.leftButtonIcon))),n.createElement(w.ck,(0,be.Sh)(we.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.currentMatchPosition(r+1,i)),n.createElement(C.zx.Ghost,{disabled:o&&r===i-1,name:"right",title:l.next,"aria-label":l.next,onClick:t},n.createElement(S.JO.Arrow,(0,be.Sh)(we.rightButtonIcon,!!Boolean(s.rightButtonIcon)&&s.rightButtonIcon))))},Se={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:L.ux.rem(.25)}}},Ae={textTransform:"uppercase",letterSpacing:L.ux.px(.8),lineHeight:L.ux.rem(2)},we=L.ux.stylesheet({matchesRow:[Se],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[Ae]});function _e(e,t,r){const{activeAlert:n,activeHighlightIndex:i}=t,a=n.getHighlightRanges(),o=(i+("left"===e?a.length-1:1))%a.length;r.next({type:T.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}const ke=({card:e,actions:t,selectedLabelIndex:r,isChecking:i})=>{const a=n.useContext(b.m.Context),o=g.h.create(!1);return ue.P.useSubscriptionTo(i.pipe(Ie.b((e=>o.set(e))))),n.createElement(me.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:o,onClick:()=>{t.next({type:T.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:r.get(),id:e.id,eligibleForSurvey:l.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:l.X.isEligibleForGbPrompt(e),cardType:T.lY.getCardType(e)})}})},Ee=({card:e,actions:t})=>n.createElement(Ce,{onLeftClick:()=>_e("left",e,t),onRightClick:()=>_e("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var Te=r(6192);const Me=({activeAlert:e,selectedLabelIndex:t,actions:r})=>{const i=n.useContext(b.m.Context);return n.createElement("div",{className:Te.V.optionsContainer},e.labels.map(((a,o)=>n.createElement(n.Fragment,{key:`option-${o}`},n.createElement(y.V.Item,{id:`${e.id}-${o}`,className:Te.V.optionLabel,onChange:()=>{t.set(o),r.next({type:T.lY.Type.alternativeReplacementRadioButtonClick,index:o})},checked:t.view((e=>e===o))},a.label),n.createElement(w.x4,{className:Te.V.optionExample},a.replacementTexts.join("; ")),n.createElement(w.x4,{className:Te.V.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(a.matches))))))},Ge=({card:e,actions:t,isChecking:r,isCheckingGlobal:i})=>{const a=g.h.create(0);return n.createElement(M.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:T.lY.Type.alertCardShow,cardType:T.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,m._)({wrapper:(o=e.renderOptions,o.hasOwnProperty("features")&&o.features.has(d.j.Features.sduiContainerStyle)?Te.V.sduiSuperWrapper:Te.V.superWrapper),content:i.pipe(s.U((0,x.RN)(Te.V.loadingWrapperInvisible,Te.V.loadingWrapper)))},(0,K.f8)(e.renderOptions.layoutDensity)),extra:n.createElement(me.o,{isChecking:i}),body:n.createElement(n.Fragment,null,n.createElement(me.__,{alert:e.activeAlert,options:e.renderOptions}),n.createElement(me.Ot,{alert:e.activeAlert}),n.createElement(me.ko,{card:e,isChecking:r}),n.createElement(me.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),n.createElement(Me,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:n.createElement(me.Kg,{card:e,feedbackActions:t}),footer:n.createElement(n.Fragment,null,n.createElement(me.lJ,{card:e}),n.createElement(ke,{selectedLabelIndex:a,card:e,actions:t,isChecking:r})),navigation:n.createElement(Ee,{card:e,actions:t}),subActions:n.createElement(xe.Vh,{actions:t,card:e,mode:"mini"})});var o};var Le;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:r,isCheckingGlobal:c,transform:d}=l.X.useCardStates(e),u=e=>n.createElement(ce.J,{card:e,actions:t,isChecking:r,transform:d,isCheckingGlobal:c});return n.createElement(a.F.Fragment,null,e.pipe(o.x(((e,t)=>e.hashCode()===t.hashCode())),s.U((0,i.ls)(l.X.match({super:e=>n.createElement(Ge,{card:e,actions:t,isChecking:r,isCheckingGlobal:c}),takeaway:u,synfony:u,shortenIt:u,toneAI:u,ethicalAI:u,suggestedSnippet:u,knowledgeHubSuggestedTerm:u,default:u}),l.X.foldCard))))},e.Mini=({card:e,actions:i})=>n.createElement(a.F.Fragment,null,e.pipe(s.U((e=>d.j.Density.matchL((()=>n.createElement(t,{card:e,actions:i})),(()=>n.createElement(r,{card:e,actions:i})),(()=>n.createElement(r,{card:e,actions:i})))(e.renderOptions.layoutDensity)))));var t=e.MiniSingleLined=({card:e,actions:t})=>{function r(e){return n.createElement(de.P.Standard,{card:e,actions:t})}return(0,i.zG)(e,l.X.match({super:r,takeaway:r,synfony:r,shortenIt:r,toneAI:r,ethicalAI:function(e){return n.createElement(ye.T.Mini,{card:e,actions:t})},suggestedSnippet:r,knowledgeHubSuggestedTerm:r,default:r}),l.X.foldCard)},r=e.MiniTwoLined=({card:e,actions:t})=>{function r(e){return n.createElement(de.P.TwoLined,{card:e,actions:t})}return(0,i.zG)(e,l.X.match({super:r,takeaway:r,synfony:r,shortenIt:r,toneAI:r,ethicalAI:function(e){return n.createElement(ye.T.Mini,{card:e,actions:t,twoLined:!0})},suggestedSnippet:r,knowledgeHubSuggestedTerm:r,default:r}),l.X.foldCard)};e.Success=({cardData:e,actions:t,isLastCard:r})=>{function a(){return n.createElement(u.b.Success,{actions:t,isLastCard:r})}return(0,i.zG)(e,c.i.match({takeaway:a,default:a,synfony:a,super:a,shortenIt:a,toneAI:a,ethicalAI:a,suggestedSnippet:function(e){return n.createElement(ve.w.Success,{card:e,actions:t})},knowledgeHubSuggestedTerm:a}),l.X.foldCard)},e.FeedbackForm=({cardData:e,actions:t})=>{function r(e){return n.createElement(ee,{card:e,actions:t})}return(0,i.zG)(e,c.i.match({takeaway:r,default:r,synfony:r,super:r,shortenIt:r,toneAI:r,ethicalAI:r,suggestedSnippet:r,knowledgeHubSuggestedTerm:r}),l.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function r(e){return n.createElement(fe,{card:e,actions:t})}return(0,i.zG)(e,c.i.match({takeaway:r,default:r,synfony:r,super:r,shortenIt:r,toneAI:r,ethicalAI:r,suggestedSnippet:r,knowledgeHubSuggestedTerm:r}),l.X.foldCard)}}(Le||(Le={}))},74843:(e,t,r)=>{r.d(t,{w:()=>n});var n,i=r(84910),a=r(78520),o=r(49231),s=r(12518),l=r(58303),c=r(90023),d=r(13391),u=r(64538),m=r(39170),p=r(52574),h=r(73590),g=r(92544),f=r(16136),y=r(56424),v=r(41255),x=r(12281),I=r(49225),b=r(31854),C=r(59778),S=r(42983),A=r(8024),w=r(2087),_=r(31363);!function(e){e.Full=({card:e,actions:r,isChecking:n})=>{const i=o.useContext(m.m.Context),[a,u]=o.useState(""),[p,h]=o.useState(e.activeAlert.snippetText),[y,v]=o.useState(""),[I,A]=o.useState(""),_=(0,c.zG)(e.activeAlert.snippetsTrigger,l.g_((()=>"\\"),c.yR));return o.createElement(w.eb,{card:e,actions:r,isChecking:n,body:o.createElement("div",null,o.createElement(w.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(f.XY,{className:P.subheader},i.card.suggestedSnippet.subheader),o.createElement("div",{className:P.inputContainer},o.createElement(g.B2,{name:"snippet-name",placeholder:i.card.suggestedSnippet.namePlaceholder,value:a,onChange:e=>u(e.target.value),className:P.snippetName}),y.length>0&&o.createElement(f.x4,{className:P.inputError},y)),o.createElement("div",{className:P.inputContainer},o.createElement(g.E_,{blockExtension:!0,name:"snippet-content",placeholder:i.card.suggestedSnippet.textPlaceholder,value:p,onChange:e=>h(e.target.value),className:P.snippetText}),I.length>0&&o.createElement(f.x4,{className:P.inputError},I)),o.createElement(f.x4,{className:P.explanation},i.card.suggestedSnippet.explanation(o.createElement(t,{trigger:_}))),o.createElement(w.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:d.h.create(!1),onClick:x.hz((()=>{(0,c.zG)(C.B.validate(a,p,i.card.suggestedSnippet.validationMessages),s.fold((({nameError:e,contentError:t})=>{(0,c.zG)(e,l.g_((()=>v("")),v)),(0,c.zG)(t,l.g_((()=>A("")),A))}),(()=>{r.next({type:b.lY.Type.createSnippet,id:e.id,alertId:e.activeAlert.id,snippetName:a,snippetText:p}),v(""),A("")})))}))})),footer:o.createElement(S.G3,{key:"card-actions-details",visualState:e.visualState,className:P.more},o.createElement(f.XY,null,i.card.suggestedSnippet.details(o.createElement(o.Fragment,null,_))))})};const t=({trigger:e})=>o.createElement("span",{className:P.snippetsTrigger},e);e.Success=({card:e,actions:t})=>{const r=o.useContext(m.m.Context);return I.P.useEffectOnWillUnmount((()=>{t.next({type:b.lY.Type.suggestedSnippetSuccessDismissed,id:e.id,alertId:e.activeAlert.id})})),o.createElement(A.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:b.lY.Type.mutedAlertSuccessShow}),theme:(0,_.Gh)(e.renderOptions),visualState:e.visualState,body:o.createElement("div",{className:P.successHeader},o.createElement(h.JO.ValidationOk,{className:P.successIcon}),o.createElement(f.x4,null,r.card.suggestedSnippet.successStateTitle)),mainActions:o.createElement(o.Fragment,null),footer:o.createElement(o.Fragment,null),subActions:o.createElement("div",{className:P.successAction},o.createElement(p.zx.Tertiary,{name:"openSnippetsLibrary",onClick:()=>t.next({type:b.lY.Type.snippetsOpenExternalLink,externalLink:e.activeAlert.libLink,alertId:e.activeAlert.id,itemId:e.id})},r.card.suggestedSnippet.libraryLinkCaption,o.createElement(h.JO.OuterLink,null)),o.createElement(p.zx.Ghost,{name:"done",onClick:()=>x.hz((()=>t.next({type:b.lY.Type.switchToNext})))()},r.done))})}}(n||(n={}));const k={paddingTop:y.ux.rem(.75),paddingBottom:y.ux.rem(.5),letterSpacing:u.xv.SubheadingLetterSpacing,fontSize:y.ux.rem(u.xv.SubheadingSize),lineHeight:y.ux.rem(u.xv.SubheadingLineHeight),color:u.xv.SubheadingColor,textTransform:"uppercase"},E={fontFamily:"inherit",boxSizing:"border-box",padding:`${y.ux.rem(.5)}`,fontSize:y.ux.rem(.875)},T=(0,a._)((0,i._)({},E),{height:y.ux.rem(2.5)}),M=(0,a._)((0,i._)({},E),{height:y.ux.rem(8)}),G={marginBottom:y.ux.rem(.5)},L={color:u.Il.CoreRed50},D={display:"block",color:u.Il.CoreNeutral50,marginBottom:y.ux.rem(.75)},N={position:"absolute",left:y.ux.rem(.5),width:y.ux.rem(1),height:y.ux.rem(1),minWidth:y.ux.rem(1),minHeight:y.ux.rem(1)},z={display:"inline-block",width:y.ux.rem(1),height:y.ux.rem(1),backgroundColor:u.Il.CoreBlue1,borderRadius:y.ux.rem(v.fx),textAlign:"center"},P=y.ux.stylesheet({subheader:[k],snippetName:[T],snippetText:[M],explanation:[D],successIcon:[N],successHeader:[{display:"flex",alignItems:"center"}],successAction:[{display:"flex",justifyContent:"space-between",width:"100%"}],inputContainer:[G],inputError:[L],more:[w.IH],snippetsTrigger:[z]})},6192:(e,t,r)=>{r.d(t,{V:()=>A});var n=r(67741),i=r(28108),a=r(64538),o=r(56424),s=r(41255),l=r(14200),c=r(84910);const d=(e,t,r,n,i,s)=>(0,c._)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:o.ux.rem(2),borderRadius:i,backgroundColor:a.Il.CoreNeutral0,boxShadow:n,content:"' '"},Boolean(s)&&"bottom"!==s?{top:r}:{bottom:r}),u=`0 ${o.ux.rem(.25)} ${o.ux.rem(1.625)} 0 rgba(198, 203, 222, .25)`,m={marginRight:o.ux.rem(1),flexShrink:0,maxWidth:o.ux.percent(100)},p={padding:`0 ${o.ux.rem(1)}`},h={padding:`0 ${o.ux.rem(1.9)} 0 ${o.ux.rem(1)}`},g={position:"absolute",top:o.ux.rem(.27),right:o.ux.rem(.5)},f={display:"grid",width:o.ux.percent(100),gridTemplateColumns:"fit-content(60%) auto min-content",columnGap:o.ux.rem(.5),alignItems:"center"},y={minWidth:o.ux.rem(7)},v={marginLeft:o.ux.rem(.5)},x={color:a.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:o.ux.rem(1.5)},I={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic",paddingRight:o.ux.rem(n.F2)},b={$nest:{"&:before":d(o.ux.rem(.5),-10,o.ux.rem(-.5),u,o.ux.rem(s.Jr)),"&:after":d(o.ux.rem(1),-20,o.ux.rem(-1),u,o.ux.rem(s.Jr))}},C={boxShadow:l.s.llamaShadowToken,borderRadius:o.ux.rem(i.Jr)},S={transition:"opacity .2s"},A=o.ux.prefixedStylesheet("super",{updateAllBtnCommon:[m],updateAllBtn:[m,p],updateAllBtnLoading:[m,h],updateBtnSpinner:[g],optionsContainer:[f],optionLabel:[y],optionRadio:[v],optionSecondaryAttribute:[x],optionExample:[x,I],superWrapper:[b],sduiSuperWrapper:[C],loadingWrapper:[S],loadingWrapperInvisible:[S,{opacity:0,pointerEvents:"none"}]})},83207:(e,t,r)=>{r.d(t,{Y:()=>ve});var n=r(84910),i=r(78520),a=r(49231),o=r(58303),s=r(90023),l=r(37213),c=r(47387),d=r(59179),u=r(84714),m=r(64538),p=r(39170),h=r(55441),g=r(80606),f=r(16136),y=r(56424),v=r(49225),x=r(12281),I=r(86625),b=r(57326),C=r(19103),S=r(31854),A=r(93167),w=r(95140),_=r(2087),k=r(16353),E=r(85138),T=r(74822),M=r(64271),G=r(29479),L=r(954),D=r(10883),N=r(90572),z=r(68545),P=r(24666),F=r(63532),U=r(84308),R=r(77400);const O=({toneAlternatives:e,onSelectToneAlternative:t})=>{const r=new T.x,u=new T.x,m=new T.x,p=new T.x,h=new T.x,f=new T.x,{ref:x,onMount:I}=v.P.useElWatcher(),b=M.T(h.pipe(G.h(!0)),m.pipe(G.h(!1)),p.pipe(G.h(!1))).pipe(L.O(!1)),C=M.T(h,u).pipe(D.M(b),N.h((([e,t])=>t)),d.U((([e,t])=>e)),D.M(x),d.U((([e,t])=>(0,s.zG)(t,o.UI((e=>e.getBoundingClientRect())),o.YO("sliderClientRect"),o.Qt("containerMouseEventVal",o.G(e))))),z.oA,d.U((({containerMouseEventVal:e,sliderClientRect:t})=>{const r=t.x,n=t.x+t.width;let i=0;return i=e.clientX<=r?0:e.clientX>=n?100:(e.clientX-r)/(n-r)*100,i}))),S=M.T(C.pipe(P.x()),b.pipe(P.x(),N.h((e=>!e)),D.M(C),d.U((([e,t])=>t)),d.U((e=>e>=50?100:0))),r.pipe(N.h((e=>"ArrowRight"===e.key||"ArrowLeft"===e.key)),F.b((e=>{e.preventDefault(),e.stopPropagation()})),d.U((e=>e.key)),N.h((e=>"ArrowRight"===e||"ArrowLeft"===e)),d.U((e=>"ArrowRight"===e?100:0))),f.pipe(d.U((e=>1===e?100:0)))).pipe(L.O(100)),A=S.pipe(P.x(),d.U((e=>e>=50?1:0))),w=U.a([A,R.Dx(e)]).pipe(d.U((([e,t])=>t[e])));return v.P.useSubscriptionTo(A.pipe(P.x(),F.b(t))),a.createElement(c.F.div,{className:ye.outerContainer,onKeyDown:e=>r.next(e)},a.createElement(c.F.div,{className:ye.label},w.pipe(d.U((e=>e.name)))),a.createElement(c.F.div,{className:ye.container,onMouseMove:e=>u.next(e),onMouseUp:e=>m.next(e),onMouseLeave:e=>p.next(e)},a.createElement(c.F.div,(0,i._)((0,n._)({},(0,l.Sh)(ye.slider,b.pipe(d.U((e=>e?ye.sliderDragging:null))))),{mount:I}),a.createElement(c.F.div,(0,i._)((0,n._)({},(0,l.Sh)(ye.sliderInner,b.pipe(d.U((e=>e?ye.sliderInnerDragging:null))))),{style:{width:S.pipe(d.U(y.ux.percent))}}),a.createElement(c.F.div,(0,i._)((0,n._)({},(0,l.Sh)(ye.knob,b.pipe(d.U((e=>e?ye.knobDragging:null))))),{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),h.next(e)},tabIndex:0}),w.pipe(d.U((e=>a.createElement(g.In,{id:e.emojiID,className:ye.knobEmoji})))))),U.a([A,b]).pipe(d.U((([e,t])=>a.createElement(a.Fragment,null,a.createElement("div",(0,l.Sh)(ye.sliderDivisionPoint,ye.sliderDivisionPointLeft)),0===e||t?null:a.createElement(c.F.div,(0,i._)((0,n._)({},(0,l.Sh)(ye.sliderDivisionPointHoverArea,ye.sliderDivisionPointHoverAreaLeft)),{onClick:()=>f.next(0)})),a.createElement("div",(0,l.Sh)(ye.sliderDivisionPoint,ye.sliderDivisionPointRight)),1===e||t?null:a.createElement(c.F.div,(0,i._)((0,n._)({},(0,l.Sh)(ye.sliderDivisionPointHoverArea,ye.sliderDivisionPointHoverAreaRight)),{onClick:()=>f.next(1)})))))))))},B="toneSliderOuterContainer",$="toneSliderLabel",W="toneSliderContainer",j="toneSlider",H="toneSliderDragging",Y="toneSliderSliderDivisionPoint",V="toneSliderDivisionPointLeft",Z="toneSliderDivisionPointRight",J="toneSliderDivisionPointHoverArea",X="toneSliderDivisionPointHoverAreaLeft",Q="toneSliderDivisionPointHoverAreaRight",q="toneSliderInner",K="toneSliderInnerDragging",ee="toneSliderKnob",te="toneSliderKnobDragging",re="toneSliderKnobEmoji",ne={fontWeight:700,fontSize:y.ux.rem(.875),lineHeight:y.ux.rem(1),width:y.ux.rem(7.5)},ie={width:y.ux.rem(5.375),height:y.ux.rem(1.75),display:"flex",flexDirection:"column",justifyContent:"center"},ae={position:"relative",width:y.ux.percent(100),backgroundColor:m.Il.CoreNeutral40,height:y.ux.rem(.125),borderRadius:y.ux.rem(.375),transition:"all 0.15s ease-in-out",$nest:{"&:hover":{height:y.ux.rem(.5)},[`&:hover .${Y}`]:{visibility:"visible"}}},oe={height:y.ux.rem(.5),$nest:{[`& .${Y}`]:{visibility:"visible"}}},se={position:"absolute",width:y.ux.rem(.25),height:y.ux.rem(.25),backgroundColor:m.Il.CoreNeutral0,top:y.ux.rem(.125),bottom:y.ux.rem(.125),borderRadius:y.ux.percent(100),visibility:"hidden"},le={left:y.ux.rem(.125)},ce={right:y.ux.rem(.125)},de={background:m.Il.CoreNeutral90,opacity:0,width:y.ux.rem(1.5),height:y.ux.rem(1.5),position:"absolute",borderRadius:y.ux.percent(100),cursor:"pointer",top:y.ux.rem(-.5),zIndex:1,transition:"all 0.15s ease-in-out",$nest:{"&:hover":{opacity:.1}}},ue={left:y.ux.rem(-.5)},me={right:y.ux.rem(-.5)},pe={position:"relative",display:"flex",alignItems:"center",backgroundColor:m.Il.CorePurple40,height:y.ux.percent(100),borderRadius:y.ux.rem(.375),transition:"all 0.15s ease-in-out"},he={position:"absolute",right:y.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",width:y.ux.rem(1.75),height:y.ux.rem(1.75),backgroundColor:m.Il.CoreNeutral0,boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)",borderRadius:y.ux.rem(1.875),cursor:"ew-resize",transition:"all 0.15s ease-in-out",zIndex:1,$nest:{"&:hover":{width:y.ux.rem(2),height:y.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},ge={width:y.ux.rem(2),height:y.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},fe={width:y.ux.rem(.9375),height:y.ux.rem(.9375),pointerEvents:"none"},ye={outerContainer:y.ux.joinClasses([B,y.ux.style({display:"flex",alignItems:"center"})]),label:y.ux.joinClasses([$,y.ux.style(ne)]),container:y.ux.joinClasses([W,y.ux.style(ie)]),slider:y.ux.joinClasses([j,y.ux.style(ae)]),sliderDragging:y.ux.joinClasses([H,y.ux.style(oe)]),sliderDivisionPoint:y.ux.joinClasses([Y,y.ux.style(se)]),sliderDivisionPointLeft:y.ux.joinClasses([V,y.ux.style(le)]),sliderDivisionPointRight:y.ux.joinClasses([Z,y.ux.style(ce)]),sliderDivisionPointHoverArea:y.ux.joinClasses([J,y.ux.style(de)]),sliderDivisionPointHoverAreaLeft:y.ux.joinClasses([X,y.ux.style(ue)]),sliderDivisionPointHoverAreaRight:y.ux.joinClasses([Q,y.ux.style(me)]),sliderInner:y.ux.joinClasses([q,y.ux.style(pe)]),sliderInnerDragging:y.ux.joinClasses([K,y.ux.style({transition:"none"})]),knob:y.ux.joinClasses([ee,y.ux.style(he)]),knobDragging:y.ux.joinClasses([te,y.ux.style(ge)]),knobEmoji:y.ux.joinClasses([re,y.ux.style(fe)])};var ve;!function(e){e.BundleMini=({card:e,actions:t})=>a.createElement(w.b.Mini,(0,i._)((0,n._)({},(0,l.Sh)(k.l$.wrapper,k.l$.bundleContainer)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:a.createElement(f.CL,{className:k.l$.alertsCounter},e.alerts.length),inert:e.positionState.inert,hideDot:!0}),a.createElement(c.F.div,{className:Ie.content},a.createElement(g.In,{id:e.activeAlert.toneAlternatives[e.activeAlert.selectedToneAlternativeIdx].emojiID,className:Ie.emoji}),a.createElement("div",{className:k.l$.highlightedText},C.R.bundleTitle(e)))),e.Full=({card:e,actions:t,isChecking:r,isCheckingGlobal:n})=>{const i=a.useContext(p.m.Context),l=v.P.useAtomOf(e.activeAlert.toneAlternatives),m=a.useCallback((r=>{"focused"!==e.visualState.transition.type&&"expanded"!==e.visualState.transition.type||t.next({type:S.lY.Type.toneAIChangeToneAlternative,alertId:e.activeAlert.id,itemId:e.id,selectedToneAlternativeIdx:r})}),[t,e.visualState.transition.type,e.activeAlert.id,e.id]);return(0,s.zG)(e.transform,o.hX(I.b$.isToneAI),o.g_((()=>null),(o=>a.createElement(_.VM,{card:e,actions:t,isChecking:r,isCheckingGlobal:n,cardBody:r=>a.createElement(a.Fragment,null,a.createElement(_.__,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(c.F.Fragment,null,l.pipe(d.U((e=>a.createElement(O,{toneAlternatives:e,onSelectToneAlternative:m}))))),0===e.activeAlert.selectedToneAlternativeIdx?a.createElement("div",{className:Se.replacementContainer},e.activeAlert.highlightTexts[0]):a.createElement(h.T9,{classes:{rendered:Se.replacement,removing:Se.replacementHidden},timeout:250,content:u.of(a.createElement(E.RF,{label:o.labels[e.activeAlert.selectedToneAlternativeIdx-1],className:Se.replacementContainer,a11yContrast:e.renderOptions.features.has(A.j.Features.a11yContrast)}))}),0!==e.activeAlert.selectedToneAlternativeIdx?a.createElement(_.Nm,{title:i.card.todoAction(o.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:r,onClick:x.hz((()=>t.next({type:S.lY.Type.alertApply,alertId:e.activeAlert.id,id:e.id,alternativeIndex:e.activeAlert.selectedToneAlternativeIdx-1,cardType:S.lY.getCardType(e),eligibleForSurvey:b.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:b.X.isEligibleForGbPrompt(e)})))}):null),mainActions:(0,s.a9)(a.createElement(_.Kg,{card:e,feedbackActions:t})),subActions:(0,s.a9)(a.createElement(_.q4,{card:e,actions:t})),cardFooter:(0,s.a9)(a.createElement(_.lJ,{card:e}))}))))}}(ve||(ve={}));const xe={width:y.ux.rem(1),height:y.ux.rem(1),marginRight:y.ux.rem(.5)},Ie=y.ux.stylesheet({content:[{display:"flex",alignItems:"center"}],emoji:[xe]}),be={transition:`opacity ${y.ux.seconds(_.k_)}`},Ce={width:y.ux.percent(100),background:m.Il.CoreNeutral10,borderRadius:y.ux.px(4),fontSize:y.ux.rem(.875),lineHeight:y.ux.rem(1.5),fontFeatureSettings:"'ss03' on",padding:y.ux.px(8),marginTop:y.ux.px(12),boxSizing:"border-box"},Se=y.ux.stylesheet({replacement:[be],replacementHidden:[be,{opacity:0}],replacementContainer:[Ce]})},20965:(e,t,r)=>{r.d(t,{d:()=>T});var n=r(32490),i=r(84910),a=r(78520),o=r(49231),s=r(58303),l=r(47387),c=r(13391),d=r(19813),u=r(67397),m=r(59179),p=r(31391),h=r(64271),g=r(79256),f=r(84714),y=r(20161),v=r(36344),x=r(82589),I=r(63532),b=r(44071),C=r(954),S=r(29479),A=r(77400),w=r(704),_=r(3199),k=r(31403),E=r(74703);class T extends o.Component{componentDidMount(){!0===this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),!0===this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:r}=this.props;return o.createElement(l.F.div,{"data-purpose":"card-list-connector",style:r.pipe(m.U((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}constructor(...e){super(...e),(0,n._)(this,"_log",d.C8.Logging.getLogger("CardsListConnectorView",d.zW.i.DEBUG)),(0,n._)(this,"_subs",new p.w.Keeper)}}!function(e){let t;!function(e){e.create=()=>c.h.create({scrollProvider:s.YP,scrollConsumer:s.YP,viewport:s.YP,title:s.YP})}(t=e.Elements||(e.Elements={}));e.boundedScrollListener=(e,t)=>h.T(g.P((()=>f.of(e.paddingTop.set(0)))),t.view("viewport").pipe(y.w(s.g_((()=>v.E),(e=>x.YC(e).pipe(m.U((t=>(0,a._)((0,i._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),I.b((t=>e.viewport.set({top:E.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(y.w(s.g_((()=>v.E),(t=>b.R(t,"scroll").pipe(m.U((()=>t.scrollTop)),C.O(t.scrollTop),I.b((t=>e.scrollTop.set(t))),S.h(A.PU)))))),t.view("title").pipe(y.w(s.g_((()=>f.of(u.UL.empty)),(e=>x.YC(e)))),m.U((e=>e.height)),w.shareReplay({bufferSize:1,refCount:!0}),I.b((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(y.w(s.g_((()=>v.E),(t=>e.scrollOffset.pipe(I.b((e=>{t.scrollTop+=e})))))))).pipe(S.h(void 0)),e.superScrollListener=(e,t)=>{const r=t.view("title").pipe(y.w(s.g_((()=>f.of(u.UL.empty)),(e=>x.YC(e)))),m.U((e=>e.height)),w.shareReplay({bufferSize:1,refCount:!0}));return h.T(g.P((()=>f.of(e.paddingTop.set(0)))),t.view("viewport").pipe(y.w(s.g_((()=>v.E),(e=>x.YC(e).pipe(m.U((t=>(0,a._)((0,i._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),I.b((t=>e.viewport.set({top:E.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(y.w(s.g_((()=>v.E),(t=>b.R(t,"scroll").pipe(m.U((()=>t.scrollTop)),C.O(t.scrollTop),I.b((t=>e.scrollTop.set(t))),S.h(A.PU)))))),t.view("scrollConsumer").pipe(y.w(s.g_((()=>v.E),(t=>e.scrollOffset.pipe(_.R(((e,t)=>e-t),0),I.b((e=>{t.style.transform=`translateY(${e}px)`})))))),k.a(r),I.b((([t,r])=>e.paddingTop.set(t+r))))).pipe(S.h(void 0))}}(T||(T={}))},8468:(e,t,r)=>{r.d(t,{J:()=>c});var n=r(49231),i=r(64538);if(3075==r.j)var a=r(52574);var o=r(94882),s=r(56424),l=r(41255);const c=e=>n.createElement(a.zx.Animated,(0,a.L_)(e,m.gray)),d={position:"relative",display:"inline-block",overflow:"hidden",outline:"none",border:0,verticalAlign:"middle",whiteSpace:"nowrap",cursor:"default",userSelect:"none",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer"}}},u={overflow:"hidden",padding:`0 ${s.ux.rem(.5)}`,borderRadius:s.ux.rem(l.fx),backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral0,textTransform:"none",letterSpacing:s.ux.rem(i.xv.ButtonLetterSpacing),fontSize:s.ux.rem(i.xv.ButtonSize),lineHeight:s.ux.rem(i.xv.ButtonLineHeight),transitionDuration:s.ux.seconds(.2),$nest:{"&[data-active='true'] > i[role='icon'] > svg, &:not([data-disabled='true']):hover > i[role='icon'] > svg, &:not([data-disabled='true'])[data-hovered='true'] > i[role='icon'] > svg":{fill:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0},"&:not([data-disabled='true'])[data-active='true']":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreNeutral50,color:i.Il.CoreNeutral0}}},"&[data-disabled='true']":{backgroundColor:i.Il.CoreNeutral60,color:i.Il.CoreNeutral50},[`.${o.vD} &`]:{padding:`0 ${s.ux.rem(.5)}`,marginRight:s.ux.px(2),borderRadius:0,backgroundColor:i.Il.CoreNeutral60,$nest:{"&:first-child":{borderRadius:`${s.ux.rem(l.fx)} 0 0 ${s.ux.rem(l.fx)}`},"&:last-child":{marginRight:0,borderRight:"none",borderRadius:`0 ${s.ux.rem(l.fx)} ${s.ux.rem(l.fx)} 0`},"&[data-active='true']":{backgroundColor:i.Il.CoreBlue50,color:i.Il.CoreNeutral0,$nest:{"&:hover":{backgroundColor:i.Il.CoreBlue40,color:i.Il.CoreNeutral0}}}}}}},m=s.ux.stylesheet({button:[d],gray:[d,u]})},98306:(e,t,r)=>{r.d(t,{s:()=>F});var n=r(84910),i=r(78520),a=r(49231),o=r(47387),s=r(19813),l=r(17613),c=r(64538),d=r(311),u=r(1285),m=r(48886),p=r(96991),h=r(72117),g=r(91267),f=r(12518),y=r(11633),v=r(95993);const x={Type:v.Dy,literalArray:v.Dy.literalArray};var I,b;!function(e){e.prod="prod",e.preprod="preprod",e.qa="qa",e.fb="fb",e.dev="dev"}(I||(I={})),function(e){e.american="american",e.british="british",e.canadian="canadian",e.australian="australian",e.indian="indian"}(b||(b={}));var C,S=y.mM({".grammarly.com":null,".ppgr.io":null,".qagr.io":null}),A=(0,g._)(Object.keys(S.keys)).concat(["grammarly.io","sumologic.com","microsoft.com","office.com","apple.com","google.com","mozilla.org","mozilla.net","outlook.live.com","127.0.0.1"]).map((function(e){return e.startsWith(".")?e.slice(1):e})),w=y.G0([y.dt({state:y.i0("disabled")}),y.dt({state:y.i0("enabled")}),y.dt({state:y.i0("test")})]),_=(y.dt({version:y.Z_}),new y.Dy("HttpString",y.Z_.is,(function(e,t){return f.either.chain(y.Z_.validate(e,t),(function(r){return/^(https?|wss?):\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?y.Vp(r):y.Rn(e,t,"URL parsing failed (".concat(r,")"))}))}),String)),k=new y.Dy("RelativeUrlPath",y.Z_.is,(function(e,t){return f.either.chain(y.Z_.validate(e,t),(function(r){return/^\/[a-zA-Z0-9-._~:\/?#[\]@!$&'()*+,;=%]*$/.test(r)?y.Vp(r):y.Rn(e,t,"Relative URL path parsing failed (".concat(r,")"))}))}),String),E=new y.Dy("MsStoreUrlString",y.Z_.is,(function(e,t){return f.either.chain(y.Z_.validate(e,t),(function(r){return/ms-windows-store:\/\/(\w|\d|-|\/|\.|\?|\=|\_|\&)+(:(\d)+)?$/.test(r)?y.Vp(r):y.Rn(e,t,"Edge URL parsing failed (".concat(r,")"))}))}),String),T=new y.Dy("AllowedHttpString",_.is,(function(e,t){return f.either.chain(_.validate(e,t),(function(r){var n=(0,h._)(r.split("//"),2)[1],i=(0,h._)(n.split("/"),1)[0],a=(0,h._)(i.split(":"),1)[0],o=!0,s=!1,l=void 0;try{for(var c,d=A[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var u=c.value;if(a.endsWith(u))return y.Vp(r)}}catch(e){s=!0,l=e}finally{try{o||null==d.return||d.return()}finally{if(s)throw l}}var m="Domain (".concat(a,") is not allowed in ").concat(A.join(", "));return y.Rn(e,t,m)}))}),_.encode),M=y.mM({TRACE:null,DEBUG:null,INFO:null,WARN:null,ERROR:null,FATAL:null,OFF:null}),G=(y.r$({env:x.Type.createStringEnum(I,"Environment"),logLevel:M,accumulateCrashLogLevel:M,sendCrashOnLogLevel:M,collectLogs:y.O7,collectCrashLogs:y.O7,copyLogsToConsole:y.O7,crashLogsCacheSize:y.pk,debugLogsCacheSize:y.pk,tracking:w,alertCache:y.r$({prefix:y.Z_,version:y.Z_}),mutedCategoriesCache:y.r$({prefix:y.Z_,version:y.Z_}),outcomeScoreCache:y.r$({prefix:y.Z_,version:y.Z_}),userSettingsPrefix:y.Z_,userSettingsVersion:y.Z_,defaultDialect:x.Type.createStringEnum(b,"DialectEnum"),notificationShowTimeMs:y.pk,maxNotificationsOnTheScreen:y.pk,selfUpdate:y.r$({versionCheckInterval:y.pk,selfUpdateDelay:y.pk,canReloadCheckInterval:y.pk,blockingModalAutoReloadDelay:y.pk,retryFailedVersionCheckInterval:y.pk,retryFailedVersionCheckLimit:y.pk,debugBuildVersion:y.Z_,versionFilePath:y.Z_}),pingMaybeGnarDelay:y.pk,domains:y.r$({cookie:S,localServer:y.Z_}),api:y.r$({analyticsUrl:T,analyticsPrivateUrl:T,authUrl:T,authUrlV4:T,institutionUrl:T,snippetsUrl:T,clientControlsUrl:T,settingsRegistryUrl:T,institutionAdminUrl:T,institutionAnalyticsUrl:T,institutionMembersUrl:T,institutionInviteesUrl:T,institutionGroupsUrl:T,institutionTonesUrl:T,institutionVaultUrl:T,knowledgeHubUrl:T,profileTonesUrl:T,tonesUrl:T,dapiUrl:T,doxUrl:T,doxWsUrl:T,irbisUrl:T,subscriptionUrl:T,paymentsUrl:T,discountUrl:T,dataReportUrl:T,capiWsUrl:T,defaultCapiWsUrl:T,gatewayCapiWsUrl:T,internalCapiWsUrl:T,k8sCapiWsUrl:T,capiApiUrl:T,gnarApi:y.r$({url:T,ingestionUrl:T}),femetricsUrl:T,felogUrl:T,felogDebugUrl:T,sumoUrl:T,crashLogUrl:T,onlineTestUrl:y.Z_,wsTest:T,proofitResultUrl:T,redirect:T,mailApiUrl:T,ssoUrl:T,scimUrl:T,voxInstitutionUrl:T,writingStylesUrl:T,appsUrl:T,tokensUrl:T,cheetahUrl:T,cheetahInstitutionUrl:T,inProductReportUrl:T,vito:T,passportUrl:T,uphookhub:T}),app:y.r$({nameWeb:y.Z_,nameMacEditor:y.Z_,nameDesktop:y.Z_,webOnboarding:y.Z_}),urls:y.r$({free:y.Z_,account:T,versionHistory:T}),onlineEditor:y.r$({base:T,docId:T}),external:y.r$({gmail:T,gDocs:T,outlook:T}),funnel:y.r$({base:T,resetPassword:T,accountDeleted:T,businessLanding:T,businessStyleguideLanding:T,businessUpgradeLanding:T,subscribe:T,upgrade:T,upgradeTry:T,inviteMembers:T,personalize:T,plans:T,pro:T,signin:T,socialSignin:T,signup:T,signupEmbed:T,mainPage:T,deleteSocialAccount:T,subscriptionCancellationSurvey:T,keyboardInstall:T,desktopAppInstall:T,claimedUserJoinFallback:T,userTrustGuidelines:T,llamaServiceDownload:T,llamaServiceDownloadDirect:T,productRecommendation:T,tour:T,facebookTour:T,gDocsTour:T,gmailTour:T,canvasTour:T,linkedInTour:T,outlookTour:T,slackTour:T}),llama:y.r$({windows:T,mac:T}),mobileApp:y.r$({android:T,iOS:T}),extension:y.r$({autoCitations:y.r$({demoPageUrl:y.Z_}),chrome:y.r$({installURL:T,infoURL:T}),firefox:y.r$({installURL:T,infoURL:T}),safari:y.r$({installURL:T}),edge:y.r$({installURL:E,infoURL:T}),edgeChromium:y.r$({installURL:T})}),edu:y.r$({adminPanelURL:T}),support:y.r$({login:T,email:y.Z_,mainPage:T,newRequest:T,contact:T,emailExistsKBUrl:T,safariDownloadFilesKBUrl:T,rtfCompatibilityUrl:T,documentAcceptTrackedChanges:T,introducingGrammarlyEditor:T,troubleshooting:y.r$({connectionTroubleshooting:T,connectionIsUnstable:T,somethingWentWrong:T,diagnosticTestPath:k,serverEncounteredAnError:T,howDoIClearCacheAndCookies:T,statusPage:T,textCheckingUnavailable:T})}),privacyPolicy:T,termsOfService:T,account:y.r$({customize:T,subscription:T,adminSubscription:T,members:T,styleGuide:T,writingStyle:T,suggestions:T,writingProgress:T}),preconnectLinks:y.IX(_),ideas:y.r$({galleryURL:T})}),m.VF((function(){return{env:I.prod,logLevel:"INFO",accumulateCrashLogLevel:"DEBUG",sendCrashOnLogLevel:"ERROR",collectLogs:!0,collectCrashLogs:!0,copyLogsToConsole:!1,crashLogsCacheSize:100,debugLogsCacheSize:100,tracking:{state:"enabled"},alertCache:{prefix:"editorTsAlertCache",version:"4"},mutedCategoriesCache:{prefix:"mutedCategoriesCache",version:"0"},outcomeScoreCache:{prefix:"scoreCache",version:"0"},userSettingsPrefix:"userSettings",userSettingsVersion:"1",defaultDialect:b.american,notificationShowTimeMs:7e3,maxNotificationsOnTheScreen:3,selfUpdate:{versionCheckInterval:59*p.wn,selfUpdateDelay:12*p.p7,canReloadCheckInterval:5*p.cK,blockingModalAutoReloadDelay:1*p.wn,retryFailedVersionCheckInterval:5*p.wn,retryFailedVersionCheckLimit:20,debugBuildVersion:"auto",versionFilePath:"/version.json"},pingMaybeGnarDelay:1*p.p7,domains:{cookie:".grammarly.com",localServer:"denali-local.grammarly.com"},api:{authUrl:"https://auth.grammarly.com/v3",authUrlV4:"https://auth.grammarly.com/v4/api",institutionUrl:"https://goldengate.grammarly.com/institution/api",snippetsUrl:"https://goldengate.ppgr.io/snippets/v1/snippets",clientControlsUrl:"https://goldengate.grammarly.com/client-controls",settingsRegistryUrl:"https://goldengate.grammarly.com/settings-registry/v1",institutionAdminUrl:"https://goldengate.grammarly.com/institution/api/institution/admin",institutionMembersUrl:"https://goldengate.grammarly.com/institution/api/institution/members",institutionInviteesUrl:"https://goldengate.grammarly.com/institution/api/institution/invitees",institutionGroupsUrl:"https://goldengate.grammarly.com/institution/api/groups",institutionVaultUrl:"https://goldengate.grammarly.com/institution/api/vault",knowledgeHubUrl:"https://goldengate.grammarly.com/knowledge-hub/v1/institution",analyticsUrl:"https://goldengate.grammarly.com/analytics/api/institution/statistics",analyticsPrivateUrl:"https://analytics.grammarly.com/private/api",institutionAnalyticsUrl:"https://goldengate.grammarly.com/institution/public/api/institution/statistics",institutionTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",profileTonesUrl:"https://goldengate.grammarly.com/brand-tones/v1",tonesUrl:"https://goldengate.ppgr.io/brand-tones/v1",dapiUrl:"https://data.grammarly.com",doxUrl:"https://dox.grammarly.com",doxWsUrl:"wss://dox.grammarly.com",irbisUrl:"https://irbis.grammarly.com",subscriptionUrl:"https://subscription.grammarly.com/api/v1",paymentsUrl:"https://api.payments.grammarly.com",discountUrl:"https://irbis.grammarly.com/api/discounts",dataReportUrl:"https://datareport.grammarly.com",capiWsUrl:"wss://capi.grammarly.com/freews",defaultCapiWsUrl:"wss://capi.grammarly.com/freews",gatewayCapiWsUrl:"wss://gateway.grammarly.com/capi/freews",internalCapiWsUrl:"wss://gateway.grammarly.com/k8capi/freews",k8sCapiWsUrl:"wss://k8s-capi-green.grammarly.com/freews",capiApiUrl:"https://capi.grammarly.com/api",gnarApi:{url:"https://gnar.grammarly.com",ingestionUrl:"https://in.grammarly.com/v1/events"},femetricsUrl:"https://editor.femetrics.grammarly.io/batch/import",felogUrl:"https://f-log-editor.grammarly.io",felogDebugUrl:"https://f-log-editor-debug.grammarly.io",sumoUrl:"https://endpoint2.collection.us2.sumologic.com/receiver/v1/http/ZaVnC4dhaV0Bxac28IqT2frgzsjX7HEotu8EZEZr07YE9RWLCzrOMGwzO9aL6c_iSiidkEplFOod2igKIxz_7s2CHlXc2u-XuLpetEBK1fV6xjfN2Sw2gA==",crashLogUrl:"https://f-log-editor.grammarly.io/crash",onlineTestUrl:"/online-test.json",wsTest:"wss://wstest.grammarly.com",proofitResultUrl:"https://dox.grammarly.com/documents/_docId_/proofread",redirect:"https://redirect.grammarly.com/redirect",mailApiUrl:"https://g-mail.grammarly.com",ssoUrl:"https://sso.grammarly.com",scimUrl:"https://goldengate.grammarly.com/auth/api/token/scim",voxInstitutionUrl:"https://goldengate.grammarly.com/vox/v2/institution",writingStylesUrl:"https://goldengate.grammarly.com/writing-style",appsUrl:"https://apps.grammarly.com",tokensUrl:"https://tokens.grammarly.com",cheetahUrl:"https://capi.grammarly.com/api/cheetah/v1/settings",cheetahInstitutionUrl:"https://goldengate.grammarly.com/cheetah/v1/institution/settings",inProductReportUrl:"https://in-product.report.grammarly.io/v1/report",vito:"https://goldengate.grammarly.com/vito",passportUrl:"https://goldengate.grammarly.com/passport/api/v1/passport",uphookhub:"https://gateway.grammarly.com/uhub"},app:{nameWeb:"editor",nameMacEditor:"macEditor",nameDesktop:"desktopEditor",webOnboarding:"webOnboarding"},urls:{free:"/free",account:"https://account.grammarly.com",versionHistory:"https://app.grammarly.com/documentVersionHistory"},onlineEditor:{base:"https://app.grammarly.com",docId:"https://app.grammarly.com/ddocs/"},external:{gmail:"https://mail.google.com/",gDocs:"https://docs.google.com",outlook:"https://outlook.live.com/mail"},funnel:{base:"https://www.grammarly.com",resetPassword:"https://www.grammarly.com/resetpassword",accountDeleted:"https://www.grammarly.com/account-deleted",businessLanding:"https://www.grammarly.com/business/e",businessStyleguideLanding:"https://www.grammarly.com/business/styleguide",businessUpgradeLanding:"https://www.grammarly.com/upgrade/business/try",subscribe:"https://www.grammarly.com/subscribe",upgrade:"https://www.grammarly.com/upgrade",upgradeTry:"https://www.grammarly.com/upgrade/try",inviteMembers:"https://www.grammarly.com/invite/pro",personalize:"https://www.grammarly.com/personalize",plans:"https://www.grammarly.com/plans",pro:"https://www.grammarly.com/pro",signin:"https://www.grammarly.com/signin",signupEmbed:"https://grammarly.com/signup/embed?client_id=demoEditor&hide_title_link=1",socialSignin:"https://www.grammarly.com/signin/app",signup:"https://www.grammarly.com/signup",mainPage:"https://www.grammarly.com/",deleteSocialAccount:"https://www.grammarly.com/social/delete-account",subscriptionCancellationSurvey:"https://www.grammarly.com/subscription-cancellation-survey",keyboardInstall:"https://www.grammarly.com/keyboard",desktopAppInstall:"https://www.grammarly.com/native",claimedUserJoinFallback:"https://redirect.grammarly.com/redirect?business_join=1",userTrustGuidelines:"https://www.grammarly.com/trust",llamaServiceDownload:"https://www.grammarly.com/service/download",llamaServiceDownloadDirect:"https://www.grammarly.com/service/download/direct",productRecommendation:"https://www.grammarly.com/product/recommendation",tour:"https://www.grammarly.com/tour",facebookTour:"https://www.grammarly.com/tour-facebook",gDocsTour:"https://www.grammarly.com/tour-gdocs",gmailTour:"https://www.grammarly.com/tour-gmail",canvasTour:"https://grammarly.com/tour-canvas",linkedInTour:"https://grammarly.com/tour-linkedin",outlookTour:"https://grammarly.com/tour-outlook",slackTour:"https://grammarly.com/tour-slack"},llama:{windows:"https://download-windows.grammarly.com/w/GrammarlyInstaller.exe",mac:"https://download-mac.grammarly.com/Grammarly.dmg"},mobileApp:{android:"https://play.google.com/store/apps/details?id=com.grammarly.android.keyboard",iOS:"https://apps.apple.com/us/app/grammarly-grammar-keyboard/id1158877342"},extension:{autoCitations:{demoPageUrl:"https://www.sciencedirect.com/science/article/abs/pii/S0885200618300826"},chrome:{installURL:"https://chrome.google.com/webstore/detail/kbfnbcaeplbcioakkpcpgfkobkghlhen",infoURL:"https://chrome.google.com/webstore/detail/grammarly-spell-checker-g/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en"},firefox:{installURL:"https://addons.mozilla.org/firefox/downloads/latest/566314/addon-566314-latest.xpi",infoURL:"https://addons.mozilla.org/en-US/firefox/addon/grammarly-1/"},safari:{installURL:"https://apps.apple.com/us/app/grammarly-for-safari/id1462114288?ls=1&mt=12"},edge:{installURL:"ms-windows-store://pdp?ProductId=9p59wxtbhzzm",infoURL:"https://www.microsoft.com/en-us/store/p/grammarly-for-microsoft-edge/9p59wxtbhzzm?rtc=1"},edgeChromium:{installURL:"https://microsoftedge.microsoft.com/addons/detail/grammarly-for-microsoft-e/cnlefmmeadmemmdciolhbnfeacpdfbkd"}},edu:{adminPanelURL:"https://account.grammarly.com/admin"},support:{login:"https://support.grammarly.com/login",email:"support@grammarly.com",mainPage:"https://support.grammarly.com/",newRequest:"https://support.grammarly.com/hc/en-us/requests/new",contact:"https://www.grammarly.com/contact",emailExistsKBUrl:"https://support.grammarly.com/hc/en-us/articles/115000090791-Changing-your-email-to-an-email-that-already-exists",safariDownloadFilesKBUrl:"https://support.grammarly.com/hc/en-us/articles/360001105952",rtfCompatibilityUrl:"https://support.grammarly.com/hc/en-us/articles/115000091512-Preserve-text-formatting",documentAcceptTrackedChanges:"https://support.office.com/en-us/article/Accept-tracked-changes-4838d24c-d5d1-4c6c-8e39-78b44bd2b4cc",introducingGrammarlyEditor:"https://support.grammarly.com/hc/en-us/articles/360003474732-Introducing-the-Grammarly-Editor",troubleshooting:{connectionTroubleshooting:"https://support.grammarly.com/hc/en-us/articles/115000090271-Network-configuration-blocks-Grammarly-services",connectionIsUnstable:"https://support.grammarly.com/hc/en-us/articles/360024580031-Error-Your-Internet-Connection-Is-Unstable",somethingWentWrong:"https://support.grammarly.com/hc/en-us/articles/360001608811-Error-Hm-something-went-wrong",diagnosticTestPath:"/diagnostic-test?origin=editor",serverEncounteredAnError:"https://support.grammarly.com/hc/en-us/articles/115000090252-Error-The-server-encountered-an-error-Please-try-to-reload-the-page",howDoIClearCacheAndCookies:"https://support.grammarly.com/hc/en-us/articles/115000090272-How-do-I-clear-cache-and-cookies-",statusPage:"https://status.grammarly.com",textCheckingUnavailable:"https://support.grammarly.com/hc/en-us/articles/115000090251-Error-Text-Checking-Is-Temporarily-Unavailable"}},privacyPolicy:"https://www.grammarly.com/privacy-policy",termsOfService:"https://www.grammarly.com/terms",account:{customize:"https://redirect.grammarly.com/redirect?profile_dictionary=1",subscription:"https://account.grammarly.com/subscription",adminSubscription:"https://account.grammarly.com/admin/subscription",members:"https://account.grammarly.com/admin/members",styleGuide:"https://account.grammarly.com/admin/style-guide",writingStyle:"https://account.grammarly.com/admin/style-guide-writing-style",suggestions:"https://redirect.grammarly.com/redirect?profile_suggestions=1",writingProgress:"https://account.grammarly.com/writing-progress"},preconnectLinks:["https://data.grammarly.com","https://gnar.grammarly.com","https://subscription.grammarly.com","https://auth.grammarly.com","https://f-log-editor.grammarly.com","https://static.institution.grammarly.com"],ideas:{galleryURL:"https://app.grammarly.com/ideas/sales"}}})));!function(e){e.createFromPlatformConfig=d.Pj(G),e.Context=a.createContext(u.Y.invariantContent("PlatformConfig"))}(C||(C={}));var L=r(39170),D=r(52574),N=r(42847),z=r(56424),P=r(8468);var F;!function(e){e.UnauthorizedError=({action:e})=>a.createElement(N.DI.TitledContent,{title:"You've Been Logged Out"},"This occurs due to inactivity or logging out on another device.",a.createElement("br",null),a.createElement(P.J,{name:"login",className:O.footerLink,onClick:e},"Log Back In")),e.Offline=({reconnect:e,reconnectTime:t})=>a.createElement(N.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted. We’ll try to reconnect you in"," ",a.createElement(o.F.span,null,t.view((e=>e)))," seconds.",a.createElement("br",null),a.createElement(P.J,{name:"reconnect",className:O.footerLink,onClick:e},"Reconnect Now")),e.ServerError=()=>{const e=t(P.J,"UnknownConnectionError"),r=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Grammarly couldn’t establish a connection to the server"},"Try reloading the page in 5 minutes. If the issue persists, check"," ",a.createElement(D.zx,{name:"serverEncounteredAnError",className:O.link,href:r.support.troubleshooting.serverEncounteredAnError,target:"_blank"},"this article"),".",a.createElement("br",null),a.createElement(e,{name:"reload-page",className:O.footerLink},"Reload This Page"))},e.ConnectionWSError=()=>{const e=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Can’t Connect to Grammarly"},"Your network configuration currently blocks Grammarly services on this computer. ",a.createElement("br",null),a.createElement(P.J,{name:"troubleshoot",className:O.footerLink,href:e.support.troubleshooting.diagnosticTestPath,target:"_blank"},"Troubleshoot This Issue"))},e.ClientConnectionError=()=>{const e=t(P.J,"ClientConnectionErrorNotification"),r=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Grammarly couldn’t establish a connection to the server"},"Try reloading the page in 5 minutes. If the issue persists, check"," ",a.createElement(D.zx,{name:"serverEncounteredAnError",className:O.link,href:r.support.troubleshooting.serverEncounteredAnError,target:"_blank"},"this article"),".",a.createElement("br",null),a.createElement(e,{name:"reload-page",className:O.footerLink},"Reload Page Now"))},e.DocumentNotFoundError=({navigateToDocuments:e})=>a.createElement(N.DI.TitledContent,{title:"Can’t find this document"},"It looks like this document was removed or URL is incorrect.",a.createElement("br",null),a.createElement(P.J,{name:"goto-docs",className:O.footerLink,onClick:e},"Go to your documents")),e.SelfUpdate=()=>{const e=a.useContext(L.m.Context),r=t(D.zx,"SelfUpdateBlocker");return a.createElement(N.DI.TitledContent,{title:"Grammarly needs to refresh this page"},"Don't worry - your documents have already been saved. Please"," ",a.createElement(r,{name:"reload-page",className:O.link},"reload")," ","the page ",e.hotkeyLabelR,".")},e.SlowNetworkError=()=>{const e=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Your internet connection is unstable"},"Check"," ",a.createElement(D.zx,{name:"connectionIsUnstable",className:O.link,href:e.support.troubleshooting.connectionIsUnstable,target:"_blank"},"this article")," ","to resolve the issue.")},e.CheckingIsDownError=()=>{const e=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Text checking is temporarily unavailable"},"To resolve the issue, check"," ",a.createElement(D.zx,{name:"textCheckingUnavailable",className:O.link,href:e.support.troubleshooting.textCheckingUnavailable,target:"_blank"},"this article"),".")},e.Error=()=>{const e=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"We couldn’t perform this action"},a.createElement(D.zx,{name:"howDoIClearCacheAndCookies",className:O.link,href:e.support.troubleshooting.howDoIClearCacheAndCookies,target:"_blank"},"Clear cache")," ","and try again.")},e.ByokKeyInaccessibleNotification=()=>a.createElement(N.DI.TitledContent,{title:"Unable to create new document. Enterprise key unavailable. Please contact your administrator."}),e.ProofitPaymentDeclinedError=({paymentMethod:e,navigateToSubscription:t})=>{const r=a.useContext(L.m.Context).proofitPayment,n=function(e,t,r,n,i){switch(e){case"creditCard":return t;case"payPal":return r;case"stripe":return n;case void 0:return i;default:const a=`Unknown payment method: ${e}`;throw s.C8.Logging.getLogger("ProofitView").warn(a),new Error(a)}}(e,r.creditCard,r.payPal,r.stripe,r.default);return a.createElement(N.DI.TitledContent,{title:"Order can not be processed"},a.createElement("div",null,n),"Please update your credit card information in the Manage Subscription section.",a.createElement("br",null),a.createElement(P.J,{name:"manage-subscription",className:O.footerLink,onClick:t},"Go to Manage Subscription"))},e.PaymentSuccessMessage=()=>{const e=a.useContext(L.m.Context).proofitOrderModal.card.paymentSuccess;return a.createElement(N.DI.TitledContent,{title:e.title},a.createElement("div",null,e.message))},e.PaymentErrorMessage=()=>{const e=a.useContext(L.m.Context).proofitOrderModal.card.paymentError,t=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:e.title},a.createElement("div",null,e.message(t.support.login)))},e.ProofitEmptyDocumentError=()=>a.createElement(N.DI.TitledContent,{title:"Document is empty"},"The document you are trying to submit is empty. Please write something and try again."),e.ProofitDocumentProofreadError=({navigateToDocuments:e})=>a.createElement(N.DI.TitledContent,{title:"This document is a recent submission"},"The text you are trying to send for human proofreading was reviewed by our team. Please edit your text or select another document before you re-submit.",a.createElement("br",null),a.createElement(P.J,{name:"goto-docs",className:O.footerLink,onClick:e},"Go to your documents")),e.ProofitComplexInternalStructureError=({navigateToDocuments:e})=>a.createElement(N.DI.TitledContent,{title:"This document cannot be corrected"},"The text you are trying to send for human proofreading is either too long or has a complex internal structure. Please edit your text (e.g., reduce length, remove significantly long tables) or select another document.",a.createElement("br",null),a.createElement(P.J,{name:"goto-docs",className:O.footerLink,onClick:e},"Go to your documents"));var t=e.withReload=(e,t)=>{class r extends a.Component{render(){return a.createElement(e,(0,i._)((0,n._)({},this.props),{onClick:()=>{try{localStorage.setItem("pageReloadReason",JSON.stringify({source:t,location:self.location.href,timestamp:Date.now()}))}catch(e){}self.location.reload()}}))}}return r};e.CopyToClipboardError=()=>{const e=a.useContext(L.m.Context);return a.createElement(N.DI.TitledContent,{title:"Copying Is Not Supported by Your Browser"},"Please use ",e.hotkeyLabelC," instead.")},e.ProofitCancelled=()=>{const e=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:"Your order has been cancelled"},"Your proofreading order has been cancelled and the payment refunded. Please check your email for more information, or contact"," ",a.createElement(P.J,{name:"support",className:O.footerLink,href:e.support.login,target:"_blank"},"Grammarly support"))},e.ProofitCompleted=({documentTitle:e,documentDownloadUrl:t,email:r})=>a.createElement(N.DI.TitledContent,{title:`${e||"Your"} document has been proofread`},"A version of this document with proofreaders’ marks has been emailed to you at ",r," in .docx format.",a.createElement("br",null),a.createElement(P.J,{name:"download",className:O.footerLink,href:t,target:"_blank"},"Download .docx")),e.DenaliFormattingCompatibility=()=>{const e=a.useContext(L.m.Context),t=a.useContext(C.Context);return a.createElement(N.DI.TitledContent,{title:e.rtfCompatibilityModeNotificationTitle},"To preserve your document’s formatting, Grammarly’s formatting tools are temporarily not available.",a.createElement("br",null),a.createElement(P.J,{name:"support",className:O.footerLink,href:t.support.rtfCompatibilityUrl,target:"_blank"},"Learn more"))},e.DenaliDocumentUploaded=({navigateToDocuments:e})=>{const{denaliDocumentUploadNotification:t}=a.useContext(L.m.Context);return a.createElement(N.DI.TitledContent,{title:t.title},t.text," ",a.createElement(D.zx,{name:"goto-docs",className:O.link,onClick:e},t.link))},e.AlertsNothingFound=()=>a.createElement(N.DI.Content,null,"Grammarly found no critical writing issues in this text. Keep up the great work!"),e.DownloadDocumentNotFoundError=()=>{const e=a.useContext(L.m.Context);return a.createElement(N.DI.TitledContent,{"data-name":"document-not-found",title:e.downloadDocumentNotFoundError})},e.ClipboardNotSupported=({hotkey:e})=>{const t=a.useContext(L.m.Context);return a.createElement(N.DI.Content,null,t.hotkeyUnsupported,a.createElement("b",null,e))},e.DocumentSizeExceeded=({os:e,officeAddinUrl:t})=>{const r=a.useContext(L.m.Context).fileSizeExceededNotification;return a.createElement(N.DI.TitledContent,{title:r.title},r.body,"windows"===e&&a.createElement(P.J,{name:"officeAddin",className:O.footerLink,href:t,target:"_blank"},r.link))},e.DocumentUploaded=({navigateToDocument:e})=>{const t=a.useContext(L.m.Context).documentUploaded;return a.createElement(N.DI.Content,null,t.message,a.createElement("br",null),a.createElement(P.J,{name:"goto-doc",className:O.footerLink,onClick:e},t.link))},e.DocumentTypeUnsupported=()=>{const e=a.useContext(L.m.Context);return a.createElement(N.DI.Content,null,"Unsupported file type. ",e.notificationUploadFileText,": Microsoft Word (.doc, .docx), OpenOffice (.odt), TXT and RTF.")},e.DocumentWithTrackedChangesIsUnsupported=({link:e})=>a.createElement(N.DI.Content,null,"Your document contains revisions. Accept all revisions and try uploading again. Click"," ",a.createElement(D.zx,{name:"document-accept-tracked-changes",className:O.link,href:e,target:"_blank"},"here")," ","for details.");const r=(e,t)=>{switch(e){case B.switchToDenali:return t.switchToDenali;case B.feedbackSend:return t.feedbackSend;case B.statisticsError:return t.statisticsError;case B.referenceCopied:return t.referenceCopied;case B.documentCopied:return t.documentCopied;case B.somethingCopied:return t.somethingCopied;case B.isTemporaryDownloadError:return t.isTemporaryDownloadError;case B.documentUploadGeneralError:return t.documentUploadGeneralError;case B.documentIsEmpty:return t.documentIsEmpty;case B.noFileToUpload:return t.noFileToUpload;case B.oneDocumentIsAllowed:return t.oneDocumentIsAllowed;default:return(0,l.vE)(e)}};e.Generic=({type:e})=>{const t=a.useContext(L.m.Context);return a.createElement(N.DI.TitledContent,{title:r(e,t)})}}(F||(F={}));const U={display:"inline-flex",overflow:"unset",color:c.Il.CoreNeutral0,verticalAlign:"baseline",textDecoration:"underline",fontWeight:"bold",cursor:"pointer"},R={marginTop:z.ux.rem(.5),textDecoration:"none"},O=z.ux.stylesheet({link:[U],footerLink:[U,R]});var B;!function(e){e.switchToDenali="switchToDenali",e.feedbackSend="feedbackSend",e.statisticsError="statisticsError",e.referenceCopied="referenceCopied",e.documentCopied="documentCopied",e.somethingCopied="somethingCopied",e.isTemporaryDownloadError="isTemporaryDownloadError",e.documentUploadGeneralError="documentUploadGeneralError",e.documentIsEmpty="documentIsEmpty",e.noFileToUpload="noFileToUpload",e.oneDocumentIsAllowed="oneDocumentIsAllowed"}(B||(B={}))},12987:(e,t,r)=>{r.d(t,{A:()=>I});var n=r(84910),i=r(78520),a=r(49231),o=r(84242),s=r(64538),l=r(39170),c=r(73590),d=r(42847),u=r(56424),m=r(8468);const p=(e,t)=>{switch(e.kind){case"ignore":return"Dismissed";case"ignoreAll":return a.createElement(a.Fragment,null,a.createElement("span",null,e.alerts)," ",o._6(e.alerts,"alert has been","alerts have been")," dismissed");case"replace":return"Corrected";case"replaceSynonym":return"Replaced";case"replaceTransform":return a.createElement(a.Fragment,null,e.transform);case"addToDictionary":return a.createElement(a.Fragment,null,a.createElement("b",{className:t&&t.addToDictionary},e.word)," has been added to dictionary");case"report":return"Your report has been sent";case"markAsHelpful":return"Marked as “Will address”";case"markAsNotHelpful":return"Marked as “Not helpful”";case"acknowledge":return"Acknowledged";default:return""}},h={display:"flex",marginTop:u.ux.rem(-1.1),marginBottom:u.ux.rem(-.5),alignItems:"center",justifyContent:"space-between"},g={marginTop:u.ux.rem(.6),marginRight:u.ux.rem(1),color:s.Il.CoreNeutral0,flexGrow:0,flexShrink:0},f={marginTop:u.ux.rem(-.25),paddingRight:u.ux.rem(.5),minWidth:"auto",minHeight:"auto",justifyContent:"space-between"},y={marginTop:u.ux.rem(.6),maxWidth:u.ux.rem(14),wordWrap:"break-word",flexBasis:"auto",flexGrow:1},v={marginRight:u.ux.rem(1.4)},x=u.ux.stylesheet({alertUndoWrapper:[h],alertUndoWrapperFlexible:[h,{flexWrap:"nowrap"}],alertUndoWrapperFullWidth:[h,{flexWrap:"wrap"}],alertUndoBtn:[g],alertUndoIcon:[f],alertUndoContent:[y],alertUndoContentFlexible:[y,v],addToDictionary:[{wordBreak:"break-all"}]});var I;!function(e){const t={wrapper:x.alertUndoWrapperFlexible,content:x.alertUndoContent,icon:x.alertUndoIcon,button:x.alertUndoBtn};e.Standard=({action:e,params:o})=>a.createElement(d.DI.Content,null,a.createElement(r,{action:e,content:p(o),theme:(0,i._)((0,n._)({},t),{wrapper:x.alertUndoWrapperFullWidth})})),e.Flexible=({notification:e,onClose:o,action:s,params:l})=>a.createElement(d.SJ.Wrapper,{notification:e,onClose:o},a.createElement(d.DI.Content,null,a.createElement(r,{action:s,content:p(l,{addToDictionary:x.addToDictionary}),theme:(0,i._)((0,n._)({},t),{wrapper:x.alertUndoWrapperFlexible,content:x.alertUndoContentFlexible})})));var r=e.Content=({action:e,content:r,theme:n=t})=>{const i=a.useContext(l.m.Context);return a.createElement("div",{className:n.wrapper},a.createElement("div",{className:n.content},r),a.createElement(m.J,{name:"alertUndoButton",className:n.button,onClick:e},a.createElement(c.JO.Undo,{className:n.icon}),i.undo))}}(I||(I={}))},32356:(e,t,r)=>{r.d(t,{E2:()=>we,TG:()=>_e});var n,i,a=r(32490),o=r(84910),s=r(78520),l=r(42927),c=r(49231),d=r(90023),u=r(94173),m=r(47387),p=r(37213),h=r(13391),g=r(52303),f=r(17613),y=r(67397),v=r(24858),x=r(25700),I=r(59179),b=r(64271),C=r(90572),S=r(18827),A=r(10883),w=r(20161),_=r(77400),k=r(84714),E=r(68545),T=r(36344),M=r(84308),G=r(84178),L=r(19813),D=r(58303);!function(e){e.mock=()=>({isStepEnabled:d.jv,subscribeForStep:()=>{throw new Error("Not implemented")},getStepCompletionCallback:(0,d.a9)(d.Q1),changeState:d.Q1,relaunchAllSteps:d.Q1,getFirstTargetRect:()=>k.of(D.YP),isLastStep:d.jv,completionTrigger:h.h.create(!1)})}(n||(n={})),function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Popover="popover",e.Passed="passed"}(i||(i={}));class N{isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){L.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=h.h.create(i.Hidden);return Boolean(this._steps[e])?this._steps[e]:this._steps[e]={id:e,state:t,dotShown:d.Q1,dotClicked:()=>t.set(i.Popup),popupClosed:()=>t.set(i.Passed),popupIgnored:()=>t.set(i.Hidden),actionTaken:()=>t.set(i.Passed)}}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}constructor(){(0,a._)(this,"completionTrigger",h.h.create(!1)),(0,a._)(this,"_steps",{}),(0,a._)(this,"getFirstTargetRect",(()=>T.E))}}var z=r(67741),P=r(27341),F=r(64538),U=r(56424),R=r(57156),O=r(41255);const B=F.Il.BackgroundTooltip,$=F.Il.CoreNeutral90,W=F.Il.CoreNeutral40,j=U.ux.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${U.ux.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),H={width:U.ux.rem(1),height:U.ux.rem(1),borderRadius:U.ux.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${j} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},Y=U.ux.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),V={width:U.ux.rem(1),height:U.ux.rem(1),borderRadius:U.ux.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:U.ux.rem(1),height:U.ux.rem(1),borderRadius:U.ux.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${Y} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},Z={margin:`${U.ux.rem(-1.5)} 0 0 ${U.ux.rem(-1.5)}`,padding:U.ux.rem(1),borderRadius:U.ux.percent(50),cursor:"pointer",pointerEvents:"all"},J={margin:`0 0 ${U.ux.rem(.5)}`,color:F.Il.CoreNeutral0,fontWeight:"bold"},X={color:F.Il.CoreNeutral0,lineHeight:U.ux.rem(1.25)},Q={display:"flex",padding:`${U.ux.rem(1)} ${U.ux.rem(1.5)} ${U.ux.rem(1.25)} ${U.ux.rem(2)}`,width:U.ux.rem(20),borderRadius:U.ux.rem(O.fx),background:B,color:F.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},q={display:"inline-block",marginRight:U.ux.rem(z.x)},K={marginRight:U.ux.rem(2),width:U.ux.rem(2),flexShrink:0,alignSelf:"center"},ee={position:"absolute",top:0,right:0},te={stroke:R.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:F.Il.CoreNeutral0,fill:F.Il.CoreNeutral0}}},re={position:"absolute",top:U.ux.percent(50),left:U.ux.percent(50),zIndex:O.I3},ne={position:"relative",zIndex:O.VN},ie={zIndex:O.w$},ae={position:"absolute",zIndex:O.w$},oe=U.ux.prefixedStylesheet("onboarding",{pulse:[H],pulseWrapper:[Z],header:[J],description:[X],stepWrapper:[Q],content:[q],alertIcon:[K],closeIconWrapper:[ee],closeIcon:[te],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[re],containerDiv:[{}],editor:[ne],onboardingPopup:[ie],notificationContainer:[ae],pulseOptimized:[V]}),se={display:"flex",flexDirection:"column",width:U.ux.percent(100)},le=(0,s._)((0,o._)({},ee),{top:U.ux.rem(.5),right:U.ux.rem(.5)}),ce=(0,s._)((0,o._)({},te),{$nest:(0,s._)((0,o._)({},te.$nest),{svg:{height:U.ux.rem(1),width:U.ux.rem(1)}})}),de=(0,s._)((0,o._)({},Q),{background:$,color:F.Il.CoreNeutral0,borderRadius:U.ux.rem(P.ze),padding:U.ux.rem(1)}),ue={width:U.ux.percent(100),backgroundColor:"#2DC9B6",color:$,fontWeight:"bold",borderRadius:U.ux.rem(P.xB),marginTop:U.ux.rem(1),padding:U.ux.rem(.5)},me=(0,s._)((0,o._)({},X),{color:W}),pe=U.ux.prefixedStylesheet("a11y-onboarding",{contentWrapper:[se],closeIconWrapper:[le],closeIcon:[ce],stepWrapper:[de],completeButton:[ue],description:[me]});var he=r(52574),ge=r(73590),fe=r(30546),ye=r(16136),ve=r(36234);const xe=e=>c.createElement(he.zx,{className:pe.completeButton,onClick:e.onClick},e.text),Ie=({alignment:e,rect:t,onClose:r,className:n,children:i,icon:a,pinTargetRect:l,hideCloseButton:u,onMount:h})=>c.createElement(fe.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:oe.notificationContainer},fe.t.Alignment.toSelector(e)),{pinTargetRect:l,withPin:!0}),c.createElement(m.F.div,(0,s._)((0,o._)({},(0,p.Sh)(oe.stepWrapper,n)),{mount:h}),(0,d.zG)(a,D.g_((()=>c.createElement(ge.JO.Grammarly,{className:oe.alertIcon})),(e=>c.createElement(e,{className:oe.alertIcon})))),i,!(null!=u&&u)&&c.createElement(he.zx,{name:"onboard-close",className:oe.closeIconWrapper,onClick:()=>r&&r()},c.createElement(ge.JO.Close,{className:oe.closeIcon,width:12})))),be=({alignment:e,rect:t,onClose:r,className:n,children:i,pinTargetRect:a,hideCloseButton:l,onMount:d})=>c.createElement(fe.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:oe.notificationContainer},fe.t.Alignment.toSelector(e)),{pinTargetRect:a,withPin:!0}),c.createElement(m.F.div,(0,s._)((0,o._)({},(0,p.Sh)(pe.stepWrapper,n)),{mount:d}),i,!(null!=l&&l)&&c.createElement(he.zx,{name:"onboard-close",className:pe.closeIconWrapper,onClick:()=>{var e;return null===(e=r)||void 0===e?void 0:e()}},c.createElement(ge.JO.Close,{className:pe.closeIcon,width:12,color:F.Il.CoreNeutral40})))),Ce=e=>{var{title:t,description:r}=e,n=(0,l._)(e,["title","description"]);return c.createElement(Ie,n,c.createElement("span",{className:oe.content},Boolean(t)?c.createElement(ye.P1,{className:oe.header},t):null,c.createElement(ye.XY,{className:oe.description},r)))},Se=e=>{var{title:t,description:r,isLastStep:n,onComplete:i}=e,a=(0,l._)(e,["title","description","isLastStep","onComplete"]);return c.createElement(be,a,c.createElement("div",{className:pe.contentWrapper},c.createElement("div",{className:oe.content},Boolean(t)?c.createElement(ve.Z.Base,{className:oe.header},t):null,c.createElement(ve.Z.Base,{className:pe.description},r)),c.createElement(xe,{text:n?"Done":"Next",onClick:i})))},Ae=({className:e,onClick:t,customStyle:r})=>c.createElement(m.F.div,(0,s._)((0,o._)({},(0,p.Sh)(oe.pulseWrapper,e)),{style:r,onClick:()=>t&&t()}),c.createElement("div",{className:oe.pulseOptimized}));var we;function _e(e){const t=c.useContext(_e.Context),{stepId:r,onboardingViewModel:n}=e,i=(0,l._)(e,["stepId","onboardingViewModel"]),a=n||t,u=ke(r,a),m=c.useContext(x.l.Context).pipe(I.U((e=>e.rect)));return(0,d.zG)(u,g.g_((()=>c.Children.only(e.children)),(e=>{var t,n;return c.createElement(Ee,(0,s._)((0,o._)({},i),{onboardingStep:e,viewportRect:m,isLastStep:null===(t=(n=a).isLastStep)||void 0===t?void 0:t.call(n,r)}))})))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(we||(we={}));const ke=(e,t)=>((0,f.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?g.G(t.subscribeForStep(e)):g.YP);class Ee extends c.Component{componentWillUnmount(){const e=this.props.onboardingStep;"popup"!==e.state.get()&&"popover"!==e.state.get()||e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;var t;e?this._subs.push(b.T(this.context,this.props.onboardingStep.state.pipe(C.h((e=>"dot"===e||"popup"===e||"popover"===e)))).pipe(S.g(500),A.M(this._wrapperElement,this._containerElement),w.w((([t,r,n])=>(0,d.zG)((0,d.bc)(r,n),(0,d.og)(g.vB(((t,r)=>{switch(e.kind){case"findFirstButton":return _.Dx(e.buttonOrder).pipe(w.w((n=>k.of(void 0).pipe(S.g(500),I.U((()=>{const[i,a]=Ge(t,r,e.position,n,e.selector);return this._exactTargetRect.set(a),i})),E.oA))));case"dotAtPosition":return k.of(Te(e.position));default:return(0,f.vE)(e)}}))),g.g_((()=>T.E),u.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)})),M.a([null!==(t=this.props.dismissalTrigger)&&void 0!==t?t:T.E,this.props.onboardingStep.state]).pipe(C.h((([e,t])=>e&&("dot"===t||"popup"===t||"popover"===t))),G.q(1)).subscribe((()=>{this.props.onboardingStep.actionTaken()}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return c.createElement(m.F.div,(0,s._)((0,o._)({key:"onboarding-wrapper"},(0,p.Sh)(oe.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName)),{mount:e=>this._wrapperElement.set(g.ij(e))}),c.createElement("div",(0,s._)((0,o._)({key:"container",ref:e=>this._containerElement.set(g.ij(e))},(0,p.Sh)(oe.containerDiv,this.props.themes&&this.props.themes.containerClassName)),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),h.h.combine(e.state,this._visibilityState,((t,r)=>{if(!r)return null;switch(t){case i.Dot:const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),c.createElement(Ae,(0,s._)((0,o._)({customStyle:this._spotStyle,key:"spot"},(0,p.Sh)(oe.onboardingSpot,t)),{onClick:()=>e.dotClicked()}));case i.Popup:return c.createElement(Ce,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(g.g_((()=>y.UL.empty),y.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:g.ij(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(g.Fc)});case i.Popover:return c.createElement(Se,{key:"step",title:this.props.title,isLastStep:Boolean(this.props.isLastStep),alignment:this.props.alignment,rect:this._containerElement.view(g.g_((()=>y.UL.empty),y.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,onClose:()=>e.popupClosed(),onComplete:()=>e.actionTaken(),pinTargetRect:this._exactTargetRect.view(g.Fc)});default:return null}})))}constructor(...e){super(...e),(0,a._)(this,"context",void 0),(0,a._)(this,"_subs",[]),(0,a._)(this,"_wrapperElement",h.h.create(g.YP)),(0,a._)(this,"_containerElement",h.h.create(g.YP)),(0,a._)(this,"_exactTargetRect",h.h.create(g.YP)),(0,a._)(this,"_visibilityState",h.h.create(!1)),(0,a._)(this,"_spotStyle",h.h.create({})),(0,a._)(this,"_onEventActionTaken",((e,t=!0)=>r=>{const n=e.state.get();if("popup"===n||"popover"===n||t&&"dot"===n){var i;const n=r.target;if(y.pK(n))return;const a=t||y.q_(n,oe.containerDiv);if("findFirstButton"===(null===(i=this.props.dotPosition)||void 0===i?void 0:i.kind)&&!y.q2(n,"role","button"))return;a&&e.actionTaken()}else"dot"===n&&(r.preventDefault(),r.stopPropagation())}))}}(0,a._)(Ee,"contextType",v.u.Context),(0,a._)(Ee,"defaultProps",{alignment:"left"});const Te=e=>{switch(e){case we.leftTop:return{top:0,left:0};case we.leftCenter:return{top:"50%",left:0};case we.leftBottom:return{top:"100%",left:0};case we.rightTop:return{top:0,left:"100%"};case we.rightCenter:return{top:"50%",left:"100%"};case we.rightBottom:return{top:"100%",left:"100%"};case we.center:return{top:"50%",left:"50%"};default:return(0,f.vE)(e)}},Me=(e,t,r)=>{switch(r){case we.rightTop:return{top:e.top-t.top,left:e.left-t.left+e.width};case we.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,f.vE)(r)}},Ge=(e,t,r,n,i)=>{const a=t.querySelectorAll(null!=i?i:'[role="button"], [role="insertion"], [role="deletion"], button'),o=a.length>0&&(void 0===n?a[a.length-1]:a[n]);if(Boolean(o)){const t=y.UL.fromEl((0,d.MZ)(o)),n=y.UL.fromEl(e);return[g.G(Me(t,n,r)),g.G(t)]}return Boolean(i)?[g.YP,g.YP]:[g.G({top:"50%",left:"50%"}),g.YP]};!function(e){var t=e.Context=c.createContext(null);e.ContextMock=({children:e})=>c.createElement(t.Provider,{value:new N,children:e})}(_e||(_e={}))},7738:(e,t,r)=>{r.d(t,{Q:()=>c});var n=r(90023),i=r(14530),a=r(45951),o=r(19813);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_capiSDUIClient",void 0),l(this,"_log",void 0),this._capiSDUIClient=t,this._log=o.C8.Logging.getLogger("SDUIFeedbackServiceImpl")}var t,r,c;return t=e,(r=[{key:"sendUserAction",value:function(e,t){var r=this;this._log.debug("Sending user action",{componentId:e,userAction:t}),(0,n.zG)(this._capiSDUIClient.sendUserAction(e,t),a.Vi,(function(e){return e.catch((function(e){i.EP.isDroppedError(e)?r._log.debug("Stopped listening for sendUserAction message acknowledge",e):i.YG.isNotConnectedError(e)?r._log.warn("Failed to sendUserAction as CAPI was not connected",e):r._log.error("Failed to sendUserAction",e)}))}))}}])&&s(t.prototype,r),c&&s(t,c),e}()},2963:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,i,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&o[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},42663:e=>{e.exports=function(e){return e[1]}},43920:(e,t,r)=>{r.d(t,{C:()=>c});var n=r(49231);if(3075==r.j)var i=r(90220);if(3075==r.j)var a=r(89342);if(3075==r.j)var o=r(67968);if(3075==r.j)var s=r(21428);const l={width:"auto",height:"auto",transform:"scaleX(0.3)"},c=3075==r.j?n.forwardRef((function(e,t){const{screenReaderText:r,style:c,displayText:d,className:u,...m}=(0,a.c)(e);return n.createElement(s.x,{ref:t,as:"span",variant:"text-xsmall",weight:"bold",className:(0,i.W)("gds-badge",u),style:c,...m},n.createElement("span",{"aria-hidden":!0},d),n.createElement(o.u,{style:l},r))})):null},90230:(e,t,r)=>{r.d(t,{L:()=>o});var n=r(3143);const i={backgroundColor:n.I.Background.Neutral.Default},a={neutral:{backgroundColor:i.backgroundColor},business:{backgroundColor:n.I.Background.Business.Default},addition:{backgroundColor:n.I.Background.Addition.Default},clarity:{backgroundColor:n.I.Background.Clarity.Default},correctness:{backgroundColor:n.I.Background.Correctness.Default},critical:{backgroundColor:n.I.Background.Critical.Default},deletion:{backgroundColor:n.I.Background.Deletion.Default},delivery:{backgroundColor:n.I.Background.Delivery.Default},engagement:{backgroundColor:n.I.Background.Engagement.Default},plagiarism:{backgroundColor:n.I.Background.Plagiarism.Default},premium:{backgroundColor:n.I.Background.Premium.Default,color:n.I.Text.Premium.Default},pro:{backgroundColor:n.I.Background.Pro.Default,color:n.I.Text.Pro.Default},success:{backgroundColor:n.I.Background.Success.Default},warning:{backgroundColor:n.I.Background.Warning.Default}},o=e=>{var t;return null==e?i:null!=(t=a[e])?t:i}},89342:(e,t,r)=>{if(r.d(t,{c:()=>i}),3075==r.j)var n=r(90230);const i=e=>{const{count:t,getAriaLabelText:r,specialCharBefore:i,specialCharAfter:a,style:o,variant:s,className:l,...c}=e,d=null!=i||null!=a,u=d?`${null!=i?i:""}${t}${null!=a?a:""}`:(m=t)<=99?m.toString():m>99&&m<1e3?"99+":"1K+";var m;return{displayText:u,screenReaderText:null==r?void 0:r(d?t:u,i,a),style:Object.assign((0,n.L)(s),o),className:l,...c}}},64204:(e,t,r)=>{r.d(t,{D:()=>a});var n=r(49231);if(3075==r.j)var i=r(36949);const a=3075==r.j?(0,i.I)("color",(({title:e,titleId:t,desc:r,descId:i,...a})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceGoals",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},r?n.createElement("desc",{id:i},r):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M9.047 8.5c0 1.243-.938 2.25-2.094 2.25S4.86 9.743 4.86 8.5s.938-2.25 2.093-2.25m0 2.25L10 5.25m0 0V3.5m0 1.75h1.628M11.372 2v1.75H13M4.163 14l.928-1.75m0 0a3.72 3.72 0 0 0 3.725 0m-3.725 0C3.847 11.534 3 10.123 3 8.5c0-2.347 1.77-4.25 3.953-4.25.55 0 1.072.12 1.547.337M9.744 14l-.928-1.75m0 0c1.244-.716 2.091-2.127 2.091-3.75 0-.616-.122-1.201-.341-1.73"})))):null},56693:(e,t,r)=>{r.d(t,{j:()=>i});var n=r(49231);const i=(0,r(36949).I)("nocolor",(({title:e,titleId:t,desc:r,descId:i,...a})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceOk",stroke:"transparent","aria-labelledby":t,"aria-describedby":i,...a},r?n.createElement("desc",{id:i},r):null,e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:"#05735A",fillRule:"evenodd",d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12m3.498-7.44a.75.75 0 1 0-.996-1.12L6.5 8.996l-1.002-.89a.75.75 0 0 0-.996 1.12L6.5 11.004z",clipRule:"evenodd"}))))},48446:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(17613);const i=class e{constructor(t,r=new URLSearchParams){this.base=t,this.params=r;const i=e._toString(t,r).length;(0,n.kG)(i<e.MAX_URL_LENGTH,"url exceeded length limit",String(i));const a=t.toLowerCase();(0,n.kG)(!1===a.startsWith("javascript:")&&!1===a.startsWith("data:"),"url is not allowed to use javascript: or data: protocols",t)}addParams(t){const r=Object.entries(t).reduce(((e,[t,r])=>(e.append(t,r),e)),(n=this.params,new URLSearchParams(n.toString())));var n;return new e(this.base,r)}toString(){return e._toString(this.base,this.params)}static _toString(e,t){const r=t.toString();return`${e}${r.length?`?${r}`:""}`}};i.MAX_URL_LENGTH=2083;let a=i},45951:(e,t,r)=>{r.d(t,{Vi:()=>o});var n=r(72106),i=r(90023),a=r(4025);function o(e){return e().then(a.MH)}(0,i.MZ)(n.tS)}}]);