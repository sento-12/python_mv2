(self.webpackChunk=self.webpackChunk||[]).push([[8721],{70632:(e,t,i)=>{var n=i(98544),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",o=self.GR_RESOURCE_ROOT||a,l=self.GR_RESOURCE_ROOT||r,c=self.GR_RESOURCE_ROOT||s;e.exports={__css:n.toString().replace(new RegExp(a,"g"),o).replace(new RegExp(r,"g"),l).replace(new RegExp(s,"g"),c),...n.locals}},9339:(e,t,i)=>{i.d(t,{c:()=>r});var n=i(81259),a=i(6986);function r(){const e=(0,a.OB)().experimentClient;return!("autocorrect_disabled"===e.getTreatment(n.p.DisableAutoCorrectAndAutoComplete)||"both_disabled"===e.getTreatment(n.p.DisableAutoCorrectAndAutoComplete))}},55100:(e,t,i)=>{i.d(t,{t:()=>n});const n=e=>(e=>"Cheetah/_System/Push/SimplifyRewrite"===e)(e)||(e=>"Cheetah/_System/Push/ImproveParagraph"===e)(e)},60310:(e,t,i)=>{i.d(t,{G:()=>o,m:()=>s});var n=i(49231),a=i(51320),r=i(18471);const s=26,o=n.forwardRef((function({forceTooltipMessage:e,onClick:t,onMouseEnter:i,onMouseLeave:s},o){return n.createElement(a.u,{message:"Rewrite with Grammarly",forcedMessage:e},n.createElement("button",{onClick:t,"data-grammarly-part":"cheetah-ideate-button","aria-label":"Rewrite with Grammarly",className:r.ideateButton,ref:o,onMouseEnter:i,onMouseLeave:s},n.createElement("div",{className:r.ideateButtonIcon})))}))},31382:(e,t,i)=>{if(i.d(t,{FU:()=>h,OY:()=>_,Td:()=>g,UI:()=>f,XG:()=>k,eC:()=>u,ex:()=>E,gO:()=>l,r4:()=>v,sO:()=>y,xq:()=>p}),1388==i.j)var n=i(90023);if(1388==i.j)var a=i(58303);if(1388==i.j)var r=i(91817);var s=i(36334),o=i(79992);function l(e,t){var i,n,a;const r=null===(a=null===(n=null===(i=null==t?void 0:t.citationBuilder)||void 0===i?void 0:i.domains)||void 0===n?void 0:n[e])||void 0===a?void 0:a.disabled;return void 0!==r?!r:void 0}function c(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)))}function d(e){var t,i;return!(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==i&&i)}function u(e,t){return w(t).some((t=>{const i=new RegExp(t.domain),n=new RegExp(t.pathname);return i.test(e.hostname)&&n.test(e.pathname)}))}function p(e){return a.Y3((()=>{const t=new URL(e).hostname.split(".");return t.slice(t.length-2).join(".")}))}function g(e,t,i,n){return i?function(e,t,i){const n=l(e,i);return d(t)&&(void 0===n&&c(e,t)||!0===n)}(e,t,n):function(e,t,i){return d(t)&&c(e,t)&&!1!==l(e,i)}(e,t,n)}function h(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)&&!0===t.reparse))}const m={verticalLocation:"bottom",horizontalLocation:"left",offsetX:17,offsetY:32};function f(e,t){var i;return(null===(i=w(t).find((t=>new RegExp(t.domain).test(e))))||void 0===i?void 0:i.buttonPosition)||m}function v(e,t,i){return d(t)&&(i?!function(e,t){var i,n;return(null!==(n=null===(i=t.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]).includes(e)}(e,t):c(e,t))}function b(e,t){var i,n,a;const r=new Set(null!==(n=null===(i=e.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]);return Object.entries((null===(a=t.citationBuilder)||void 0===a?void 0:a.domains)||{}).filter((([,e])=>void 0!==e&&!e.disabled)).filter((([e])=>{return t=e,!r.has(t);var t})).map((([e])=>e))}function w(e){var t,i;return null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==i?i:[]}const S=(0,o.hz)((()=>{const e=document.location.href;return(0,s.KK)(e)}));function y(e){const t=e=>`^${e.replace(/\./g,"\\.")}$`;return{sources:w(e.dynamicConfig),explicitlyEnabledDomainsWithRegexStrings:b(e.dynamicConfig,e.page).map((e=>[e,t(e)]))}}const E=(0,o.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,s.KK)(t),isUrlAllowlisted:u(document.location,e)}})),C=(0,o.hz)((()=>o.iy.create()));function k(e){const t=C(),i=S();return(0,n.zG)(e,(0,r.H6)("citeCopyButtonClick","citeCopyIntextClick","citePopupButtonDisable","citePopupButtonShow","citePopupEditClick","citePopupButtonClick","citePopupEditSuccess","citePopupMissingInfoShow","citePopupMissingInfoFormShow","feedbackSentButtonClick","citePopupAddMissingClick"),(e=>({...e,domain:i,sessionId:t})))}function _(e,t){return e.manualInvocation&&!0===l(t.domain,t)}},77561:(e,t,i)=>{i.d(t,{R:()=>n});var n,a=i(52341),r=i(4798),s=i(36334),o=i(68970),l=i(57935),c=i(79992),d=i(6986);!function(e){function t(e,t=(0,d.OB)(),i,n){return((0,s.t_)(i,n)?t.experimentClient.isGateEnabled(r.K.ConnectorGdocs):t.experimentClient.isGateEnabled(r.K.ConnectorNonGdocs))&&e.isMac&&(0,o.i7)()}e.shouldEnableFieldIntegration=t,e.shouldShowPermissionPopup=function(e,i=0,n=(0,d.OB)()){return Promise.resolve(i+l.v0<Date.now()&&t(e,n)&&n.bgRpc.api.isPermissionGranted(a.d.nativeMessaging).then(c.X0))}}(n||(n={}))},91577:(e,t,i)=>{i.d(t,{g:()=>u});var n=i(49231),a=i(77561),r=i(86882),s=i(52341),o=i(53829),l=i(99836),c=i(6986),d=i(89189);const u=n.memo((function(e){const[t,i]=n.useState(!1),u=n.useCallback((()=>{const{connector:e}=(0,l.Tb)();e.permissionViewClicked("settingPopup"),(0,c.OB)().bgRpc.api.requestGrantPermissionAndReloadExtOnAccept(s.d.nativeMessaging)}),[]);return n.useEffect((()=>{e.url&&Promise.all([(0,c.OB)().bgRpc.api.getSystemInfo().then((({os:t})=>a.R.shouldEnableFieldIntegration(t,(0,c.OB)(),e.url,e.domain))),r.C.isGranted(s.d.nativeMessaging)]).then((([e,t])=>{i(e&&!t)}))}),[]),n.useEffect((()=>{t&&(0,l.Tb)().connector.permissionViewShow("settingPopup")}),[t]),t?n.createElement(o.w,null,n.createElement(d.b,{onClick:u})):null}))},89189:(e,t,i)=>{i.d(t,{b:()=>d});var n=i(49231),a=i(32080),r=i(57129),s=i(30302),o=i(21428),l=i(87118),c=i(58438);const d=e=>n.createElement(a.k,{direction:"row",style:{gap:"12px",width:"100%",backgroundColor:r.Gold0,borderBottom:`1px solid ${r.Gold10}`},padding:"8px 16px 10px 16px"},n.createElement(a.k,{width:"36px"},n.createElement(c.u,null)),n.createElement(a.k,{direction:"column",style:{gap:"8px"}},n.createElement(a.k,{direction:"column",style:{gap:"2px"}},n.createElement(s.X,{as:"h1",variant:"heading-xxsmall",style:{marginTop:"4px"}},"Boost Grammarly’s Performance"),n.createElement(o.x,{as:"p",variant:"text-xsmall"},"Allow the Grammarly Chrome extension to connect with the desktop app to provide suggestions faster.")),n.createElement(l.z,{variant:"ghost",onClick:e.onClick,text:"Continue",size:"small",style:{position:"relative",left:"-8px"}})))},86882:(e,t,i)=>{i.d(t,{C:()=>n});var n,a=i(91981);!function(e){e.isGranted=function(e,t=(0,a.O)().browserApi.permissions){return t?t.contains({permissions:[e]}):Promise.resolve(!1)},e.request=function(e,t=(0,a.O)().browserApi.permissions){return t?t.request({permissions:[e]}):Promise.resolve(!1)}}(n||(n={}))},52341:(e,t,i)=>{var n;i.d(t,{d:()=>n}),function(e){e.nativeMessaging="nativeMessaging",e.clipboardRead="clipboardRead"}(n||(n={}))},92203:(e,t,i)=>{i.d(t,{V:()=>r,X:()=>s});var n=i(4798),a=i(81259);function r(e){return e.isGateEnabled(n.K.GOSRollout)||"test"===e.getTreatment(a.p.GOSRollout)}function s(e){return!!r(e)&&(e.isGateEnabled(n.K.OggyOnGOS)||"test"===e.getTreatment(a.p.OggyOnGOS))}},66608:(e,t,i)=>{i.d(t,{x:()=>r});var n=i(49231),a=i(97310);function r({node:e}){const t=n.useContext(a.nS.Context);return n.useEffect((()=>{if(t&&!e.isConnected)return t.prepend(e),()=>e.remove()}),[e]),null}},53829:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(49231),a=i(80016),r=i(74514),s=i(50899),o=i(66608);function l(e){const t=n.useMemo((()=>{const e=document.createElement("div");e.style.position="absolute",e.style.zIndex=String(s.op);const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=(0,r.n)("designSystem"),e.appendChild(t),e}),[]);return n.createElement(n.Fragment,null,n.createElement(a.D,{default:t},n.createElement(r.L,{chunkName:"designSystem"},e.children)),n.createElement(o.x,{node:t}))}},45474:(e,t,i)=>{i.d(t,{SU:()=>b,U8:()=>S,_c:()=>f,gm:()=>w,ol:()=>v});var n=i(90023),a=i(49231),r=i(50750),s=i(59179),o=i(18519),l=i(66878),c=i(84714),d=i(14969),u=i(13391),p=i(58303),g=i(81259),h=i(4798),m=i(70932);const f=e=>"test"===e.getTreatment(g.p.InProductDiscount),v=(e,t)=>!e.anonymous&&!e.premium&&t.isGateEnabled(h.K.InProductDiscountSpecialOffer),b=e=>(0,n.zG)(r.D(e.getSpecialOffer({names:["in_product_discount_pro"]})),s.U((0,n.ls)(p.Uo,p.tS((e=>p.ij(e.in_product_discount_pro))),p.UI((e=>!0===e.eligibility)))),o.V(2e3),l.K((()=>(m.Y.create("inProductDiscount").warn("getSpecialOffer request did not finish within 2000ms"),c.of(p.of(!1))))),d.P()),w=(e,t)=>u.h.combine(e,t,((e,t)=>({...e,hasSpecialOffer:t}))),S=a.createContext({hasSpecialOffer:u.h.create(!1)})},90342:(e,t,i)=>{if(i.d(t,{O:()=>r}),3075==i.j)var n=i(90023);if(3075==i.j)var a=i(91817);function r(e){return(0,n.zG)(e,(0,a.H6)("gdocsPlagiarismButtonClick","plagiarismAlertEditToLook"))}},35063:(e,t,i)=>{i.d(t,{Zq:()=>a,qQ:()=>s,u1:()=>r});var n=i(31854);function a(e,t){return{type:n.lY.Type.sduiCardAction,actions:e,sourceId:t,cardId:"",scope:{alertRefs:[]}}}const r=e=>e.startsWith("Plagiarism/Plagiarism/UnoriginalContent"),s={enablePlagiarismSearch:()=>{throw new Error("Not implemented enablePlagiarismSearch")},disablePlagiarismSearch:()=>{throw new Error("Not implemented disablePlagiarismSearch")}}},62566:(e,t,i)=>{i.d(t,{u:()=>c});var n=i(21250),a=i(43525),r=i(5733),s=i(13391);const o={priority:n.P.Priority.low,timeout:n.P.DefaultTimeout,position:n.P.Position.bottomRight,viewType:n.P.ViewType.standard};var l;!function(e){e.createFactory=function(){return{referenceCopied:a.r.createBuilder().build(o)}}}(l||(l={}));const c=new r.y(s.h.create([]),l.createFactory(),1,5e3)},86952:(e,t,i)=>{i.d(t,{T:()=>r});var n=i(49231);if(3075==i.j)var a=i(22133);function r(){return n.createElement("div",{"data-grammarly-part":"plagiarism-footer-loader",style:{display:"flex",justifyItems:"flex-start",gap:"8px"}},n.createElement("div",null,a.m),n.createElement("p",{style:{fontSize:"12px",color:"#6D758D"}},"One moment, checking updated text ..."))}},22133:(e,t,i)=>{i.d(t,{m:()=>a});var n=i(49231);const a=n.createElement("svg",{width:"28",height:"36",viewBox:"0 0 28 36",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.753 19.0813C22.1893 19.0134 23.798 29.1843 24.0765 31.8872C24.1134 32.2449 23.8297 32.54 23.4701 32.54L4.0362 32.54C3.67648 32.54 3.39275 32.245 3.43014 31.8872C3.71078 29.2023 5.32414 19.1492 13.753 19.0813ZM13.753 16.3491C17.5002 16.4275 24.1112 10.446 24.1307 2.89034C24.1362 0.755411 22.4849 1.34762 20.1116 2.19872C18.4408 2.79791 16.4122 3.52541 14.352 3.52001C12.1688 3.51428 9.95019 2.84258 8.08428 2.27767C5.36044 1.45302 3.38826 0.855938 3.37536 2.89034C3.33347 9.50154 10.0059 16.2707 13.753 16.3491Z",fill:"#EDF5FF"}),n.createElement("path",{d:"M13.753 19.0813L13.7555 19.3961L13.753 19.0813ZM24.1307 2.89034L24.4455 2.89115L24.1307 2.89034ZM13.753 16.3491L13.7596 16.0343L13.753 16.3491ZM20.1116 2.19872L20.0054 1.90239L20.1116 2.19872ZM14.352 3.52001L14.3528 3.20519L14.352 3.52001ZM8.08428 2.27767L7.99306 2.57898L8.08428 2.27767ZM3.37536 2.89034L3.06056 2.88834L3.37536 2.89034ZM3.43014 31.8872L3.74325 31.9199L3.43014 31.8872ZM24.3897 31.855C24.2491 30.4902 23.7722 27.2249 22.2533 24.3001C20.7297 21.3661 18.1289 18.7312 13.7504 18.7665L13.7555 19.3961C17.8134 19.3634 20.2352 21.7801 21.6946 24.5903C23.1587 27.4097 23.6255 30.5813 23.7634 31.9195L24.3897 31.855ZM4.0362 32.8549L23.4701 32.8549L23.4701 32.2252L4.0362 32.2252L4.0362 32.8549ZM13.7504 18.7665C9.37936 18.8017 6.78114 21.4381 5.25692 24.3571C3.73746 27.2671 3.25878 30.4984 3.11703 31.8545L3.74325 31.9199C3.88214 30.5911 4.35046 27.4534 5.81505 24.6486C7.27487 21.8528 9.69774 19.4288 13.7555 19.3961L13.7504 18.7665ZM23.8159 2.88953C23.8064 6.57564 22.1878 9.88931 20.1027 12.2753C19.0609 13.4675 17.9086 14.4209 16.7943 15.0697C15.6752 15.7212 14.6175 16.0523 13.7596 16.0343L13.7465 16.6638C14.7622 16.6851 15.9361 16.2979 17.1111 15.6138C18.2908 14.927 19.495 13.9275 20.5768 12.6896C22.7388 10.2156 24.4355 6.76071 24.4455 2.89115L23.8159 2.88953ZM20.2179 2.49506C20.8138 2.28135 21.3522 2.08842 21.8294 1.94983C22.3101 1.81025 22.7019 1.73417 23.0077 1.73954C23.3064 1.74477 23.4833 1.82579 23.5961 1.96239C23.719 2.11124 23.8172 2.38657 23.8159 2.88953L24.4455 2.89115C24.447 2.32665 24.3408 1.87541 24.0815 1.56144C23.8121 1.23523 23.4288 1.11719 23.0187 1.11C22.6157 1.10294 22.1501 1.20107 21.6538 1.34518C21.1541 1.49029 20.5961 1.69055 20.0054 1.90239L20.2179 2.49506ZM14.3512 3.83482C16.4756 3.8404 18.5559 3.0911 20.2179 2.49506L20.0054 1.90239C18.3258 2.50472 16.3488 3.21043 14.3528 3.20519L14.3512 3.83482ZM7.99306 2.57898C9.85098 3.14147 12.114 3.82895 14.3512 3.83482L14.3528 3.20519C12.2236 3.19961 10.0494 2.54369 8.1755 1.97636L7.99306 2.57898ZM3.69017 2.89233C3.6931 2.42976 3.80694 2.18451 3.95006 2.04891C4.09608 1.91056 4.33403 1.82756 4.71395 1.82668C5.09238 1.82579 5.56475 1.90666 6.1258 2.04507C6.68437 2.18286 7.30993 2.37216 7.99306 2.57898L8.1755 1.97636C7.49671 1.77086 6.8543 1.57628 6.27661 1.43376C5.70139 1.29186 5.16918 1.19598 4.71248 1.19705C4.25727 1.19811 3.82951 1.29575 3.517 1.59185C3.2016 1.8907 3.06407 2.33371 3.06056 2.88834L3.69017 2.89233ZM13.7596 16.0343C12.9064 16.0165 11.8452 15.6128 10.7164 14.8789C9.59395 14.149 8.43258 13.1106 7.38401 11.8666C5.28175 9.37254 3.66986 6.09768 3.69017 2.89233L3.06056 2.88834C3.03897 6.2942 4.74232 9.70951 6.90259 12.2724C7.98527 13.5569 9.19198 14.6387 10.3732 15.4067C11.548 16.1706 12.7261 16.6425 13.7465 16.6638L13.7596 16.0343ZM4.0362 32.2252C3.85034 32.2252 3.7266 32.0793 3.74325 31.9199L3.11703 31.8545C3.05889 32.4107 3.50263 32.8549 4.0362 32.8549L4.0362 32.2252ZM23.7634 31.9195C23.7798 32.0792 23.6556 32.2252 23.4701 32.2252L23.4701 32.8549C24.0037 32.8549 24.4469 32.4106 24.3897 31.855L23.7634 31.9195Z",fill:"#1F243C"}),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1703 13.6849C17.7789 14.966 16.2896 15.8447 14.9816 16.1887V19.1477C23.5373 20.1649 24.1307 32.5404 24.1307 32.5404H3.37537C3.37537 32.5404 3.96598 20.3668 12.463 19.1749V16.1037C11.281 15.707 9.95321 14.852 8.68529 13.6849C9.94457 12.3355 16.5556 12.3355 19.1703 13.6849Z",fill:"#F9EA9E"}),n.createElement("path",{d:"M14.9816 16.1887L14.9015 15.8842L14.6667 15.946V16.1887H14.9816ZM19.1703 13.6849L19.3836 13.9165L19.7148 13.6116L19.3147 13.4051L19.1703 13.6849ZM14.9816 19.1477H14.6667V19.4273L14.9444 19.4603L14.9816 19.1477ZM24.1307 32.5404V32.8552H24.461L24.4452 32.5253L24.1307 32.5404ZM3.37537 32.5404L3.06092 32.5252L3.04491 32.8552H3.37537V32.5404ZM12.463 19.1749L12.5068 19.4867L12.7779 19.4487V19.1749H12.463ZM12.463 16.1037H12.7779V15.8772L12.5632 15.8052L12.463 16.1037ZM8.68529 13.6849L8.45513 13.4701L8.23887 13.7018L8.47208 13.9165L8.68529 13.6849ZM15.0616 16.4931C16.4336 16.1324 17.9668 15.2209 19.3836 13.9165L18.9571 13.4533C17.5909 14.7111 16.1457 15.557 14.9015 15.8842L15.0616 16.4931ZM15.2964 19.1477V16.1887H14.6667V19.1477H15.2964ZM24.1307 32.5404C24.4452 32.5253 24.4452 32.5252 24.4452 32.525C24.4452 32.5249 24.4451 32.5246 24.4451 32.5244C24.4451 32.5238 24.4451 32.5231 24.445 32.5222C24.4449 32.5205 24.4448 32.5179 24.4446 32.5147C24.4443 32.5081 24.4438 32.4987 24.443 32.4863C24.4416 32.4617 24.4393 32.4257 24.436 32.379C24.4294 32.2855 24.4186 32.1494 24.4019 31.9764C24.3684 31.6303 24.311 31.1363 24.2151 30.5408C24.0236 29.3511 23.6777 27.7504 23.059 26.1142C21.8265 22.8542 19.4729 19.3646 15.0187 18.8351L14.9444 19.4603C19.0459 19.9479 21.267 23.1547 22.4701 26.3368C23.0692 27.9216 23.4064 29.4784 23.5935 30.6409C23.687 31.2215 23.7428 31.7023 23.7752 32.037C23.7914 32.2043 23.8017 32.3351 23.8079 32.4234C23.8111 32.4676 23.8132 32.5012 23.8145 32.5234C23.8152 32.5346 23.8156 32.5429 23.8159 32.5482C23.816 32.5509 23.8161 32.5529 23.8162 32.5541C23.8162 32.5547 23.8163 32.5551 23.8163 32.5554C23.8163 32.5555 23.8163 32.5555 23.8163 32.5556C23.8163 32.5556 23.8163 32.5555 24.1307 32.5404ZM3.37537 32.8552H24.1307V32.2256H3.37537V32.8552ZM12.4193 18.8632C7.99959 19.4831 5.66316 22.9612 4.43842 26.1931C3.82383 27.8149 3.48002 29.3957 3.28966 30.5693C3.19439 31.1567 3.13732 31.6435 3.10402 31.9844C3.08736 32.1549 3.07664 32.289 3.07006 32.381C3.06677 32.427 3.06451 32.4624 3.06306 32.4867C3.06234 32.4988 3.06182 32.5082 3.06147 32.5146C3.0613 32.5178 3.06117 32.5203 3.06108 32.5221C3.06103 32.523 3.061 32.5237 3.06097 32.5242C3.06096 32.5244 3.06094 32.5247 3.06094 32.5248C3.06093 32.525 3.06092 32.5252 3.37537 32.5404C3.68981 32.5557 3.68981 32.5557 3.68981 32.5558C3.68981 32.5557 3.68981 32.5557 3.68982 32.5556C3.68983 32.5553 3.68985 32.5549 3.68988 32.5543C3.68994 32.5531 3.69004 32.5512 3.69018 32.5486C3.69047 32.5433 3.69092 32.5352 3.69158 32.5242C3.69288 32.5024 3.69498 32.4693 3.69809 32.4259C3.7043 32.339 3.71457 32.2103 3.73066 32.0456C3.76285 31.7161 3.81831 31.2426 3.91117 30.6701C4.09709 29.5239 4.432 27.9868 5.02719 26.4162C6.22203 23.2632 8.42943 20.0586 12.5068 19.4867L12.4193 18.8632ZM12.1482 16.1037V19.1749H12.7779V16.1037H12.1482ZM8.47208 13.9165C9.76014 15.1022 11.1254 15.9868 12.3629 16.4021L12.5632 15.8052C11.4366 15.4271 10.1463 14.6019 8.8985 13.4533L8.47208 13.9165ZM19.3147 13.4051C17.9391 12.6952 15.5709 12.358 13.4195 12.358C12.3366 12.358 11.2887 12.4433 10.425 12.6172C9.99323 12.7042 9.60067 12.8146 9.26998 12.9511C8.94292 13.0862 8.65579 13.2551 8.45513 13.4701L8.91545 13.8997C9.02961 13.7773 9.22454 13.6511 9.51027 13.5331C9.79237 13.4166 10.1433 13.3162 10.5493 13.2345C11.3611 13.071 12.3654 12.9877 13.4195 12.9877C15.5421 12.9877 17.7868 13.3252 19.026 13.9646L19.3147 13.4051Z",fill:"#1F243C"}),n.createElement("rect",{x:"0.5",y:"1.00195",width:"26.4444",height:"4.40741",rx:"2.2037",fill:"#638EEB",stroke:"#1F243C",strokeWidth:"0.62963"}),n.createElement("rect",{x:"26.9445",y:"35.002",width:"26.4444",height:"4.4074",rx:"2.2037",transform:"rotate(-180 26.9445 35.002)",fill:"#638EEB",stroke:"#1F243C",strokeWidth:"0.62963"}))},24348:(e,t,i)=>{i.d(t,{u:()=>a,y:()=>n});var n,a,r=i(17613),s=i(56193),o=i(11456),l=i(68636);function c({id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:a,revertDelta:r,highlightRanges:s,highlightTexts:l,transformRange:c,transformText:d,title:u}){return{_tag:o.b.touchTypist,id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:a,revertDelta:r,revision:"",highlightRanges:s,highlightTexts:l,transformRange:c,transformText:d,transforms:[],extraProperties:{},title:u}}!function(e){e.Preview="Preview",e.RecentRevert="RecentRevert",e.Revert="Revert"}(n||(n={})),function(e){function t(e,t){const i=e=>""===e.trim();return i(e)||i(t)?i(t)?`Removed “${e}”`:`Added “${t}”`:e}e.is=function(e){return e._tag===o.b.touchTypist},e.equals=function(e,t){return o.S.ordering.areSame(e,t)},e.createHighlightsMeta=function(e,t){return{highlightId:t,alertId:e.id,...function(e){switch(e){case n.Preview:{const e=(0,s.Y)()?l.jk.underlineAndPersistentBackground:l.jk.underlineAndBackground;return{highlightColor:l.hE.Preset.create(l.al.red),highlightDisplayFormat:e}}case n.RecentRevert:return{highlightColor:l.hE.Preset.create(l.al.green),highlightDisplayFormat:l.jk.background};case n.Revert:return{highlightColor:l.hE.Preset.create(l.al.gray),highlightDisplayFormat:l.jk.dottedUnderlineAndBackground};default:(0,r.L0)(e)}}(e.kind),highlightDisappearOnHoverDelay:null,highlightLiveliness:null}},e.fromPreview=function(){return({id:e,touchTypistId:t,begin:i,end:a,original:r,highlight:s,replacement:o,delta:l,reverseDelta:d})=>{const u={start:s.s,end:s.e},p=s.text,g={start:i,end:a},h=r;return c({id:String(e),touchTypistId:t,kind:n.Preview,replacement:o,previewDelta:l,revertDelta:d,highlightRanges:[u],highlightTexts:[p],transformRange:g,transformText:h,title:""})}},e.fromRevert=function(){return({revertId:e,touchTypistId:i,highlightBegin:a,highlightEnd:r,highlightText:s,text:o,isRecent:l,correspondingPreview:d})=>{const u={start:a,end:r},p=u,g=s;return c({id:String(e),touchTypistId:i,kind:l?n.RecentRevert:n.Revert,replacement:o,previewDelta:d.delta,revertDelta:d.reverseDelta,highlightRanges:[u],highlightTexts:[s],transformRange:p,transformText:g,title:t(o,d.replacement)})}},e.createRevertTitle=t}(a||(a={}))},82478:(e,t,i)=>{i.d(t,{F:()=>b});var n=i(49231),a=i(56424),r=i(32080),s=i(2516),o=i(96314),l=i(21428),c=i(88640),d=i(22389),u=i(22303),p=i(48666),g=i(87118),h=i(47387),m=i(13391),f=i(83135),v=i(38587);const b=({settings:e,isMac:t,actions:i,gnar:b})=>{var w,S;const y=null===(w=null==e?void 0:e.enabled)||void 0===w||w,E=n.useRef(null),C=m.h.create(!1),k=null!==(S=null==e?void 0:e.hotkey)&&void 0!==S?S:"Tab",_=new f.c(k,C);n.useEffect((()=>{const e=_.listenToHotkeyChange(t);return()=>{e.unsubscribe()}})),n.useEffect((()=>{const e=_.isActiveHotkeyChange.subscribe((e=>{e&&setTimeout((()=>{E.current&&(E.current.focus(),C.set(!0))}),0)}));return()=>e.unsubscribe()}),[_.isActiveHotkeyChange]);const A=()=>{const e=_.tmpHotkey.get();e===k?_.onDismissHotkeyChange():(_.onApplyHotkeyChange(i),b.touchTypistSettingsEditHotkeyButtonClick(e))};return n.createElement(r.k,{direction:"column",gap:2},n.createElement(r.k,{gap:2,justify:"start",className:v.heading,color:"base-default"},"Quick fix",n.createElement(s.V,{label:"Beta",variant:"addition"})),n.createElement(o.r,{label:"Accept all critical suggestions with a key",isSelected:y,onChange:e=>{i.toggleTouchTypist(e),b.touchTypistSettingsToggleClick(e?"on":"off")}}),n.createElement(r.k,{direction:"row",justify:"space-between",align:"center"},n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall",className:v.labelsFont},"Quick fix key"),n.createElement(h.F.div,{className:v.labelsFont},m.h.combine(_.tmpHotkey,_.isActiveHotkeyChange,((e,t)=>t?n.createElement(c.n,{ref:E,value:e,style:{width:a.ux.px(130)},labelDisplay:"hidden",label:"Change quick fix key",onBlur:()=>C.set(!1)}):n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall"},e)))),n.createElement(h.F.div,null,_.isActiveHotkeyChange.view((e=>e?n.createElement(r.k,{gap:.5},n.createElement(d.h,{"data-testid":"accept-shortcut-change",accessibilityLabel:"Accept",style:{backgroundColor:"#11A683"},variant:"primary",icon:u.L,onClick:A}),n.createElement(d.h,{"data-testid":"dismiss-shortcut-change",accessibilityLabel:"Dismiss",variant:"secondary",icon:p.V,onClick:()=>_.onDismissHotkeyChange()})):n.createElement(g.z,{variant:"ghost",onClick:()=>_.onIsActiveHotkeyChange()},"Edit"))))))}},56193:(e,t,i)=>{i.d(t,{Y:()=>r});var n=i(81259),a=i(6986);function r(){return"test"===(0,a.OB)().experimentClient.getTreatment(n.p.TouchTypistFeatureParityFree)||"test"===(0,a.OB)().experimentClient.getTreatment(n.p.TouchTypistFeatureParityProAndPremium)}},83135:(e,t,i)=>{i.d(t,{c:()=>d});var n=i(84308),a=i(59179),r=i(20161),s=i(36344),o=i(63532),l=i(13391),c=i(19486);class d{constructor(e,t){this._lastSubmittedShortcutValue=e,this._isInputFocused=t,this._isActiveHotkeyChange=l.h.create(!1),this.onApplyHotkeyChange=e=>{e.setTouchTypistHotkey({hotkey:this._tmpHotkey.get()}),this._isActiveHotkeyChange.set(!1)},this.onDismissHotkeyChange=()=>{this._tmpHotkey.set(this._lastSubmittedShortcutValue),this._isActiveHotkeyChange.set(!1)},this.onIsActiveHotkeyChange=()=>{this._isActiveHotkeyChange.set(!0)},this._tmpHotkey=l.h.create(this._lastSubmittedShortcutValue)}listenToHotkeyChange(e){return n.a([this._isActiveHotkeyChange,this._isInputFocused]).pipe(a.U((([e,t])=>e&&t)),r.w((t=>t?(0,c.A8)(self,e):s.E)),o.b((({shortcut:e})=>{this._tmpHotkey.set(e)}))).subscribe()}get isActiveHotkeyChange(){return this._isActiveHotkeyChange}get tmpHotkey(){return this._tmpHotkey}}},19486:(e,t,i)=>{i.d(t,{A8:()=>b,_w:()=>w});var n=i(44071),a=i(13712),r=i(29416),s=i(63532),o=i(97092),l=i(59179),c=i(90572);if(6168!=i.j)var d=i(44045);if(6168!=i.j)var u=i(13391);function p(e){const t=new Set;return e.filter((e=>{const i=e.code.toLowerCase();return!t.has(i)&&(t.add(i),!0)}))}function g(e,t){return"ControlLeft"===e.code||"ControlRight"===e.code?t?"⌃":"Ctrl":"ShiftLeft"===e.code||"ShiftRight"===e.code?"⇧":"AltLeft"===e.code||"AltRight"===e.code?t?"⌥":"Alt":"MetaLeft"===e.code||"MetaRight"===e.code?t?"⌘":"Win":"ArrowUp"===e.code?"↑":"ArrowDown"===e.code?"↓":"ArrowLeft"===e.code?"←":"ArrowRight"===e.code?"→":"Home"===e.code?"Home":"End"===e.code?"End":"PageUp"===e.code?"PageUp":"PageDown"===e.code?"PageDown":"Backspace"===e.code?"Backspace":"Delete"===e.code?"Delete":"Enter"===e.code?"Enter":"Tab"===e.code?"Tab":"Space"===e.code?"Space":e.code.startsWith("F")&&!isNaN(parseInt(e.code.substring(1),10))?e.code:"Escape"===e.code?"ESC":"CapsLock"===e.code?"CapsLock":"NumLock"===e.code?"NumLock":"ScrollLock"===e.code?"ScrollLock":"PrintScreen"===e.code?"PrintScreen":"Pause"===e.code?"Pause":"MediaPlayPause"===e.code?"MediaPlayPause":"VolumeUp"===e.code?"VolumeUp":"VolumeDown"===e.code?"VolumeDown":"AudioVolumeMute"===e.code?"Mute":e.code.startsWith("Digit")?e.code.slice(5):e.code.startsWith("Numpad")?e.code.slice(6):"Equal"===e.code?e.shiftKey?"plus":"=":"Minus"===e.code?"-":"NumpadAdd"===e.code?"plus":"NumpadSubtract"===e.code?"-":"NumpadEqual"===e.code?"=":null}function h(e){return function(t){return{shortcut:t.map((t=>{const i=g(t,e);return i||(t.code.toLowerCase().startsWith("key")?t.code.slice(3):t.code)})).join("")}}}function m(e,t,i){return n=>{const a=t.get(),r=function(e,t,i){return["Tab","Enter","Backspace","ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].some((n=>e===n&&t===g({code:e},i)))}(n.code,a,i);r&&(n.preventDefault(),n.stopImmediatePropagation()),e.set([...e.get(),n])}}function f(e){e.preventDefault(),e.stopImmediatePropagation()}function v(e){return e.sort(((e,t)=>t.code.length-e.code.length))}function b(e,t){const i=n.R(e,"keydown",{capture:!0}).pipe(a.g("code")),d=n.R(e,"keyup",{capture:!0}).pipe(r.b(50));return i.pipe(s.b(f),o.f(d),l.U(p),c.h((e=>e.length>0)),l.U(v),l.U(h(t)))}function w(e,t,i){const o=n.R(e,"keydown",{capture:!0}).pipe(a.g("code")),g=n.R(e,"keyup",{capture:!0}).pipe(r.b(50)),f=u.h.create([]);return o.pipe(s.b(m(f,i,t)),d.R(g),l.U((()=>f.get())),l.U(p),c.h((e=>e.length>0)),l.U(v),l.U((e=>{const{shortcut:i}=h(t)(e);return{shortcut:i,events:e}})))}},24653:(e,t,i)=>{i.d(t,{_:()=>a,y:()=>r});var n=i(81259);const a=e=>{const t=e.peekTreatment(n.p.ExtensionSettingsUphookHub);return"test"===t||"control"===t},r=e=>"test"===e.peekTreatment(n.p.ExtensionSettingsUphookHub)},21448:(e,t,i)=>{i.d(t,{Qi:()=>r,jc:()=>s,nE:()=>a});const n=e=>e.reduce(((e,t)=>{const i=t.lensType;return e[i]=e[i]?e[i]+1:1,e}),{}),a=(e,t)=>{const{placement:i,bannerType:a,advancedAlerts:r=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:p}=t,g=n(r);e.getPremiumButtonShow(i,a,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:r.length>0)?r.length:void 0,l,c,d,u,p)},r=(e,t)=>{const{placement:i,bannerType:a,advancedAlerts:r=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:p}=t,g=n(r);e.getPremiumButtonClick(i,a,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:r.length>0)?r.length:void 0,l,c,d,u,p)},s=(e,t)=>{const{placement:i,bannerType:a,advancedAlerts:r=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:p}=t,g=n(r);e.dismissUpHookButtonClick(i,a,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:r.length>0)?r.length:void 0,l,c,d,u,p)}},26488:(e,t,i)=>{i.d(t,{B:()=>n});var n,a=i(32073),r=i(4603),s=i(68970),o=i(98785),l=i(13593),c=i(28891),d=i(25509);!function(e){function t(e){const t=()=>{e.bgRpc.api.sendToPopup({kind:o.I.Kind.sendCsLogs,option:{logs:e.historyLogsService.getLogs(),isIframeIntegration:(0,s.n_)()}})};return e.message.on(o.B.Kind.sendCsLogsToPopup,t),{dispose(){e.message.off(o.B.Kind.sendCsLogsToPopup,t)}}}function i(e){return[new c.r("bg",(()=>e.bgRpc.api.getBGLogs()),c.r.getLogsFromSessionStorageFallbackGetter(d.v.bgHistoryLogs)),new c.r("cs",(()=>Promise.resolve(e.historyLogsService.getLogs())),c.r.getLogsFromSessionStorageFallbackGetter(d.v.csHistoryLogs))]}function n(e){return e.message.on(o.B.Kind.downloadDebugReportsFromCS,p),{dispose(){e.message.off(o.B.Kind.sendCsLogsToPopup,p)}}}function u(e){const t=(0,s.n_)()?new a.w0:l.E.initKeyboardShortcutHandler(i(e));return{dispose(){t.unsubscribe()}}}function p(){const e=i((0,r.OB)());l.E.download(e)}e.initSendLogsToPopupHandler=t,e.initDownloadDebugReportsListener=n,e.initKeyboardShortcutHandler=u,e.initListeners=function(e){const i=[t(e),u(e),n(e)];return{dispose(){i.forEach((e=>{e.dispose()}))}}},e.download=p}(n||(n={}))},98350:(e,t,i)=>{i.d(t,{N:()=>o,h:()=>l});var n=i(39953);if(6168!=i.j)var a=i(92147);if(6168!=i.j)var r=i(11456);var s=i(74983);const o=(e,t,i,a)=>{(0,n.zG)(t,s.$.match({withPosition:n=>e.warn(`positioned alert #${t.id} inconsistent with document text: alert (${JSON.stringify(n.transformText)}, ${JSON.stringify(n.highlightTexts)}) vs text (${JSON.stringify(i.slice(n.transformRange.start,n.transformRange.end))}, ${JSON.stringify(n.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`),withTransformJSON:t=>{e.warn(`transformJson alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.transformText)}, ${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(i.slice(t.transformRange.start,t.transformRange.end))}, ${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`)},withSubAlerts:t=>e.warn(`super alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`)}))},l=(e,t)=>{r.S.isCommonAlert(t)&&r.S.isRevertAutoApplyAlert(t)&&e.autoApply.inconsistentRevertAlertError((0,a.Cg)(),t.originalPatternName)}},8923:(e,t,i)=>{var n;i.d(t,{i:()=>n}),function(e){e.textChange="textChange",e.reset="reset",e.alertAccepted="alertAccepted",e.alertUpdate="alertUpdate",e.capiRemove="capiRemove",e.ignore="ignore"}(n||(n={}))},66813:(e,t,i)=>{i.d(t,{IH:()=>s,JH:()=>m,SV:()=>r,W8:()=>h});var n=i(90023);if(6168!=i.j)var a=i(1747);var r,s,o=i(68717),l=i(31854),c=i(74822),d=i(17613),u=i(58303);if(6168!=i.j)var p=i(75325);!function(e){let t,i;!function(e){e.alertApply="alertApply",e.alertIgnore="alertIgnore"}(t=e.Kind||(e.Kind={})),function(e){e.assistant="assistant",e.sidebar="sidebar",e.inlineCard="inlineCard"}(i=e.Source||(e.Source={})),e.isAlertApply=function(e){return e.kind===t.alertApply},e.isAlertIgnore=function(e){return e.kind===t.alertIgnore}}(r||(r={})),(0,d.L0)(void 0),function(e){e.create=function(){return new g}}(s||(s={}));class g{constructor(){this.events=new c.x}next(e){this.events.next(e)}}function h(e,t,i){switch(t){case p.H.apply:return u.G({kind:r.Kind.alertApply,source:r.Source.inlineCard,alertId:a.wQ.Id.create(e),freePremium:i});case p.H.ignore:return u.G({kind:r.Kind.alertIgnore,source:r.Source.inlineCard,alertId:a.wQ.Id.create(e),freePremium:i});default:return u.YP}}function m(e,t){return i=>{switch(i.type){case l.lY.Type.alertApply:return(0,n.zG)(e.getById(i.alertId),u.tS(o.bZ.getRawId),u.UI((e=>({kind:r.Kind.alertApply,source:t,alertId:e}))));case l.lY.Type.alertIgnore:return(0,n.zG)(e.getById(i.alertId),u.tS(o.bZ.getRawId),u.UI((e=>({kind:r.Kind.alertIgnore,source:t,alertId:e}))));default:return u.YP}}}},1596:(e,t,i)=>{i.d(t,{M:()=>P,O:()=>L});var n=i(64271),a=i(93440),r=i(59179),s=i(10883),o=i(20161),l=i(14969),c=i(44045),d=i(29479),u=i(1747),p=i(90572),g=i(55100),h=i(43175),m=i(35063),f=i(24348),v=i(8923),b=i(11456),w=i(94525),S=i(52979),y=i(68636),E=i(99836),C=i(57935),k=i(70932),_=i(76667);var A=i(77432);function I(e){return e.isPremium&&e.isHidden}var x=i(84714),T=i(5588);var M=i(79992);function R(e){return(0,n.T)((t=e.textRevisionManager.revisionChanges,t.pipe((0,T.D)((e=>1===Math.abs(e.deltaChanges.length)?(0,a.H)(1e3).pipe((0,r.U)((()=>e))):(0,x.of)(e))))),L(e.textObserver,e.layout)).subscribe((t=>{!function(e,t,i,n,a){if(e){const e=(0,M.DV)((()=>t.processPendingTextRevisions()),(e=>(a.warn("alertProcessor: processing text revision failed",e),null)));try{const r=e&&e.transformedAlerts.map((e=>t.alerts.getAlertById(e.id))).filter((e=>null!==e))||[];try{const e=r.flatMap((e=>i.get(e.id)||[]));n.maintainConsistency(e,void 0,void 0,((e,t)=>r.some((e=>e.id===t.alertId))))}catch(e){a.error("error maintaining highlight consistency",e)}}catch(e){a.error("failed on update/maintain",e)}}try{n.recalculateAllHighlights()}catch(e){a.error("error recalculating highlights",e)}}(t,e.alertProcessor,e.alertIdToHighlightIds,e.highlights,e.log)}));var t}class P{constructor(e,t,i,a,s,o,l,c=k.Y.create("AquaAlertsWiring"),d,u,p,g,h){this._alertProcessor=e,this._highlights=t,this._alertFilter=i,this._textObserver=a,this._textRevisionManager=s,this._layout=o,this._felog=l,this._log=c,this._isAssistantOpened=d,this._showInlineYellowUnderlines=u,this._showInlineLockedUIUnderlines=p,this._showColoredLockedUIUnderlines=g,this._isLockedUIExperimentTreatmentGroup=h,this._subs=[],this._alertIdToHighlightIds=new Map,this._alertsToProcessOnFilterChange=this._alertFilter.pipe((0,r.U)((e=>{const t=[],i=[];for(const e of this._alertProcessor.alerts.getAll()){const n=this._alertIdToHighlightIds.get(e.id);n&&n.some((e=>this._highlights.hasHighlight(e)))?i.push(e):t.push(e)}return{addedAlerts:t,updatedAlerts:i,removedAlerts:[],transformedAlerts:[]}}))),this._subs.push(R({alertIdToHighlightIds:this._alertIdToHighlightIds,layout:this._layout,log:this._log,textRevisionManager:this._textRevisionManager,textObserver:this._textObserver,highlights:this._highlights,alertProcessor:this._alertProcessor})),this._subs.push(this._updateHighlightsOnAlertChange()),this._subs.push(function(e,t,i,a){let r=e.getTextSource().getPlainText().length;return(0,n.T)(i.revisionChanges,L(e,t)).subscribe((e=>{if(e){const t=e.deltaChanges.length;if(1===Math.abs(t)){const i=Math.min(...e.changes.map((e=>e.pos)));let n=0;n=r+t-1;const s={start:i,end:n};a.updateHighlightsForTextRange(s,t)}r+=t}}))}(this._textObserver,this._layout,this._textRevisionManager,this._highlights))}static getHighlightColor(e,t,i,n,a,r){const{ethical_ai_highlight_background_color:s,ethical_ai_highlight_underline_color:o,critical_mistake:l,reactivation_yellow_underlines:c}=e.extraProperties,d=A.p.shouldShowInlineYellowUnderlinesForInProductReactivation(c),p=P._shouldReplaceColorWithYellow(e,t,r,a,i,n,d);return d&&(0,E.Tb)().sendFemetricsRate("inProductReactivation.shown",{yellowOnClient:p}),"true"!==l||p?"false"!==l||p?s&&o?y.hE.Custom.create(s,o):p?y.hE.Preset.create(y.al.gold):(0,h.JD)(e.patternName)?y.hE.Preset.create(y.al.gray):(0,g.t)(e.patternName)?y.hE.Preset.create(y.al.green):(0,m.u1)(e.patternName)?y.hE.Preset.create(y.al.plagiarism):e.extraProperties.underline_with_teaser?y.hE.Preset.create(y.al.weHbar):e.impact===u.wQ.Impact.Critical?y.hE.Preset.create(y.al.red):P._outcomeToHighlightColor[e.outcome]:y.hE.Preset.create(y.al.blue):y.hE.Preset.create(y.al.red)}static getHighlightDisplayFormat(e){return e.belongsToKnowledgeHubTermDetails?y.jk.background:e.belongsToKnowledgeHubSuggestedTerm?y.jk.underline:e.isVbar?y.jk.vbar:e.isEnclosing?y.jk.enclosing:e.isEnclosed?e.isMain?y.jk.underline:e.isMainStart?y.jk.underlineStart:y.jk.underlineAndBackground:e.belongsToActiveAlert&&e.belongsToSuperAlert?e.isActive?y.jk.underlineAndBackground:y.jk.background:y.jk.underlineAndBackground}static _extractHighlightInfo(e,t){const i="enclosing"===t.type,n=e.highlightRanges.some((e=>"enclosing"===e.type));return{isEnclosing:i,isEnclosed:n,isMain:"main"===t.type,isMainStart:"main_start"===t.type,isVbar:Boolean(e.extraProperties.vbar),belongsToKnowledgeHubTermDetails:(0,h.Ed)(e),belongsToKnowledgeHubSuggestedTerm:(0,h.kK)(e)}}static getHighlightMeta(e,t,i,n,a,r,s,o){if(b.S.isTouchTypistAlert(e))return f.u.createHighlightsMeta(e,t);const{hColor:l,dFormat:c}=this._getHighlightColorAndFormat(e,i,n,a,r,s,o);return{highlightId:t,alertId:e.id,highlightColor:l,highlightDisplayFormat:c,highlightDisappearOnHoverDelay:null,highlightLiveliness:null}}static _getHighlightColorAndFormat(e,t,i,n,a,r,s){let o=b.S.isCapiAlert(e)?P.getHighlightColor({...e,isPremium:!e.isFree,isHidden:e.isHidden},i,n,a,r,s):null,l=b.S.isCapiAlert(e)?P.getHighlightDisplayFormat(P._extractHighlightInfo(e,t)):null;return e._tag===b.b.snippetsTemplate&&(o=y.hE.Preset.create(y.al.green),l=y.jk.background),{hColor:o,dFormat:l}}_addHighlightsFor(e,t){e.highlightRanges.forEach(((i,n)=>{const a=S.y$.Id.create(e.id,n),r=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...r,a]),this._highlights.addHighlight(a,S.NC.expandIfNeeded(i,t),P.getHighlightMeta(e,a,i,this._isAssistantOpened.get(),this._showInlineYellowUnderlines.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get()))}))}_updateHighlightsFor(e,t){const i=this._alertIdToHighlightIds.get(e.id);if(i&&i.length!==e.highlightRanges.length)this._clearHighlightsFor(e.id),this._addHighlightsFor(e,t);else{const n=[];e.highlightRanges.forEach(((a,r)=>{let s;const o=null==i?void 0:i[r];o?s=o:(s=S.y$.Id.create(e.id,r),n.push(s)),this._highlights.updateHighlight(s,S.NC.expandIfNeeded(a,t),P.getHighlightMeta(e,s,a,this._isAssistantOpened.get(),this._showInlineYellowUnderlines.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get()))}));const a=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...a,...n])}}_updateHighlightsOnAlertChange(){return(0,n.T)(this._alertProcessor.alerts.changes.pipe(_.d5.measure(this._felog.processAlerts.measure)),this._alertsToProcessOnFilterChange.pipe(_.d5.measure(this._felog.processFilterChange.measure))).pipe((0,s.M)(this._alertFilter),(0,r.U)((([{addedAlerts:e,removedAlerts:t,transformedAlerts:i,updatedAlerts:n},a])=>({addedAlerts:e.filter(a),updatedAlerts:n.filter(a),transformedAlerts:i.filter((e=>{const t=this._alertProcessor.alerts.getAlertById(e.id);return!!t&&a(t)})),removedAlerts:[...t.filter((e=>a(e.alert))),...n.filter((e=>!a(e))).map((e=>({id:e.id,alert:e,reason:{_tag:v.i.alertUpdate}})))]}))),p.h((e=>e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0||e.removedAlerts.length>0))).subscribe((e=>{try{for(const t of e.removedAlerts)this._clearHighlightsFor(t.id)}catch(e){this._log.error("failed to remove highlights",e)}if(e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0){const t=this._textObserver.getTextSource().getPlainText();for(const i of e.addedAlerts)try{this._addHighlightsFor(i,t)}catch(e){this._log.warn(`failed to add highlight for #${i.id}`,e)}for(const i of e.updatedAlerts)try{this._updateHighlightsFor(i,t)}catch(e){this._log.error(`failed to update highlight for #${i.id}`,e)}for(const i of e.transformedAlerts)try{const e=this._alertProcessor.alerts.getAlertById(i.id);e&&this._updateHighlightsFor(e,t)}catch(e){this._log.error(`failed to update highlight geometry for #${i.id}`,e)}}}))}_clearHighlightsFor(e){const t=this._alertIdToHighlightIds.get(e);t&&(this._highlights.removeHighlights(t),this._alertIdToHighlightIds.set(e,[]))}static _shouldReplaceColorWithYellow(e,t,i,n,a,r,s){if(function(e){const{free_premium:t}=e.extraProperties;return e.inline===u.wQ.Inline.inline&&I(e)&&"uphook"===t}(e))return!0;if(t){const t=!i||!n;return I(e)&&t||s}return!(!function(e){const{free_premium:t}=e.extraProperties;return e.inline===u.wQ.Inline.inline&&I(e)&&"locked"===t}(e)||!r||n)||(!(!function(e){const{free_premium:t}=e.extraProperties;return e.impact===u.wQ.Impact.Advanced&&"unlocked"!==t}(e)||!a)||!!s)}getHighlightsForAlert(e){return this._alertIdToHighlightIds.get(e)||[]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}function L(e,t){return e.contentChanges.async.pipe((0,o.w)((()=>t.scroll.changes.pipe((0,l.P)(),(0,c.R)((0,a.H)(C.E0)),(0,d.h)(null)))))}P._outcomeToHighlightColor={[w.TC.correctness]:y.hE.Preset.create(y.al.red),[w.TC.clarity]:y.hE.Preset.create(y.al.blue),[w.TC.engagement]:y.hE.Preset.create(y.al.green),[w.TC.tone]:y.hE.Preset.create(y.al.purple),[w.TC.vox]:y.hE.Preset.create(y.al.gray),[w.TC.knowledgeHub]:y.hE.Preset.create(y.al.lightGreen),[w.TC.other]:y.hE.Preset.create(y.al.gold)}},78555:(e,t,i)=>{i.d(t,{o:()=>s});var n=i(56215),a=i(90572),r=i(97767);function s(e,t){const i=t.pipe(a.h((0,r.Kg)(n.hX.is("session_started"),n.hX.is("finish")))).subscribe((t=>{var i;return null===(i=e())||void 0===i?void 0:i.pushStartOrFinishEvent(t)}));return{dispose:()=>i.unsubscribe()}}},29095:(e,t,i)=>{i.d(t,{I:()=>c,O:()=>n});var n,a=i(49231),r=i(39170),s=i(1285),o=i(48886),l=i(311);!function(e){e.Context=a.createContext(s.Y.invariantContent("AssistantTextResources")),e.holder=o.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(n||(n={}));const c=l.Pj(l.GG({denali:r.m.holder,assistant:n.holder}))((()=>({denali:{}})))},77808:(e,t,i)=>{var n;i.d(t,{O:()=>n}),function(e){e.headerHeight=48,e.panelHeight=106,e.predictionsPreviewHeaderHeight=52,e.predictionInsightHeight=52,e.predictionInsightBottomMargin=16}(n||(n={}))},13839:(e,t,i)=>{i.d(t,{t:()=>H});var n=i(90023),a=i(96837),r=i(3492),s=i(51007),o=i(40920),l=i(77178),c=i(31391),d=i(74822),u=i(59179),p=i(64271),g=i(36344),h=i(84714),m=i(90572),f=i(62552),v=i(15015),b=i(704),w=i(14969),S=i(17613),y=i(12518),E=i(58303),C=i(59833),k=i(4025),_=i(35947),A=i(52979),I=i(30033),x=i(64451),T=i(954),M=i(87234),R=i(40840),P=i(70932);class L{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new d.x,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(m.h((t=>t===e)),u.U((()=>this.getByHighlightId(e))),T.O(this.getByHighlightId(e)))}}class F{constructor(e,t,i,n,a=(()=>M.E9.zero),r=P.Y.create("DenaliHighlightsUpdater")){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=n,this._getParentScroll=a,this._log=r}register(e,t,i,n){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,n);{const a=new x.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),r={id:e,alertId:n.alertId,mark:a,visualization:i};this._denaliHighlights.set(e,r);const s=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,R.rX)((0,R.mp)(a.range),s),n),r}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,n){const a=this._denaliHighlights.get(e);if(a){this._denaliHighlights.set(e,{...a,visualization:i});const r=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,R.rX)(t.meta.range(),r),n),a}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var D=i(38508),U=i(57935);class H{constructor(e,t,i,r,s,o,l=P.Y.create("DenaliViewAdapter"),v,b){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=r,this._scroller=s,this._selectedHighlightsTracker=o,this._log=l,this._requestAwaitService=v,this._formattingService=b,this._subs=new c.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this.markChangeApplied=new d.x,this._highlightsDataStore=new L,this._highlightUpdater=new F(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return I.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(u.U((e=>e&&e.visualization.type===x.sO.Change.VisualState.Type.highlighted?{[x.sO.Change.VisualState.Source.sidebar]:A.pc.hoveredNeedsAttention,[x.sO.Change.VisualState.Source.text]:A.pc.hovered,[x.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?A.pc.hovered:A.pc.none}[e.visualization.source]:A.pc.none)))},this._updateContentsBuffer=new d.x,this._flushUpdater=new d.x,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return a.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return a.RI.resFromText(i)}},this.changes=p.T((0,n.zG)(a.RI.res(this.getContents().delta),y.fold((()=>g.E),(e=>h.of(e)))),this._textObserver.contentChanges.async.pipe(m.h((e=>e.changes.length>0)),u.U((({deltaChange:e})=>e)))),this.activeMarks=new f.X(E.YP),this.contentUpdated=new d.x,this.hoveredMarks=new f.X(E.YP),this.textChangedAfterPaste=new d.x,this.activeWord=new f.X(E.YP),this.clickedWord=new f.X(E.YP),this.ongoingSelection=new f.X(!1),this._log.info(`${H.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(u.U((e=>this._highlightsDataStore.getByHighlightId(e))),m.h((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==x.sO.Change.VisualState.Type.highlighted||e.visualization.source!==x.sO.Change.VisualState.Source.text&&e.visualization.source!==x.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===x.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),a.RI.isFlush(e)?this._flushUpdater.next(void 0):a.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,D.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),s.Y1.empty}get contentRect(){throw this._log.trace("contentRect"),Error("not implemented")}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),y.right(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=A.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case o.v.Change.ActionType.create:{const n=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),a=(null==n?void 0:n.mark)||null;return a&&this._marks.set(a.id,a),a}case o.v.Change.ActionType.update:{const n=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),a=(null==n?void 0:n.mark)||null;return a&&this._marks.set(a.id,a),a}case o.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,S.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),o.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case o.v.Change.ActionType.create:e.created.set(t.id,y.fromNullable(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.update:e.updated.set(t.id,y.fromNullable(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,y.right(void 0))}return e}),o.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const n=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:n,opts:t}),n?this._scroller.scrollToMark(n,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),g.E)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(v.R((()=>p.T(b.timer((0,U.Xd)(20)),this._flushUpdater).pipe(w.P()))),m.h((e=>e.length>0)),u.U((e=>e.reduce(((e,t)=>e.compose(t)),new r.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((0,_.g)(e)).then((()=>{const t=(0,_.B)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(u.U((0,n.ls)(C.UI((e=>{var t;return(0,n.zG)(E.ij(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),E.hX((e=>(0,n.zG)(e.range(),y.fold(n.W8,(0,n.ff)(l.x.isEnclosingView))))))})),C.oA))).subscribe((e=>this.activeMarks.next(E.G(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,D.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),k.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${H.name} disposed`),this._disposed=!0}}},35947:(e,t,i)=>{i.d(t,{B:()=>c,g:()=>l});var n=i(93018),a=i(3492),r=i(70642),s=i(79992),o=i(52467);function l(e,t=!1){return e.reduce((({actions:e,index:i},r)=>{const o=e[0];return n.s.isInsertString(r)?(e.unshift({pos:{start:i,end:i},value:t&&r.attributes?(new a.i).insert(r.insert,r.attributes):r.insert}),{actions:e,index:i}):n.s.isInsertEmbed(r)?{actions:e,index:i+1}:n.s.isRetain(r)?(t&&r.attributes&&e.unshift({pos:{start:i,end:i+r.retain},value:(new a.i).retain(r.retain,r.attributes)}),{actions:e,index:i+r.retain}):n.s.isDelete(r)?(o&&o.pos.start===o.pos.end&&o.pos.end===i?o.pos={...o.pos,end:o.pos.end+r.delete}:e.unshift({pos:{start:i,end:i+r.delete},value:""}),{actions:e,index:i+r.delete}):void(0,s.vE)(r)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start&&(0,o.HD)(t.value)&&(0,o.HD)(e[e.length-1].value)?e[e.length-1].value=`${String(t.value)}${String(e[e.length-1].value)}`:e.push(t),e)),[])}const c=e=>e.reduce((({formattings:e,index:t},i)=>r.m.hasFormatting(i)?n.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):n.s.isInsertEmbed(i)?{formattings:e,index:t+1}:n.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:n.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:n.s.isInsertEmbed(i)?{formattings:e,index:t+1}:n.s.isRetain(i)?{formattings:e,index:t+i.retain}:n.s.isDelete(i)?{formattings:e,index:t}:void(0,s.vE)(i)),{formattings:[],index:0}).formattings},27804:(e,t,i)=>{i.d(t,{U:()=>n,v:()=>a});var n,a,r=i(90023),s=i(39953),o=i(36355),l=i(12518),c=i(58303),d=i(50978);!function(e){let t;function i(){const e=d.pJ.createDefault();return e.modify((e=>({...e,selectedLens:o.R.SpecialId.AllAlerts}))),e}!function(e){e.filter=function(e){return o.R.isAllAlerts(e)},e.parse=function(e){return e===o.R.SpecialId.AllAlerts?l.right(e):l.left("unknown lens")}}(t=e.SelectedLens||(e.SelectedLens={})),e.serialize=function(e){return{...d.pJ.serialize(e),selectedLens:e.selectedLens}},e.parse=function(e){const n=(0,s.zG)(e.selectedLens,c.ij,c.tS((0,r.ls)(t.parse,c.Uo)),c.fS((()=>i().get().selectedLens)));return{...d.pJ.parse(e),selectedLens:n}},e.createDefault=i,e.createOnCapi=function(e,t){return e.modify((e=>({...e,...t}))),e}}(n||(n={})),function(e){e.serialize=d.se.serialize(n.serialize),e.create=()=>d.se.createFactory((()=>n.createDefault()),(e=>n.parse(e))),e.createOnCapi=function(t,i){return e.create()(t.id,(()=>n.createOnCapi(t.settings,i)))}}(a||(a={}))},22196:(e,t,i)=>{i.d(t,{Y:()=>p,q:()=>g});var n=i(90023),a=i(10883),r=i(59179),s=i(954),o=i(36355),l=i(58303),c=i(77808),d=i(58641),u=i(63314);const p=(e,t)=>{const i=(0,u.ux)(e.lensState,e.cardsListScrollManager,e.capabilities),n=Math.max(600,t.size.height+c.O.headerHeight+c.O.panelHeight);return i.pipe((0,a.M)(e.predictionsPreviewViewModel.previewState),(0,r.U)((([e,t])=>{if(t.kind!==d.fA.visible)return e;const i=[t.tone].filter(l.pC).length;return i>0?e+c.O.predictionsPreviewHeaderHeight+c.O.predictionInsightHeight*i+c.O.predictionInsightBottomMargin:e})),(0,s.O)(0),(0,r.U)((e=>Math.max(e+c.O.headerHeight,n))),(0,r.U)((e=>Math.min(e,750))))},g=(e,t,i)=>a=>{const r=e(),s=e=>e*i(),c=s(1),d=s(2.25);return(0,n.zG)(t(),l.UI((e=>e-(0,u.US)())),l.UI((e=>o.R.isMainLens(r)&&a?e-d-c:e-c)),l.UI((e=>e-s(1))),l.hX((e=>e>0)))}},17622:(e,t,i)=>{i.d(t,{f:()=>o});var n=i(62552),a=i(84308),r=i(20161),s=i(52979);class o{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new n.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,r.w)((i=>null==i?t:(0,a.a)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==s.pc.none?t:e)))))}}},85304:(e,t,i)=>{i.d(t,{W:()=>n});const n=(e,t,i)=>{const n=e.textField.visibleRect.getApproximate();let a=(i||0)-n.client.top;(a<=0||a>=n.size.height)&&(a=n.size.height/2);const r=t.top-a-n.client.top;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:r})))}},79869:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(39953),a=i(31789),r=i(8867),s=i(12518),o=i(40840),l=i(64451);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>(0,n.zG)(l.Fd.getMarkRect(i),s.orElse((()=>(t((0,o.mp)(i.range)),l.Fd.getMarkRect(i)))),s.fold((e=>a._(new Error(`Cannot get mark's rect: ${i.id}: ${e.message}`))),(t=>new r.y((i=>{i.next(void 0),e(t,c)})))))}}},30219:(e,t,i)=>{i.d(t,{H:()=>l});var n=i(90023),a=i(64271),r=i(44071),s=i(59179),o=i(18300);function l(e){const{textField:t,selectionService:i,highlights:l}=e;return(0,a.T)((0,r.R)(t,"click"),(0,r.R)(t,"keyup")).pipe((0,s.U)((()=>{const e=(0,n.zG)(i.getCurrentSelection(),o.Ey);return null===e?[]:l.intersectingHighlightIDs(e)})))}},2465:(e,t,i)=>{i.d(t,{V:()=>n});var n,a=i(77808);!function(e){e.defaultLayout={name:"default",anchorMargin:{top:a.O.headerHeight+a.O.panelHeight,bottom:0,left:16,right:16},anchorOrigin:{horizontal:"right",vertical:"top"},assistantOrigin:{horizontal:"left",vertical:"top"},repositioningStrategy:[{horizontal:"flip",vertical:"translate"},{horizontal:"translate",vertical:"translate"}]}}(n||(n={}))},92105:(e,t,i)=>{i.r(t),i.d(t,{AssistantController:()=>n.AssistantController,AssistantControllerImpl:()=>Tr,AssistantControllerInjectedParams:()=>n.AssistantControllerInjectedParams,AssistantService:()=>Gr,AssistantServiceInjectedParams:()=>a.AssistantServiceInjectedParams,LocalAssistantHighlightCollection:()=>s.c});var n={};i.r(n),i.d(n,{Z:()=>Tr});var a={};i.r(a),i.d(a,{e:()=>Gr});var r,s=i(48555),o=i(39953),l=i(49231),c=i(1747),d=i(31391),u=i(74822),p=i(90572),g=i(59179),h=i(49601),m=i(20161),f=i(84714),v=i(84308),b=i(44071),w=i(954),S=i(10883),y=i(44045),E=i(63532),C=i(94592),k=i(78129),_=i(12901),A=i(17613),I=i(13391),x=i(58303),T=i(52303),M=i(28213),R=i(70932),P=i(11456),L=i(69706),F=i(22196),D=i(97982),U=i(61793),H=i(90023),B=i(36355),O=i(68717),N=i(77326),G=i(33069),V=i(98800),z=i(80836),j=i(90818),W=i(81917),q=i(30008),Y=i(70930),K=i(93167),Z=i(9761),$=i(8080),X=i(50278),J=i(80936),Q=i(5961),ee=i(60970),te=i(90155),ie=i(8794),ne=i(36344),ae=i(32073),re=i(19813),se=i(12518),oe=i(4025),le=i(99410),ce=i(6405),de=i(30018),ue=i(87440),pe=i(45474),ge=i(4603),he=i(66813),me=i(34821),fe=i(49140),ve=i(23684),be=i(81549),we=i(94267);!function(e){e.AccountCreation="accountCreation",e.Tour="tour",e.TryWebsite="tryWebsite",e.ViewApps="viewApps"}(r||(r={}));const Se={completedItems:[]};var ye,Ee;!function(e){e.installed="installed",e.notInstalled="notInstalled"}(ye||(ye={})),function(e){e.macExtension="macExtension",e.windowsExtension="windowsExtension",e.mobileIOS="mobile-ios",e.mobileAndroid="mobile-android"}(Ee||(Ee={}));class Ce{constructor(e,t,i,n){this.anonymous=e,this.state=t,this.gnar=i,this._dapiActions=n,this.actions={updateChecklistState:e=>{var t;this._dapiActions.setGetStartedChecklistState((t=e,encodeURI(JSON.stringify({...t,completedItems:t.completedItems.filter((e=>null!=e&&"string"==typeof e))}))))}}}get userClientState(){return e=this.state.user,new Map(Object.values(Ee).map((t=>[t,e.groups.includes(t)?ye.installed:ye.notInstalled])));var e}get isStudent(){var e,t;return"school"===(null===(t=null===(e=this.state.user)||void 0===e?void 0:e.customFields)||void 0===t?void 0:t.frontend_role)}get checklistState(){return this.state.dapi["DN:getStartedChecklistSettings"]?(e=>{try{const t=decodeURI(e),i=JSON.parse(t);if("completedItems"in i&&Array.isArray(i.completedItems)){const e=i.completedItems.filter((e=>null!==e&&"string"==typeof e));return{...i,completedItems:e}}}catch(e){return Se}return Se})(this.state.dapi["DN:getStartedChecklistSettings"]):Se}}var ke=i(24666),_e=i(83895),Ae=i(4798);class Ie{constructor(e,t,i,n){if(this._cardsViewModel=t,this._subs=new ae.w0,this._successReportFooterBulkDismissAlertsCount=I.h.create(0),this.showBulkDismissFeed=()=>{this._cardsViewModel.actionEvents.next(_e.fr.create([{type:"pushAssistantFeed",feedId:_e.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID}]))},n.isGateEnabled(Ae.K.SduiBulkDismiss)){const t=e.pipe(g.U(_e.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),g.U((e=>e.size)),ke.x());this._subs.add(v.a([t,i.pipe(ke.x())]).pipe(g.U((([e,t])=>t?e:0))).subscribe(C.wW(this._successReportFooterBulkDismissAlertsCount)))}}get successReportFooterBulkDismissAlertsCount(){return this._successReportFooterBulkDismissAlertsCount.view()}dispose(){this._subs.unsubscribe()}}var xe,Te=i(24332),Me=i(35992),Re=i(48746),Pe=i(97767),Le=i(14944),Fe=i(5876),De=i(13351),Ue=i(42326),He=i(16679),Be=i(37724);!function(e){const t=e=>(0,o.zG)(Z.In.getActiveItemOfType(n)(e),x.tS(de.P.Capabilities.toAlertItem));function i(e){return Z.nL.Items.mapper((e=>e.kind),{[de.P.Kind]:e})}function n(e){return e.kind===de.P.Kind}function a(){return{viewState:()=>e=>(e.kind,de.P.Kind,{view:e,kind:"alertRefSDUI"})}}e.isSelectableItem=n,e.getActiveItemWithAlert=function(e){return t(e)},e.getActiveAlignableItem=e=>t(e),e.getActiveFocusableItem=e=>t(e),e.checksFeedItemsMapper=i,e.isAlertRefSDUI=n,e.defaultOrd=t=>(0,Te.g_)(Le.iP())([(0,o.zG)(Le.C2,Le.Uz((0,Pe.ff)(de.P.Item.isBulkAcceptSDUI))),(0,o.zG)(Le.C2,Le.Uz(de.P.Item.isBulkDismissSDUI)),e.getByActiveAlertPositionOrd(t)]),e.sduiToChecksFeedOrd=function(t){return i=>Le.Zt(((n,a)=>De.e.isSDUIItem(n)&&De.e.isSDUIItem(a)?De.e.getOrd(i).compare(n,a):e.getByActiveAlertPositionOrd(t).compare(n,a)))},e.getByActiveAlertPositionOrd=e=>(0,Te.g_)(Le.iP())([(0,o.zG)(O.h$.ordHRange,Le.Uz((t=>(0,o.zG)(e.hasActiveAlert(t),x.UI((e=>e.alert)),x.fS((()=>({getHighlightRanges:()=>[{start:0,end:0}]})))))))]),e.item=e=>Fe.UI.Union.make("kind",{alertRefSDUI:Ue.p.SingleCard(e),empty:He.Q.Empty}),e.viewState=a,e.createCardListFlow=Be.p,e.listItemOrd=e=>Le.Uz((e=>e.cell.item.view))(e).compare;const r={equals:(e,t)=>e.kind===t.kind&&Me.s.eqById.equals(e,t)},s=e=>({equals:(t,i)=>{const n={[de.P.Kind]:e};return r.equals(t,i)&&function(e,t){return(i,n)=>t[e(i)].equals(i,n)}((e=>e.kind),n)(t,i)}});function l(){return{changePosition:e=>i(de.P.Capabilities.changePosition(e))}}function c(){return{completeTransition:e=>i(de.P.Capabilities.animatable.completeTransition(e)),transitionTo:e=>i(de.P.Capabilities.animatable.transitionTo(e)),changeVisualState:e=>i(de.P.Capabilities.animatable.changeVisualState(e))}}function d(){return{select:(e,t)=>i(de.P.Capabilities.select.select(e,t)),selectByAlert:(e,t,n)=>i(de.P.Capabilities.select.selectByAlert(e,t,n)),unselect:(e,t)=>i(de.P.Capabilities.select.unselect((0,H.MZ)(e),t))}}function u(){return{removeAlertFromItem:(e,t)=>i((i=>i.id===_e.D1.SuccessReport.ID?i:de.P.Capabilities.removeAlert.removeAlertFromItem(e,t)(i)))}}function p(){return{remove:(e,t)=>i(de.P.Capabilities.remove.remove(e,t))}}function g(){return{updateWithAlerts:e=>i(H.yR)}}function h(){return{nextAlert:i((()=>x.YP)),prevAlert:i((()=>x.YP))}}function m(){return{updateUserInput:e=>i(H.yR)}}e.equatable={structEq:s(de.P.eq),idEq:s(r),visualStateEq:s(de.P.eq)},e.changePosition=l,e.disposable={isScheduledToDispose:i(de.P.Capabilities.disposable.isScheduledToDispose)},e.hidable={isHidden:i(Re.o.isHidden)},e.animatableItem=c,e.hasAlertsQueries={isSelectableByAlert:e=>i(de.P.Capabilities.hasAlerts.isSelectableByAlert(e)),hasAlert:e=>i(de.P.Capabilities.hasAlerts.hasAlert(e)),hasActiveAlert:i(de.P.Capabilities.hasAlerts.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:i(H.jv)},e.select=d,e.removeAlert=u,e.remove=p,e.updateWithAlert=g,e.releaseAlert=()=>$.v.Capabilities.getAlertReleaser({...u(),...e.disposable}),e.unselectable=()=>$.v.Capabilities.getUnselectable(Z.In.getActiveItem,{...d(),...e.disposable}),e.selectableByAlert=()=>$.v.Capabilities.getSelectableByAlert(Z.In.getActiveItem,{...e.hasAlertsQueries,...d(),...$.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=()=>$.v.Capabilities.getSelectableById(Z.In.getActiveItem,{...d(),...e.disposable}),e.updateMeta=()=>({updateMeta:$.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=e=>$.v.Capabilities.getAnimatable(e,{...u(),...c(),...$.v.Capabilities.getHasChecksFeed()}),e.alignable={isValidToAlign:i((t=>!e.disposable.isScheduledToDispose(t)))},e.alertIterator=h,e.itemReleaser=()=>$.v.Capabilities.getItemReleaser(),e.hasAlerts=$.v.Capabilities.getHasAlerts,e.hasUserInput=m,e.verifiable=()=>$.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>({clone:i(Me.s.Capabilities.getPojoCloneable().clone)});const f={getFeatures:i((e=>de.P.Item.isBulkDismissSDUI(e)?[de.P.Features.BulkDismiss]:de.P.Item.isBulkAcceptSDUI(e)?[de.P.Features.BulkAccept]:[]))};e.getCapabilities=function(t,i){return{...a(),...e.disposable,...e.hidable,...e.equatable,...m(),...e.cloneable(),...l(),...c(),...d(),...p(),...u(),...g(),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatableFeed(t),...e.itemReleaser(),...f,...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(h(),i,(()=>e.isSelectableItem),{...e.hasAlertsQueries,...e.disposable})}}}(xe||(xe={}));var Oe=i(3527),Ne=i(59833);class Ge{constructor(e,t){this._sub=new ae.w0;const i=(0,o.zG)(e,g.U((0,H.ls)((e=>e.actions),Ne.Ew((e=>"openCreateSnippetModal"===e.type)))),Oe.oA);this._sub.add((0,o.zG)(i,S.M(t.pipe(g.U(x.pF((()=>null)))))).subscribe((([e,t])=>{t&&t.showSnippetsEditor(e.snippetContent)})))}dispose(){this._sub.unsubscribe()}}var Ve=i(84602);class ze{constructor(e,t){this._domain=e,this._gnar=t}getDomain(){return this._domain}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick("single_card_assistant",e.domain,e.text,(0,Ve.dK)(e)?e.score:void 0)}}var je,We=i(63283);!function(e){e.correct="correct",e.incorrect="incorrect",e.neutral="neutral"}(je||(je={}));class qe{constructor(e,t,i,n,a){this._learnMoreInfo=I.h.create(null),this._sub=new ae.w0;const r=(0,o.zG)(n,g.U((0,H.ls)((e=>e.actions),Ne.Ew((e=>"openLearnMore"===e.type||"switchView"===e.type&&"learn-more"===e.selected)))),Oe.oA);this._sub.add((0,o.zG)(r,S.M(e),g.U((([e,n])=>{let r=null;if(Z.nL.hasItems(n)){const s=(0,o.zG)(a(n.currentLens),x.pF((()=>null))),l=s?(0,o.zG)(t.getById(s.activeAlert.id),x.pF((()=>null))):null,c=(0,o.zG)(x.ij(l),x.tS(O.bZ.getRawId),x.pF((()=>null))),d=c?i.alerts.getAlertById(c):null;d&&P.S.isCapiAlert(d)&&(r={title:d.todo,showTitleOnContent:"switchView"===e.type,details:d.details||d.explanation,examples:(0,o.zG)(We.J.parse(d.examples,d.point.includes("Italicization")),x.UI((e=>e.map((e=>e.map((e=>({type:e.color===We.J.Color.green?je.correct:e.color===We.J.Color.red?je.incorrect:je.neutral,title:(0,o.zG)(e.title,x.UI((e=>`${e}:`)),x.pF((()=>null))),text:e.text,useItalicText:!e.hasItalic}))))).flat())),x.pF((()=>[])))})}return r}))).subscribe(C.wW(this._learnMoreInfo)))}get learnMoreInfo(){return this._learnMoreInfo.view()}dispose(){this._sub.unsubscribe()}}var Ye=i(76917);class Ke{get header(){return this._header}constructor(e,t){this.popView=new u.x,this._header=I.h.create(x.YP),this._subs=new Ye.w.Keeper,this._subs.push((0,H.zG)(this.popView,S.M(v.a([t.sduiManager.state,t.sduiFeedManager.feed])),g.U((([e,[t,i]])=>_e.D1.AssistantFeed.Header.getSelectedViewBackButtonActions(t,i.feedId))),Oe.oA,E.b((t=>e.actionEvents.next(_e.fr.create(t))))).subscribe()),this._subs.push(t.sduiFeedManager.header.pipe(g.U(x.of)).subscribe(C.wW(this._header)))}dispose(){this._subs.dispose()}}var Ze=i(31854),$e=i(94525),Xe=i(81259);class Je{constructor(e,t,i,n,a,r){this._cardEvents=e,this._alertProcessor=t,this._pageState=i,this._actions=n,this._experimentClient=a,this._gnar=r,this._subs=new ae.w0,this.currentCard=I.h.create(void 0),this._getExtraFooterOutcomeType=e=>{var t,i;if(e){const n=this._alertProcessor.alerts.getAlertById(e.toString());if(n&&P.S.isCapiAlert(n)){const e=n.outcome;if((0,$e.wF)(e)&&!(null===(i=null===(t=this._pageState.get().lifetimeAlertStats)||void 0===t?void 0:t.seen)||void 0===i?void 0:i[e]))return this._actions.setHasSeenSuggestionType(e),e}}},this.onShow=()=>{var e;this._gnar.firstAcceptFooterShow(null!==(e=this.extraFooterOutcomeType.get())&&void 0!==e?e:"other","assistant")},this._pageState.get().showFirstSuggestionFooters&&"test"===this._experimentClient.getTreatment(Xe.p.ProgressiveExposure)?(this._subs.add(this._cardEvents.subscribe((e=>{if(e.type===Ze.eI.Kind.completeTransitionTo){const t=e.id;"number"!=typeof t&&"string"!=typeof t||this.currentCard.set(t)}}))),this.extraFooterOutcomeType=this.currentCard.view((e=>this._getExtraFooterOutcomeType(e)))):this.extraFooterOutcomeType=I.h.create(void 0)}dispose(){this._subs.unsubscribe()}}var Qe=i(70568),et=i(84242),tt=i(27729),it=i(39743),nt=i(59060);const at=e=>e.pipe(p.h((e=>"sdui_add"===e.kind||"sdui_update"===e.kind)),g.U((e=>e.sdui)),p.h((e=>"assistantFeed"===e.type&&"default-feed"===e.id)),g.U((e=>nt.ab.getCardPropsForFeed(e))),w.O({})),rt=(e,t,i)=>[{type:"text",id:tt.JX.from("text"),meta:{label:"You accepted "},size:it.yH.Regular,text:"You accepted ",textColor:it.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:`${i}`},size:it.yH.Regular,text:`${i}`,textColor:it.Il.CoreNeutral50,format:[it.SQ.Bold],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:" suggestions and improved your quality score by "},size:it.yH.Regular,text:" suggestions and improved your quality score by ",textColor:it.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:""+(e-t)},size:it.yH.Regular,text:""+(e-t),textColor:it.Il.CoreNeutral50,format:[it.SQ.Bold],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:" points."},size:it.yH.Regular,text:" points.",textColor:it.Il.CoreNeutral50,format:[],selectable:!1}],st=[{type:"text",id:tt.JX.from("text"),meta:{label:"Keep it up! You’ve earned a perfect quality score."},size:it.yH.Regular,text:"Keep it up! You’ve earned a perfect quality score.",textColor:it.Il.CoreNeutral50,format:[],selectable:!1}];var ot;!function(e){e[e.default=0]="default",e[e.withQualityScore=1]="withQualityScore",e[e.withPerformanceScore=2]="withPerformanceScore"}(ot||(ot={}));class lt{constructor(e,t,i,n,a,r,s,l){this._sduiManager=e,this._sduiBufferService=i,this._statisticsService=n,this._upgradeHookCardExists=r,this._sessionModel=s,this._experimentClient=l,this._subs=new ae.w0,this.shouldShowSuccessReportWithPerformanceScore=(e,t)=>e===Qe.v0.ScoresStatus.OK&&t>=3&&"test"===this._experimentClient.getTreatment(Xe.p.PerformanceScoreSuccessState),this.shouldShowSuccessReportWithQualityScore=e=>e===Qe.v0.ScoresStatus.OK&&("text"===this._experimentClient.getTreatment(Xe.p.QualityScore)||"progress_bar"===this._experimentClient.getTreatment(Xe.p.QualityScore)),this.focusSuccessReportStateTransformer=({state:e,metadata:t})=>{if(!Z.nL.hasCards(e))return se.left({state:e,metadata:t});const i=Z.nL.Prism.getLens();return se.left({state:i.modify((e=>x.pC(e.cardIndex)||e.items.size>1||(0,o.zG)(e.items.getAt(0),x.UI((e=>e.id!==_e.D1.SuccessReport.ID)),x.fS(H.jv))?e:{...e,cardIndex:x.G(0)}),e),metadata:t})};const c=this._sduiManager.state.pipe(g.U((e=>_e.D1.GButton.getPushAssistantFeedAction(e,_e.D1.GButton.DEFAULT_GBUTTON_ID))),Oe.oA,g.U((e=>e.feedId))),d=a.pipe(g.U((e=>Z.nL.hasSuccess(e)&&Z.nL.hasItems(e)&&(0===e.currentLens.items.size||(0,o.zG)(e.currentLens.items.getAt(0),x.UI((e=>e.id===_e.D1.SuccessReport.ID)),x.fS(H.jv)))))),u=t.feed.pipe(S.M(c),g.U((([e,t])=>e.feedId===t)));this.isSuccess=v.a([d,u]).pipe(g.U((([e,t])=>e&&t)))}_getSuccessMessages(e,t){return{title:t<2?"Looking good so far":e>0?`${e} ${(0,et._6)(e,"issue addressed","issues addressed")}`:"Nice job!",subTitle:t<2?"Keep writing to see suggestions.":e>0?"All clear!":"You made that look easy!"}}_getSduiKnownId(e){switch(e){case ot.withQualityScore:return _e.D1.SuccessReport.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID;case ot.withPerformanceScore:return _e.D1.SuccessReport.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID;default:return _e.D1.SuccessReport.SUCCESS_REPORT_CARD_ID}}_getSuccessReportSDUI(e,t,i,n){const{title:a,subTitle:r}=this._getSuccessMessages(e,t),s=[{type:"block",id:tt.JX.from("block"),parts:[{type:"image",id:tt.JX.from("image"),meta:{},name:tt.yL.unknown("success_report_image"),url:"https://assets.grammarly.com/icons/v1/notification-ok.svg",width:2,height:2}],name:tt.yL.unknown("success_report_image_block"),spacing:{top:it.T.D1,right:it.T.D0,bottom:it.T.D075,left:it.T.D0},horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),size:it.yH.Regular,meta:{label:a},text:a,textColor:it.Il.CoreNeutral90,format:[it.SQ.Bold],selectable:!1}],name:tt.yL.unknown("success_report_title_block"),horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),size:it.yH.Regular,meta:{label:r},text:r,textColor:it.Il.CoreNeutral50,format:[],selectable:!1}],name:tt.yL.unknown("success_report_subtitle_block"),horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_subtitle_space_1_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_subtitle_space_2_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_subtitle_space_3_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_subtitle_space_4_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}}],o=this._getSduiKnownId(null==n?void 0:n.layout),l=n?(t=>{switch(t.layout){case ot.withPerformanceScore:return((e,t,i)=>[{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_top_spacing_block"),spacing:{top:it.T.D1,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),meta:{label:`${e}`},size:it.yH.HeadingLevel1,text:`${e}`,textColor:it.Il.CoreNeutral90,format:[it.SQ.Bold],selectable:!1}],name:tt.yL.unknown("success_report_score_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D025,left:it.T.D0},horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),meta:{label:"Out of 100"},size:it.yH.Medium,text:"Out of 100",textColor:it.Il.CoreNeutral90,format:[it.SQ.Bold],selectable:!1}],name:tt.yL.unknown("success_report_out_of_100_block"),horizontalAlign:it.Kq.Center},{type:"row",id:tt.JX.from("row"),left:[{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_you_corrected_left_spacing_block"),fraction:1,horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),meta:{label:"You corrected "},size:it.yH.Regular,text:"You corrected ",textColor:it.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:`${i}`},size:it.yH.Regular,text:`${i}`,textColor:it.Il.CoreNeutral50,format:[it.SQ.Bold],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:" issues and improved your writing by "},size:it.yH.Regular,text:" issues and improved your writing by ",textColor:it.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:""+(e-t)},size:it.yH.Regular,text:""+(e-t),textColor:it.Il.CoreNeutral50,format:[it.SQ.Bold],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:" points."},size:it.yH.Regular,text:" points.",textColor:it.Il.CoreNeutral50,format:[],selectable:!1}],name:tt.yL.unknown("success_report_you_corrected_text_block"),fraction:4,horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_you_corrected_right_spacing_block"),fraction:1,horizontalAlign:it.Kq.Center}],right:[],verticalAlign:it.g$.Middle,name:tt.yL.unknown("success_report_you_corrected_row"),spacing:{top:it.T.D025,right:it.T.D0,bottom:it.T.D025,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[{type:"button",id:_e.D1.SuccessReport.OPEN_PERFORMANCE_SCORE_INTERACTION_ID,meta:{label:"See Details"},name:tt.yL.unknown("success_report_see_details_button"),kind:it.Lv.Primary,state:it.BN.Enabled,label:{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),meta:{label:"See Details"},size:it.yH.Regular,text:"See Details",textColor:it.Il.CoreNeutral0,format:[],selectable:!1}],name:tt.yL.unknown("textContainer"),spacing:{top:it.T.D0,right:it.T.D05,bottom:it.T.D0,left:it.T.D05},verticalAlign:it.g$.Middle},actions:[{type:"pushAssistantFeed",feedId:"performance-score-feed"},{type:"notify",userAction:it.nz.Click}],shape:it.jL.Square}],name:tt.yL.unknown("success_report_cta_block"),spacing:{top:it.T.D025,right:it.T.D0,bottom:it.T.D0,left:it.T.D0},horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:it.T.D1,right:it.T.D0,bottom:it.T.D1,left:it.T.D0}}])(t.score,t.lowestScore,e);case ot.withQualityScore:return((e,t,i)=>[{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_top_spacing_block"),spacing:{top:it.T.D125,right:it.T.D0,bottom:it.T.D125,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[{type:"image",id:tt.JX.from("image"),meta:{},name:tt.yL.unknown("illustration"),url:"https://assets.grammarly.com/sdui/v1/paper-plane.svg",width:5,height:5}],name:tt.yL.unknown("success_report_illustration_block"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D1,left:it.T.D0},horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[{type:"text",id:tt.JX.from("text"),meta:{label:"Quality Score: "},size:it.yH.Medium,text:"Quality Score: ",textColor:it.Il.CoreNeutral90,format:[it.SQ.Bold],selectable:!1},{type:"text",id:tt.JX.from("text"),meta:{label:`${e}`},size:it.yH.Medium,text:`${e}`,textColor:it.Il.CoreNeutral90,format:[it.SQ.Bold],selectable:!1}],name:tt.yL.unknown("success_report_quality_score_block"),horizontalAlign:it.Kq.Center},{type:"row",id:tt.JX.from("row"),left:[{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_you_accepted_left_spacing_block"),fraction:8,horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:e>=100&&t>=100?st:rt(e,t,i),name:tt.yL.unknown("success_report_you_accepted_text_block"),fraction:84,horizontalAlign:it.Kq.Center},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_you_accepted_right_spacing_block"),fraction:8,horizontalAlign:it.Kq.Center}],right:[],verticalAlign:it.g$.Middle,name:tt.yL.unknown("success_report_you_accepted_row"),spacing:{top:it.T.D0,right:it.T.D0,bottom:it.T.D0,left:it.T.D0}},{type:"block",id:tt.JX.from("block"),parts:[],name:tt.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:it.T.D125,right:it.T.D0,bottom:it.T.D125,left:it.T.D0}}])(t.score,t.lowestScore,e);case ot.default:return s}})(n):s;return{type:"assistantCard",id:o,meta:{},child:{type:"viewStack",id:"card-viewStack",views:{"default-suggestion":{type:"column",id:tt.JX.from("column"),children:l,name:tt.yL.unknown("success_report_content_column")},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"},feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"}},selected:"default-suggestion"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:it.nz.Focus}],onBlur:[],properties:i}}initSuccessReportSDUIEmulation(){const e=this._statisticsService.sessionStats.view((e=>e?e.alertsStats.accepted.total:0)),t=this._statisticsService.generalScore.view((e=>null!=e?e:0)).pipe(ke.x()),i=this._statisticsService.lowestGeneralScore.view((e=>null!=e?e:0)).pipe(ke.x()),n=this._sessionModel.scoreStatus.pipe(ke.x(),g.U(x.fS((()=>Qe.v0.ScoresStatus.ERROR))));this._subs.add(v.a([this.isSuccess.pipe(ke.x()),this._sduiManager.state.pipe(g.U(_e.D1.SuccessReport.findSuccessReportSduiItem),g.U(x.pC),ke.x()),this._upgradeHookCardExists,t,i,n]).pipe(S.M(at(this._sduiBufferService.capiEvents)),g.U((([[e,t,i,n,a,r],s])=>{var o,l,c,d;const u=null!==(l=null===(o=this._statisticsService.sessionStats.get())||void 0===o?void 0:o.alertsStats.accepted.total)&&void 0!==l?l:0,p=null!==(d=null===(c=this._statisticsService.sessionStats.get())||void 0===c?void 0:c.alertsStats.dismissed.total)&&void 0!==d?d:0,g=this._statisticsService.wordsCount.get(),h=this.shouldShowSuccessReportWithPerformanceScore(r,u+p),m=this.shouldShowSuccessReportWithQualityScore(r);if(!e||i||t)return!(!e||!t)||!(e||!t)&&(this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_remove",sduiRootId:_e.D1.SuccessReport.ID}),!1);{const e=this._getSuccessReportSDUI(u,g,s,h?{layout:ot.withPerformanceScore,score:n,lowestScore:a}:m?{layout:ot.withQualityScore,score:n,lowestScore:a}:{layout:ot.default});return this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_add",rev:0,sduiRootId:_e.D1.SuccessReport.ID,sdui:e}),!0}})),m.w((a=>a?v.a([e,this._statisticsService.wordsCount,t,i,n,at(this._sduiBufferService.capiEvents)]).pipe(E.b((([e,t,i,n,a,r])=>{var s,o;const l=null!==(o=null===(s=this._statisticsService.sessionStats.get())||void 0===s?void 0:s.alertsStats.dismissed.total)&&void 0!==o?o:0,c=this.shouldShowSuccessReportWithPerformanceScore(a,e+l),d=this.shouldShowSuccessReportWithQualityScore(a),u=this._getSuccessReportSDUI(e,t,r,c?{layout:ot.withPerformanceScore,score:i,lowestScore:n}:d?{layout:ot.withQualityScore,score:i,lowestScore:n}:{layout:ot.default});this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_update",rev:0,sduiRootId:_e.D1.SuccessReport.ID,sdui:u})}))):ne.E))).subscribe())}dispose(){this._subs.unsubscribe()}}var ct=i(58578),dt=i(64271),ut=i(21448),pt=i(41274),gt=i(95486),ht=i(99836);const mt={"Style/ToneImprovement/ConfidentRewrite/ToneAI":"1f91d","Style/ToneImprovement/PersonableRewrite/ToneAI":"1f917","Style/ToneImprovement/PositiveFraming/ToneAI":"1f64c"},ft=["Style/Sensitivity/SupportUkraine/WarLanguage","Style/Sensitivity/ExtremelySensitive/SuicideIdeation"],vt=e=>e.patternName.startsWith("Style/Sensitivity")&&!ft.some((t=>e.patternName===t));var bt;!function(e){e.isToneImprovementSuggestionInfo=function(e){return"emojiId"in e},e.isInclusiveLanguageToneSuggestionInfo=function(e){return"iconId"in e&&"inclusive_language"===e.toneCategory},e.createToneImprovementSuggestionUphookInfo=function(e){const t=e._raw.minicardTitle||e._raw.title||"",i=t.replace(pt.V,"").trim(),n=t.match(pt.V),a=n&&n.length?n[0]:null,r=mt[e.patternName];return{...a?{emojiLiteral:a}:r?{emojiId:r}:{},title:i,alertId:e.id,toneCategory:i,patternName:e.patternName,isUphook:!0}},e.isToneImprovementSuggestionUphookInfo=function(e){return"isUphook"in e&&e.isUphook}}(bt||(bt={}));class wt{constructor(e,t,i,n,a,r,s,o,l,c){this._alertsReader=e,this._getSessionUuid=i,this._gnar=n,this.experimentClient=a,this.emogenieService=r,this._upgradeViewModel=s,this._cardActions=l,this._sduiItems=c,this._toneSuggestionInfo=I.h.create(void 0),this._sub=new ae.w0;const d=this._sduiItems.view(_e.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),u=I.h.combine(t,d,((e,t)=>ct.p.reduce([],((e,i)=>(t.has(i.id)||e.push(i.alert),e)))(e))),g=r.viewState.view("isBrandTonesEnabled"),h=o.view("isPremium"),m=I.h.combine(u,g,h,((e,t,i)=>wt.getToneSuggestionInfoFromAlerts(e,t,i))),f=m.pipe(p.h((e=>void 0===e||!bt.isToneImprovementSuggestionUphookInfo(e)))),v=m.pipe(p.h((e=>void 0!==e&&bt.isToneImprovementSuggestionUphookInfo(e)&&"test"===a.getTreatment(Xe.p.ToneDetectorUphook))));this._sub.add(dt.T(f,v).subscribe(C.wW(this._toneSuggestionInfo))),this.toneSuggestionInfo=this._toneSuggestionInfo.view()}static getToneSuggestionInfoFromAlerts(e,t,i){let n;if(i){n=e.filter((e=>e.patternName.startsWith("Style/ToneImprovement")||vt(e))).map((e=>{var t,i,n;return vt(e)?{iconId:null!==(t=e._raw.extra_properties.icon_id)&&void 0!==t?t:"",title:e.miniCardTitle,alertId:e.id,toneCategory:"inclusive_language",patternName:e.patternName}:{emojiId:null!==(i=e._raw.extra_properties.emoji_id)&&void 0!==i?i:"",title:O.bZ.isToneAI(e)?e.miniCardTitle:e.miniCardTitle.replace(pt.V,"").trim(),alertId:e.id,toneCategory:null!==(n=e._raw.extra_properties.tone)&&void 0!==n?n:"",patternName:e.patternName}}))}else{n=e.filter((e=>e._raw.hidden&&(e=>e.patternName.startsWith("Style/ToneImprovement"))(e))).map(bt.createToneImprovementSuggestionUphookInfo)}const a=new Set(n.map((e=>e.toneCategory))),r=n[0],s=t?"Want to sound more on-brand?":a.size>1?"Strike the right tone":null==r?void 0:r.title;return r?{...r,title:s}:r}_getCurrentSessionUuid(){return(0,o.zG)(this._getSessionUuid(),x.fS((()=>"")))}onShowToneSuggestionInfo(e){const t=bt.isToneImprovementSuggestionInfo(e)?e.emojiId:bt.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=bt.isToneImprovementSuggestionUphookInfo(e);this._gnar.toneDetectorToneSuggestionInfoShow(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i&&((0,ut.nE)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro"}),(0,ht.Tb)().upgradeHooks.showUpgradeHook("toneDetector","emogenieReport","pro"))}onClickToneSuggestionInfoCta(e){const t=bt.isToneImprovementSuggestionInfo(e)?e.emojiId:bt.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=bt.isToneImprovementSuggestionUphookInfo(e);if(this._gnar.toneDetectorToneSuggestionInfoCtaClick(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i)(0,ut.Qi)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro"}),(0,ht.Tb)().upgradeHooks.clickUpgradeHook("toneDetector","emogenieReport","pro"),this._upgradeViewModel.openUpgradeUrl(gt.L.Place.toneSuggestion);else{const t=this._sduiItems.get(),i=(0,o.zG)(this._alertsReader.getById(e.alertId),x.tS(O.bZ.getRawId),x.tS((e=>_e.D1.getByAlertId(t,e))),T.MH);this._cardActions.next(_e.fr.create([_e.D1.AssistantFeed.createPushAssistantFeedAction(_e.D1.AssistantFeed.TONE_INSIGHTS_SUGGESTIONS_FEED_ID,i.id)]))}}dispose(){this._sub.unsubscribe()}}var St=i(14969),yt=i(21147),Et=i(36334),Ct=i(41767);const kt=e=>{switch(e){case B.R.Type.Critical:case B.R.Type.Correctness:return it.Il.CoreRed50;case B.R.Type.Clarity:return it.Il.CoreBlue50;case B.R.Type.Engagement:return it.Il.CoreGreen60;case B.R.Type.Delivery:return it.Il.CorePurple40;case B.R.Type.Vox:return it.Il.CoreNeutral50;case B.R.Type.Plagiarism:return it.Il.CoreCyan50;case B.R.Type.Advanced:case B.R.Type.Other:case B.R.Type.KnowledgeHub:return;default:return(0,A.vE)(e)}},_t=(e,t)=>{var i;const n=(i=e,Object.values(i.reduce(((e,t)=>{const i=t.lensType;return e[i]?e[i]={...e[i],lensNames:Ne.jj(yt.w4)([...e[i].lensNames,t.lensName]),alertsCount:e[i].alertsCount+1}:e[i]={lensNames:[t.lensName],lensType:t.lensType,alertsCount:1},e}),{}))).map((e=>{var t;return tt.X2.create([{type:"block",fraction:1,horizontalAlign:it.Kq.Center,id:tt.JX.from("block"),name:tt.yL.unknown("upgrade_hook_counter"),parts:[tt.XF.create(e.alertsCount.toString(),null!==(t=kt(e.lensType))&&void 0!==t?t:it.Il.CoreNeutral50)]},{type:"block",fraction:11,id:tt.JX.from("block"),name:tt.yL.unknown("upgrade_hook_alert_group"),parts:[tt.xv.create((0,et.kC)(e.lensType),it.yH.Regular,[],it.Il.CoreNeutral90,void 0,void 0,!1),tt.xv.create(` · ${e.lensNames.join(", ")}`,it.yH.Regular,[],it.Il.CoreNeutral50,void 0,void 0,!1)]}],[],tt.Ki.create("0.5","0.25","0.25","0.75"),it.g$.Middle)})),a=tt.sg.create([tt.X2.create([tt.gO.create("title",void 0,void 0,tt.xv.create("Premium suggestions available:",it.yH.Regular,[it.SQ.Bold],it.Il.CoreNeutral90,void 0,void 0,!1))],[],tt.Ki.create("0.75","0.25","0.5","0.75"),it.g$.Middle),tt.gO.create("content",void 0,void 0,...n),tt.X2.create([{...tt.gO.create("actions",void 0,tt.n4.create("0.5","0"),{type:"button",meta:{},id:tt.JX.from("goPremium"),name:tt.yL.unknown("goPremium"),shape:it.jL.Square,actions:[{type:"upgradeToPremium"},{type:"notify",userAction:it.nz.Click}],kind:it.Lv.Primary,state:it.BN.Enabled,label:{...tt.gO.create("",tt.Ki.create("0","0.5","0","0.25"),tt.n4.create("0.25","0.25"),tt.JO.create(tt.JO.Source.createKnown(it.Tb.Diamond),void 0),tt.xv.create("Get Pro",it.yH.Regular,[],it.Il.CoreYellow80,void 0,void 0,!1)),verticalAlign:it.g$.Middle}},{type:"button",meta:{},id:tt.JX.from("button"),name:tt.yL.unknown("dismiss"),shape:it.jL.Square,actions:[{type:"removeRoot"},{type:"notify",userAction:it.nz.Click}],kind:it.Lv.Secondary,state:it.BN.Enabled,label:tt.gO.create("",tt.Ki.create("0","0.5","0","0.5"),{horizontal:it.T.D025,vertical:it.T.D0},tt.xv.create("Dismiss",it.yH.Regular,[],it.Il.CoreNeutral50,void 0,void 0,!1))}),verticalAlign:it.g$.Middle}],[tt.gO.create("navigation-arrows",void 0,void 0,tt.zx.createIcon(it.MU.ButtonPrev,tt.JO.Source.createKnown(it.Tb.ArrowLeft),[{type:"prevCard"},{type:"transition",fromName:"content",toName:"content",animateFrom:it.c1.SlideRight,animateTo:it.c1.SlideRight},{type:"transition",fromName:"title",toName:"title",animateFrom:it.c1.SlideRight,animateTo:it.c1.SlideRight},{type:"notify",userAction:it.nz.Click}],it.Lv.Secondary,"Previous suggestion"),tt.zx.createIcon(it.MU.ButtonNext,tt.JO.Source.createKnown(it.Tb.ArrowRight),[{type:"nextCard"},{type:"notify",userAction:it.nz.Click}],it.Lv.Secondary,"Next suggestion"))],tt.Ki.create("0.5","0.25","1","0.75"),it.g$.Middle)]);return{id:_e.D1.NativeUpgradeHook.ID,type:"assistantCard",meta:{label:"Premium suggestions available:"},child:{...tt.XJ.create("default-suggestion",{"default-suggestion":a,feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"}}),id:"card-viewStack"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:it.nz.Focus}],onBlur:[],properties:{...t,"feed-order":1}}},At=(e,t,i,n,a,r)=>{if((0,Ct.cN)(r))return ae.w0.EMPTY;const s=((e,t)=>v.a([t.view("currentLens").view("id").view((()=>e=>O.bZ.isRegistered(e)&&O.bZ.isPremium(e))),e]).pipe(g.U((([e,t])=>ct.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t)))))(e,t);return s.pipe(ke.x(((e,t)=>{const i=new Set(e.map((e=>e.id)));return e.length===t.length&&t.every((e=>i.has(e.id)))})),S.M(n.pipe(g.U(_e.D1.NativeUpgradeHook.findUpgradeHookSduiItem),g.U(x.pC)),a,at(i.capiEvents)),E.b((([e,t,n,a])=>{if(0===e.length&&t)i.pushCapiSduiEvent({kind:"sdui_remove",sduiRootId:_e.D1.NativeUpgradeHook.ID});else if(e.length>0&&!n){let n;n=t?"sdui_update":"sdui_add",i.pushCapiSduiEvent({kind:n,rev:0,sduiRootId:_e.D1.NativeUpgradeHook.ID,sdui:_t(e,a)})}}))).subscribe()};var It=i(65485);class xt{constructor(e){this._subs=new ae.w0,this._upgradeHookCard=I.h.create(x.YP),this._upgradeHookCardFocused=I.h.create(!1),this.processUpgradeHookSduiCardActions=(e,t,i,n,a)=>e.pipe(S.M(this._upgradeHookCard),g.U((([{actions:e,cardId:r},s])=>{e.forEach((e=>{"upgradeToPremium"===e.type?t.openUpgradeUrl(gt.L.Place.assistantCardList):"notify"===e.type&&e.userAction===it.nz.Focus&&(0,H.zG)(s,x.g_(H.jv,(e=>e.id.toString()===r)),(e=>{this._upgradeHookCardFocused.set(e),e&&i.upgradeHooksExp.upgradeHookCardShown(n,a,(0,Et.ge)())}))}))}))).subscribe(),this._subs.add(e.pipe(g.U(_e.D1.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem)).subscribe(C.wW(this._upgradeHookCard)))}get upgradeHookCard(){return this._upgradeHookCard.view()}get upgradeHookCardExists(){return this._upgradeHookCard.view(x.pC)}get upgradeHookCardFocused(){return this._upgradeHookCardFocused.view()}dispose(){this._subs.unsubscribe()}}var Tt=i(94882),Mt=i(56424),Rt=i(52574),Pt=i(57129),Lt=i(58351),Ft=i(8364),Dt=i(47387),Ut=i(24653),Ht=i(26488),Bt=i(73333),Ot=i(50899),Nt=i(51320),Gt=i(73583),Vt=i(79299),zt=i(11838);const jt=({feedbackVM:e,entryPoint:t})=>l.createElement(Nt.u,{showDelay:Ot.gk,message:"Leave feedback"},l.createElement("div",{className:zt.feedbackButton,onClick:()=>e.openFeedback(t),"data-grammarly-part":"assistant-feedback-btn"},l.createElement(Gt.A,{color:Vt.Z.blue50}),"Anything we can improve?"));var Wt=i(72415),qt=i(92999);const Yt=({children:e,popActiveView:t,panelClassName:i,contentClassName:n,footer:a,onClickBack:r,hideBackButton:s=I.h.create(!1),dataPartName:o})=>l.createElement("div",{className:qt.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},l.createElement(Dt.F.Fragment,null,s.view((e=>!e&&l.createElement(Wt.M,{className:qt.viewOverlayGoBack,clickHandler:()=>r?r():t(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),l.createElement("div",{className:i||qt.defaultViewOverlayPanel},l.createElement("div",{className:n||qt.content,"data-grammarly-part":o},e),a&&l.createElement("div",{className:qt.footer},a)));var Kt=i(82935),Zt=i(12990),$t=i(36540),Xt=i(48641),Jt=i(92147),Qt=i(95446),ei=i(26698),ti=i(12444);const ii=({assistantSettingsViewModel:e,upgradeViewModel:t,experimentClient:i,assistantFeedbackViewModel:n,onClose:a,children:r})=>{const{domain:s,actions:o,state:c,hasInProductDiscountSpecialOffer:d}=e,u=l.useRef(I.h.create(x.YP)),g=(0,Ut._)(i);l.useEffect((()=>{g&&o.getConfiguration("assistantSettingsPopup").then((e=>{(0,H.zG)(e,se.map((e=>{u.current.set(x.ij(e))})))}))}),[g]);const h=l.useCallback((({overrideUrl:e})=>{t.openUpgradeUrlWithOverride(gt.L.Place.extensionSettingsAssistant,e)}),[t]),[m,f]=l.useState(!!c.view("page","enabled").get()),v={checked:m,update:f},b=l.createElement(Dt.F.div,{role:"region","aria-label":"Grammarly settings"},c.view((({user:e,page:t,dynamicConfig:n,dapi:a})=>l.createElement($t.a7,{actions:o,config:{enabled:!0,domain:s},settings:t,user:e,dapi:a,dynamicConfig:n,siteCategory:Qt.y.other,isReportBugFeatureAllowed:!i.isGateEnabled(Ae.K.HideReportBugByGrammarlyEmployeeFeature),openReportBugForm:e=>{self.open(ei.WY(e))},openDebugPage:()=>{self.open(chrome.runtime.getURL("src/debug.html"))},openUrl:e=>self.open(e),placement:"assistant",showCitationBuilderToggle:!1,siteSwitcherChecked:v,isIndianEnglishDialectSupported:i.isGateEnabled(Ae.K.IndianEnglishDialect)||i.isGateEnabled(Ae.K.IndianEnglishDialectInternal),isAutoApplySupported:i.isGateEnabled(Ae.K.SuggestionDeliveryAutoApply),downloadDebugReports:()=>Ht.B.download()}))),n?l.createElement(jt,{feedbackVM:n,entryPoint:Bt.Q.settings}):null),w=l.createElement(Zt.z,{kind:"primary",type:"submit",onClick:()=>{o.toggleSite(m,s),Kt.J.checkingToggleClick("assistant",Qt.y.other,m?"on":"off",s),(0,ht.Tb)().toggleExtension(m,"assistant",(0,Jt.Cg)(s)),null==a||a()},className:ti.settingsViewDoneButton,dataGrammarlyPart:"single-card-assistant-settings-done-button"},"Done"),S=l.createElement(Dt.F.Fragment,null,(0,pe.gm)(c,d).view((({user:e,hasSpecialOffer:t})=>l.createElement(Xt.Z,{user:e,openSubscriptionDialog:h,isAssistant:!0,hasInProductDiscountSpecialOffer:t,assignInProductDiscountExperiment:()=>(0,pe._c)(i),hasUphookHubTestTreatment:(0,Ut.y)(i),uphookConfiguration:u.current,trackUphookHubEvent:(e,t)=>{t.pipe((0,p.h)(x.pC),(0,St.P)()).subscribe((t=>{o.trackConfiguration(e,t.value)}))}}))),w);return r({content:b,footer:S})},ni=({viewModels:e,experimentClient:t})=>l.createElement(ii,{onClose:()=>e.assistantLayoutViewModel.popActiveView(),assistantSettingsViewModel:e.assistantSettingsViewModel,upgradeViewModel:e.upgradeViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,experimentClient:t},(({content:t,footer:i})=>l.createElement(Yt,{dataPartName:"settings-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:ti.settingsViewOverlayPanel,contentClassName:ti.settingsViewOverlayContent,footer:i},t)));var ai=i(36234),ri=i(37213);const si={caption:"Compose an email",buttons:[{id:"gmail",icon:"gmail",label:"Gmail",href:"https://mail.google.com/#compose"},{id:"outlook",icon:"outlook",label:"Outlook",href:"https://outlook.office.com/mail/"}]},oi={caption:"Edit a document",buttons:[{id:"gDocs",icon:"gdocs",label:"Google Docs",href:"https://docs.google.com/"},{id:"word",icon:"word",label:"Word",href:"https://www.microsoft365.com/launch/word"}]},li=[si,oi,{caption:"Update your profile",buttons:[{id:"linkedIn",icon:"linkedIn",label:"LinkedIn",href:"https://www.linkedin.com/feed/"}]}],ci=[si,oi,{caption:"Send a message",buttons:[{id:"slack",icon:"slack",label:"Slack",href:"https://app.slack.com/client/"},{id:"teams",icon:"teams",label:"Teams",href:"https://teams.microsoft.com/"}]}];var di=i(77690);const ui=({isStudent:e})=>(l.useEffect((()=>{Kt.J.getStartedUseCasesShow()}),[]),l.createElement("div",{className:di.getStartedUseCases},l.createElement("section",{className:di.copyContainer},l.createElement("p",{className:di.title},"Now, see Grammarly in action"),l.createElement("p",{className:di.subtitle},"Start writing something new, or proofread a piece of text you already wrote.")),l.createElement("section",{className:di.ctaContainer},(e?li:ci).map((({caption:e,buttons:t})=>l.createElement("div",{key:e},l.createElement("p",{className:di.ctaCaption},e),l.createElement("div",{className:di.ctaButtons},t.map((({id:e,icon:t,label:i,href:n})=>l.createElement(Rt.zx,{key:e,className:di.externalLink,"data-part":`use-case-link-${e}`,"aria-label":e,name:`get-started-use-cases-${e}`,styleType:ai.Z.Type.Base,href:n,target:"_blank",onClick:()=>{Kt.J.getStartedUseCasesLinkClick(e)}},t&&l.createElement("div",{...(0,ri.Sh)(di.icon,di[t])}),l.createElement("span",null,i)))))))))));var pi=i(32980),gi=i(22315),hi=i(29595),mi=i(98785);const fi=[{id:r.AccountCreation,title:"Create an account",description:"Sign up for free or sign in to an existing account to start receiving writing insights."},{id:r.Tour,title:"Take a quick tour",description:"Want to see how Grammarly works?"},{id:r.TryWebsite,title:"Try writing with Grammarly",description:"Get suggestions wherever you write online with the browser extension."},{id:r.ViewApps,title:"Explore other Grammarly products",description:"Get suggestions from Grammarly when you write on all your favorite platforms and devices."}],vi=[{id:"gmail",text:"Try it in Gmail",icon:"gmail",href:"https://mail.google.com/#compose"},{id:"outlook",text:"Try it in Microsoft Outlook",icon:"outlook",href:"https://outlook.live.com/mail"},{id:"gDocs",text:"Try it in Google Docs",icon:"gdocs",href:"https://docs.google.com"}],bi=[{id:"desktop",text:"Grammarly for Desktop",href:"https://www.grammarly.com/desktop"},{id:"keyboard",text:"The Grammarly Keyboard",href:"https://www.grammarly.com/mobile"}];var wi=i(40591);const Si=({label:e,href:t,onClick:i})=>l.createElement(Rt.zx.Primary,{className:wi.link,"data-part":e.toLowerCase().split(" ").join("-"),onClick:i,target:t?"_blank":"_self",href:t},e),yi=({items:e,onClick:t})=>l.createElement(l.Fragment,null,e.map((({id:e,text:i,icon:n,href:a})=>l.createElement(Rt.zx,{key:e,className:wi.externalLink,"data-part":`try-${e}`,"aria-label":e,name:`get-started-${e}`,styleType:ai.Z.Type.Base,href:a,target:"_blank",onClick:()=>t(e)},n&&l.createElement("div",{...(0,ri.Sh)(wi.icon,wi[n])}),l.createElement("span",null,i))))),Ei=(e,t)=>{const i=e.find((e=>!t.has(e.id)));return null==i?void 0:i.id};var Ci=i(29121);const ki=({completed:e,total:t})=>l.createElement("div",{className:Ci.progressBarBg},l.createElement("div",{"data-name":"progress-bar","aria-label":"completionProgress",className:Ci.progressBar,role:"progressbar","aria-valuenow":e,style:{width:(e<=t&&e>=0?e/t*100:e<0?0:100)+"%"}}));var _i,Ai;!function(e){e.Complete="complete",e.Incomplete="incomplete"}(_i||(_i={})),function(e){e.macDesktop="macDesktop",e.winDesktop="winDesktop",e.android="android",e.iOS="iOS"}(Ai||(Ai={}));const Ii=e=>{switch(e){case Ee.macExtension:return Ai.macDesktop;case Ee.windowsExtension:return Ai.winDesktop;case Ee.mobileAndroid:return Ai.android;case Ee.mobileIOS:return Ai.iOS;default:(0,A.vE)(e)}},xi=({getStartedChecklistViewModel:e,notify:t})=>{const{anonymous:i,checklistState:n,gnar:a,actions:s,userClientState:o}=e,[c,d]=l.useState((()=>{const e=new Set([...n.completedItems,...i?[]:[r.AccountCreation]]);return{items:e,count:e.size}})),[u,p]=l.useState(((e,t)=>{const i=Ei(e,t);return i?new Set([i]):new Set})(fi,c.items)),g=(e,i)=>{const l=new Set,u=new Set(c.items);if(e!==r.AccountCreation){c.items.has(e)||(u.add(e),d({items:u,count:u.size}),Object.values(r).every((e=>u.has(e)))&&t());const g=Ei(fi,u);l.delete(e),g&&l.add(g),p(l);const h=Object.values(Ee).filter((e=>o.get(e)===ye.installed)).map(Ii);a.getStartedLinkClick(h,i,e,u.size,fi.length),s.updateChecklistState({...n,completedItems:[...u]})}},h=e=>c.items.has(e)?_i.Complete:_i.Incomplete;return l.useEffect((()=>{a.getStartedChecklistShow(Array.from(c.items),Ei(fi,c.items))}),[]),l.createElement("div",{className:hi.getStartedChecklist},l.createElement(gi.K,{size:24,type:"full",className:hi.logo}),l.createElement(ai.Z.H3,{className:hi.title},"Welcome! Here are a few steps to get you started."),l.createElement(ai.Z.Base,{className:hi.progressCaption},"You’ve completed ",l.createElement("strong",null,c.count)," out of"," ",l.createElement("strong",null,fi.length)," steps."),l.createElement(ki,{total:fi.length,completed:c.count}),l.createElement(pi.W,{allChecklistItems:fi,completedItems:c,expandedItems:u,onExpandItem:e=>{const t=new Set,n=h(e),s=i?r.AccountCreation:e,o=h(s);if(a.getStartedSectionClick(n,e),0===u.size)t.add(s),a.getStartedItemExpand(o,s);else{const[i]=u;i!=e?(t.add(s),a.getStartedItemCollapse(n,i),a.getStartedItemExpand(o,s)):a.getStartedItemCollapse(n,i)}p(t)},getCTA:e=>((e,t)=>{switch(e){case"accountCreation":return l.createElement(Si,{label:"Sign up",href:"https://www.grammarly.com/signup",onClick:()=>t(r.AccountCreation,r.AccountCreation)});case"tour":return l.createElement(Si,{label:"Start tour",onClick:()=>{t(r.Tour,r.Tour),(0,ge.OB)().bgRpc.api.sendToFocusTab({kind:mi.B.Kind.showOnboardingDialog})}});case"tryWebsite":return l.createElement(yi,{items:vi,onClick:e=>t(r.TryWebsite,e)});case"viewApps":return l.createElement(yi,{items:bi,onClick:e=>t(r.ViewApps,e)});default:return null}})(e,g)}))};var Ti=i(72314);const Mi=({htmlToSanitize:e,...t})=>l.createElement("div",{...t,dangerouslySetInnerHTML:{__html:(0,Ti.sanitize)(e)}});var Ri=i(96714);const Pi=({title:e,details:t,examples:i})=>l.createElement("div",{className:Ri.learnMore},void 0!==e?l.createElement("div",{className:Ri.learnMoreTitle},(0,et.kC)(e)):null,l.createElement(Mi,{htmlToSanitize:t}),i.map(((e,t)=>{const i=e.type===je.correct,n=e.type===je.incorrect,a=i||n?l.createElement("div",{...(0,ri.Sh)(Ri.learnMoreExampleIcon,i?Ri.learnMoreExampleCorrectIcon:null,n?Ri.learnMoreExampleIncorrectIcon:null)}):null;return l.createElement("div",{className:Ri.learnMoreExample,key:`learn-more-example-${t}`},e.title?l.createElement(l.Fragment,null,l.createElement("div",{className:Ri.learnMoreExampleIconAndTitle},a,l.createElement("div",{className:Ri.learnMoreExampleTitle},e.title)),l.createElement(Mi,{...(0,ri.Sh)(a?Ri.learnMoreExampleTextMarginLeft:null,e.useItalicText?Ri.learnMoreExampleTextItalic:null),htmlToSanitize:e.text})):l.createElement(Mi,{...(0,ri.Sh)(e.useItalicText?Ri.learnMoreExampleTextItalic:null),htmlToSanitize:e.text}))}))),Li=({learnMoreInfo:e})=>l.createElement(Dt.F.Fragment,null,e.view((e=>e?l.createElement(Pi,{title:e.showTitleOnContent?e.title:void 0,details:e.details,examples:e.examples}):null)));var Fi=i(36998),Di=i(25668);const Ui=({browser:e,className:t,title:i="BETA",color:n="blue"})=>"safari"!==e?l.createElement(Di.C,{title:i,className:t,kind:"blue"===n?"primary":"green"===n?"success":(0,H.Rz)(n)}):null,Hi=({popActiveView:e,browser:t,onClickBack:i,children:n})=>{const[a,r]=l.useState(!1);return l.createElement(Yt,{dataPartName:"proofit-view-overlay",popActiveView:e,panelClassName:Fi.proofitViewOverlayPanel,onClickBack:i},l.createElement("div",{className:Fi.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||a||(e.focus(),r(!0))}},l.createElement("div",{className:qt.defaultViewOverlayHeader},l.createElement("div",{className:Fi.proofitViewOverlayHeader},"Expert Writing Help",l.createElement(Ui,{browser:t,className:Fi.proofitViewOverlayHeaderBetaBadge}))),n))};var Bi=i(97683),Oi=i(44637),Ni=i(12333);var Gi=i(3873),Vi=i(60775),zi=i(34649);const ji=({turnaroundTime:e})=>l.createElement("div",{className:Vi.proofitHowItWorksSteps},l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStep,Vi.proofitHowItWorksStepOne)},"Your draft will be minimized and shared with writing experts.",l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumberContainer,Vi.proofitHowItWorksStepOneNumberContainer)},l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumber,Vi.proofitHowItWorksStepOneNumber)},"1"))),l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStep,Vi.proofitHowItWorksStepTwo)},"You will see progress indication. The average turnaround is ",e," seconds.",l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumberContainer,Vi.proofitHowItWorksStepTwoNumberContainer)},l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumber,Vi.proofitHowItWorksStepTwoNumber)},"2"))),l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStep,Vi.proofitHowItWorksStepThree)},"Your draft will re-open with revisions highlighted.",l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumberContainer,Vi.proofitHowItWorksStepThreeNumberContainer)},l.createElement("div",{...(0,ri.Sh)(Vi.proofitHowItWorksStepNumber,Vi.proofitHowItWorksStepThreeNumber)},"3")))),Wi=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:n=null,isLoading:a=!1,style:r,onTogglePrivacyInfo:s,showPrivacyInfo:o,disableHowItWorksInfo:c=!1,onDisableHowItWorksInfo:d,showHowItWorksInfo:u,onShowHowItWorksInfo:p})=>{const[g,h]=l.useState(null!=o&&o),[m,f]=l.useState(null!=u&&u),v=t>0?t:0;var b,w;l.useEffect((()=>{null==s||s(g)}),[g]),l.useEffect((()=>{h(null!=o&&o)}),[o]),l.useEffect((()=>{f(null!=u&&u)}),[u]),b=()=>null==p?void 0:p(),w=m,l.useEffect((()=>{w&&b()}),[w]);const S=l.useCallback((()=>{c||m?i():f(!0)}),[c,m,i]);return l.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...r}},l.createElement("div",{className:zi.proofitRequestForm},g?l.createElement(l.Fragment,null,l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoTitle},"How we protect you"),l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescription},l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItem},l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItem},l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),l.createElement("div",{className:zi.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),l.createElement(Zt.z,{kind:"outlined",onClick:()=>h(!1)},"Continue")):l.createElement(l.Fragment,null,m?l.createElement(ji,{turnaroundTime:e}):l.createElement(l.Fragment,null,l.createElement("div",{className:zi.proofitRequestFormImg}),l.createElement("div",{className:zi.proofitRequestFormTitle},"Get instant writing help"),l.createElement("div",{className:zi.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),l.createElement("div",{className:zi.proofitRequestFormCostAndTime},l.createElement("div",{className:zi.proofitRequestFormCost},l.createElement("div",{className:zi.proofitRequestFormCostAndTimeTitle},v," free ",(0,et._6)(v,"review","reviews")),l.createElement("div",{className:zi.proofitRequestFormCostAndTimeSubtitle},"left this month",l.createElement("sup",null,"*"))),l.createElement("div",{className:zi.proofitRequestFormTime},l.createElement("div",{className:zi.proofitRequestFormCostAndTimeTitle},e," seconds"),l.createElement("div",{className:zi.proofitRequestFormCostAndTimeSubtitle},"average turnaround")))),l.createElement(Zt.z,{kind:"primary",className:zi.proofitRequestFormRequestBtn,disabled:Boolean(n||a),onClick:S},a?l.createElement("div",{className:Gi.proofitRequestFormBtnLoadingSpinner}):c||m?"Start review":"Request now"),n||a?n?l.createElement("div",{className:zi.proofitRequestFormUnavailableMsg},l.createElement(Ni.Q,{info:n})):null:l.createElement(Zt.z,{kind:"link",onClick:()=>h(!0)},"Learn how we protect your privacy"),l.createElement("div",{...(0,ri.Sh)(zi.proofitRequestFormFootnote,m?zi.proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:zi.proofitRequestFormFootnoteFreeTrial)},m?l.createElement(Oi.J,{labelId:"proofit-request-form-how-it-works-dont-show-again",onChange:d},"Don't show this again"):l.createElement("span",null,l.createElement("sup",null,"*")," included with your Premium subscription")))))};var qi=i(50956);const Yi=({proofitVM:e,...t})=>{const i=(0,qi.fW)(),[n,a]=l.useState(!1),[r,s]=l.useState(!1),o=l.createElement(Dt.F.Fragment,null,(0,v.a)([e.feature.layoutCreated,e.feature.requestInfo,e.feature.turnaroundTime,e.feature.quotaRemaining,e.feature.requestDisabledInfo,e.feature.disableHowItWorksInfo]).pipe((0,g.U)((([t,o,c,d,u,p])=>t&&o.status!==Bi.eE.REVIEWING?l.createElement(Wi,{turnaroundTime:c,freeTrialQuota:d,onSubmit:()=>e.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:u,isLoading:o.status===Bi.eE.PREPARING||o.status===Bi.eE.PRE_SUBMIT,showPrivacyInfo:n,onTogglePrivacyInfo:a,disableHowItWorksInfo:p,onDisableHowItWorksInfo:t=>e.feature.onDisableHowItWorksInfo(t),showHowItWorksInfo:r,onShowHowItWorksInfo:()=>s(!0)}):null))));return t.insideSingleCardAssistant?o:l.createElement(Hi,{popActiveView:t.popActiveView,browser:t.browser,onClickBack:()=>{n?a(!1):r?s(!1):t.popActiveView()}},o)};var Ki=i(4721),Zi=i(58141);const $i=({suggestionsMade:e,onAccept:t,onFeedbackFormSubmitted:i,experimentClient:n})=>l.createElement("div",{className:Zi.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},l.createElement("div",{className:Zi.proofitReviewFormTitle},"Our experts made ",e," ",(0,et._6)(e,"suggestion","suggestions")),l.createElement("div",{className:Zi.proofitReviewFormDescription},"Are you satisfied with the suggestions that our experts provided?"),l.createElement("div",{className:Zi.proofitFeedbackForm},l.createElement(Ki.q,{hideLogo:!0,hideTitle:!0,hideTextBoxTitle:!0,withScore:!0,placeholderText:"How can we improve?",onSubmit:i,showPostSubmitScreen:!1,experimentClient:n})),l.createElement("div",{className:Zi.proofitDoneButton},l.createElement(Zt.z,{kind:"link",onClick:t},"Done"))),Xi=({proofitVM:e,experimentClient:t,...i})=>{const n=(0,qi.fW)(),a=l.createElement(Dt.F.Fragment,null,(0,v.a)([e.feature.layoutCreated,e.feature.requestInfo]).pipe((0,g.U)((([i,a])=>i&&a.status===Bi.eE.REVIEWING?l.createElement($i,{suggestionsMade:a.suggestionsMade,onAccept:()=>e.onCompleteRequest(n),onFeedbackFormSubmitted:t=>{e.onSubmitFeedback(t),e.onCompleteRequest(n)},experimentClient:t}):null))));return i.insideSingleCardAssistant?a:l.createElement(Hi,{popActiveView:i.popActiveView,browser:i.browser},a)};var Ji=i(47453),Qi=i(30507);const en=({message:e,children:t,placement:i,size:n,hideAfter:a,onClose:r,dataGrammarlyPart:s="ui-kit-popover-notification"})=>{const[o,c]=l.useState(!1);return l.useEffect((()=>{let e;return a>0&&(c(!0),e=self.setTimeout((()=>{c(!1),null==r||r()}),a)),()=>{e&&self.clearTimeout(e)}}),[a]),l.createElement(Ji.J,{dataGrammarlyPart:s,isOutsideReferenceElement:!1,headerContent:l.createElement("div",{className:Qi.popoverNotificationMessage},e),mainContent:null,show:o,placement:i,size:n,onClose:()=>{c(!1),null==r||r()},showArrow:!1,includeMainContentPadding:!1},t)};var tn=i(41455),nn=i(63418),an=i(86016),rn=i(73590),sn=i(26149);const on=({emotion:e,isBrandTonesEnabled:t,index:i,onFeedback:n})=>{const[a,r]=l.useState(0),s=l.createElement(Nt.u,{message:`${e.prevalence} intensity`,showDelay:300},l.createElement("div",{className:sn.emogenieReportItemEmotionIntensity},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return l.createElement("div",{key:`${e.name}-intensity-${t}`,...(0,ri.Sh)(sn.emogenieReportItemEmotionIntensityDot,i&&sn.emogenieReportItemEmotionIntensityDotActive)})})))),o=l.createElement(Nt.u,{message:e.brandToneDescription,showDelay:300},l.createElement("div",null,l.createElement(rn.JO.Info,{width:10,className:"off"===e.brandToneLabel?sn.emogenieBrandToneInfoIconOff:sn.emogenieBrandToneInfoIconOn}))),d=l.createElement(Di.C,{title:l.createElement(l.Fragment,null,e.brandToneLabel,"-BRAND ",o),kind:"off"===e.brandToneLabel?"error":"primary"}),u=e.brandToneLabel?d:s,p=`emotion-${i}-${e.name}`;return l.createElement(Dt.F.div,{...(0,ri.Sh)(sn.emogenieReportItem,t?sn.emogenieReportItemBrandTone:null),"data-grammarly-part":"tone-detector-emotion","data-tone-detector-emotion-name":e.name},l.createElement("div",{role:p},l.createElement("div",{className:sn.emogenieReportItemEmotion},l.createElement("div",{className:sn.emogenieReportItemEmotionEmojiAndNameContainer},l.createElement(en,{dataGrammarlyPart:"tone-detector-emotion-feedback-notification",message:"Thank you for the feedback!",hideAfter:a,placement:"right",onClose:()=>r(0),size:"medium"},l.createElement("div",{className:sn.emogenieReportItemEmotionEmojiAndName},l.createElement(tn.dy,{size:"small-medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:sn.emogenieReportItemEmotionEmoji}),l.createElement("span",{className:sn.emogenieReportItemEmotionName},e.name)))),l.createElement("div",{className:sn.emogenieReportItemEmotionBadgeOrIntensity},u),l.createElement(nn.m,{dataGrammarlyPart:"tone-detector-emotion-actions-menu",ariaMenuId:`${e.name}-emotion-actions-menu`,ariaMenuLabel:`${e.name} Emotion Actions Menu`,sections:[{title:"Help us improve",items:[{id:"tone-detector-emotion-actions-menu-item-like",icon:l.createElement("div",{className:sn.emogenieReportItemEmootionActionsMenuThumsUpIcon}),label:"Tone seems correct",onClick:()=>{n({emotionName:e.name,feedbackType:c.y_.EMOTION_LIKE}),r(1200)}},{id:"tone-detector-emotion-actions-menu-item-dislike",icon:l.createElement("div",{className:sn.emogenieReportItemEmootionActionsMenuThumsDownIcon}),label:"Tone seems incorrect",onClick:()=>{n({emotionName:e.name,feedbackType:c.y_.EMOTION_DISLIKE}),r(1200)}}]}],size:"medium",placement:"left"},l.createElement(an.h,{dataGrammarlyPart:"tone-detector-emotion-actions-menu-button",className:sn.emogenieReportItemEmotionActionsMenuButton},l.createElement("div",{className:sn.emogenieReportItemEmotionActionsMenuIcon}))))))};var ln=i(23619),cn=i(3931);const dn=({emotions:e,isBrandTonesEnabled:t,toneSuggestionInfo:i,onMount:n,onReportEmotionFeedback:a,...r})=>{let s;switch(l.useEffect(n,[]),!0){case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):s="Your tone may sound off to readers";break;case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):s="Something sounds slightly off...";break;case e.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):s=t?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:s="How this may sound to readers:"}return l.createElement("div",{className:cn.emogenieReport,"data-grammarly-part":"tone-detector"},l.createElement("div",{className:cn.emogenieReportHeader},l.createElement("div",{className:cn.emogenieReportHeaderTitle},s),r.showBetaLabel?l.createElement(Ui,{browser:r.browser}):null),l.createElement("div",{className:cn.emogenieReportItems,"data-grammarly-part":"tone-detector-emotions"},e.map(((e,i)=>l.createElement(on,{key:e.name,index:i,emotion:e,isBrandTonesEnabled:t,onFeedback:a})))),i?l.createElement(un,{...i}):null)},un=({onMount:e,emojiId:t,emojiLiteral:i,iconId:n,title:a,onClickCta:r,ctaText:s,isUphook:o})=>(l.useEffect(e,[]),l.createElement("div",{className:cn.emogenieReportToneSuggestionInfo},l.createElement("div",{className:cn.emogenieReportToneSuggestionInfoEmojiAndTitle},t?l.createElement(tn.dy,{size:"small-medium",unicodeHexArray:[t],unicodeLiteral:null,className:cn.emogenieReportToneSuggestionInfoEmoji}):i?l.createElement(tn.dy,{size:"small-medium",unicodeHexArray:null,unicodeLiteral:i,className:cn.emogenieReportToneSuggestionInfoEmoji}):n?l.createElement("img",{alt:n,src:`https://assets.grammarly.com/icons/v1/${n}.svg`,style:{width:20,height:20},className:cn.emogenieReportToneSuggestionInfoEmoji}):null,l.createElement("div",null,a)),o?l.createElement(ln.Y,{onClick:r,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta",cta:"Get Pro"}):l.createElement(Zt.z,{kind:"primary",onClick:r,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"},s))),pn=({emogenieService:e,toneSuggestionInfo:t,onShowToneSuggestionInfo:i,onClickToneSuggestionInfoCta:n,showBetaLabel:a,browser:r})=>l.createElement(Dt.F.Fragment,null,I.h.combine(e.viewState,null!=t?t:I.h.create(void 0),(({report:t,isBrandTonesEnabled:s},o)=>{let c;if(o&&(c={title:o.title,onMount(){null==i||i(o)},onClickCta(){null==n||n(o)},ctaText:"See suggestions",isUphook:!1},bt.isToneImprovementSuggestionUphookInfo(o)&&(c={...c,isUphook:!0,emojiId:o.emojiId,emojiLiteral:o.emojiLiteral}),c=bt.isInclusiveLanguageToneSuggestionInfo(o)?{...c,iconId:o.iconId}:{...c,emojiId:o.emojiId}),t&&Array.isArray(t.emotions)){const i={emotions:t.emotions,isBrandTonesEnabled:s,onMount:()=>e.actions.trackReportShow(s),onReportEmotionFeedback:t=>e.actions.reportEmotionFeedback(t),toneSuggestionInfo:c};return a?l.createElement(dn,{...i,showBetaLabel:!0,browser:r}):l.createElement(dn,{...i,showBetaLabel:!1})}return null})));var gn;!function(e){e.Feedback="feedback",e.Settings="settings",e.ToneInsight="toneInsight",e.LearnMore="learnMore"}(gn||(gn={}));const hn=l.createContext({isEnabled:!1,currentView:null,setCurrentView:()=>{}}),mn=({children:e,view:t})=>{const{setCurrentView:i,isEnabled:n}=l.useContext(hn);return l.useEffect((()=>{if(n)return i(t),()=>i(null)}),[n,t]),l.createElement(l.Fragment,null,e)};var fn=i(86399),vn=i(71238);const bn=e=>{const t=t=>"known"===t.source.kind?l.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):l.createElement(e.designSystem.image,{key:t.source.name,backgroundColor:t.backgroundColor,...t.source});return l.createElement(vn.v.Dropdown,{label:t(e.icon),placement:"top right",theme:{button:yn.button,item:yn.item},"aria-label":e.menu.meta.label,onAction:t=>(0,H.zG)(e.menu.sections,fn.tS((e=>e.items)),fn.Ew((e=>e.id===String(t))),T.bw((t=>e.onClick(t.onClickActions,t.id)())))},e.menu.sections.map(((e,i)=>l.createElement(vn.v.Section,{key:i,title:e.title},e.items.map((e=>l.createElement(vn.v.Item,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))},wn={flexShrink:0,alignItems:"center",justifyContent:"center",height:Mt.ux.rem(2),width:Mt.ux.rem(2)},Sn={$nest:{"& i":{height:Mt.ux.rem(2),width:Mt.ux.rem(2)}}},yn=Mt.ux.stylesheet({button:[wn],item:[Sn]});var En=i(39435);const Cn={...(0,Tt.T)({default:{},hovered:{backgroundColor:Pt.NeutralGray10},clicked:{},disabled:{},toggled:{},hidden:{}})},kn=Mt.ux.stylesheet({main:[Lt.o_],primary:[Lt.U8],secondary:[Cn,Lt.P5],toggle:Lt.hc,round:[Lt.$O],yellow:Lt.g2,outlined:[Cn,Lt.Yf],link:[Lt.wy],darkPrimary:[Lt.hx],darkSecondary:[Lt.kG],ggoPrimary:[Lt.KF]});const _n=({children:e})=>l.createElement("div",{className:En.singleCardAssistantNativeContentWithPadding},e),An=({children:e,maxHeight:t})=>l.createElement("div",{style:{maxHeight:t,overflowY:"auto"}},e),In=Mt.ux.style(Lt.o_,(0,Tt.T)({default:{backgroundColor:Pt.Gold20,color:Pt.Gold90,lineHeight:Mt.ux.rem(2),transitionDuration:".2s",$nest:{"& span":{color:Pt.Gold90}}},hovered:{backgroundColor:Pt.Gold30,$nest:{"& i":{fill:Pt.Gold90,stroke:Pt.Gold90},"& span":{color:Pt.Gold90}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:Pt.Gold90,stroke:Pt.Gold90},"& span":{color:Pt.Gold90}}}),xn=()=>{const e=(0,Lt.ND)(),t=e.primary;return{...e,primary:e=>"goPremium"===e.name?l.createElement(Rt.zx.Primary,{name:e.name,onClick:e.onClick,className:In},e.text):l.createElement(t,{...e})}};var Tn=i(45411),Mn=i(4976),Rn=i(16873),Pn=i(5039),Ln=i(68970),Fn=i(89795),Dn=i(77432);const Un=(e,t,i,n,a,r,s,c,d,h,b,w,y,E,k,_,A,M,R,P,F,Se,ye,Ee,ke,Ae,Te,Me)=>{const Re=re.C8.Logging.getLogger("SingleCardAssistant.ViewModels"),Pe=I.h.create(N.A.defaultState),Le=V.t.create(V.t.defaultLensFilters,{...V.t.defaultTextFilters,[B.R.SpecialId.Closed]:H.jv,[B.R.SpecialId.AllAlerts]:O.bZ.belongsToAllAlerts}),Fe=N.A.get(e.alertsList.state,e.alertsList.lensesScores,Le).subscribe(C.wW(Pe)),De=new Rn.t(Pe.view("lenses"),Le,e.sessionModel.scoreStatus),Ue=(0,W.$y)((0,Fn.a)(t).getContents),He={features:new Set([q.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:K.j.Density.minimal,shouldAnimateAlertApply:q.IG.Default.shouldAnimateAlertApply,cardVisualMode:I.h.create(K.j.CardVisualMode.RegularLightMode)},Be=(0,q.Ls)(Ue,e.alertsReader,He,(()=>f.of(x.YP)),e.mutingAlertsReader),Oe=I.h.create(16),Ne=xe.getCapabilities(Be,e.alertsReader),Ve=new ee.gi(xe.equatable.structEq,xe.defaultOrd(Ne)),je=()=>()=>H.yR,We=X.v.createWithInitialAlerts(Ve,je,Le,(0,H.ff)(O.bZ.isMuted),Ne),Ye=new z.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,Le.alertCanBeDisplayed),Ze=new Q.oq(e.alertsList.state,e.alertsReader,Pe.view("lenses"),Ye,De,We,je,Ne,Le),$e=I.h.create(Ze.emptyState(B.R.SpecialId.AllAlerts).patch({alertSource:O.l$.sidebar})),Qe=new Tn.C((0,ge.nD)(_())),et=new j.Xx({flush:()=>t.flushChanges()},new u.x,Be,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,H.zG)(e.mutedAlertsCategoriesModel,x.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,Ln.Um)().suggestionsSettings)})))),x.G(fe.B.getCardsViewModelSendToURLExperiment(Qe,r)),H.jv,xe.getActiveItemWithAlert,Ne,Qe,{bufferTransitions:!0,showGbPrompt:fe.B.shouldShow(c.get())}),tt=new le.q(P.sduiFeedbackService,Ne,$e,P.sduiManager,P.sduiFeedManager,e.alertsReader,{...e.plagiarismClient,...e.writingExpertClient},et,Qe),nt=tt.sduiActionEvents.subscribe((({actions:e})=>e.forEach((e=>{"closeCard"===e.type&&d()})))),at=new ze(s,r),rt=new me.y(et.actionEvents,r,e.alertsReader),st=new Y.o((()=>se.right(void 0))),ot=I.h.create(!1),ct=new gt.x(e.alertsList,$e,3,Me,r),dt=I.h.create(!1),{nativeUpgradeHook:ut,upgradeHookExperiment:pt,experimentGroup:mt}=(0,It.o)(A),ft=pt.name;Te.upgradeHooksExp.upgradeHookExperimentPeek(ft,mt,s);const vt=new xt(P.sduiManager.state),bt=((e,t,i,n,a,r)=>{const s=t.pipe(g.U(_e.D1.NativeUpgradeHook.findUpgradeHookSduiItem),g.U(x.pC));return e.pipe(S.M(s,i),g.U((([{actions:e},t,i])=>{e.forEach((e=>{"pushAssistantFeed"===e.type&&"default-feed"===e.feedId&&(t||i)&&n.upgradeHooksExp.upgradeHookFeedRendered(a,r,(0,Et.ge)())}))})))})(tt.sduiActionEvents,P.sduiManager.state,vt.upgradeHookCardExists,Te,ft,mt).subscribe(),yt=ut?At(e.alertsList.state,$e,P.sduiBufferService,P.sduiManager.state,dt,A):ae.w0.EMPTY,kt=ut?((e,t,i,n,a,r,s)=>e.pipe(g.U((({actions:e,cardId:o})=>e.forEach((e=>{"upgradeToPremium"===e.type?(i.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),i.openUpgradeUrl(gt.L.Place.assistantCardList)):"notify"===e.type&&e.userAction===it.nz.Focus?o===_e.D1.NativeUpgradeHook.ID?(t.set(!0),i.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,ht.Tb)().upgradeHooksExp.upgradeHookCardShown(r,s,(0,Et.ge)())):t.set(!1):"removeRoot"===e.type&&o===_e.D1.NativeUpgradeHook.ID&&(t.set(!1),a.set(!0),n.pushCapiSduiEvent({kind:"sdui_remove",sduiRootId:_e.D1.NativeUpgradeHook.ID}))}))))).subscribe())(tt.sduiActionEvents,ot,ct,P.sduiBufferService,dt,ft,mt):vt.processUpgradeHookSduiCardActions(tt.sduiActionEvents,ct,Te,ft,mt),_t=ut?ot:vt.upgradeHookCardFocused,Tt=_t.subscribe((e=>{e&&Dn.p.dismissInlineYellowUnderlines.set(!0)})),Mt=P.sduiFeedManager.feed.pipe(g.U((e=>e.feedId===_e.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),Rt=I.h.create(!1),Pt=v.a([_t,Mt]).pipe(g.U((([e,t])=>e||t))).subscribe(C.wW(Rt)),Dt=((e,t,i)=>i.pipe(p.h(Boolean),St.P()).subscribe((()=>{e.getTreatment(t)})))(A,pt,Rt),Ut=v.a([(0,Pn.gM)(P.sduiManager.state,P.sduiFeedManager.feed),Rt]).pipe(g.U((([e,t])=>i=>e(i)&&!O.bZ.isHidden(i)||t&&O.bZ.isPremium(i)&&O.bZ.isHidden(i)||O.bZ.isLocked(i)||O.bZ.isLockedUIUphook(i)))),Ht=new Pn.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,$e,Ut,xe.getActiveItemWithAlert,Rt,i,!0),Bt=(0,Mn.hp)($e,Ht,Oe,st,t,Re),Ot=$e.view(Z.nL.getActiveAlertHighlight(xe.getActiveItemWithAlert)),Nt=new G.mN(t,Ht,e.alertsReader,Ot,$e.view((e=>e.currentLens.meta.filter))),Gt=new wt(e.alertsReader,e.alertsList.state,(()=>x.ij(null==w?void 0:w.sessionUuid)),r,A,R,ct,c,et.actionEvents,P.sduiManager.state),Vt=new qe($e,e.alertsReader,b,tt.sduiActionEvents,xe.getActiveItemWithAlert),zt=new Ge(tt.sduiActionEvents,Ae),jt=new lt(P.sduiManager,P.sduiFeedManager,P.sduiBufferService,E,$e,vt.upgradeHookCardExists,e.sessionModel,A);jt.initSuccessReportSDUIEmulation();const Wt=new Ie(P.sduiManager.state,et,jt.isSuccess,A),qt=Nt.alertClicked.pipe(ie.T(1),m.w(x.g_((()=>ne.E),f.of)),p.h((e=>e.alert.lensId!==B.R.SpecialId.Premium||(0,Ct.cN)(A))),S.M(P.sduiManager.state),g.U((([t,i])=>(0,H.zG)(e.alertsReader.getById(t.alert.id),x.tS(O.bZ.getRawId),x.tS((e=>_e.D1.getByAlertId(i,e))),T.MH))),S.M(P.sduiFeedManager.feed)).subscribe((([e,t])=>{let i;i=t.feedId===_e.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID||t.feedId===_e.D1.AssistantFeed.PERFORMANCE_SCORE_FEED?[_e.D1.AssistantFeed.createPopAssistantFeedAction(),_e.D1.AssistantFeed.createFocusAssistantCardAction(e.id)]:[_e.D1.AssistantFeed.createFocusAssistantCardAction(e.id)],et.actionEvents.next(_e.fr.create(i))})),Yt=((e,t,i,n)=>e.pipe(ie.T(1),m.w(x.g_((()=>ne.E),f.of)),p.h((e=>e.alert.lensId===B.R.SpecialId.Premium)),S.M(t,i)).subscribe((([e,t,i])=>{if(i.feedId===_e.D1.AssistantFeed.PERFORMANCE_SCORE_FEED){const e=(0,H.zG)(t,x.g_((()=>_e.D1.NativeUpgradeHook.ID),(e=>e.id))),i=[_e.D1.AssistantFeed.createPopAssistantFeedAction(),_e.D1.AssistantFeed.createFocusAssistantCardAction(e)];n.next(_e.fr.create(i))}})))(Nt.alertClicked,vt.upgradeHookCard,P.sduiFeedManager.feed,et.actionEvents),Kt=[(0,H.zG)(te.EQ.focusMarkByActiveAlert($e,Ht,e.alertsReader,xe.getActiveFocusableItem,Re.getLogger("MarksEffects.focusMarkByActiveAlert")),Z.nL.Effect.Producer.delayed(i)),...et.getApplicatorEffects(),...tt.getApplicatorEffects(),(0,H.zG)((0,Mn.k9)($e,Bt,I.h.create(x.YP),xe.getActiveAlignableItem,Ne),Z.nL.Effect.Producer.delayed(i)),ce.N.PrevNextNavigation.sideEffect(ce.N.PrevNextNavigation.Events.fromSduiCardActions(tt.sduiActionEvents),$e,Ne),de.P.SideEffects.createSDUIFeedSideEffect(Ne,P.sduiFeedManager.feed,xe.sduiToChecksFeedOrd(Ne),e.alertsReader)],Zt=ut?({state:e,metadata:t})=>{if(!Z.nL.hasCards(e))return se.left({state:e,metadata:t});const i=Z.nL.Prism.getLens();return se.left({state:i.modify((e=>x.pC(e.cardIndex)||e.items.size>1||(0,o.zG)(e.items.getAt(0),x.UI((e=>e.id!==_e.D1.NativeUpgradeHook.ID)),x.fS(H.jv))?e:{...e,cardIndex:x.G(0)}),e),metadata:t})}:se.left,$t=$.v.Items.getRemoveDisposedItemsTransformer(Ne),Xt=ue.i.DisablePrevNextButtons.create(Ne),Jt=$.v.Items.getSingleItemFeedPositionsUpdateTransformer(Ne),Qt=(0,H.ls)(Zt,oe.L9(jt.focusSuccessReportStateTransformer),oe.L9($t),oe.L9(Xt),oe.L9(Jt)),ei=new J.l($e,Ze,e.alertsReader,e.alertsService,Kt,xe.getActiveItemWithAlert,Qt),ti=I.h.create(x.YP);w&&w.capiMessages.pipe(p.h((e=>"start"===e.action))).subscribe((e=>ti.set(x.G(e))));const ni=new we.X(n,a,ke,s,(0,pe.ol)(n.view("user").get(),A)),ai=et.actionEvents.subscribe((0,H.ls)((0,he.JH)(e.alertsReader,he.SV.Source.assistant),T.bw((e=>(e.kind===he.SV.Kind.alertApply&&e.source===he.SV.Source.assistant&&M.incrementCounter(),y.next(e)))))),ri=(0,ve.W)(h),si=k.pipe(m.w(x.g_((()=>ne.E),(t=>t.initSingleCardAssistantActionsProcessing(e.alertsReader,(0,D.X5)(Nt,$e)))))).subscribe(),oi=new Ke(et,P),li=new U.D(r,ye,Ee,F),ci=(0,H.zG)(Se,x.UI((e=>new be.S(li,e,d,r)))),di=new Je(et.actionEvents,b,n.view("page"),a,A,r),pi=new Ce(c.get().isAnonymous,n.get(),r,ke),gi=function(e,t,i,n,a,r,s,o,c,d){const u=()=>s.next(void 0);return{...Ft.k,button:xn(),dropDownMenuButton:bn,nativeToneInsightsModal:()=>l.createElement(mn,{view:gn.ToneInsight},l.createElement(_n,null,l.createElement(pn,{emogenieService:e.emogenieService,toneSuggestionInfo:e.toneSuggestionInfo,onShowToneSuggestionInfo:t=>e.onShowToneSuggestionInfo(t),onClickToneSuggestionInfoCta:t=>e.onClickToneSuggestionInfoCta(t),showBetaLabel:!0,browser:o}))),nativeLearnMoreModal:()=>l.createElement(mn,{view:gn.LearnMore},l.createElement(An,{maxHeight:216},l.createElement(_n,null,l.createElement(Li,{learnMoreInfo:t.learnMoreInfo})))),nativeFeedbackModal:()=>l.createElement(mn,{view:gn.Feedback},l.createElement(_n,null,l.createElement(Ki.q,{domain:i.getDomain(),hideDomainHelpText:!0,onClose:u,align:"left",title:l.createElement("span",null,"How do you like Grammarly?"),onSubmit:e=>{i.submitFeedback(e)},withScore:!0,hideLogo:!0,hideTextBoxTitle:!0,placeholderText:"How can we improve?",compactDisplay:!0,submitButtonKind:"primary",experimentClient:r}))),nativeSettingsModal:()=>l.createElement(mn,{view:gn.Settings},l.createElement(_n,null,l.createElement(ii,{onClose:u,assistantSettingsViewModel:n,upgradeViewModel:a,experimentClient:r},(({content:e,footer:t})=>l.createElement(l.Fragment,null,e,t))))),nativeProofitModal:()=>(0,H.zG)(c,x.g_((()=>null),(e=>{const t=e.feature.dialogCaller().type;return t===L.WT.proofitReview?l.createElement(_n,null,l.createElement(Xi,{proofitVM:e,experimentClient:r,insideSingleCardAssistant:!0})):t===L.WT.proofitRequest?l.createElement(_n,null,l.createElement(Yi,{proofitVM:e,insideSingleCardAssistant:!0})):null}))),nativeGetStartedChecklistModal:({notify:e})=>{const t="test"===r.getTreatment(Xe.p.ChecklistUX);return l.createElement(_n,null,t?l.createElement(ui,{isStudent:d.isStudent}):l.createElement(xi,{getStartedChecklistViewModel:d,notify:e}))}}}(Gt,Vt,at,ni,ct,A,oi.popView,F,ci,pi),hi={...Ft.k,button:(0,Lt.ND)(kn)},mi=$e.lens(Z.nL.Prism.getLens());return{checksFeedItem:()=>xe.item(gi),checksFeedFlow:()=>xe.createCardListFlow(mi,Ne),lensState:$e,cardsViewModel:et,lensPreviewViewModel:De,cardsListScrollManager:st,alertProcessor:b,checkingService:w,assistantFeedbackViewModel:at,assistantSettingsViewModel:ni,getStartedChecklistViewModel:pi,marksViewModel:Ht,upgradeViewModel:ct,gnar:r,user:c,positionViewModel:ri,remSize:Oe,isSingleCardAssistant:!0,statisticsService:E,toneDetectorViewModel:Gt,learnMoreViewModel:Vt,createSnippetModalViewModel:zt,closeAssistant:d,bulkDismissViewModel:Wt,nativeViewsViewModel:oi,successReportViewModel:jt,outcomeExtraFooterViewModel:di,designSystem:gi,headerDesignSystem:hi,sduiEngine:P,sduiCardsViewModel:tt,dispose:()=>{ai.unsubscribe(),et.dispose(),ei.dispose(),Ht.dispose(),Fe.unsubscribe(),rt.dispose(),si.unsubscribe(),zt.dispose(),Vt.dispose(),Gt.dispose(),null==Wt||Wt.dispose(),null==oi||oi.dispose(),jt.dispose(),qt.unsubscribe(),Yt.unsubscribe(),yt.unsubscribe(),kt.unsubscribe(),nt.unsubscribe(),tt.dispose(),di.dispose(),vt.dispose(),Dt.unsubscribe(),bt.unsubscribe(),Pt.unsubscribe(),Tt.unsubscribe()}}};var Hn=i(24022),Bn=i(73204),On=i(95501),Nn=i(24858),Gn=i(39170),Vn=i(25700),zn=i(77400),jn=i(82589),Wn=i(91089),qn=i(18519),Yn=i(29416),Kn=i(60351),Zn=i(32356),$n=i(29095),Xn=i(44622),Jn=i(46025),Qn=i(58849),ea=i(10946),ta=i(87653),ia=i(58641),na=i(38459),aa=i(63314),ra=i(94839),sa=i(61111),oa=i(63709),la=i(68545),ca=i(79390);const da=l.forwardRef((({successView:e},t)=>{const i=l.useContext(Gn.m.Context),n=(0,sa.hM)((0,sa.JT)((0,o.zG)(e,la.oA),i));return l.createElement("div",{className:ca.compactSuccessLens,ref:t},l.createElement("div",{className:ca.compactSuccessLensContainer},Qn.UI.mount(oa.q,n)))}));da.displayName="SuccessLens";const ua=l.forwardRef((function({viewModels:e},t){return l.createElement("div",{className:ra.mainView},l.createElement(ga,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities}))})),pa=({position:e,isSuccess:t,children:i})=>l.createElement(Dt.F.Fragment,null,e.pipe(ke.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),g.U((e=>e.visible?l.createElement(Dt.F.div,{...(0,ri.Sh)(ra.cardListFooterStatic,e.animationInProgress?ra.cardListFooterAnimate:void 0,t?void 0:ra.cardListFooterDynamic),style:t?{}:{transform:_.ux.translateY(e.offset)}},i):null)))),ga=l.forwardRef((function({state:e,assistantCardListViewModel:t,cardsViewModel:i,cardsListScrollManager:n,capabilities:a,...r},s){const c=C.jw((e=>{let t=7;return t=31*t+(0,Jn.AC)(e.currentLens.id),t=31*t+($.v.WithSuccess.State.isInSuccess(a)(e)?1231:1237),t}),e),d=(0,o.zG)(c,g.U((e=>{const t=e.get();return $.v.WithSuccess.State.isInSuccess(a)(t)}))),u=(0,o.zG)((0,aa.ux)(e,n,a),S.M(e),g.U((([e,t])=>({visible:!Z.nL.hasCards(t)||x.Wi(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),w.O({visible:!1,offset:0,animationInProgress:!0}));return l.createElement(na.C,{className:ra.cardList,onClick:e=>{e.target.getAttribute("class")===ra.cardList&&t.assistantActions.next({type:ea.lo.Type.clickOnEmpty})},footer:l.createElement(Dt.F.Fragment,null,(0,o.zG)(d,g.U((e=>l.createElement(pa,{key:"assistant-footer",position:u,isSuccess:e},l.createElement(ia.pL,{predictionsVM:r.predictionsPreviewViewModel})))))),ref:e=>{t.cardListViewportHeight.set(x.ij(null==e?void 0:e.offsetHeight))}},(r=>l.createElement(Dt.F.Fragment,null,(0,o.zG)(v.a([d,t.havePremiumAlerts]),g.U((([o,c])=>o&&!c?l.createElement(l.Fragment,null,l.createElement(da,{successView:t.successView,ref:s})):l.createElement(aa.hz,{state:e,cardsViewModel:i,cardsListScrollManager:n,connectorElements:r,ref:s,header:l.createElement(l.Fragment,null,c?l.createElement("div",{className:ra.upgradeHookWrapper,"data-role":"uphook-wrapper"},Qn.UI.mount(Xn.n.TogglablePanel,t.upgradeHookFlow)):null),comparator:ta.O.listItemOrd,capabilities:a})))))))})),ha=l.forwardRef((function({viewModels:e,header:t,footer:i,className:n},a){return l.createElement(na.C,{ref:t=>{"function"==typeof a?a(t):a&&(a.current=t),e.assistantCardListViewModel.cardListViewportHeight.set(x.ij(null==t?void 0:t.offsetHeight))},className:n},(n=>l.createElement(aa.hz,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:n,header:t,footer:i,comparator:ta.O.listItemOrd,capabilities:e.capabilities})))}));var ma=i(74514),fa=i(12732),va=i(90738);const ba=l.lazy((()=>i.e(2826).then(i.bind(i,65362)).then((({BrandTonesActivationUphookView:e})=>({default:e}))))),wa=l.forwardRef((function({emogenieService:e,viewModels:t},i){const n=l.createElement(l.Fragment,null,l.createElement(Sa,{isBrandTonesEnabled:e.viewState.view("isBrandTonesEnabled"),institutionLogo:e.viewState.view("report").view((e=>null==e?void 0:e.institutionLogo)),institutionName:e.viewState.view("institutionName"),browser:t.assistantLayoutViewModel.browser}),l.createElement(pn,{emogenieService:e,showBetaLabel:!1,browser:t.assistantLayoutViewModel.browser}),l.createElement(Dt.F.Fragment,null,e.viewState.view((t=>!t.isBrandTonesEnabled&&!t.isBrandTonesConfigured&&!t.settings.hideBrandTonesActivationUphook&&t.settings.shouldShowBrandTonesActivationUphook&&l.createElement(l.Suspense,{fallback:l.createElement(l.Fragment,null)},l.createElement(ma.L,{chunkName:"brandTonesActivationUphook"},l.createElement(ba,{trackShow:e.actions.trackBrandToneActivationUphookShow,onActivateClick:e.actions.brandToneActivationUphookCTAClick,onDismissClick:e.actions.brandToneActivationUphookDismissClick})))))));return l.createElement(Yt,{dataPartName:"emogenie-view-overlay",popActiveView:()=>t.assistantLayoutViewModel.popActiveView(),panelClassName:qt.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},l.createElement(Dt.F.Fragment,null,t.lensPreviewViewModel.getLens(B.R.SpecialId.PredictionEmogenie).pipe(g.U((e=>e.count>0)),ke.x(),g.U((e=>e?l.createElement(ha,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:l.createElement(l.Fragment,null,n,l.createElement("div",{className:va.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):l.createElement("div",{className:qt.gradientViewOverlayContent},n))))))}));wa.displayName="EmogenieView";const Sa=({isBrandTonesEnabled:e,institutionLogo:t,institutionName:i,browser:n})=>l.createElement(Dt.F.Fragment,null,I.h.combine(e,t,i,((e,t,i)=>l.createElement("div",{className:qt.defaultViewOverlayHeader},l.createElement("div",{className:fa.emogenieViewOverlayHeader},e?l.createElement("div",null,t?l.createElement("img",{className:qt.logo,src:t,alt:"logo"}):null,i," Tone detector"):"Tone detector",l.createElement(Ui,{browser:n,className:fa.emogenieViewOverlayHeaderBetaBadge})))))),ya=({feedbackVM:e,layoutVM:t,experimentClient:i})=>l.createElement(Yt,{dataPartName:"feedback-view-overlay",popActiveView:()=>t.popActiveView(),panelClassName:qt.gradientViewOverlayPanel},l.createElement("div",{className:qt.gradientViewOverlayContent},l.createElement("div",{className:qt.defaultViewOverlayHeader},"Product Feedback"),l.createElement(Ki.q,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0,experimentClient:i})));var Ea=i(97225),Ca=i(51658);const ka=l.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:n,fontSize:a=9,isLoading:r})=>{const s=e/2,o=s-t/2,c=2*o*Math.PI,d=(r?75:i)/100*c,u=c-d,p=(e=>{const{red40:t,yellow50:i,green50:n}=Vt.Z;return e<65?t:e<95?i:n})(i);return l.createElement("div",{...(0,ri.Sh)(Ca.scoreRing,r&&Ca.loading),style:n},l.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},l.createElement("circle",{fill:"white",r:o,cx:s,cy:s}),l.createElement("circle",{stroke:Vt.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:o,cx:s,cy:s}),l.createElement("circle",{stroke:p,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:u},r:o,cx:s,cy:s}),l.createElement("text",{className:Ca.scoreText,x:"50%",y:"-35%",fontSize:a,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!r?i:"")))}));var _a=i(64150);const Aa=e=>{const t=Qn.Z.animatingFlow((()=>e.headerVM.logoScore),Ia);return l.createElement("div",{className:_a.logo_score},Qn.UI.mount(Pa,t))},Ia=(e,t)=>(0,o.zG)(e,x.hX((e=>e.type!==t.type)),x.UI((()=>Ea.Hk("fadeout","fadein")))),xa=Qn.UI.Node.make((()=>l.createElement(gi.K,{className:_a.grammarly_logo,size:22}))),Ta=Qn.UI.Node.make((({view:e})=>l.createElement(Dt.F.div,{className:_a.score_container,"data-grammarly-part":"assistant-score"},(0,o.zG)(e("score"),(0,g.U)((({capiScore:e,isLoading:t})=>l.createElement(l.Fragment,null,l.createElement(ka,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),Ma=Qn.UI.Union.make("type",{logo:xa,score:Ta}),Ra=Qn.UI.Transition.make({fadein:_a.logoscore_fadein},{fadeout:_a.logoscore_fadeout}),Pa=Qn.UI.Animated.make(Ra,Ma);var La=i(90298),Fa=i(28479);const Da=e=>{const[t,i]=l.useState(!1),[n,a]=l.useState(!1),r=e.viewModels.assistantLayoutViewModel,s=e.viewModels.assistantHeaderViewModel,c=l.useContext($n.O.Context),d=(0,o.zG)(e.viewModels.assistantProofitViewModel,x.UI((e=>e.feature)),x.UI((t=>l.createElement(Dt.F.Fragment,null,v.a([t.layoutCreated,r.activeView.view((e=>e.type===t.assistantViewType()))]).pipe(g.U((([i,n])=>i?l.createElement(Nt.u,{message:c.proofitTooltip,showDelay:Ot.gk,disabled:n},l.createElement(an.h,{onClick:()=>{n?r.popActiveView():(e.viewModels.gnar.proofitButtonClick("assistant_header"),r.pushActiveView({type:t.assistantViewType()}))},dataGrammarlyPart:"assistant-header-action-btn-proofit"},l.createElement("div",{className:_a.headerActionBtnProofitIcon}))):null)))))),x.WG),u=l.createElement(La.P,{onClick:s.close,tooltipMessage:"Close panel",dataGrammarlyPart:"assistant-header-action-btn-close"});return l.createElement(Nt.u,{message:"Grab and drag to move panel",showDelay:Ot.gk,disabled:t},l.createElement("div",{...(0,ri.Sh)(_a.header,n&&_a.actions_hovered),ref:e.draggableRef,onMouseDown:()=>i(!0),onMouseOut:()=>i(!1)},l.createElement(Aa,{headerVM:s}),l.createElement(Ua,null),l.createElement(Dt.F.div,{className:_a.headerActions,onMouseOver:()=>a(!0),onMouseOut:()=>a(!1)},r.isHeaderNavigationEnabled.view((e=>e?l.createElement(l.Fragment,null,d,l.createElement(Dt.F.Fragment,null,s.showSetGoalsActionButton.view((e=>e&&l.createElement(Nt.u,{message:c.setGoalsTooltip,showDelay:Ot.gk},l.createElement(an.h,{onClick:()=>s.open("setGoals"),dataGrammarlyPart:"assistant-header-action-btn-set-goals"},l.createElement("div",{className:_a.headerActionBtnGoalsIcon})))))),l.createElement(Dt.F.Fragment,null,I.h.combine(s.showSettingsActionButton,r.activeView,((e,t)=>{const i=t.type===U.a.Type.settings;return e&&l.createElement(Fa.l,{onClick:()=>i?r.popActiveView():r.pushActiveView({type:U.a.Type.settings}),enableTooltip:!i,dataGrammarlyPart:"assistant-header-action-btn-settings"})}))),u):u)))))},Ua=()=>l.createElement("div",{className:_a.draggableWrapper,"data-grammarly-part":"assistant-draggable-handler"},l.createElement("div",{className:_a.draggable}));var Ha=i(97310),Ba=i(25576),Oa=i(78285),Na=i(57324),Ga=i(9843),Va=i(76517),za=i(87110),ja=i(90107),Wa=i(57935),qa=i(50443);const Ya=({children:e,experimentClient:t})=>{const i=t.isGateEnabled(Ae.K.ExtensionA11yUIFixes),[n,a]=l.useState(null),r=l.useMemo((()=>({currentView:n,setCurrentView:a,isEnabled:i})),[n,i]);return l.createElement(hn.Provider,{value:r},e)},Ka=l.memo((function({viewModels:e,experimentClient:t,emogenieService:i,height:n,ready:a,OuterElementsPortalSource:r}){const s=new Tn.C((0,ge.nD)());(0,qa.X)("viewModels",e);const c=(0,qi.IQ)(),d=(0,qi.e8)(),u=l.useContext(qi.Dg).state.pipe(p.h((e=>!e.dragging)),w.O(Ga.h.create())),h=l.useContext(Va.Y4),m=(0,za.C7)(),f=I.h.create(_.UL.empty);(0,ja.A)(v.a([u,h]).pipe(g.U((([e,t])=>{const i=t.top+e.translate.y,n=t.left+e.translate.x,a=m.height-i-t.height,r=m.width-n-t.width;return{height:t.height,width:t.width,top:i,left:n,bottom:a,right:r}})),E.b(zn.wW(f)))),(0,ja.A)(u.pipe(E.b((t=>e.positionViewModel.onDrag(t))))),(0,ja.A)(e.assistantLayoutViewModel.activeView.pipe(k.G(),E.b((([t,i])=>{t.type!==i.type&&U.a.isDefault(i)&&e.cardsListScrollManager.paddingTop.set(0)}))));const b=l.useRef(null);return l.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(x.ij(b.current));const t=b.current?jn.rl(b.current,{subtree:!0,childList:!0}):Wn.C,i=f.view((e=>({top:e.top,left:e.left}))),n=(0,o.zG)(t,qn.V((0,Wa.m9)(1)),Yn.b(10),St.P()).subscribe((()=>a(i,c)),(()=>{a(i,c,!0)}));return()=>{n.unsubscribe()}}),[]),l.createElement(Za,{remSize:e.remSize,environment:s,viewport:f,experimentClient:t},l.createElement(Dt.F.div,{"data-grammarly-part":"assistant-popup-content",...(0,ri.Sh)(ra.assistant,c.pipe(w.O(!1),g.U((e=>e?ra.dragging:null)))),style:{height:n,maxHeight:"90vh"}},l.createElement(Da,{viewModels:e,draggableRef:d}),e.assistantLayoutViewModel.activeView.view((n=>U.a.isDefault(n)?l.createElement(ua,{viewModels:e,ref:b,key:"default-view"}):U.a.isEmogenie(n)?l.createElement(wa,{emogenieService:i,viewModels:e,experimentClient:t,key:"emogenie-view",ref:b}):U.a.isFeedback(n)?l.createElement(ya,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,experimentClient:t,key:"feedback-view"}):U.a.isSettings(n)?l.createElement(ni,{viewModels:e,experimentClient:t,key:"settings-view"}):U.a.isProofitRequest(n)&&x.pC(e.assistantProofitViewModel)?l.createElement(Yi,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):U.a.isProofitReview(n)&&x.pC(e.assistantProofitViewModel)?l.createElement(Xi,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,experimentClient:t,key:"proofit-review-view"}):null))),l.createElement(r,null,l.createElement(Na.jv,null,l.createElement(Ba.L,{modalManager:e.assistantModalManager}))),l.createElement(Hn.X,null))})),Za=({environment:e,viewport:t,children:i,remSize:n,experimentClient:a})=>{var r;const s=l.useRef((0,$n.I)(Gn.m.getConfig(e.has(Tn.U.Flag.isAppleSystem)?"mac":"windows"))),o=null===(r=l.useContext(Ha.nS.Context))||void 0===r?void 0:r.host;return l.createElement(Oa.Q,{remSize:n,setter:e=>Nn.u.setRootCssVar(o||document.documentElement,e)},l.createElement(Kn.p.Manager,{cardWidth:Kn.p.withCardWidthEffect(Kn.p.defaultSizeObserver,(e=>{Kn.p.setRootCssVar(o||document.documentElement,e)}))},l.createElement(Tn.U.Context.Provider,{value:e},l.createElement(On.a.Context.Provider,{value:e},l.createElement($n.O.Context.Provider,{value:s.current.assistant},l.createElement(Gn.m.Context.Provider,{value:s.current.denali},l.createElement(Zn.TG.ContextMock,null,l.createElement(Vn.l.RootVirtualContainer,{viewport:t,name:"draggable"},l.createElement(Bn.G.DefaultProvider,null,l.createElement(Na.jv,null,l.createElement(Ya,{experimentClient:a},i)))))))))))};var $a=i(54961);const Xa=({textFieldRect:e,viewModels:t,children:i})=>{const{initialPositionOffset:n}=t.positionViewModel,a={...e.client,...e.size},r=(0,za.C7)(),s=t.assistantLayoutViewModel.layout;return l.createElement($a._,{bounds:r,hasDragHandle:!0},(({translate:e})=>l.createElement(Va.sX,{anchorRect:a,viewportRect:r,anchorOrigin:s.anchorOrigin,elementOrigin:s.assistantOrigin,anchorMargin:s.anchorMargin,repositioning:s.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:n.left,vertical:n.top}},(({top:t,left:n})=>l.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",transform:`translate(${e.x}px, ${e.y}px)`,zIndex:Ot.Eq,top:t,left:n}},i)))))};var Ja=i(47441),Qa=i(17806);const er=({alignmentRect:e,viewModels:t,onDomRectChange:i,anchor:n,experimentClient:a,onMaxHeightChange:r,children:s})=>{const o=(0,za.C7)(),{top:c,setTop:d,left:u,setLeft:p,width:g,height:h,positionerRef:m}=(0,Qa.G)(),{x:f,y:v,setDragState:b}=(0,Ja.f)(c,d,u,p),w=o.height;l.useEffect((()=>{const e=o.height-c-h,t=o.width-u-g;if(i({top:c,left:u,bottom:e,right:t,height:h,width:g}),r){r(w)}}),[c,u,g,h,w]);const S="textField"===n?{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"left",vertical:"bottom"},anchorMargin:{top:0,bottom:0,left:16,right:16},repositioning:[{horizontal:"flip",vertical:"translate"}]}:"GButton"===n?{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},anchorMargin:{top:4,bottom:4,left:0,right:0},repositioning:[{horizontal:"translate",vertical:"flip"}]}:(0,A.vE)(n);let y;a.isGateEnabled(Ae.K.ExtensionA11yUIFixes)&&(y=e=>!e.target.closest("button"));const{bottom:E,right:C}=function(e,t,i,n,a){const r=a.height-n,s=a.width-i,o=Math.max(0,Math.min(r,r-e)),l=Math.max(0,Math.min(s,s-t));return{bottom:o,right:l}}(c,u,g,h,o);return l.createElement($a._,{hasDragHandle:!0,bounds:o,onChangeDragState:b,dragEventFilter:y},l.createElement(Va.sX,{...S,anchorRect:e,viewportRect:o,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:t.positionViewModel.initialPositionOffset.left,vertical:t.positionViewModel.initialPositionOffset.top},onChangePosition:e=>m.current.next(e)},l.createElement("div",{style:{position:"fixed",transform:`translate(${f}px, ${v}px)`,zIndex:Ot.Eq,bottom:E,right:C}},s)))};var tr=i(69762),ir=i(41192),nr=i(74081),ar=i(62210),rr=i.n(ar);const sr={[gn.Settings]:"Grammarly settings are active",[gn.Feedback]:"Grammarly feedback form is active",[gn.ToneInsight]:"Grammarly tone settings are active",[gn.LearnMore]:"Additional information about Grammarly suggestion is active"},or=()=>{const{currentView:e,isEnabled:t}=l.useContext(hn);if(!t)return null;const i=null===e?"Grammarly assistant is active":sr[e];return l.createElement("div",{"aria-live":"assertive","aria-atomic":!0,className:rr().viewAnnouncer,"data-grammarly-part":"assistant-view-announcer"},l.createElement("p",null,i))};var lr=i(59808);const cr=({dragHandle:e,headerContent:t,className:i,children:n,includeContentPadding:a,footer:r,dataGrammarlyPart:s="single-card-assistant",maxHeight:o,onHeightChange:c})=>{const[d,u]=l.useState(0),[p,g]=l.useState(0),[h,m]=l.useState(0),f=l.useRef(null),v=l.useRef(null),b=l.useRef(null);l.useEffect((()=>{null==c||c(d+p+h)}),[d,p,h]);const w=l.useRef(null);l.useEffect((()=>{var e;return f.current?(null===(e=w.current)||void 0===e||e.disconnect(),w.current=nr.N.getResizeObserver((()=>{f.current&&u(f.current.getBoundingClientRect().height)})),w.current.observe(f.current)):u(0),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[f.current]);const S=l.useRef(null);l.useEffect((()=>{var e;return v.current?(null===(e=S.current)||void 0===e||e.disconnect(),S.current=nr.N.getResizeObserver((()=>{v.current&&g(v.current.getBoundingClientRect().height)})),S.current.observe(v.current)):g(0),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.disconnect()}}),[v.current]);const y=l.useRef(null);return l.useEffect((()=>{var e;return b.current?(null===(e=y.current)||void 0===e||e.disconnect(),y.current=nr.N.getResizeObserver((()=>{b.current&&m(b.current.getBoundingClientRect().height)})),y.current.observe(b.current)):m(0),()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.disconnect()}}),[r,b.current]),l.useEffect((()=>{v.current&&(v.current.scrollTop=0)}),[v.current,p]),l.createElement(l.Fragment,null,l.createElement("div",{...(0,ri.Sh)(lr.singleCardAssistant,i),style:o?{maxHeight:o}:void 0,"data-grammarly-part":s,role:"region","aria-label":"Grammarly assistant"},l.createElement("header",{"data-grammarly-part":s+"-header","aria-label":"Grammarly assistant toolbar",...(0,ri.Sh)(lr.singleCardAssistantHeader,e?lr.singleCardAssistantHeaderDraggable:null),ref:t=>{f.current=t,null==e||e(t)}},l.createElement(Dt.F.Fragment,null,t)),l.createElement("div",{"data-grammarly-part":s+"-content",...(0,ri.Sh)(lr.singleCardAssistantContent,a?lr.singleCardAssistantContentWithPadding:null),ref:v},n),r?l.createElement("footer",{"data-grammarly-part":s+"-footer",className:lr.singleCardAssistantFooter,ref:b,onClick:()=>r.onClick()},l.createElement("div",{className:lr.singleCardAssistantFooterText},r.content),r.tooltip&&l.createElement(Nt.u,{message:r.tooltip,showDelay:Ot.gk},l.createElement(an.h,{onClick:()=>r.onClick()},l.createElement("div",{className:lr.singleCardAssistantFooterButtonIcon})))):null),l.createElement(or,null))};var dr=i(76094),ur=i(30794),pr=i(37915),gr=i(56161),hr=i(5945),mr=i.n(hr);const fr={clarity:dr.G,correctness:ur.a,tone:pr.D,engagement:gr.L},vr=({suggestionType:e})=>{const t=fr[e];return l.createElement("div",{className:mr().container},l.createElement(t,null),"Your first ",e," suggestion!")},br=l.memo((function({viewModels:e,height:t,domRect:i,ready:n,maxHeight:a,experimentClient:r}){const s=new Tn.C((0,ge.nD)());(0,qa.X)("viewModels",e);const c=(0,qi.IQ)(),d=(0,qi.e8)(),u=l.useContext(qi.Dg).state.pipe(p.h((e=>!e.dragging)),w.O(Ga.h.create()));(0,ja.A)(u.pipe(E.b((t=>{e.positionViewModel.onDrag(t)})))),l.useEffect((()=>{const e=i.view((e=>({top:e.top,left:e.left})));n(e,c)}),[]);const h=e.nativeViewsViewModel.header.view(x.g_((()=>l.createElement(l.Fragment,null)),(t=>l.createElement(tr.P,{key:"header",sduiRootId:t.id,content:t,designSystem:e.headerDesignSystem,notify:(i,n,a)=>e.cardsViewModel.actionEvents.next({type:Ze.lY.Type.sduiCardAction,sourceId:i,cardId:t.id,actions:n,scope:a}),transitions:[],prevContent:x.YP,onAnimationEnd:H.Q1,onMount:H.Q1})))),m=e.checksFeedFlow(),f=(0,o.zG)(m,Fe.Z.extendActions(E.b((t=>{"content"===t.key&&"card"===t.action.key&&"alertRefSDUI"===t.action.action.key&&e.cardsViewModel.actionEvents.next(t.action.action.action)}))));return l.createElement(Za,{remSize:e.remSize,environment:s,viewport:i,experimentClient:r},l.createElement(Dt.F.Fragment,null,v.a([e.bulkDismissViewModel.successReportFooterBulkDismissAlertsCount,e.outcomeExtraFooterViewModel.extraFooterOutcomeType]).pipe(g.U((([i,n])=>l.createElement(cr,{key:"single-card-assistant",className:En.singleCardAssistant,dragHandle:d,headerContent:h,maxHeight:a,footer:wr(e,i,n),onHeightChange:e=>t.set(e)},Fe.UI.mount(ir.c.assistant(e.checksFeedItem(e.cardsViewModel.actionEvents)),f)))))),l.createElement(Hn.X,null))}));function wr(e,t,i){return t>0?function(e,t){return{content:l.createElement(l.Fragment,null,"We hid ",t," ",(0,et._6)(t,"suggestion","suggestions")," that didn’t seem relevant to your text. Want to review"," ",(0,et._6)(t,"it","them"),"?"),tooltip:"Review suggestions",onClick:()=>{e.bulkDismissViewModel.showBulkDismissFeed()}}}(e,t):void 0!==i?function(e){return{content:l.createElement(vr,{suggestionType:e}),onClick:()=>null}}(i):void 0}var Sr=i(87234),yr=i(56215),Er=i(21412),Cr=i(52319);var kr=i(62549),_r=i(32228),Ar=i(69995);function Ir(e,t){return(0,H.zG)(t,x.g_((()=>e),(({feedId:t})=>e.filter((e=>"pushAssistantFeed"===e.type&&e.feedId!==t)))))}function xr(e,t){if(e.isSingleCardAssistant){if(t.type===L.WT.sdui){const i=function(e){const t=(0,H.zG)(e.find((e=>"pushAssistantFeed"===e.type)),x.ij,x.g_((()=>[]),(e=>null!=e.cardId?[e.cardId,e.feedId]:[e.feedId])),Ne.UI((e=>(0,H.ls)(_r.a.get(Ar.j.Item.Id.from(e)),x.pC))));return e=>t.every((t=>t(e)))}(t.action.actions);return e.sduiEngine.sduiManager.state.pipe(p.h(i),St.P()).subscribe((i=>e.cardsViewModel.actionEvents.next(t.action)))}const i=(0,H.zG)(function(e){const t=e.type;switch(t){case L.WT.gButton:case L.WT.card:case L.WT.snippetsAppAction:return x.G({id:_e.D1.GButton.DEFAULT_GBUTTON_ID,getContent:_e.D1.GButton.getContent});case L.WT.emogenie:return x.G({id:_e.D1.GButton.TONE_GBUTTON_ID,getContent:_e.D1.GButton.getContent});case L.WT.getStartedChecklist:return x.G({id:_e.D1.GButton.GET_STARTED_GBUTTON_ID,getContent:_e.D1.GButton.getContent});case L.WT.proofitRequest:case L.WT.proofitReview:return x.G({id:_e.D1.Proofit.ID,getContent:_e.D1.Proofit.getContent});default:(0,A.L0)(t)}}(t),x.fS((()=>({id:_e.D1.GButton.DEFAULT_GBUTTON_ID,getContent:_e.D1.GButton.getContent}))));return e.sduiEngine.sduiManager.state.pipe(g.U((e=>i.getContent(e,i.id))),Oe.oA,St.P(),S.M(e.sduiEngine.sduiManager.state),g.U((([e,i])=>{const n=t.type===L.WT.card?t.alertId:null;return(0,H.zG)(x.ij(n),x.tS((e=>_e.D1.getByAlertId(i,e))),x.UI((e=>e.id)),x.g_((()=>({initialSduiItemId:x.YP,openingButtonActions:e.actions})),(t=>({initialSduiItemId:x.G(t),openingButtonActions:e.actions}))))})),g.U((({initialSduiItemId:i,openingButtonActions:n})=>{const a=Ir(n,e.sduiEngine.sduiFeedManager.currentFeed),r=_e.fr.create(a);return(0,H.zG)(i,x.g_((()=>((t.type===L.WT.proofitRequest||t.type===L.WT.proofitReview)&&a.some((e=>"pushAssistantFeed"===e.type))&&e.gnar.proofitButtonClick("gmail_toolbar"),r)),(e=>({...r,actions:r.actions.map((t=>"pushAssistantFeed"===t.type?{...t,cardId:e}:t))}))))}))).subscribe((t=>e.cardsViewModel.actionEvents.next(t)))}return t.type===L.WT.emogenie?e.assistantLayoutViewModel.pushActiveView({type:U.a.Type.emogenie}):t.type===L.WT.proofitRequest?e.assistantLayoutViewModel.pushActiveView({type:U.a.Type.proofitRequest}):t.type===L.WT.proofitReview?e.assistantLayoutViewModel.pushActiveView({type:U.a.Type.proofitReview}):e.assistantLayoutViewModel.pushActiveView({type:U.a.Type.default}),ae.w0.EMPTY}class Tr{constructor(e,t){this._params=e,this._felog=t,this._log=R.Y.create("AssistantControllerImpl"),this._integration=null,this._viewModels=I.h.create(null),this._assistantPopupIsReady=new u.x,this._initPerformance=void 0,this._openMeasure=void 0,this._height=I.h.create(0),this._domRect=I.h.create(_.UL.empty),this._maxHeight=I.h.create((0,za.C7)().height),this._openState=I.h.create("closed"),this._subs=new d.w.Keeper,this.openState=this._openState.view(),this.open=e=>{var t,i;const n=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,customFields:e.customFields,institutionInfo:e.institutionInfo,isGrammarlyEmployee:kr.n.isGrammarlyEmployee(e),isTestUser:kr.n.isTestUser(e),isFreeTrial:kr.n.isFreeTrial(e)}))),a=this._viewModels.get();if(null!==a)this._subs.push(xr(a,e));else{this._openMeasure=this._felog.assistant.openTime.startMeasure();const a=this._felog.assistant.initTime.startMeasure();this._openState.set("opening");const r=this._params.assistantService.createIntegration({gnar:this._params.gnar,felog:this._felog,snippetsFeature:this._params.snippetsFeature,experimentClient:this._params.experimentClient});if(!r)return this._log.warn("tried to open assistant with checking service not initialized"),a.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(i=(t=this._params).onOpen)||void 0===i||i.call(t,r),this._integration=r;const s=(0,o.zG)(x.ij(e.type===L.WT.card?e.alertId:null),x.UI(c.wQ.Id.create)),l=x.pC(r.engine.sduiEngine)?(0,o.zG)(T.MH(r.engine.sduiEngine),(({sduiBufferService:e,sduiFeedbackService:t,sduiPopoverManager:i})=>((e,t,i,n,a)=>{const r=(0,o.zG)(e.capiEvents,p.h(yr.hX.is("sdui_add","sdui_remove","sdui_update")),p.h((e=>"sdui_remove"===e.kind||!_e.D1.InlineCard.isInlineCard(e.sdui)))),s=new Er.A(t,r,i,a),l=new Cr._(s.state);return{sduiBufferService:e,sduiFeedbackService:n,sduiManager:s,sduiFeedManager:l,dispose:()=>{s.dispose(),l.dispose()}}})(e,r.engine.alertsList.state,r.engine.getByRawAlertId,t,i)),(e=>{const t=Un(r.engine,r.denaliViewAdapter,this._assistantPopupIsReady,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.checkingService,this._params.cardEvents,this._params.statisticsService,this._params.toneAIFeature,(()=>this._params.envFactory()),this._params.experimentClient,this._params.userEngagedByAlertsAcceptedService,this._params.emogenieService,e,this._params.browser,x.ij(this._params.proofitFeature),this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.dapiActions,this._params.snippetsFeature,this._felog,(()=>this._params.checkingService));return{...t,dispose:()=>{t.dispose(),e.dispose()}}})):(0,D.n)(r.engine,r.denaliViewAdapter,r.document.settings.lens("selectedLens"),this._params.emogenieService,this._params.toneAIFeature,this._params.ethicalAIFeature,this._params.snippetsFeature,x.ij(this._params.proofitFeature),this._assistantPopupIsReady,s,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.cardEvents,this._params.browser,this._params.layout.assistant,(()=>this._params.envFactory()),this._params.userEngagedByAlertsAcceptedService,this._params.dapiActions,(()=>this._params.checkingService));this._subs.push(xr(l,e)),l.isSingleCardAssistant&&this._subs.push(l.cardsViewModel.actionEvents.pipe(p.h(M.t.isSduiCardAction),p.h((e=>e.sourceId===_e.D1.Proofit.ID)),g.U((e=>Ir(e.actions,l.sduiEngine.sduiFeedManager.currentFeed))),p.h((e=>e.length>0))).subscribe((()=>{l.gnar.proofitButtonClick("assistant_header")}))),this._initPerformance=a.endMeasure(),this._viewModels.set(l)}},this.close=()=>{var e,t,i,n;null!==this._viewModels.get()&&(this._trackAssistantClose(),(0,o.zG)(x.ij(this._integration),x.tS((e=>e.engine.sduiEngine)),x.UI((()=>this._viewModels.get())),x.UI((e=>e.sduiCardsViewModel.onAssistantClose()))),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this._openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(n=this._viewModels.get())||void 0===n||n.dispose(),this._viewModels.set(null))},this._asyncReadyCbSub=null,this._getReadyFn=()=>{const e=this._felog.assistant.renderTime.startMeasure();return(t,i,n)=>{const a=e.endMeasure();let r;if((0,A.kG)(!!this._openMeasure,"Expected Assistant to be open"),n)this._openMeasure.cancelMeasure();else{const e=this._openMeasure.endMeasure();r=null==e?void 0:e.duration,this._initPerformance&&a&&e&&e.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:a.duration,total:e.duration})}this._asyncReadyCbSub=h.E.schedule((()=>{this._openState.set("open"),this._assistantPopupIsReady.next(void 0),this._trackAssistantOpen(t,r),this._trackAssistantDrag(t,i)}))}},this._applyIframeOffset=e=>{var t,i;const n=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return n?{...e,size:{width:n.width,height:n.height},client:{...e.client,left:n.left+e.client.left,top:n.top+e.client.top},offset:{...e.offset,left:n.left+e.offset.left,top:n.top+e.offset.top},page:{...e.page,left:n.left+e.page.left,top:n.top+e.page.top}}:e}}get view(){return this._viewModels.pipe(m.w((e=>null===e?f.of(null):v.a([b.R(self,"resize").pipe(w.O(null)),this._maxHeight]).pipe(S.M(this._params.layout.textField.rect.behavior),S.M(v.a([this._params.layout.gbutton.positionBehavior,this._params.layout.gbutton.sizeBehavior]).pipe(g.U((([e,t])=>{const i=t.heightAndWidth,n=t.heightAndWidth;return{top:e.client.top-n,left:e.client.left-i,width:i,height:n}})))),g.U((([[[t,i],n],a])=>{const r=this._applyIframeOffset(n),s=this._getReadyFn();let o;const c="test"===this._params.experimentClient.getTreatment(Xe.p.SingleCardAssistantNextToTextField);o=c?{...r.client,...r.size}:a;const d=e=>{this._maxHeight.set(e)};return e.isSingleCardAssistant?l.createElement(er,{anchor:c?"textField":"GButton",alignmentRect:o,viewModels:e,onDomRectChange:e=>{this._domRect.set(e)},onMaxHeightChange:d,experimentClient:this._params.experimentClient},l.createElement(br,{viewModels:e,height:this._height,ready:s,maxHeight:i,domRect:this._domRect.view(),experimentClient:this._params.experimentClient})):l.createElement(Xa,{textFieldRect:r,gButtonRect:a,viewModels:e},l.createElement(Ka,{viewModels:e,experimentClient:this._params.experimentClient,emogenieService:this._params.emogenieService,height:(0,F.Y)(e,r).pipe(y.R(this._assistantPopupIsReady.asObservable()),E.b(C.wW(this._height))),ready:s,OuterElementsPortalSource:this._params.OuterElementsPortalSource}))}))))))}get activeView(){return this._viewModels.pipe(m.w((e=>{var t;return(null==e?void 0:e.isSingleCardAssistant)?f.of(null):null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:f.of(null)})))}dispose(){var e;this.close(),this._subs.dispose(),null===(e=this._asyncReadyCbSub)||void 0===e||e.unsubscribe()}_trackAssistantOpen(e,t){var i,n;const a=this._viewModels.get();if(null!==a){const r=a.isSingleCardAssistant?{top:0,left:0}:a.positionViewModel.initialPositionOffset,{statisticsService:s}=this._params,o=s.alertCounts.get(),l=0===r.top&&0===r.left?a.isSingleCardAssistant||"default"===a.assistantLayoutViewModel.layout.name?"smart":"hardcoded":"sticky",c=a.isSingleCardAssistant?"default":a.assistantLayoutViewModel.activeView.get().type;this._params.gnar.assistantPopupShow(c,this._height.get(),e.get().left,e.get().top,o.unmutedCapiAlerts,o.filter((e=>P.S.isCapiAlert(e)&&e.outcome===$e.TC.clarity)).visibleNotInlineCapiAlerts,o.visibleInlineCapiAlerts,o.filter((e=>P.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,s.wordsCount.get(),l,null!==(n=null===(i=this._params.checkingService)||void 0===i?void 0:i.sessionUuid)&&void 0!==n?n:"",void 0,t,s.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),n=this._viewModels.get(),a=(null==n?void 0:n.isSingleCardAssistant)?"default":null!==(e=null==n?void 0:n.assistantLayoutViewModel.activeView.get().type)&&void 0!==e?e:U.a.Type.default;this._params.gnar.assistantPopupCloseButtonClick(a,i.unmutedCapiAlerts,i.filter((e=>P.S.isCapiAlert(e)&&e.outcome===$e.TC.clarity)).visibleNotInlineCapiAlerts,i.visibleInlineCapiAlerts,i.filter((e=>P.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,void 0)}_trackAssistantDrag(e,t){const i=e.get();let n=i;this._subs.push(t.pipe(k.G(),p.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();Sr.E9.l1Distance(t,n)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),n=t)})))}}var Mr=i(17622),Rr=i(8923),Pr=i(13839),Lr=i(21089),Fr=i(79499),Dr=i(70009);class Ur{constructor(e,t,i,n,a,r,s,o,l,c){this.connectionState=e,this.gnar=t,this.user=i,this._hoverProvider=n,this.document=a,this.formattingService=r,this.denaliViewAdapter=s,this.capiProxy=o,this.engine=l,this.experimentClient=c,n.setAssistantHover(s.highlightHoverProvider)}static create(e){var t;const i=new Pr.t(e.highlights,e.textObserver,e.replacementService,e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),n=Fr.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.textRevisionManager,e.customEventsFilter),a=(0,Dr.r)(n,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,Lr.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.snippetsFeature,e.sduiBufferService,e.sduiPopoverManager,e.felog,e.experimentClient,(t=>t.forEach((t=>e.alertProcessor.removeAlert(t,{_tag:Rr.i.alertAccepted})))));return new Ur(e.connectionState,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,n,a,e.experimentClient)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var Hr=i(85304),Br=i(79869);class Or{constructor({layout:e}){this._scroller=(0,Br.t)({scrollToMarkRect(t,i){(0,Hr.W)(e,t,null==i?void 0:i.paddingTop)},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Nr=i(92570);class Gr{constructor(e){this._params=e,this.sidebarEvents=new u.x,this.hoverProvider=new Mr.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=(0,Nr.j)(this._params.originalTextField,this._params.state,this._params.fieldSettings,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(g.U((e=>""===e.newText.trim())),ke.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(e){var t,i;const{layout:n,highlights:a,textObserver:r,replacementService:s,alertProcessor:o,textRevisionManager:l,state:c,document:d,requestAwaitService:u,formattingService:p,sduiBufferService:g,sduiPopoverManager:h}=this._params;if(null==this._checkingService)return null;const m=null===(i=(t=this._params).getCheckingServicePreviousState)||void 0===i?void 0:i.call(t);m&&(this._checkingService.state.value=m);const f=this._params.createAssistantScroller?this._params.createAssistantScroller():new Or({layout:n}),{user:v}=c.get();return Ur.create({layout:n,alertProcessor:o,textRevisionManager:l,connectionState:c.view((e=>e.connection)),highlights:a,textObserver:r,replacementService:s,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:e.gnar,felog:e.felog,user:{isPremium:v.premium,isAnonymous:v.anonymous,customFields:v.customFields,isGrammarlyEmployee:kr.n.isGrammarlyEmployee(v),isTestUser:kr.n.isTestUser(v),isFreeTrial:kr.n.isFreeTrial(v)},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:f,sidebarEvents:this.sidebarEvents,document:d,alertsTransformer:this._params.alertsTransformer,requestAwaitService:u,formattingService:p,getExistingAlerts:this._params.getExistingAlerts?()=>this._params.getExistingAlerts?this._params.getExistingAlerts():null:void 0,snippetsFeature:e.snippetsFeature,experimentClient:e.experimentClient,sduiBufferService:g,sduiPopoverManager:h,customEventsFilter:this._params.customEventsFilter})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},21089:(e,t,i)=>{i.d(t,{q:()=>a});var n=i(11456);function a(e){return Array.from(e.alerts.getAll()).filter(n.S.isCapiAlert)}},70009:(e,t,i)=>{i.d(t,{r:()=>Z});var n=i(18117),a=i(24332),r=i(90023),s=i(39953),o=i(96837),l=i(56215),c=i(1747),d=i(95159),u=i(73173),p=i(25797),g=i(68717),h=i(98563),m=i(46210),f=i(72998),v=i(97173),b=i(63153),w=i(74467),S=i(58578),y=i(23177),E=i(31391),C=i(3199),k=i(10883),_=i(63532),A=i(29416),I=i(59179),x=i(77400),T=i(954),M=i(78129),R=i(94444),P=i(90490),L=i(12518),F=i(4025),D=i(58303),U=i(52303),H=i(59833),B=i(7738),O=i(98350),N=i(39302),G=i(13391),V=i(45951);var z=i(74983),j=i(60022),W=i(4798),q=i(91778),Y=i(70932),K=i(78555);const Z=(e,t,i,g,S,T,M,P,Z,X,J,Q)=>{const ee=Y.Y.create("createEngine"),te=new E.w.Keeper,ie=function(e,t,i){const n=G.h.create(D.YP),a=G.h.create(D.YP);return{score:G.h.create(D.YP),scoreStatus:G.h.create(D.YP),title:G.h.create(void 0),textInfo:G.h.create(D.YP),checkingState:G.h.create(e.checkingState),asyncChecksState:G.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(N.j.calculateCompleteness),updateContext:e=>{const t=!R.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:n,updateDefaultContext:e=>{const t=!(0,s.zG)((0,r.bc)([n.get(),e],U.vB(R.R$.eq.equals)));return n.set(e),t},documentText:t.getText(),documentLength:G.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:G.h.create(N.dM.group.empty),calculateStats:()=>V.Vi(e.requestDocStats).then((e=>(a.set(D.G(e)),e))),recentDocumentStats:a}}(e,t,i),ne=t.changes.pipe(C.R(((e,i)=>o.RI.isReset(i)?(0,s.zG)(i.text,L.fold((()=>t.getText()),r.yR)):o.RI.isDelta(i)?(0,s.zG)(o.RI.resFromText(e).compose(i),F.VS((e=>e.text)),L.fold((()=>t.getText()),r.yR)):e),""));te.push(e.events.pipe(k.M(ne),_.b((([e,t])=>{if("alert_received"===e.kind){const i=(0,j.IM)(e.alert,q.Q.fromString("fake"));z.$.isConsistentWithText(i,t)||(X.alerts.inconsistentAlertWithText("assistant",null==i?void 0:i._tag),(0,O.N)(ee,i,t,"logging"))}}))).subscribe(),e.events.pipe(_.b((t=>{ie.checkingState.set(e.checkingState),l.hX.is("text_info")(t)?ie.textInfo.set(D.G(t.data)):l.hX.is("finish")(t)?(ie.score.set(t.score),ie.scoreStatus.set(t.scoreStatus)):l.hX.is("feedback_ack")(t)?((0,s.zG)(t,D.DT(l.hX.isUserFeedbackWithGeneralScore),D.UI((e=>e.outcomeScores.GeneralScore)),D.UI((e=>Math.trunc(100*e))),U.bw((e=>ie.score.modify((0,r.ls)(D.UI((t=>({...t,rank:e}))),U.vx(D.G({errorRateScore:0,rank:e}))))))),(0,s.zG)(t,D.DT(l.hX.isUserFeedbackWithScoreStatus),D.UI((e=>e.scoreStatus)),U.bw((e=>ie.scoreStatus.set(D.G(e)))))):l.hX.is("session_started")(t)&&ie.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),...J.isGateEnabled(W.K.CheetahClearSDUIBufferOnReconnect)?[]:[(0,K.o)((()=>D.WG(P)),e.events)],S.contentChanges.async.pipe(A.b(300),I.U((e=>e.newText)),I.U((e=>({full:e.length-1,trimmed:e.trim().length}))),_.b(x.wW(ie.documentLength))).subscribe()),(0,s.zG)(T(),D.UI((e=>{ie.updateDefaultContext(R.R$.parseDefault(e.defaultDocumentContext))})));const ae=new y.Xr,re=new m.Ek,se=(0,a.g_)((0,a.Zm)())(H.oA([D.G((e=>(0,s.zG)(M.get(),D.g_((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),oe=new d.a,le=new h.SC(ae,re,(()=>t.getContents().delta),e.events,e,ie.counters,se,void 0,oe),ce=u.e.create(le.state),de=new p.k(ce,le._ops);te.push(v.R.init(v.R.UserTextChangesSync.create(t),e.events,f.nR.ignoreTEResult(e),f.nR.ignoreResult(ae),re,f.Av.merge([le])).subscribe()),e.loadAlerts(g()),le.flushAlerts(),J.isGateEnabled(W.K.DontSyncAlertApplicationsWithInlineMode)||te.push($(le.state,Q));const ue=D.G(b.J.CategoriesModel.create(e.events,e,le.state,de,c.JW.ScopeType.GLOBAL)),pe=D.G(w.k.create(ce)),ge=(0,s.zG)((0,n.gz)(D.Kw)(P,Z),D.UI((([t,i])=>({sduiBufferService:t,sduiFeedbackService:new B.Q(e),sduiPopoverManager:i})))),he={enablePlagiarismSearch:e.enablePlagiarismSearch,disablePlagiarismSearch:e.disablePlagiarismSearch},me={requestWritingExpert:e.requestWritingExpert,enableWritingExpert:e.enableWritingExpert,disableWritingExpert:e.disableWritingExpert};return{alertsList:le,alertsReader:ce,alertsService:de,positionManager:ae,getByRawAlertId:oe.getByRawAlertId.bind(oe),sessionModel:ie,mutedAlertsCategoriesModel:ue,mutingAlertsReader:pe,shutdown:()=>{le.dispose(),te.dispose()},sduiEngine:ge,plagiarismClient:he,writingExpertClient:me}},$=(e,t)=>e.pipe(T.O(S.p.empty),M.G(),I.U((([e,t])=>S.p.diff(e,t))),I.U((e=>(0,s.zG)(e,P.vh.reduce([],((e,t)=>(0,s.zG)(t.alert,D.DT((e=>g.bZ.isApplied(e))),D.UI((e=>e.rawId)),D.fS((()=>D.YP)),D.g_((()=>e),(t=>[...e,t])))),r.yR,r.yR))))).subscribe((e=>{e.length&&t(e)}))},92570:(e,t,i)=>{i.d(t,{j:()=>s});var n=i(13391),a=i(87234),r=i(89193);const s=(e,t,i,n)=>{const s=t.view("page","domain").get(),o=(0,r.U)(e,s),l=i.view((({widgetOffset:e})=>null!=e?e:a.E9.zero));return{initialPositionOffset:l,updateInitialPositionOffset:e=>{a.E9.equals(e,l.get())||n.field.patchFieldSettings({fieldId:o,fieldSettings:{widgetOffset:e}})}}};n.h.create({top:0,left:0})},97982:(e,t,i)=>{i.d(t,{aU:()=>He,X5:()=>Be,n:()=>Oe});var n,a=i(24332),r=i(58303),s=i(90023),o=i(39953),l=i(27360),c=i(36355),d=i(68717),u=i(77326),p=i(33069),g=i(98800),h=i(80836),m=i(90818),f=i(81917),v=i(19103),b=i(96030),w=i(31854),S=i(30008),y=i(70930),E=i(73358),C=i(93167),k=i(9761),_=i(8080),A=i(50278),I=i(80936),x=i(5961),T=i(60970),M=i(90155),R=i(59179),P=i(954),L=i(90572),F=i(78129),D=i(31603),U=i(10883),H=i(64271),B=i(29479),O=i(94592),N=i(84714),G=i(74822),V=i(24666),z=i(20161),j=i(36344),W=i(13391),q=i(97767),Y=i(19813),K=i(12518),Z=i(4025),$=i(52303),X=i(4603),J=i(66813),Q=i(22196),ee=i(34821),te=i(10946),ie=i(87653),ne=i(73333),ae=i(49140),re=i(84308),se=i(31391),oe=i(17613),le=i(61793);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(n||(n={}));class ce{constructor(e,t,i,a,l,c){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=a,this._gnar=l,this._closeAssistant=c,this.showSetGoalsActionButton=W.h.create(!0),this.showSettingsActionButton=W.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=re.a([this._sessionModel.score.view(r.UI((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(R.U((([e,t])=>(0,o.zG)(e,r.UI((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,s.ls)(r.tS((e=>e.messages)),r.UI((e=>e.assistantHeader)),r.fS((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,re.a)([this._layoutVM.activeView,this.score]).pipe(R.U((([e,t])=>(0,o.zG)(t,r.g_((()=>({type:"logo"})),(t=>e.type!==le.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),V.x(n.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===le.a.Type.default?"visible":"hidden")),this._subs=new se.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(l.Iy.setGoals("user")).subscribe());else(0,oe.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(F.G()).subscribe((([e,t])=>{var i,n;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,o.zG)(this._sessionModel.textInfo.get(),r.FS))||void 0===i?void 0:i.wordsCount,null===(n=(0,o.zG)(this._sessionModel.score.get(),$.Fc))||void 0===n?void 0:n.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var de=i(23684),ue=i(77400),pe=i(58849),ge=i(58641);class he{constructor(e,t,i,n,a){this._lensPreviewVM=e,this._layoutVM=t,this._emogenieService=i,this._session=n,this._gnar=a,this._subs=new se.w.Keeper,this.previewState=W.h.create({kind:ge.fA.hidden}),this.previewFlow=pe.Z.fromSideEffect((e=>{if("tone"===e.action.key){const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:le.a.Type.emogenie})}(0,oe.vE)(e.action.key)}),this.previewState),this._previewState=(0,s.zG)(re.a([this._emogenieService.viewState.view((e=>r.ij(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._session.documentLength,this._lensPreviewVM.getLens(c.R.SpecialId.PredictionEmogenie)]),R.U((([e,t,i,n])=>r.pC(e)&&i.trimmed>0?{kind:ge.fA.visible,tone:(0,s.zG)(e,r.UI((e=>({emotion:e,alertsCount:n.count,brandToneOffImageUrl:t}))))}:i.trimmed>0?{kind:ge.fA.zero}:{kind:ge.fA.hidden}))),this._subs.push(this._previewState.subscribe(ue.wW(this.previewState)))}dispose(){this._subs.dispose()}}var me=i(81549),fe=i(94267),ve=i(31789),be=i(29416),we=i(3527),Se=i(4976);function ye(e,t,i,n,a){return{id:"changeAlertEffect",when:c.R.isWithAlertsId,what:k.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(z.w((e=>{const s=t.get();if(!k.nL.hasCards(s))return ve._(new oe.ej("Cannot update state without cards"));switch(e.type){case w.lY.Type.alertMinicardButtonClick:return(0,o.zG)(i.getRegistered(e.alertHighlight.alert.id),r.g_((()=>(a.warn("somehow we got click on non registered alert",e.alertHighlight.alert),j.E)),(()=>N.of(e.alertHighlight))));case w.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,o.zG)("right"===e.direction?n.nextAlert(t.card):(0,o.zG)(n.prevAlert(t.card),$.vx(n.anyRegisteredAlert(t.card))),r.g_((()=>j.E),(e=>N.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.zG)(i.getRegistered(t.card.activeAlert.id),r.g_((()=>j.E),(()=>N.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,oe.vE)(t)}default:return j.E}})),R.U((e=>({alertHighlight:e,alertSource:d.l$.sidebar,options:{order:"lensOrder"}})))))}}function Ee(e,t,i){const n=e.pipe(L.h(k.nL.hasCards),be.b(0),L.h((e=>e.currentLens.items.size>0&&r.Wi(k.In.getActiveItem(e.currentLens))&&i.get())),R.U((e=>(0,o.zG)(e.currentLens.items.getAt(0),r.tS(ie.O.checksFeedItemsMapper((e=>r.G(e.activeAlert)),(e=>r.G(e.activeAlert)))),$.bw((()=>t.set(r.G(Se.CV.skip))))))),we.oA,L.h((e=>e.state.type===d.bZ.State.Type.REGISTERED)),V.x());return{id:"focusFirstCardSideEffect",when:e=>e!==c.R.SpecialId.PredictionEmogenie,what:k.nL.Effect.SwitchLens.create(n.pipe(U.M(e),R.U((([e,t])=>({lensId:t.currentLens.id,alertSource:d.l$.text,options:{order:"lensOrder",toFocus:k.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function Ce(e,t,i){const n=e.pipe(R.U((e=>n=>e.type===M.ay.Type.AppliedAlertAnimationFinished&&n.currentLens.meta.filter(e.alert)&&k.nL.hasItems(n)?n.patch({currentLens:(0,o.zG)(K.tryCatch((()=>d.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(n.currentLens):n.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),K.getOrElse((()=>n.currentLens))),alertSource:e.alert.state.source}):n)));return{id:"onAlertApply",when:s.W8,what:k.nL.Effect.Applicator.create(n)}}function ke(e,t){return{id:"lensChangeEffect",when:s.W8,what:k.nL.Effect.SwitchLens.create(e.pipe(U.M(t),L.h((([e,t])=>e.lensId!==t)),R.U((([e])=>({lensId:e.lensId,alertSource:d.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?k.nL.Effect.FocusBehavior.focusFirst:k.nL.Effect.FocusBehavior.noFocus}})))))}}var _e,Ae=i(59833);!function(e){const t=(e,t)=>e.pipe(L.h(w.lY.isCreateSnippetAction),R.U((({id:e})=>i=>{const n=(0,s.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),K.fold((()=>i.currentLens.items),s.yR));return m.sU.itemsLens.set(n,i)})));e.applicatorEffects=(e,i)=>(0,s.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],Ae.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:c.R.isWithAlertsId,what:k.nL.Effect.Applicator.create(e)}))))}(_e||(_e={}));var Ie=i(45411),xe=i(49083),Te=i(16873),Me=i(5039),Re=i(14372),Pe=i(95486),Le=i(68970),Fe=i(62549),De=i(79992),Ue=i(89795);const He=e=>e.view((e=>(0,o.zG)(r.DT(k.nL.hasItems)(e),r.UI((e=>e.currentLens.items)),r.UI((e=>e.filter((0,q.Kg)(ie.O.isAlertCard,ie.O.isAlertsBundle)))),r.UI((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),r.g_((()=>null),(e=>e.values()))))).pipe(P.O([]),L.h(De.Nf),F.G(),R.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),D.J()),Be=(e,t)=>e.alertClicked.pipe(R.U((e=>(0,o.zG)(e,r.g_(s.gn,(e=>e.alert))))),L.h(De.fQ),U.M((e=>e.pipe(R.U((e=>k.nL.hasCards(e)&&c.R.isMainLens(e.currentLens.id)?ie.O.getActiveItemWithAlert(e.currentLens):r.YP)),R.U((e=>(0,o.zG)(e,r.g_((()=>null),(e=>e.activeAlert)))))))(t)),L.h((([e,t])=>e.id!==(null==t?void 0:t.id))),R.U((([e,t])=>e))),Oe=(e,t,i,n,D,U,re,se,oe,ue,pe,ge,ve,be,we,Ae,Oe,Ne,Ge,Ve,ze,je,We,qe,Ye,Ke,Ze)=>{const $e=Y.C8.Logging.getLogger("view_models"),Xe=W.h.create(u.A.defaultState),Je=W.h.create(!1),Qe=W.h.create(!1),et=W.h.create(!1),tt=Fe.n.isFree(pe.view("user").get()),it=g.t.create({...g.t.defaultLensFilters,[c.R.SpecialId.AllAlerts]:d.bZ.belongsToAllAlerts},{...g.t.defaultTextFilters,[c.R.SpecialId.Closed]:s.jv,[c.R.SpecialId.AllAlerts]:(e=>(0,q.W9)((()=>!Qe.get()),(0,q.W9)((e=>!et.get()||d.bZ.isInline(e)),e)))(d.bZ.belongsToAllAlerts)}),nt=H.T(Qe,Je,et).pipe(B.h(O.PU)),at=u.A.get(e.alertsList.state,e.alertsList.lensesScores,it).subscribe(O.wW(Xe)),rt=new Te.t(Xe.view("lenses"),it,e.sessionModel.scoreStatus),st=(0,f.$y)((0,Ue.a)(t).getContents),ot={features:new Set([S.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:C.j.Density.minimal,shouldAnimateAlertApply:S.IG.Default.shouldAnimateAlertApply,cardVisualMode:W.h.create(C.j.CardVisualMode.RegularLightMode)},lt=(0,S.Ls)(st,e.alertsReader,ot,(()=>N.of(r.YP)),e.mutingAlertsReader),ct=v.R.ItemFactory.create(st,e.mutingAlertsReader,ot,(()=>N.of(r.YP))),dt=W.h.create(r.YP),ut=W.h.create(16),pt=(0,Q.q)((()=>Et.get().currentLens.id),(()=>dt.get()),(()=>ut.get())),gt=ie.O.getCapabilities(lt,ct,e.alertsReader,st,pt),ht=new T.gi(ie.O.equatable.structEq,ie.O.defaultOrd),mt=(0,T.is)(lt,gt),ft=new T.ad((e=>c.R.isAllAlerts(e.id)),ht,ie.O.equatable.structEq,ie.O.bundlesOrd),vt=(0,T.kn)(ct,ot,(e=>c.R.isAllAlerts(e)),mt,gt),bt=A.v.createWithInitialAlerts(ft,vt,it,(0,s.ff)(d.bZ.isMuted),gt),wt=new h.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,it.alertCanBeDisplayed),St=new x.oq(e.alertsList.state,e.alertsReader,Xe.view("lenses"),wt,rt,bt,vt,gt,it),yt=i.get(),Et=W.h.create(St.emptyState(yt).patch({alertSource:d.l$.sidebar})),Ct=(0,b.u0)((()=>t.getCursor().index),St),kt=new Pe.x(e.alertsList,Et,3,Ze,ve),_t=new l.EQ(new Re.o(e.sessionModel,kt,we.get().isPremium,ve)),At=new Ie.C((0,X.nD)(qe())),It=new m.Xx({flush:()=>t.flushChanges()},new G.x,lt,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,o.zG)(e.mutedAlertsCategoriesModel,r.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,Le.Um)().suggestionsSettings)})))),r.G(ae.B.getCardsViewModelSendToURLExperiment(At,ve)),(()=>!1),ie.O.getActiveItemWithAlert,gt,At,{bufferTransitions:!0,showGbPrompt:ae.B.shouldShow(we.get())}),xt=new ee.y(It.actionEvents,ve,e.alertsReader),Tt=new le.D(ve,Oe,Ne,je,We),Mt=new he(rt,Tt,n,e.sessionModel,ve),Rt=new te.WY(Et,Mt,kt,gt,ve,tt),Pt=new y.o((()=>K.right(void 0))),Lt=Rt.upgradeHookExpanded.pipe(V.x()).subscribe(O.wW(Je)),Ft=(0,Me.xl)(Et,it,nt,Je),Dt=new Me.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Et,Ft,ie.O.getActiveItemWithAlert,Je,oe,!0),Ut=(0,Se.hp)(Et,Dt,W.h.create(16),Pt,t,$e),Ht=new G.x,Bt=Et.pipe(R.U((e=>e.currentLens.id))),Ot=new ce(e.sessionModel,Tt,_t,we,ve,Ae),Nt=Tt.activeView.pipe(R.U((e=>e.type)),P.O(le.a.Type.startupPlaceholder),F.G(),R.U((([e,t])=>e===le.a.Type.startupPlaceholder&&t===le.a.Type.proofitRequest))).subscribe(O.wW(et)),Gt=Rt.cardListViewportHeight.subscribe(O.wW(dt)),Vt=new ne._(Tt,be,ve),zt=(0,o.zG)(se,r.UI((e=>new me.S(Tt,e,Ae,ve)))),jt=Et.view(k.nL.getActiveAlertHighlight(ie.O.getActiveItemWithAlert)),Wt=new p.mN(t,Dt,e.alertsReader,jt,Et.view((e=>e.currentLens.meta.filter))),qt=He(Et),Yt=Be(Wt,Et),Kt=D.pipe(z.w(r.g_((()=>j.E),(t=>t.initAssistantCardActionsProcessing(It.actionEvents,e.alertsReader,Et,qt,Yt))))).subscribe(),Zt=U.pipe(z.w(r.g_((()=>j.E),(t=>t.initCardActionsProcessing(It.actionEvents,e.alertsReader,qt,Yt,Et))))).subscribe(),$t=re.pipe(z.w(r.g_((()=>j.E),(t=>t.initCardActionsProcessing(It.actionEvents,e.alertsReader,qt,Et))))).subscribe(),Xt=W.h.create((0,o.zG)(ue,r.g_((()=>Se.CV.skip),(()=>d.l$.text)),r.G)),Jt=[(0,xe.A7)(Wt,Et,tt),(0,o.zG)(M.EQ.focusMarkByActiveAlert(Et,Dt,e.alertsReader,ie.O.getActiveFocusableItem,$e.getLogger("MarksEffects.focusMarkByActiveAlert")),k.nL.Effect.Producer.delayed(oe)),Ce(Dt.events,gt,$e.getLogger("createOnAlertApplySideEffect")),ye(It,Et,e.alertsReader,lt,$e),Ee(Et,Xt,Rt.autoFocusEnabled),...It.getApplicatorEffects(),Rt.applicatorEffects,E.R7(Et,Pt,gt,(0,s.MZ)(It.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,o.zG)((0,Se.k9)(Et,Ut,Xt,ie.O.getActiveAlignableItem,gt),k.nL.Effect.Producer.delayed(oe)),E.XU(Et,Pt,gt),ke(Ht,Bt),m.dv.createSendActiveAlertFeedbacksEffect(Et,ie.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,$e.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),..._e.applicatorEffects(It.actionEvents,gt.transitionTo)],Qt=W.h.create(c.R.SpecialId.AllAlerts),ei=Et.view((e=>e.currentLens.id)).pipe(L.h((e=>e===c.R.SpecialId.AllAlerts))).subscribe(O.wW(Qt)),ti=(0,b.VC)(St,Ct,Qt,gt),ii=W.h.create(ue),ni=(0,b.Dv)((e=>c.R.isMainLens(e.currentLens.id)),ti,gt),ai=new b.vM(e.sessionModel.checkingState,Et),ri=(0,o.zG)([(0,o.zG)((e=>b.Py.whenShouldVerifyCurrentLens(ie.O.getActiveItemWithAlert,gt)(e)),b.Py.behaviorToEffect((()=>r.G(k.nL.Effect.FocusBehavior.focusNext)))),(0,o.zG)((0,q.W9)((()=>r.pC(ii.get())),b.Py.whenNoActiveCard),b.Py.behaviorToEffect((e=>(0,o.zG)((e=>{const t=(0,r.DT)((0,q.Kg)(ie.O.isAlertCard,ie.O.isAlertsBundle));return(0,o.zG)(ii.get(),r.tS((i=>(ii.set(r.YP),k.nL.hasCards(e)?(0,o.zG)(e.currentLens.items.reduce(((e,n)=>(0,o.zG)(e,r.wp((()=>(0,o.zG)(n,t,r.tS((e=>r.ij(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),r.YP),r.UI((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):r.YP))))})(e),r.UI((e=>k.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,o.zG)((0,q.W9)((()=>Rt.autoFocusEnabled.get()),(0,q.W9)(b.Py.whenFirstOpeningDocumentWithAlerts(ai),b.Py.whenNoActiveCard)),b.Py.behaviorToEffect((()=>r.G(k.nL.Effect.FocusBehavior.focusFirst))))],(0,a.g_)((0,a._e)(r.gW())())),si=b.Py.getStateTransformer(ri,ni,e.alertsReader,gt,(e=>Rt.autoFocusEnabled.get()&&"text"!==e.alertSource),s.Q1,Qt),oi=_.v.Items.getItemsPositionsUpdateTransformer(gt),li=(0,s.ls)(si,Z.L9(oi)),ci=new I.l(Et,St,e.alertsReader,e.alertsService,Jt,ie.O.getActiveItemWithAlert,li),di=Ht.pipe(R.U((({lensId:e})=>e)),L.h((e=>e===c.R.SpecialId.AllAlerts)),V.x()).subscribe((e=>{i.set(e)})),ui=Tt.activeView.pipe(R.U((e=>{switch(e.type){case le.a.Type.default:return i.get();case le.a.Type.emogenie:return c.R.SpecialId.PredictionEmogenie;case le.a.Type.proofitReview:return c.R.SpecialId.RealTimeProofit;default:return null}})),L.h(De.fQ),V.x(),R.U((e=>[e,e===c.R.SpecialId.AllAlerts]))).subscribe((([e,t])=>Ht.next({lensId:e,focusFirstCard:t}))),pi=W.h.create(r.YP),gi=Ze();gi&&gi.capiMessages.pipe(L.h((e=>"start"===e.action))).subscribe((e=>pi.set(r.G(e))));const hi=new fe.X(pe,ge,Ke,be),mi=It.actionEvents.pipe(L.h(w.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,Le.Um)().grammarlyIdeasSales,"_blank"))),fi=(0,de.W)(Ge),vi=It.actionEvents.subscribe((0,s.ls)((0,J.JH)(e.alertsReader,J.SV.Source.assistant),$.bw((e=>{(async()=>{e.kind===J.SV.Kind.alertApply&&e.source===J.SV.Source.assistant&&await Ye.incrementCounter(),ze.next(e)})()}))));return{lensState:Et,cardsViewModel:It,lensPreviewViewModel:rt,cardsListScrollManager:Pt,upgradeViewModel:kt,alertProcessor:Ve,assistantHeaderViewModel:Ot,assistantLayoutViewModel:Tt,assistantCardListViewModel:Rt,lensChanged:Ht,predictionsPreviewViewModel:Mt,assistantFeedbackViewModel:Vt,assistantSettingsViewModel:hi,assistantProofitViewModel:zt,assistantModalManager:_t,marksViewModel:Dt,gnar:ve,positionViewModel:fi,user:we,capabilities:gt,remSize:ut,isSingleCardAssistant:!1,dispose:()=>{vi.unsubscribe(),It.dispose(),ci.dispose(),Dt.dispose(),Mt.dispose(),di.unsubscribe(),at.unsubscribe(),ui.unsubscribe(),Ot.dispose(),Rt.dispose(),_t.hideAll(),ei.unsubscribe(),Gt.unsubscribe(),Nt.unsubscribe(),mi.unsubscribe(),Zt.unsubscribe(),$t.unsubscribe(),Kt.unsubscribe(),Lt.unsubscribe(),(0,o.zG)(zt,$.bw((e=>e.dispose()))),xt.dispose()}}}},34821:(e,t,i)=>{i.d(t,{t:()=>c,y:()=>o});var n=i(31854),a=i(90572),r=i(59179),s=i(32315);class o{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[c(this._cardActions,this._gnar,"assistant"),l(this._cardActions,this._gnar),s.g.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const l=(e,t)=>e.pipe(a.h((e=>e.type===n.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),c=(e,t,i)=>e.pipe(r.U((e=>e.type)),a.h((e=>e===n.lY.Type.muteAlertCategory||e===n.lY.Type.undoMuteAlertCategory||e===n.lY.Type.mutedAlertSuggestionManagementClick||e===n.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case n.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case n.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case n.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case n.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}))},10946:(e,t,i)=>{i.d(t,{WY:()=>G,lo:()=>n});var n,a=i(59833),r=i(90023),s=i(39953),o=i(36355),l=i(68717),c=i(3714),d=i(44622),u=i(31391),p=i(59179),g=i(62552),h=i(24666),m=i(63532),f=i(17705),v=i(74822),b=i(55341),w=i(90572),S=i(64271),y=i(29416),E=i(68545),C=i(31403),k=i(14969),_=i(20161),A=i(82589),I=i(10883),x=i(78129),T=i(9761),M=i(8080),R=i(66299),P=i(13391),L=i(58303),F=i(58849),D=i(21448),U=i(87653),H=i(58641),B=i(95486),O=i(99836),N=i(79992);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(n||(n={}));class G{constructor(e,t,i,G,V,z){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=G,this._gnar=V,this._isFreeUser=z,this._subs=new u.w.Keeper,this.activeAlert=this._lensState.pipe(p.U((e=>T.nL.hasCards(e)&&o.R.isMainLens(e.currentLens.id)?U.O.getActiveItemWithAlert(e.currentLens):L.YP)),p.U((e=>(0,s.zG)(e,L.g_((()=>null),(e=>e.activeAlert)))))),this.successView=P.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>M.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===H.fA.visible?L.G(R.g.SuccessType.applied):L.G(R.g.SuccessType.small):L.YP)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,r.ls)(L.UI((e=>e.count)),L.fS((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new g.X(!1),this.upgradeHookExpanded=(0,s.zG)(this._upgradeHookExpanded,h.x()),this.upgradeHookFlow=(0,s.zG)((0,c.d)(this._upgradeViewModel.advancedAlerts),F.Z.extendActions(m.b((e=>{e.key===d.n.State.expanded?"upgrade"===e.action.kind?((0,D.Qi)(this._gnar,{placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,O.Tb)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),this._upgradeViewModel.openUpgradeUrl(B.L.Place.assistantCardList)):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===d.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isFreeUser&&this.assistantActions.next({type:n.Type.clickOnUpgradeCard}))}))),F.Z.patchState(f.T(this._minimizeUpgradeHook())),F.Z.patchState(f.T(this._autoOpenUpgradeHook())),F.Z.patchState(m.b((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return d.n.State.hidden;case"expanded":return d.n.State.expanded;case"minimized":return d.n.State.minimized;default:(0,N.vE)(e)}}(e.kind))))),F.Z.patchState(m.b((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new g.X(L.YP),this.assistantActions=new v.x,this.autoFocusEnabled=P.h.create(!0),this.cardListViewportHeight=P.h.create(L.YP),this._onUpgradeButtonMount=new b.t,this._upgradeHookExpandReason=new b.t,this._onUpgradeHookShown=new v.x,this._unselectActiveAlert=this.assistantActions.pipe(w.h((e=>e.type===n.Type.clickOnEmpty||e.type===n.Type.clickOnFakeCard||!(!this._isFreeUser||e.type!==n.Type.clickOnUpgradeCard))),m.b((()=>this.autoFocusEnabled.set(!1))),p.U((()=>e=>e.patch({currentLens:(0,s.zG)(T.In.getActiveItem(e.currentLens),L.g_((()=>e.currentLens),(t=>T.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:l.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:o.R.isWithAlertsId,what:T.nL.Effect.Applicator.create(S.T(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(y.b(1),h.x(),w.h((e=>e===d.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(E.oA,C.a(this.cardListContext.pipe(E.oA,k.P())),_.w((([e,t])=>A.n(e,{root:t}).pipe(k.P()))),w.h(a.Od),p.U((e=>Math.trunc(100*e[0].intersectionRatio))),I.M(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(w.h(T.nL.hasCards),p.U((e=>T.In.getActiveItem(e.currentLens))),x.G(),w.h((([e,t])=>L.Wi(e)&&L.pC(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(h.x(),I.M(this.upgradeHookExpanded),w.h((([e,t])=>!!(e&&t&&this._isFreeUser))),I.M(this._upgradeViewModel.advancedAlerts),p.U((([e,t])=>(0,s.zG)(t,L.g_((()=>({kind:d.n.State.hidden})),(e=>({kind:d.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(w.h((e=>(0,s.zG)(e.currentLens.id,o.R.isAllAlerts))),p.U(M.v.WithSuccess.State.isInSuccess(this._capabilities)),C.a(this.havePremiumAlerts,((e,t)=>e&&t)),h.x(),m.b((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),I.M(this._upgradeViewModel.advancedAlerts),p.U((([e,t])=>(0,s.zG)(t,L.g_((()=>({kind:d.n.State.hidden})),(t=>e?{kind:d.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:d.n.State.minimized,alertsCount:t.count}))))))}}},87653:(e,t,i)=>{i.d(t,{O:()=>n});var n,a=i(24332),r=i(90023),s=i(39953),o=i(39578),l=i(97050),c=i(16227),d=i(57326),u=i(19103),p=i(30008),g=i(42596),h=i(35992),m=i(48746),f=i(9761),v=i(8080),b=i(97767),w=i(14944),S=i(21147),y=i(58303),E=i(58849);!function(e){function t(e,t){return f.nL.Items.mapper((e=>e.kind),{[d.X.Kind]:e,[u.R.Kind]:t})}function i(e){return e.kind===d.X.Kind}function n(e){return e.kind===u.R.Kind}function C(e){return i(e)&&g.i.isEthicalAIItem(e)}function k(e){return n(e)&&g.i.isEthicalAIItem(e)}function _(e){return{viewState:(i,n)=>t((t=>({view:t,isLastCard:i,kind:"alertCard",visibleViewportHeight:e(n)})),(t=>({view:t,isLastCard:i,kind:"alertsBundle",visibleViewportHeight:e(n)})))}}e.isSelectableWithAlertItem=(0,b.Kg)(i,n),e.getActiveItemWithAlert=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=n,e.isEthicalAIAlertCard=C,e.isEthicalAIAlertsBundle=k,e.defaultOrd=(0,a.g_)(w.iP())([(0,s.zG)(w.C2,w.Uz((0,b.ff)(C))),w.Zt(((e,t)=>i(e)&&i(t)?d.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,a.g_)(w.iP())([(0,s.zG)(w.C2,w.Uz((0,b.ff)(k))),w.Zt(((e,t)=>n(e)&&n(t)?u.R.ord.compare(e,t):0))]),e.item=e=>E.UI.Union.make("kind",{alertCard:o.p.Card(e),alertsBundle:c.Q.Card(e)}),e.viewState=_,e.createCardListFlow=()=>(0,l.sJ)(r.Q1),e.listItemOrd=e=>w.Uz((e=>e.cell.item.view))(e).compare;const A={equals:(e,t)=>e.kind===t.kind&&h.s.eqById.equals(e,t)},I=(e,t)=>({equals:(i,n)=>{const a={[d.X.Kind]:e,[u.R.Kind]:t};return A.equals(i,n)&&(r=e=>e.kind,s=a,(e,t)=>s[r(e)].equals(e,t))(i,n);var r,s}}),x=(0,a.g_)(S.uZ())([m.o.eq,h.s.verticalPositionEq,A]);function T(e){const i=d.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(i.changePosition(e),u.R.changePosition(e))}}function M(e,i){const n=d.X.Capabilities.getAnimatable(e),a=u.R.Capabilities.getAnimatable(i);return{completeTransition:e=>t(n.completeTransition(e),a.completeTransition(e)),transitionTo:e=>t(n.transitionTo(e),a.transitionTo(e)),changeVisualState:e=>t(n.changeVisualState(e),a.changeVisualState(e))}}function R(e,i,n,a){const s=u.R.getCardHydrator(a),o=u.R.getSelect(i,n,s),l=u.R.getSelectByAlert(i,n,s),c=d.X.Capabilities.getSelect(e);return{select:(e,i)=>t(c.select(e,i),o(e,i)),selectByAlert:(e,i,n)=>t(c.selectByAlert(e,i,n),l(i,e,n)),unselect:(e,i)=>t(c.unselect((0,r.MZ)(e),i),u.R.unselect((0,r.MZ)(e),i))}}function P(e,a,r,s){return{removeAlertFromItem:(o,l)=>t((t=>d.X.Capabilities.getRemoveAlerts(e,l.itemsOrd)(o,f.In.getActiveItemOfType(i)(l))(t)),(e=>u.R.Capabilities.getRemoveAlertsCapability(a,r,s,l.itemsOrd)(o,f.In.getActiveItemOfType(n)(l))(e)))}}function L(e,i,n){const a=d.X.Capabilities.getRemove(e);return{remove:(e,r)=>t(a.remove(e,r),(t=>e(t)?u.R.Capabilities.getRemove(i,n)([t.activeAlert],r(t))(t):t))}}function F(e,i,n){const a=d.X.Capabilities.getUpdateWithAlert(e),r=u.R.Capabilities.getUpdatableWithAlertsCapability(i,n);return{updateWithAlerts:e=>t(a.updateWithAlerts(e),r(e))}}e.equatable={structEq:I(d.X.eq,u.R.eq),idEq:I(A,A),visualStateEq:I(x,x)},e.changePosition=T,e.disposable={isScheduledToDispose:t((e=>g.i.willBeDisposed(e,e.removedAlertsIds)),(e=>g.i.willBeDisposed(e,e.removedAlertsIds)))},e.hidable={isHidden:t(m.o.isHidden,m.o.isHidden)},e.animatableItem=M,e.hasAlertsQueries={isSelectableByAlert:e=>t(g.i.hasAlert(e.alert.id),g.i.hasAlert(e.alert.id)),hasAlert:e=>t(g.i.hasAlert(e),g.i.hasAlert(e)),hasActiveAlert:t(g.i.hasActiveAlert,g.i.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(r.jv,r.jv)},e.select=R,e.removeAlert=P,e.remove=L,e.updateWithAlert=F,e.releaseAlert=(t,i,n,a)=>v.v.Capabilities.getAlertReleaser({...P(t,i,n,a),...e.disposable}),e.unselectable=(t,i,n,a)=>v.v.Capabilities.getUnselectable(f.In.getActiveItem,{...R(t,i,n,a),...e.disposable}),e.selectableByAlert=(t,i,n,a)=>v.v.Capabilities.getSelectableByAlert(f.In.getActiveItem,{...e.hasAlertsQueries,...R(t,i,n,a),...v.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=(t,i,n,a)=>v.v.Capabilities.getSelectableById(f.In.getActiveItem,{...R(t,i,n,a),...e.disposable}),e.updateMeta=()=>({updateMeta:v.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,n)=>v.v.Capabilities.getAnimatable(e,{...P(e,t,i,n),...M(e,n),...v.v.Capabilities.getHasChecksFeed()});const D=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function U(e){const i=p.Mq.getCardSelections(e);return{nextAlert:t(i.nextAlert,i.nextAlert),prevAlert:t(i.prevAlert,i.prevAlert)}}function H(){return{updateUserInput:e=>t(d.X.updateUserInput(e),u.R.changeUserInput(e))}}e.alignable={isValidToAlign:t(D,D)},e.alertIterator=U,e.itemReleaser=()=>v.v.Capabilities.getItemReleaser(),e.hasAlerts=v.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,b.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,s.zG)(i,e.hasAlertsQueries.hasActiveAlert,y.UI((e=>t.isRegistered(e.alert.id))),y.fS(r.jv)))),e.hasUserInput=H,e.verifiable=()=>v.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=h.s.Capabilities.getPojoCloneable().clone;return{clone:t(d.X.Capabilities.getCloneable().clone,e)}},e.getCapabilities=function(t,i,n,a,s=(0,r.a9)(y.YP),o=p.IG.Default){return{..._(s),...e.disposable,...e.hidable,...e.equatable,...H(),...e.cloneable(),...T(t),...M(t,a),...R(t,n,o,a),...L(t,o,a),...P(t,n,o,a),...F(t,i,a),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,n,o,a),...e.unselectable(t,n,o,a),...e.selectableByAlert(t,n,o,a),...e.selectableById(t,n,o,a),...e.updateMeta(t),...e.animatableFeed(t,n,o,a),...e.itemReleaser(),...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(U(n),n,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(n||(n={}))},73333:(e,t,i)=>{i.d(t,{Q:()=>n,_:()=>s});var n,a=i(61793),r=i(84602);!function(e){e.settings="settings"}(n||(n={}));class s{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(),this._assistantLayoutViewModel.pushActiveView({type:a.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,r.dK)(e)?e.score:void 0)}}},49140:(e,t,i)=>{i.d(t,{B:()=>n});var n,a=i(90818),r=i(68970);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:a.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,r.Um)().styleGuideSettings,writingStyle:(0,r.Um)().writingStyleSettings}},t(i))})}(n||(n={}))},61793:(e,t,i)=>{i.d(t,{D:()=>d,a:()=>n});var n,a=i(32073),r=i(29416),s=i(90572),o=i(2465),l=i(58679),c=i(79992);!function(e){let t;!function(e){e.default="default",e.emogenie="emogenie",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(n||(n={}));class d extends l.A{constructor(e,t,i,l,d=o.V.defaultLayout){super({type:n.Type.startupPlaceholder},{type:n.Type.default}),this.browser=l,this.layout=d,this._sub=new a.w0,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const u=new Set([n.Type.emogenie]);this._sub.add(i.pipe(r.b(100),s.h(c.fQ)).subscribe((()=>{if(u.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case n.Type.settings:return void e.assistantSettingsShow();case n.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case n.Type.default:case n.Type.emogenie:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==n.Type.feedback))}dispose(){this._sub.unsubscribe()}}},23684:(e,t,i)=>{i.d(t,{W:()=>a});var n=i(87234);const a=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(n.E9.plus(t,n.E9.fromCartesian(i.translate)))}}}},81549:(e,t,i)=>{i.d(t,{S:()=>u});var n=i(84766),a=i(24666),r=i(78129),s=i(10883),o=i(90572),l=i(44045),c=i(61793),d=i(97683);class u{constructor(e,t,i,n){this.feature=t,this._closeAssistant=i,this._gnar=n,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,a.x)(),(0,r.G)(),(0,s.M)(e.activeView)).subscribe((([[t,i],n])=>{t===d.eE.REVIEWING&&n.type===c.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,s.M)(e.activeView)).subscribe((([t,i])=>{i.type!==c.a.Type.proofitRequest&&i.type!==c.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,o.h)((e=>e===d.eE.ACCEPTED)));(0,n.F)(100).pipe((0,l.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}},94267:(e,t,i)=>{i.d(t,{X:()=>s});var n=i(13391),a=i(58303),r=i(45474);class s{constructor(e,t,i,s,o=!1){this._contentScriptState=e,this._contentScriptActions=t,this._dapiActions=i,this.domain=s,this._canRequestInProductDiscountSpecialOffer=o,this.hasInProductDiscountSpecialOffer=n.h.create(a.YP),this.state=this._contentScriptState.view((e=>({user:e.user,page:e.page,dynamicConfig:e.dynamicConfig,dapi:e.dapi}))),this.actions={toggleSite:(e,t)=>{this._contentScriptActions.toggleSite({enabled:e,domain:t})},toggleDefs:e=>{this._contentScriptActions.toggleDefs(e)},toggleAutocomplete:e=>{this._contentScriptActions.toggleAutocomplete(e)},toggleAutocorrect:e=>{this._contentScriptActions.toggleAutocorrect(e)},toggleAlwaysAvailableAssistant:e=>{this._contentScriptActions.toggleAlwaysAvailableAssistant(e)},cheetahToggleInlineRewrite:e=>{this._contentScriptActions.cheetahToggleInlineRewrite(e)},cheetahToggleInlineQuickReply:e=>{this._contentScriptActions.cheetahToggleInlineQuickReply(e)},toggleCitationBuilderForDomain:e=>{this._contentScriptActions.toggleCitationBuilderForDomain(e)},changeStrongDialect:e=>{this._dapiActions.changeStrongDialect(e)},setDesktopIntegration:e=>{this._contentScriptActions.setDesktopIntegration(e)},setEmogenieEmojiState:e=>{this._dapiActions.setEmogenieEmojiState(e)},setSerengetiState:e=>{this._dapiActions.setSerengetiState(e)},toggleKnowledgeHub:e=>{this._contentScriptActions.toggleKnowledgeHub(e)},toggleTouchTypist:e=>{this._contentScriptActions.toggleTouchTypist(e)},setTouchTypistHotkey:e=>{this._contentScriptActions.setTouchTypistHotkey(e)},toggleGOSDebugger:e=>{this._contentScriptActions.patchCommonSettings({gOSDebuggerEnabled:e})},setGOSAppletChannel:e=>{this._contentScriptActions.patchCommonSettings({gOSAppletChannel:e})},setGOSAssistantAppletUrl:e=>{this._contentScriptActions.patchCommonSettings({gOSAssistantAppletUrl:e})},hwrSetEnabled:e=>{this._contentScriptActions.hwrSetEnabled(e)},setKeyboardShortcut:(e,t)=>{this._contentScriptActions.setKeyboardShortcut({[e]:t})},getConfiguration:e=>this._contentScriptActions.getConfiguration(e),trackConfiguration:(e,t)=>this._contentScriptActions.trackConfiguration(e,t),toggleEnhancedScreenReaderUXSupport:e=>{this._contentScriptActions.toggleEnhancedScreenReaderUXSupport(e)}},this._canRequestInProductDiscountSpecialOffer&&(0,r.SU)(this._contentScriptActions).subscribe((e=>this.hasInProductDiscountSpecialOffer.set(e)))}}},65485:(e,t,i)=>{i.d(t,{o:()=>r});var n=i(19917),a=i(81259);const r=e=>{const t=e.peekTreatment(a.p.UpgradeCardFromCAPI),i="test"!==t;return{upgradeHookExperiment:a.p.UpgradeCardFromCAPI,experimentGroup:t&&t!==n.q4?t:"empty",nativeUpgradeHook:i}}},58641:(e,t,i)=>{i.d(t,{fA:()=>p,pL:()=>f});var n=i(39953),a=i(49231),r=i(16136),s=i(59179),o=i(47387),l=i(58849),c=i(41455),d=i(51980);const u=({message:e,emoji:t,emojiId:i,icon:n,iconPartName:r})=>a.createElement("div",{className:d.insight},t&&i&&a.createElement("div",{className:d.insight__inline_icon},a.createElement(c.dy,{unicodeHexArray:[i],unicodeLiteral:t})),n&&a.createElement("div",{className:d.insight__inline_icon,"data-grammarly-part":r},n),a.createElement("div",{className:d.insight__inline_text},e));var p,g=i(80458),h=i(72415),m=i(36555);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(p||(p={}));const f=({predictionsVM:e})=>l.UI.mount(E,e.previewFlow),v=l.UI.Grid.make((({slots:e})=>a.createElement("div",{className:m.predictions},a.createElement("div",{className:m.predictions__header},"Predictions"),e.children))),b=({children:e,count:t,dataPartName:i})=>a.createElement(g.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},a.createElement("div",{className:m.predictions__card},e,t>0&&a.createElement("div",{className:m.counterContainer},a.createElement(r.CL,null,t)))),w=l.UI.Node.make((({state:e,notify:t})=>a.createElement(h.M,{clickHandler:t("select")},a.createElement(o.F.Fragment,null,e.pipe(s.U((e=>a.createElement(b,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},a.createElement(u,{key:"tone",message:"off"===e.emotion.brandToneLabel?a.createElement(a.Fragment,null,"May sound ",a.createElement("span",{className:m.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),S=l.UI.Group.make({tone:(y=w,{tag:"_tag",members:{Some:(0,n.zG)(y,l.UI.contramapState((e=>e.value))),None:l.UI.Node.empty}})});var y;const E=l.UI.Union.make("kind",{[p.hidden]:l.UI.Node.empty,[p.zero]:l.UI.Node.empty,[p.visible]:l.UI.Composite.make(v,S)})},47441:(e,t,i)=>{i.d(t,{f:()=>r});var n=i(49231),a=i(9843);const r=(e,t,i,r)=>{const[s,o]=n.useState(a.h.create()),[l,c]=n.useState(null),[d,u]=n.useState(null),p=null!=d?d:s.translate;return n.useEffect((()=>{!s.dragging&&s.dragEnd&&(t(e+p.y),r(i+p.x),c(s.translate),u({x:0,y:0}))}),[s]),n.useEffect((()=>{s.dragging&&d&&l&&u({x:s.translate.x-l.x,y:s.translate.y-l.y})}),[s]),{dragState:s,setDragState:o,x:p.x,y:p.y}}},17806:(e,t,i)=>{i.d(t,{G:()=>o});var n=i(49231),a=i(62552),r=i(78129),s=i(76517);const o=()=>{const[e,t]=n.useState(s.KC.top),[i,o]=n.useState(s.KC.left),[l,c]=n.useState(s.KC.height),[d,u]=n.useState(s.KC.width),p=n.useRef(new a.X(s.KC));return n.useEffect((()=>{const n=p.current.pipe(r.G()).subscribe((([n,a])=>{const r=((e,t,i)=>{if(e===s.KC.left||t.left!==i.left)return i.left})(i,n,a),l=((e,t,i)=>e===s.KC.top?i.top:t.height!==i.height?Math.max(e-(i.height-t.height),0):void 0)(e,n,a);void 0!==l&&t(l),void 0!==r&&o(r),u(a.width),c(a.height)}));return()=>n.unsubscribe()}),[e,i]),{top:e,setTop:t,left:i,setLeft:o,height:l,width:d,positionerRef:p}}},41274:(e,t,i)=>{i.d(t,{V:()=>n});i(97855);const n=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g},70642:(e,t,i)=>{i.d(t,{m:()=>n});var n,a=i(93018);!function(e){e.isInlineFormatting=function(e){return"bold"in e||"italic"in e||"underline"in e||"link"in e},e.isListFormatting=function(e){return"list"in e},e.isHeaderFormatting=function(e){return"header"in e},e.hasFormatting=function(t){return!a.s.isDelete(t)&&void 0!==t.attributes&&(e.isInlineFormatting(t.attributes)||e.isListFormatting(t.attributes)||e.isHeaderFormatting(t.attributes))}}(n||(n={}))},32315:(e,t,i)=>{i.d(t,{g:()=>n});var n,a=i(39953),r=i(90572),s=i(31854),o=i(52303);!function(e){e.createSubscription=function(e,t,i){return e.pipe(r.h(s.lY.isAlertApplyAction)).subscribe((e=>(0,a.zG)(i(e.alertId),o.bw((e=>{"unlocked"===o.Fc(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(n||(n={}))},16703:(e,t,i)=>{i.d(t,{V:()=>n});var n,a=i(60310);!function(e){e.gbuttonInnerSize=22,e.gButtonPadding=2,e.gButtonGroupPadding=2,e.gButtonTopLeftMargin=1,e.gButtonMinimizedSize=12,e.getGButtonComponentSize=(t=e.gButtonMaxSize)=>e.gbuttonInnerSize*t/e.gButtonMaxSize,e.getEmogenieSize=e.getGButtonComponentSize,e.getTotalWidth=(t,i,n)=>{const r=[];i&&!n&&r.push(e.getEmogenieSize()+-1),n&&r.push(a.m);const s=r.reduce(((e,t)=>e+t),0);return(e.gButtonMaxSize+s)*t/e.gButtonMaxSize},e.gButtonMaxSize=e.gbuttonInnerSize+2*e.gButtonPadding+2*e.gButtonGroupPadding;e.getGButtonSize=(t,i)=>Math.max(Math.min(t,i,e.gButtonMaxSize),24)}(n||(n={}))},48555:(e,t,i)=>{i.d(t,{c:()=>a});var n=i(30219);class a{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,n.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},52979:(e,t,i)=>{i.d(t,{NC:()=>s,WF:()=>p,pc:()=>c,qH:()=>r,y$:()=>o});var n=i(90023);if(6168!=i.j)var a=i(24666);var r,s,o,l,c,d=i(13391),u=i(79992);function p(e){return e.rect.map((e=>e.size)).behavior.pipe((0,a.x)(((e,t)=>e.height===t.height&&e.width===t.width)))}!function(e){let t;!function(e){e.invalidate="invalidate",e.preserve="preserve"}(t=e.ChangeType||(e.ChangeType={}))}(r||(r={})),function(e){e.everything=d.h.create({filter:e=>!0,type:e.ChangeType.preserve})}(r||(r={})),function(e){function t(e,t){const i=e.end-e.start==1,n="a"===t.slice(e.start,e.end);return i&&!n}e.is=function(e){const t=e;return(0,u.Nf)(t.increasedLeft)&&"number"==typeof t.increasedLeft&&(0,u.Nf)(t.increasedRight)&&"number"==typeof t.increasedRight},e.expandIfNeeded=function(e,i){if(t(e,i)){const t=e.start>0?1:0,n=e.end!==i.length?1:0;return{start:e.start-t,end:e.end+n,increasedLeft:t,increasedRight:n}}return{...e}},e.shouldExpand=t}(s||(s={})),function(e){let t;!function(e){let t=0;e.create=function(e,i){return t++,`${e}-${t}${void 0!==i?`|${i}`:""}`},e.createFromMark=function(e){return`${e}`}}(t=e.Id||(e.Id={}))}(o||(o={})),function(e){e.Mock=class{constructor(){this.addHighlight=n.W8,this.updateHighlight=n.W8,this.removeHighlights=n.Q1,this.removeAllHighlights=n.Q1,this.recalculateHighlight=n.Q1,this.recalculateAllHighlights=n.Q1,this.maintainConsistency=n.Q1,this.hasHighlight=n.W8,this.updateHighlightsForTextRange=n.Q1,this.dispose=n.Q1,this.geometry=d.h.create(new Map)}intersectingHighlightIDs(e){return[]}}}(l||(l={})),function(e){e.none="none",e.hovered="hovered",e.hoveredNeedsAttention="hovered_needs_attention"}(c||(c={}))},75325:(e,t,i)=>{if(i.d(t,{H:()=>l,c:()=>c}),6168!=i.j)var n=i(1747);if(6168!=i.j)var a=i(58303);if(6168!=i.j)var r=i(70932);if(6168!=i.j)var s=i(94525);if(6168!=i.j)var o=i(21978);var l;!function(e){e.apply="apply",e.ignore="ingnore",e.acknowledge="acknowledge",e.mute="mute",e.addToDictionary="addToDictionary",e.hide="hide"}(l||(l={}));class c{constructor(e,t,i,n,s,l,c,d,u,p,g=!1,h=r.Y.create("InlineCardModelImpl")){this.alert=e,this.sdui=t,this._replacementService=i,this._removeAlert=n,this._checkingService=s,this._viewActions=l,this._snippetsEvents=c,this._openGrammarlyGo=d,this._formattingService=u,this._experimentClient=p,this._disableHoverToOpen=g,this._log=h,this._wasShown=!1,this._wasReplaced=!1,this._wasIgnored=!1,this._wasAddedToDictionary=!1,this._wasHidden=!1,this._wasAcknowledged=!1,this._wasMuted=!1,this._shouldSendFeedback=a.Wi(this.sdui)||(0,o.T)(this.sdui),this.onSnippetsEditor=e=>{this._snippetsEvents.next(e)},this.onOpenGrammarlyGo=e=>{this._openGrammarlyGo(e)}}get wasAddedToDictionary(){return this._wasAddedToDictionary}onShown(){a.Wi(this.sdui)&&!this._wasShown&&(this._checkingService.onAlertSimpleFeedback(n.wQ.Id.create(this.alert.id),n.PZ.LOOKED,this._disableHoverToOpen?n.e3.Click:n.e3.Hover),this._wasShown=!0)}async onReplace(e){if(this._wasReplaced)this._log.warn(`onReplace called more than once for #${this.alert.id}`);else try{this._replacementService.canPerformReplacement({pos:this.alert.transformRange,oldValue:this.alert.transformText,value:e},{alert:this.alert})?(this._log.info("replacing",[this.alert.transformRange,e]),this._checkingService.onAlertApplied(this.alert,n.e3.Inline,e,void 0,void 0,this._shouldSendFeedback),await this._replacementService.performReplacement({pos:this.alert.transformRange,value:e,oldValue:this.alert.transformText},{alert:this.alert})):this._log.error(`can't perform replacement for #${this.alert.id} upon replace click`),this._wasReplaced=!0,this._removeAlert(this.alert.id,l.apply,s.DD.isFreePremiumUnlocked(this.alert)),this._viewActions.onAlertApplied()}catch(e){this._log.error(`failed to perform replacement for #${this.alert.id}`,e)}}onIgnore(){this._wasIgnored?this._log.warn(`onIgnore called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertIgnored(this.alert,n.e3.Inline),this._removeAlert(this.alert.id,l.ignore,s.DD.isFreePremiumUnlocked(this.alert)),this._wasIgnored=!0)}onMute(e){this._wasMuted?this._log.warn(`onMute called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertMuted(e),this._removeAlert(this.alert.id,l.mute,s.DD.isFreePremiumUnlocked(this.alert)),this._wasMuted=!0)}onHide(){this._wasHidden?this._log.warn(`onHide called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(n.wQ.Id.create(this.alert.id),n.PZ.HIDE,n.e3.Inline),this._removeAlert(this.alert.id,l.hide,s.DD.isFreePremiumUnlocked(this.alert)),this._wasHidden=!0)}onAcknowledge(){this._wasAcknowledged?this._log.warn(`onAcknowledge called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertAcknowledged(n.wQ.Id.create(this.alert.id),n.e3.Inline),this._removeAlert(this.alert.id,l.acknowledge,s.DD.isFreePremiumUnlocked(this.alert)),this._wasAcknowledged=!0)}onOpenExpandedView(e){this._viewActions.openExpandedViewFromInlineCard(e)}onOpenExpandedViewBySduiAction(e){this._viewActions.openExpandedViewFromSduiInlineCard(e)}onShowUnifiedLoginReminder(){this._viewActions.showUnifiedLoginReminder()}onAddToDictionary(){this._wasAddedToDictionary?this._log.warn(`onAddToDictionary called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(n.wQ.Id.create(this.alert.id),n.PZ.ADD_TO_DICTIONARY,n.e3.Inline),this._removeAlert(this.alert.id,l.addToDictionary,s.DD.isFreePremiumUnlocked(this.alert)),this._wasAddedToDictionary=!0)}openPlanComparisonPage(e){this._viewActions.openPlanComparisonPage(e)}openSignUpPage(e){this._viewActions.openSignUpPage(e)}openSigninPage(e){this._viewActions.openSigninPage(e)}}},41767:(e,t,i)=>{i.d(t,{N1:()=>g,S3:()=>m,cN:()=>v,e9:()=>h,tJ:()=>p});var n=i(13391),a=i(36334),r=i(81259),s=i(4798);if(6168!=i.j)var o=i(62549);if(6168!=i.j)var l=i(70932);const c=n.h.create(!1),d=n.h.create(!1),u=n.h.create(!1),p=6168!=i.j?c:null,g=d,h=u,m=(e,t,i=l.Y.create("InlineLockedUIUnderlines.activateInlineUnderlines"))=>{i.debug("Trying to activate Inline locked underlines"),o.n.isFree(e.view("user").get())&&(v(t)&&(i.debug("Should show underlines for locked inline suggestions are activated"),c.set(!0),u.set(!0)),f(t)&&d.set(!0))},f=e=>{const t=e.peekTreatment(r.p.LockedUIWithNewUx);return null!==t&&"control"!==t},v=e=>(e=>!(0,a.Lu)()&&"unlimited_pool"===e.peekTreatment(r.p.LockedUIChrome))(e)||(e=>"unlimited_pool"===e.peekTreatment(r.p.LockedUIGDoc)&&(0,a.Lu)())(e)||(e=>e.isGateEnabled(s.K.LockedUIRollout))(e)},77432:(e,t,i)=>{i.d(t,{p:()=>n});var n,a=i(18117),r=i(90023),s=i(96991),o=i(84308),l=i(59179),c=i(90572),d=i(94592),u=i(13391),p=i(58303),g=i(69706),h=i(83895),m=i(81259),f=i(36334),v=i(62549),b=i(70932),w=i(41767);!function(e){e.showInlineYellowUnderlines=u.h.create(!1),e.dismissInlineYellowUnderlines=u.h.create(!1),e.inProductReactivationUnderlines=u.h.create(!1),e.activateInlineYellowUnderlines=(t,i,n,a,u,g,h,f,S,y,E,C,k,_=b.Y.create("InlineYellowUnderlines.activateInlineYellowUnderlines"))=>{var A;if((0,w.cN)(h))return;const I=s.pU,x=(null!==(A=t.get().page.dismissInlineYellowUnderlinesTimestamp)&&void 0!==A?A:0)>Date.now()-I;e.dismissInlineYellowUnderlines.set(x),_.debug(`Should dismiss inline yellow underlines: ${x}`),g(o.a([i.alertCounts,e.dismissInlineYellowUnderlines]).pipe(l.U((([e,i])=>v.n.isFree(t.view("user").get())&&e.hiddenCapiAlerts>4&&0===e.visibleInlineCapiAlerts&&"test"===h.getTreatment(m.p.InlineYellowUnderlinesV2)&&!i&&!k)),c.h(r.yR),c.h((t=>t&&!e.showInlineYellowUnderlines.get()))).subscribe((t=>{_.debug("Should show inline yellow underlines"),S.inlineYellowUnderlineShow((0,r.zG)(C(),p.fS((()=>"")))),d.wW(e.showInlineYellowUnderlines)(t)}))),g(o.a([a(),u,i.hiddenCapiAlertsFilter]).subscribe((([t,i,a])=>{if(null!=t&&e.showInlineYellowUnderlines.get()&&!e.dismissInlineYellowUnderlines.get()){const r=n(t.alertId);r&&a(r)&&e.handleYellowUnderlineClick(i,y,E,f,S,C)}})))},e.shouldShowInlineYellowUnderlinesForInProductReactivation=e=>"true"===e,e.handleYellowUnderlineClick=(t,i,n,s,o,l,c=b.Y.create("InlineYellowUnderlines.openAssistantAndFocusUphook"))=>{if(o.inlineYellowUnderlineClick((0,r.zG)(l(),p.fS((()=>"")))),c.debug("dismissInlineYellowUnderlines"),e.dismissInlineYellowUnderlines.set(!0),s.dismissInlineYellowUnderlines(),(0,f.Lu)())c.debug("Open GDocsSidebar"),i(!0);else{const e=h.D1.GButton.getPushAssistantFeedAction(t,h.D1.GButton.DEFAULT_GBUTTON_ID),i=h.D1.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem(t);(0,r.zG)(a.gz(p.Kw)(e,i),p.UI((([{feedId:e},{id:t}])=>[e,t.toString()])),p.g_((()=>{c.debug(`Open assistant: caller type ${g.WT.gButton}`),n({type:g.WT.gButton})}),(([e,t])=>{c.debug(`Open assistant: caller type ${g.WT.sdui}, feedId: ${e}, uphookId: ${t}`),n({type:g.WT.sdui,action:h.fr.create([h.D1.AssistantFeed.createPushAssistantFeedAction(e,t)])})})))}}}(n||(n={}))},65754:(e,t,i)=>{i.d(t,{N:()=>n});var n,a=i(8867),r=i(62552),s=i(36344),o=i(9642),l=i(93790),c=i(24666),d=i(8794),u=i(59179),p=i(79992);class g{constructor(e,t,i){this._getImmediateValue=e,this._source=t,this._compare=i,this._subject=null,this.behavior=new a.y((e=>{const t=this._source.subscribe(e);return{unsubscribe:()=>{t.unsubscribe(),this._subject=null}}})).pipe((0,o.O)((()=>(this._subject=new r.X(this._getImmediateValue()),this._subject))),(0,l.x)(),(0,c.x)(this._compare)),this.changes=this.behavior.pipe((0,d.T)(1)),this.getCurrent=this._getImmediateValue}getApproximate(){return this._subject?this._subject.getValue():this._getImmediateValue()}map(e,t=p.fS){return new g((()=>e(this._getImmediateValue())),this.changes.pipe((0,u.U)(e)),t)}}!function(e){function t(e,t,i){return new g(e,t.pipe((0,u.U)(e)),i)}e.create=t,e.createOptimized=function(e,t,i){return new g(e,t.pipe((0,u.U)((t=>void 0!==t?t:e()))),i)},e.constant=function(e){return t((()=>e),(0,s.c)(),(()=>!0))}}(n||(n={}))},57536:(e,t,i)=>{if(i.d(t,{By:()=>A,FJ:()=>v,RV:()=>E,Ti:()=>h,We:()=>b,Yq:()=>_,_i:()=>w,bk:()=>k,dk:()=>C,kP:()=>S,nX:()=>g,tQ:()=>f,x$:()=>y}),6168!=i.j)var n=i(44071);if(6168!=i.j)var a=i(64271);if(6168!=i.j)var r=i(59179);if(6168!=i.j)var s=i(24666);if(6168!=i.j)var o=i(16703);if(6168!=i.j)var l=i(87234);if(6168!=i.j)var c=i(91795);if(6168!=i.j)var d=i(79992);var u=i(70874);if(6168!=i.j)var p=i(65754);function g(e){return[(0,n.R)(e,"scroll"),(0,n.R)(e,"mousewheel"),(0,n.R)(e,"touchmove")]}function h(e){return(0,a.T)(...g(e),c.x.create(e,{attributes:!1,childList:!0,subtree:!0,characterData:!0}),(0,n.R)(e,"keydown"),(0,n.R)(e,"keyup"))}function m(e){const t=getComputedStyle(e).zIndex,i="auto"!==t&&parseInt(t||"0",10)||null;return null!==i?i:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?m(e.parentNode):null}function f(e){return{left:parseFloat(e.paddingLeft)||0,top:parseFloat(e.paddingTop)||0,right:parseFloat(e.paddingRight)||0,bottom:parseFloat(e.paddingBottom)||0}}const v=u.S.hz4,b=u.S.sec2,w=u.S.hz30;function S(e,t){const i=e.height-t.bottom-t.top,n=e.width-t.left-t.right;return o.V.getGButtonSize(n,i)}function y(e,t=0,i=e.container,n={top:0,left:0}){return{zIndex:e.zIndex.map((e=>e+1),d.fS),position:e.textFieldRect.behavior.pipe(r.U((e=>{const i=Math.max(e.padding.right,t),a=Math.max(e.padding.bottom,t);return{...l.Cv.create({top:e.position.top+e.height-a+n.top,left:e.position.left+e.width-i+n.left}),effectivePadding:{right:i,bottom:a,left:e.padding.left,top:e.padding.top},textFieldHeight:e.height,textFieldWidth:e.width}})),s.x(d.fS)),container:i}}function E(e){return p.N.create((()=>(m(e)||0)+1),b,d.fS)}function C(e,t){return k(e,t,(e=>e))}function k(e,t,i){const n=[];let a=0,r=e;for(;r.parentElement&&a!==t;)n.push(i(r.parentElement)),r=r.parentElement,a++;return n}function _(e,t){let i=0,n=e;for(;i<t&&n.parentElement;)n=n.parentElement,i++;return i<t?null:n}function A(e,t){return(0,a.T)(...C(e,t).map((e=>(0,n.R)(e,"scroll"))))}},97683:(e,t,i)=>{i.d(t,{SR:()=>r,Vw:()=>a,eE:()=>o,fy:()=>n,rS:()=>s});const n=20,a=200,r=3;var s,o;!function(e){e.NOT_AVAILABLE="not_available",e.NOT_AVAILABLE_QUOTA_ERROR="not_available_quota_error",e.NO_FREE_TRIALS_LEFT="no_free_trials_left",e.NOT_ENOUGH_WORDS="not_enough_words",e.TOO_MANY_WORDS="too_many_words",e.CONFLICTING_REQUEST="conflicting_request",e.CHECKING_INITIAL_AVAILABILITY="checking_initial_availability",e.UNSUPPORTED_LANGUAGE="unsupported_language"}(s||(s={})),function(e){e.INITIAL="initial",e.IDLE="idle",e.PREPARING="preparing",e.PRE_SUBMIT="pre_submit",e.ACCEPTED="accepted",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.REJECTED="rejected",e.ERROR="error",e.PRE_CANCEL="pre_cancel",e.CANCELED="canceled",e.REVIEWING="reviewing"}(o||(o={}))},58679:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(13391);class a{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=n.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},83895:(e,t,i)=>{i.d(t,{D1:()=>r,Oe:()=>a,fr:()=>n});var n,a,r,s=i(86399),o=i(39953),l=i(31854),c=i(58303),d=i(32228),u=i(59060),p=i(39743);!function(e){e.create=function(e){return{type:l.lY.Type.sduiCardAction,sourceId:"native",cardId:"",actions:e,scope:{alertRefs:[]}}}}(n||(n={})),function(e){e.create=function(e,t,i="inline",n={alertRefs:[]}){return{type:l.lY.Type.sduiCardAction,sourceId:i,cardId:t,actions:e,scope:n}}}(a||(a={})),function(e){function t(e,t){return d.a.find((e=>e.id.toString()===t))(e)}function i(e,t){return d.a.find((e=>e.content.type===t))(e)}let n,a,r,l,g,h,m,f,v,b;e.getById=t,e.findAllByType=i,e.getByAlertId=function(e,t){return d.a.find((e=>{const i=u.ab.getAllAlertIds(e.content);return 1===i.length&&i[0]===t}))(e)},function(e){e.BulkDismiss="bulk_dismiss",e.BulkAccept="bulk_accept"}(n=e.Features||(e.Features={})),function(e){e.isInlineCard=e=>(0,o.zG)(u.ab.findFirst(e,"inlineCard",u.ab.TreeTraversal.PreOrder),c.pC)}(a=e.InlineCard||(e.InlineCard={})),function(e){e.isPopoverStack=e=>(0,o.zG)(u.ab.findFirst(e,"popoverStack",u.ab.TreeTraversal.PreOrder),c.pC)}(r=e.PopoverStack||(e.PopoverStack={})),function(e){function t(e){return"strongAlertRef"===e.type}function i(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefBulkDismiss}function n(e){return d.a.find((e=>i(e.content)))(e)}function a(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefUpgradeHook}e.isStrongAlertRefContent=t,e.isStrongAlertRefBulkDismissContent=i,e.isStrongAlertRefBulkAcceptContent=function(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefBulkAccept},e.findStrongAlertRefBulkDismissSduiItem=n,e.getStrongAlertRefBulkDismissAlertIds=function(e){return(0,o.zG)(n(e),c.UI((e=>new Set(e.alertIds.map((e=>e.toString()))))),c.fS((()=>new Set)))},e.isStrongAlertRefUpgradeHookContent=a,e.findStrongAlertRefUpgradeHookSduiItem=function(e){return d.a.find((e=>a(e.content)))(e)}}(l=e.StrongAlertRef||(e.StrongAlertRef={})),function(e){function n(e){return"gButton"===e.type}function a(t){return t.type===e.PLAGIARISM_TYPE}function r(e,i){return(0,o.zG)(t(e,i),c.UI((e=>e.content)),c.hX(n))}e.DEFAULT_GBUTTON_ID="gButton-default",e.TONE_GBUTTON_ID="gButton-tone",e.GET_STARTED_GBUTTON_ID="gButton-get-started",e.PLAGIARISM_TYPE="gButton:plagiarism",e.isGButtonContent=n,e.isGButtonPlagiarismContent=a,e.getContent=r,e.getPlagiarismContent=function(t){return(0,o.zG)(i(t,e.PLAGIARISM_TYPE),c.UI((e=>e.content)),c.hX(a))},e.getPushAssistantFeedAction=function(e,t){return(0,o.zG)(r(e,t),c.UI((e=>e.actions)),c.tS((e=>c.ij(e.find(m.isPushAssistantFeedAction)))))}}(g=e.GButton||(e.GButton={})),function(e){e.isViewStackContent=function(e){return"viewStack"===e.type},e.getSelectedContent=function(e){return c.ij(e.views[e.selected])}}(h=e.ViewStack||(e.ViewStack={})),function(e){function i(e){return"assistantFeed"===e.type}let n;e.BULK_DISMISS_CARD_FEED_ID="bulk-dismiss-card-feed",e.BULK_DISMISS_REVIEW_FEED_ID="bulk-dismiss-review-feed",e.TONE_INSIGHTS_CARD_FEED_ID="tone-insights-card-feed",e.TONE_INSIGHTS_SUGGESTIONS_FEED_ID="tone-insights-suggestions-feed",e.PERFORMANCE_SCORE_FEED="performance-score-feed",e.isAssistantFeedContent=i,e.getContent=function(e,n){return(0,o.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))},e.createFocusAssistantCardAction=function(e){return{type:"focusAssistantCard",cardId:e}},e.createPopAssistantFeedAction=function(){return{type:"popAssistantFeed"}},e.createPushAssistantFeedAction=function(e,t){return{type:"pushAssistantFeed",feedId:e,cardId:t}},e.isPushAssistantFeedAction=function(e){return"pushAssistantFeed"===e.type},function(t){function i(e){return(0,o.zG)(c.G(u.ab.reduce(e,((e,t)=>"button"===t.type&&"back"===t.name.value?e.concat(t.actions):e),u.ab.TreeTraversal.PostOrder,[])),c.hX(s.Od))}function n(e,i){return(0,o.zG)(t.getContent(e,i),c.tS(h.getSelectedContent))}t.getContent=function(t,i){return(0,o.zG)(e.getContent(t,i),c.UI((e=>e.header)),c.hX(h.isViewStackContent))},t.getBackButtonActions=i,t.getSelectedViewContent=n,t.getSelectedViewBackButtonActions=function(e,t){return(0,o.zG)(n(e,t),c.tS(i))}}(n=e.Header||(e.Header={}))}(m=e.AssistantFeed||(e.AssistantFeed={})),function(e){function i(e){return"proofitButton"===e.type}e.ID="proofit-button",e.isProofitContent=i,e.getContent=function(e,n){return(0,o.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))}}(f=e.Proofit||(e.Proofit={})),function(e){e.ID="upgrade_hook",e.findUpgradeHookSduiItem=function(i){return t(i,e.ID)}}(v=e.NativeUpgradeHook||(e.NativeUpgradeHook={})),function(e){e.ID="success_report",e.SUCCESS_REPORT_CARD_ID="success_report@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID="success-report-with-performance-score@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID="success-report-with-quality-score@Short-known:card-assistantCard",e.OPEN_PERFORMANCE_SCORE_INTERACTION_ID="success-state-known:open-performance-score",e.findSuccessReportSduiItem=function(i){return t(i,e.ID)}}(b=e.SuccessReport||(e.SuccessReport={}))}(r||(r={}))},18300:(e,t,i)=>{function n(e){return e.length>0?e[0]:null}function a(e){return 1===e.length?e[0]:null}function r(e){return 1===e.length?e[0]:e.length>0?e.reduce(((e,t)=>t.start===t.end?e:e.start===e.end?t:{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)})):null}i.d(t,{Ey:()=>n,Ls:()=>r,qq:()=>a})},94824:(e,t,i)=>{i.d(t,{H:()=>n});var n,a=i(56424),r=i(13391);!function(e){const t=r.h.create(""),i=new Proxy({textContent:""},{get:(e,i)=>"textContent"===i?t.get():Reflect.get(e,i),set:(e,i,n)=>"textContent"===i&&"string"==typeof n?(t.set(n),!0):Reflect.set(e,i,n)});e.init=function(){a.ux.setStylesTarget(i)},e.styles=t.view()}(n||(n={}))},97310:(e,t,i)=>{i.d(t,{YS:()=>f,mE:()=>h,nS:()=>n});var n,a=i(49231),r=i(32073),s=i(13391),o=i(37213),l=i(1208),c=i(94824),d=i(34967);!function(e){e.Context=a.createContext(null)}(n||(n={}));class u{constructor(){this._denaliStyleSheet=new CSSStyleSheet,this._globalStyleSheet=new CSSStyleSheet,this._globalStyleSheetLoaded=s.h.create(null),this._subscription=new r.w0}inject(e,t){const i=this._globalStyleSheetInitialized();i||this._initGlobalStyleSheet();const r=e.attachShadow({mode:"open"});r.adoptedStyleSheets=[this._denaliStyleSheet,this._globalStyleSheet];const s=(0,d.X3)(r,a.createElement(n.Context.Provider,{value:r},a.createElement(t,{viewLoaded:this._globalStyleSheetLoaded.view((e=>({...e,constructableStyleSheetInitialized:i})))})));return()=>{s(),this._subscription.unsubscribe()}}_globalStyleSheetInitialized(){return this._globalStyleSheet.cssRules.length>0}async _initGlobalStyleSheet(){try{if(!self.GR_INLINE_STYLES)throw new Error("No inline styles");await Promise.all([this._denaliStyleSheet.replace(c.H.styles.get()),this._globalStyleSheet.replace(self.GR_INLINE_STYLES)]),this._globalStyleSheetLoaded.set({stylesInjectionStrategy:"constructableStyleSheet"}),this._subscription.add(c.H.styles.subscribe((e=>this._denaliStyleSheet.replaceSync(e))))}catch(e){this._globalStyleSheetLoaded.set({error:`${e}`,stylesInjectionStrategy:"constructableStyleSheet"})}}}const p=(0,o.xb)(l.b);class g{inject(e,t){const i=s.h.create(null),r=e.attachShadow({mode:"open"});return(0,d.X3)(r,a.createElement(a.Fragment,null,a.createElement(p,null,c.H.styles),a.createElement(l.b,null,self.GR_INLINE_STYLES),a.createElement(n.Context.Provider,{value:r},a.createElement(t,{viewLoaded:i}))),(()=>i.set({stylesInjectionStrategy:"styleElement"})))}}class h{inject(e,t){const i=s.h.create(null),r=e.attachShadow({mode:"open"});return(0,d.X3)(r,a.createElement(a.Fragment,null,a.createElement(n.Context.Provider,{value:r},a.createElement(t,{viewLoaded:i}))),(()=>i.set({stylesInjectionStrategy:"noStyles"})))}}let m=null;function f(e=!1){return e&&function(){if(null===m)try{const e=new CSSStyleSheet;m=!!e&&!!e.replace&&!!e.replaceSync&&"adoptedStyleSheets"in Document.prototype}catch(e){m=!1}return!0===m}()?new u:new g}},34967:(e,t,i)=>{i.d(t,{G7:()=>f,X3:()=>h});var n=i(49231),a=i(64151),r=i(84714),s=i(2613),o=i(14969),l=i(29479),c=i(954),d=i(24666),u=i(59179),p=i(47387);function g(e){return!!e&&!e.error}function h(e,t,i){return(0,a.render)(t,e,i),()=>(0,a.unmountComponentAtNode)(e)}const m=({view:e,placeholder:t,viewLoaded:i,minDuration:a,forcePlaceholder:d})=>{const u=g(i.get())&&!d?(0,r.of)(e):i.pipe((0,s.e)(a),(0,o.P)(g),(0,l.h)(e),(0,c.O)(t));return n.createElement(p.F.Fragment,null,u)};var f;!function(e){e.showWhenLoaded=function(e){return function({viewLoaded:t}){return n.createElement(p.F.Fragment,null,t.pipe((0,d.x)(),(0,u.U)((t=>g(t)?e:null))))}},e.withPlaceholder=function(e,t,i,a){return function({viewLoaded:r}){return n.createElement(m,{view:e,placeholder:t,minDuration:i||0,viewLoaded:r,forcePlaceholder:a||!1})}}}(f||(f={}))},69976:(e,t,i)=>{i.d(t,{q:()=>n});var n,a=i(36334);!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function i(e,t){var i;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(i=e.llamaIntegration)||void 0===i?void 0:i.enabled))}function n(e,i,n,r){var s,o;const l=r?(0,a.KK)(r):void 0,c=i.isLlamaInstalled&&(null===(s=n.llamaIntegration)||void 0===s?void 0:s.enabled);return t(l,null===(o=n.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&(c||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=i,e.showSettingPopupToggle=n,e.showDisabledByDesktopExtensionGButton=function(e,t,a,r){return n(t,e,a,r)&&i(a,e)},e.isIntegrationEnabled=function(e,n,a){var r;return!(!e||!a)&&(t(n,null===(r=a.llamaIntegration)||void 0===r?void 0:r.disabledByDomain)&&i(a,e))}}(n||(n={}))},68338:(e,t,i)=>{var n;i.d(t,{R:()=>n}),function(e){e.Close="Close"}(n||(n={}))},45411:(e,t,i)=>{i.d(t,{C:()=>l,U:()=>n});var n,a=i(49231),r=i(95501),s=i(1285),o=i(4025);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...r.a.Flag},e.Context=a.createContext(s.Y.invariantContent("Environment"))}(n||(n={}));class l{constructor(e){this._flags=new Set,this.actions={openUrl:e=>o.vM((()=>{document.location.href=e.toString()})),openPopup:e=>o.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e&&this._flags.add(n.Flag.isAppleSystem),this._flags.add(n.Flag.supportsSVGDominantBaseline),this._flags.add(n.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},645:(e,t,i)=>{i.d(t,{I:()=>c,S:()=>n});var n,a=i(49231),r=i(39170),s=i(1285),o=i(48886),l=i(311);!function(e){e.Context=a.createContext(s.Y.invariantContent("SidebarTextResources")),e.holder=o.VF((()=>({logoText:"GRAMMARLY",plagiarismTooltip:"Scan for plagiarism",setGoalsTooltip:"Adjust goals",statisticsTooltip:"See performance"})))}(n||(n={}));const c=l.GG({denali:r.m.holder,sidebar:n.holder})},63314:(e,t,i)=>{i.d(t,{US:()=>G,hz:()=>V,ux:()=>z});var n=i(90023),a=i(49231),r=i(56424),s=i(28069),o=i(46025),l=i(87784),c=i(74703),d=i(49857),u=i(9761),p=i(20965),g=i(59179),h=i(94592),m=i(74822),f=i(954),v=i(84714),b=i(84308),w=i(3527),S=i(64271),y=i(79256),E=i(20161),C=i(36344),k=i(82925),_=i(63532),A=i(17705),I=i(90517),x=i(90572),T=i(44071),M=i(29479),R=i(24335),P=i(12901),L=i(47387),F=i(19813),D=i(58303),U=i(58849),H=i(87653),B=i(50956),O=i(1127);const N=U.UI.Grid.make((({slots:e,view:t})=>a.createElement(L.F.div,{style:{marginBottom:t("spacing").pipe(g.U(r.ux.rem))}},e.children)));function G(){return 1}const V=a.forwardRef((function({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:r,header:c,footer:d,capabilities:g,comparator:b},w){const S=h.jw((e=>{let t=7;return t=31*t+(0,o.AC)(e.currentLens.id),t=31*t+(u.nL.hasItems(e)?1231:1237),t}),e).view((e=>u.nL.hasItems(e.get())?e.view(u.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:1}:null)),y=a.useContext(B.Dg).state;return a.createElement(p.d,{className:v.of(""),name:"cardlist",stateSyncListener:j(i,r,y),height:z(e,i,g),isMaster:!0},a.createElement(a.Fragment,null,c?a.createElement(L.F.div,{className:O.headerOrFooterWrapper,mount:e=>r.lens("title").set(D.ij(e))},c):null,a.createElement(L.F.div,{mount:w},S.view((e=>{return e?U.UI.mount((a=e.spacing,(0,n.zG)(s.A.cardList(H.O.item(t.actionEvents)),U.UI.patch("content","cell","item")((e=>(0,n.zG)(U.UI.Knot.make(N,{children:e.child}),U.UI.squash,U.UI.contramapState((e=>({children:e,root:{spacing:a}})))))))),(e=>(0,n.zG)(H.O.createCardListFlow()(t,e,new m.x,l.i$(i).pipe(f.O(!1)),g,b)))(e.state)):null;var a}))),d?a.createElement(L.F.div,{className:O.headerOrFooterWrapper},d):null))})),z=(e,t,i)=>{const n=(0,d.Sd)(i)(e.view(u.nL.mapper((({currentLens:e,alertSource:t})=>D.G({currentLens:e,alertSource:t})))));return b.a([n.pipe(w.oA,g.U((({currentLens:e})=>e.cardsHeight)),f.O(0)),t.paddingTop]).pipe(g.U((([e,t])=>e+t)))},j=(e,t,i)=>{const n=F.C8.Logging.getLogger("view_models");return S.T(y.P((()=>v.of(e.paddingTop.set(0)))),t.view("viewport").pipe(E.w(D.g_((()=>C.E),(e=>k.YC(e).pipe(_.b((()=>n.debug("update card list viewport due to viewport resize event"))),A.T(i.pipe(I.j("dragging"),x.h((e=>!e)),E.w(h.b2.rafScheduler),_.b((()=>n.debug("update card list viewport due to drag end event"))))),g.U((()=>e.getBoundingClientRect())),g.U((e=>({top:c.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),_.b(h.wW(e.viewport))),t.view("scrollProvider").pipe(E.w(D.g_((()=>C.E),(t=>T.R(t,"scroll").pipe(g.U((()=>t.scrollTop)),f.O(t.scrollTop),_.b(h.wW(e.scrollTop)),M.h(h.PU)))))),t.view("title").pipe(E.w(D.g_((()=>v.of(P.UL.empty)),(e=>k.YC(e)))),g.U((e=>e.height)),R.d({bufferSize:1,refCount:!0}),_.b(h.wW(e.paddingTop))),t.view("scrollConsumer").pipe(E.w(D.g_((()=>C.E),(t=>e.scrollOffset.pipe(_.b((e=>{t.scrollTop+=e})))))))).pipe(M.h(void 0))}},38459:(e,t,i)=>{i.d(t,{C:()=>P,S:()=>R});var n=i(90023),a=i(49231),r=i(25700),s=i(73204),o=i(36355),l=i(44622),c=i(46025),d=i(8080),u=i(20965),p=i(94592),g=i(3527),h=i(59179),m=i(12901),f=i(47387),v=i(58303),b=i(58849),w=i(87653),S=i(63314),y=i(43420),E=i(35157),C=i(95486),k=i(95627);const _=({upgradeViewModel:e})=>{const t=e.advancedAlerts.pipe(h.U(v.UI((e=>({count:e.count,alerts:e.alerts()})))));return a.createElement(f.F.div,{className:k.premiumLens},b.UI.mount(E.r,b.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind?(e.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"}),e.openUpgradeUrl(C.L.Place.gdocsSidebarCardList)):"onUpgradeButtonMount"===t.action.action.action.kind&&e.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"})}),t)))};var A=i(39170),I=i(61111),x=i(63709),T=i(542);const M=({successLensViewModel:e})=>{const t=(0,I.hM)((0,I.wK)(e.successState.view("type"),a.useContext(A.m.Context)));return a.createElement(f.F.div,{className:T.successLens},b.UI.mount(x.q,t))},R=a.forwardRef((function({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:n,capabilities:r,upgradeHookFlow:u,...g},h){const m=p.jw((e=>{let t=7;return t=31*t+(0,c.AC)(e.currentLens.id),t=31*t+(d.v.WithSuccess.State.isInSuccess(r)(e)?1231:1237),t}),e);return a.createElement(s.G.DefaultProvider,null,a.createElement(P,{ref:h},(e=>a.createElement(f.F.Fragment,null,m.view((s=>{const c=s.get();return c.currentLens.id===o.R.SpecialId.Premium?a.createElement(_,{upgradeViewModel:i}):d.v.WithSuccess.State.isInSuccess(r)(c)?a.createElement(M,{successLensViewModel:g.successLensViewModel}):a.createElement("div",null,a.createElement(S.hz,{state:s,cardsViewModel:t,cardsListScrollManager:n,connectorElements:e,header:b.UI.mount(l.n.TogglablePanel,u),comparator:w.O.listItemOrd,capabilities:r}))}))))))})),P=a.forwardRef((function({children:e,onClick:t,className:i=y.cardList,footer:s,...o},l){const c=u.d.Elements.create(),d=(0,n.zG)(c.view("viewport"),g.oA,h.U(m.UL.fromEl));return a.createElement("div",{...o,onClick:t,className:i,ref:e=>{"function"==typeof l?l(e):l&&(l.current=e);const t=v.ij(e);c.lens("scrollConsumer").set(t),c.lens("scrollProvider").set(t),c.lens("viewport").set(t)}},a.createElement(r.l.RootVirtualContainer,{name:"cardListConnector",viewport:d},e(c)),s)}))},56301:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(49231);if(3075==i.j)var a=i(36355);if(3075==i.j)var r=i(32080);if(3075==i.j)var s=i(43920);if(3075==i.j)var o=i(26278);if(3075==i.j)var l=i(56693);if(3075==i.j)var c=i(47387);if(3075==i.j)var d=i(86952);var u=i(5706);const p=({lensPreviewViewModel:e,openPlagiarismPage:t,showPlagiarismButton:i,isPlagiarismPageActive:r,closePlagiarismPage:s,plagiarismCheckingStatus:o,plagiarismPopover:l,plagiarismPopoverActionsHandler:p})=>{const h=e.getLens(a.R.SpecialId.AllAlerts).view((e=>e.count));return n.createElement(c.F.div,{className:u.footer},o.view((e=>"OnTextChange"===e?n.createElement("div",{style:{marginLeft:"12px",marginTop:"4px"}},n.createElement(d.T,null)):n.createElement(g,{activeAlerts:h,openPlagiarismPage:t,showPlagiarismButton:i,isPlagiarismPageActive:r,closePlagiarismPage:s,plagiarismPopover:l,plagiarismPopoverActionsHandler:p}))))};function g({activeAlerts:e,openPlagiarismPage:t,showPlagiarismButton:a,isPlagiarismPageActive:s,closePlagiarismPage:o,plagiarismPopover:l,plagiarismPopoverActionsHandler:c}){const d=n.lazy((()=>Promise.all([i.e(9300),i.e(7470)]).then(i.bind(i,94594)).then((({PlagiarismButton:e})=>({default:e})))));return n.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"}},n.createElement(r.k,{justify:"start",align:"center",gap:2,marginLeft:4},n.createElement(h,{activeAlerts:e}),n.createElement("p",{style:{fontSize:"12px"}},"Alerts left")),n.createElement(n.Suspense,{fallback:n.createElement("div",null)},n.createElement(d,{showPlagiarismButton:a,openPlagiarismPage:t,isPlagiarismPageActive:s,closePlagiarismPage:o,popover:l,popoverActionsHandler:c})))}const h=({activeAlerts:e})=>n.createElement(c.F.Fragment,null,e.view((e=>e>0?n.createElement(s.C,{count:e,variant:"neutral",getAriaLabelText:e=>`${e} Alerts left`}):n.createElement(o.J,{icon:l.j,accessibilityLabel:"No Alerts"}))))},93666:(e,t,i)=>{i.d(t,{$:()=>S,y:()=>y});var n=i(49231);if(3075==i.j)var a=i(52574);if(3075==i.j)var r=i(27360);if(3075==i.j)var s=i(73204);if(3075==i.j)var o=i(68717);if(3075==i.j)var l=i(36355);if(3075==i.j)var c=i(81080);if(3075==i.j)var d=i(26278);if(3075==i.j)var u=i(64204);if(3075==i.j)var p=i(48666);if(3075==i.j)var g=i(37213);if(3075==i.j)var h=i(58303);var m=i(58849);if(3075==i.j)var f=i(645);if(3075==i.j)var v=i(81259);if(3075==i.j)var b=i(29357);var w=i(41927);const S=({navigationViewModel:e,modalManager:t,experimentClient:i})=>n.createElement(s.G.DefaultProvider,null,n.createElement(y,{navigationViewModel:e,modalManager:t,experimentClient:i})),y=({navigationViewModel:e,modalManager:t,experimentClient:i,showLensNavigation:a=!0})=>n.createElement("div",{className:a?w.defaultHeaderWithLenses:w.defaultHeader},n.createElement(s.G.DefaultProvider,null,n.createElement(E,{modalManager:t,experimentClient:i,navigationViewModel:e}),a&&n.createElement("div",{...(0,g.Sh)(w.lensNavigation,w.disabledLensNavigation)},m.UI.mount(c.C,m.Z.fromSideEffect((t=>{e.events.next({type:"switchToLens",id:t.lens.id,focusFirst:!1,actionSource:o.l$.sidebar})}),{activeLensId:h.YP,previews:Object.values(e.lensPreviews).filter((e=>e.id!==l.R.SpecialId.Vox)),disabled:!1}))))),E=({navigationViewModel:e,modalManager:t,experimentClient:i})=>{const s=n.useContext(f.S.Context),l="test"!==i.getTreatment(v.p.RemoveSetGoalsGDocs),c=t.state.view(h.Gg((e=>e.instance.type===r.dC.SetGoals)));return n.createElement("div",{className:w.head},n.createElement("div",{className:w.headerGroup},n.createElement(b.T,{type:"full",className:w.logoIcon})),l&&n.createElement(a.zx.Flat,{name:"setGoals",className:w.setGoalsButton,title:s.setGoalsTooltip,titleAlign:"bottomCenter",active:c,disabled:c,onClick:()=>e.events.next({type:"setGoals"})},n.createElement(d.J,{icon:u.D,accessibilityLabel:"Set Goals",size:"large"})),n.createElement("div",{className:w.headerGroup},l&&n.createElement("div",{className:w.divider}),n.createElement(a.zx.Flat,{name:"closeSidebar",onClick:()=>e.events.next({type:"toggleSidebar",actionSource:o.l$.sidebar})},n.createElement(d.J,{icon:p.V,accessibilityLabel:"Close",size:"small"}))))}},25576:(e,t,i)=>{i.d(t,{L:()=>o});var n=i(90023),a=i(49231),r=i(47387),s=i(58303);const o=({modalManager:e})=>a.createElement(r.F.Fragment,null,e.state.view((0,n.ls)(s.UI((({component:e})=>e)),s.WG)))},81434:(e,t,i)=>{i.d(t,{P:()=>o});var n=i(49231),a=i(42847),r=i(98306),s=i(12987);const o={unauthorizedError:(e,t)=>n.createElement(r.s.UnauthorizedError,{action:t("gotoLogin")}),offline:()=>n.createElement(l,null),alertUndo:(e,t)=>n.createElement(s.A.Standard,{action:t("undo"),params:e.args.params})},l=()=>n.createElement(a.DI.TitledContent,{title:"Lost Connection"},"Your Internet session was interrupted.")},78285:(e,t,i)=>{i.d(t,{Q:()=>l});var n=i(49231),a=i(24858),r=i(68545),s=i(62552),o=i(58303);const l=({children:e,remSize:t,setter:i})=>(c+=1,n.useEffect((()=>{const e=t.subscribe((e=>{d.next(o.G(e)),i(o.G(e))}));return()=>{e.unsubscribe(),c-=1,0===c&&(d.next(o.YP),i(o.YP))}}),[t]),n.createElement(a.u.Context.Provider,{value:d.pipe(r.oA)},e));let c=0;const d=new s.X(o.YP)},53339:(e,t,i)=>{i.d(t,{_:()=>r});var n=i(49231);if(3075==i.j)var a=i(47387);const r=({children:e,position:t,className:i})=>n.createElement(a.F.div,{className:i,style:t.view((e=>({position:"fixed",right:e.right,top:e.top,bottom:"0px",width:e.width,zIndex:e.zIndex,background:"white",display:"flex",flexDirection:"column",justifyContent:"space-between",height:e.height}))),"data-grammarly-part":"legacy-sidebar-container"},e)},2509:(e,t,i)=>{i.d(t,{I:()=>s});var n=i(21250),a=i(43525);const r={priority:n.P.Priority.highest,timeout:n.P.TimeoutDisabled,position:n.P.Position.top,viewType:n.P.ViewType.standard};var s;!function(e){e.createFactory=function(){return{alertUndo:a.r.createBuilder().build({priority:n.P.Priority.low,timeout:n.P.DefaultTimeout,position:n.P.Position.bottomRight,viewType:n.P.ViewType.standard}),unauthorizedError:a.r.createBuilder().build(r),offline:a.r.createBuilder().build(r)}}}(s||(s={}))},57324:(e,t,i)=>{i.d(t,{U9:()=>q,jv:()=>K});var n=i(49231);if(3075==i.j)var a=i(24022);if(3075==i.j)var r=i(73204);if(3075==i.j)var s=i(95501);if(3075==i.j)var o=i(24858);if(3075==i.j)var l=i(39170);if(3075==i.j)var c=i(66887);if(3075==i.j)var d=i(68545);if(3075==i.j)var u=i(63532);if(3075==i.j)var p=i(20161);if(3075==i.j)var g=i(59179);if(3075==i.j)var h=i(79256);if(3075==i.j)var m=i(77400);if(3075==i.j)var f=i(49225);if(3075==i.j)var v=i(84714);if(3075==i.j)var b=i(32356);if(3075==i.j)var w=i(17613);if(3075==i.j)var S=i(47387);if(3075==i.j)var y=i(13391);if(3075==i.j)var E=i(58303);if(3075==i.j)var C=i(90342);if(3075==i.j)var k=i(35063);if(3075==i.j)var _=i(62566);if(3075==i.j)var A=i(4603);if(3075==i.j)var I=i(74514);if(3075==i.j)var x=i(45411);if(3075==i.j)var T=i(645);if(3075==i.j)var M=i(38459);if(3075==i.j)var R=i(56301);if(3075==i.j)var P=i(93666);if(3075==i.j)var L=i(25576);if(3075==i.j)var F=i(81434);if(3075==i.j)var D=i(78285);if(3075==i.j)var U=i(53339);if(3075==i.j)var H=i(37128);if(3075==i.j)var B=i(90107);var O=i(21740),N=i(77365),G=i(63376),V=i(22873),z=i(44094);if(3075==i.j)var j=i(94340);const W=({state:e,cardsViewModel:t,navigationViewModel:a,successLensViewModel:r,upgradeViewModel:s,cardsListScrollManager:o,notificationManager:l,lensPreviewViewModel:h,modalManager:m,capabilities:f,upgradeHookFlow:v,plagiarismEntities:b,onTogglePlagiarism:A,plagiarismCheckingState:x,experimentClient:T,gnar:L,position:D})=>{const H=new j.W(E.YP),O=(0,C.O)(L);(0,B.A)(((e,t)=>e.pipe(d.oA,u.b((({plagiarismVM:e})=>{t.setPlagiarismVM(e)})),p.w((({plagiarismVM:e,plagiarismButtonSub:t})=>t.pipe(g.U(E.UI((t=>({gbutton:t,plagiarismVM:e}))))))),d.oA,u.b((({gbutton:e,plagiarismVM:i})=>{i.setPlagiarismButtonActions((0,k.Zq)(e.actions,e.id)),t.setShowPlagiarismButton(!0)}))))(b,H)),(0,B.A)(((e,t)=>e.pipe(d.oA,p.w((({trackPlagiarismAlertsEditing:e})=>e(t.plagiarismAlertEditToLook)))))(b,O));const N=n.lazy((()=>Promise.all([i.e(9300),i.e(1358),i.e(9366)]).then(i.bind(i,21876)).then((({Plagiarism:e})=>({default:e}))))),G=n.createElement(S.F.Fragment,null,H.activeSidebarPage.view((i=>{switch(i){case"Default":return n.createElement(n.Fragment,null,n.createElement(P.$,{state:e,navigationViewModel:a,modalManager:m,lensPreviewViewModel:h,experimentClient:T}),n.createElement(M.S,{cardsViewModel:t,state:e,successLensViewModel:r,upgradeViewModel:s,cardsListScrollManager:o,capabilities:f,upgradeHookFlow:v}));case"Plagiarism":return n.createElement(n.Fragment,null,n.createElement(P.y,{navigationViewModel:a,modalManager:m,experimentClient:T,showLensNavigation:!1}),n.createElement(n.Suspense,{fallback:n.createElement("div",null)},n.createElement(N,{cardsListScrollManager:o,plagiarismEngine:H.unsafeGetPlagiarismVM().plagiarismEngine,notificationManager:_.u,switchToDefaultFeed:()=>H.closePlagiarismPage(),plagiarismCheckingState:x})));default:(0,w.vE)(i)}}))),W=()=>{x.set("OnSwitchToPlagiarism"),A(!0),H.openPlagiarismPage(),O.gdocsPlagiarismButtonClick()},q={handleGButtonPopoverAction:e=>{const t=b.get();E.pC(t)&&t.value.popoverActionsHandler({openPlagiarism:()=>W()}).handleGButtonPopoverAction(e)}};return n.createElement(U._,{className:z.sidebarContainer,position:D},n.createElement(I.L,{chunkName:"designSystem"},G,n.createElement(R.Z,{lensPreviewViewModel:h,openPlagiarismPage:W,closePlagiarismPage:()=>{A(!1),H.closePlagiarismPage()},showPlagiarismButton:H.isShouldShowPlagiarismButton,isPlagiarismPageActive:H.showPlagiarismPage(),plagiarismCheckingStatus:x,plagiarismPopover:b.pipe(p.w(E.g_((()=>y.h.create(E.YP)),(e=>e.popover)))),plagiarismPopoverActionsHandler:q}),n.createElement(c.i,{key:"notificationCenter",manager:l,views:F.P,theme:{grid:{container:V.container,bottomLeft:V.bottomLeft,bottomRight:V.bottomRight,top:V.top},view:{wrapper:V.notificationWrapper}}})))};function q(e){return({integration:t,sidebarReady:r,ethicalAIFeature:s,cardEvents:o,sduiEngine:l,user:c,_getByRawAlertId:d,startWithExpandedUphook:u,experimentClient:p,plagiarismCheckingState:v,getCheckingService:b,position:w})=>function(){const S=t.engine,C=new x.C((0,A.nD)()),k=y.h.create(!1),{lensState:_,cardsViewModel:I,navigationViewModel:T,successLensViewModel:M,upgradeViewModel:R,dispose:P,cardsListScrollManager:F,notificationManager:D,lensPreviewViewModel:U,modalManager:B,capabilities:O,upgradeHookFlow:N}=(0,H.G)(S,t.denaliViewAdapter,e,t.connectionState,t.gnar,t.user,c,t.document.settings.lens("selectedLens"),r,s,o,t.experimentClient,u,k,b),G=y.h.create(E.YP),V=h.P((()=>Promise.all([i.e(9300),i.e(2082),i.e(1890),i.e(1358),i.e(5853),i.e(1196)]).then(i.bind(i,80144)))).pipe(g.U((({setupSduiManagement:e,createPlagiarismViewModels:i,createPlagiarismEntities:n})=>{const{sduiFeedbackService:a,capiClient:r,sduiManager:s}=e(l,d,S.alertsList.state);return n(E.G({sduiManager:s,sduiFeedbackService:a,capiClient:r}),i,{engine:t.engine,capiProxy:t.capiProxy,ded:t.denaliViewAdapter,environment:C,showPlagiarismAlerts:k})}))).subscribe(m.wW(G));return f.P.useEffectOnWillUnmount((()=>{S.shutdown(),V.unsubscribe(),P()})),n.createElement(Y,{environment:C},n.createElement(W,{user:c,gnar:t.gnar,state:_,cardsViewModel:I,navigationViewModel:T,successLensViewModel:M,upgradeViewModel:R,cardsListScrollManager:F,notificationManager:D,lensPreviewViewModel:U,modalManager:B,capabilities:O,upgradeHookFlow:N,plagiarismEntities:G,onTogglePlagiarism:e=>k.set(e),plagiarismCheckingState:v,experimentClient:p,position:w}),n.createElement(L.L,{modalManager:B}),n.createElement(a.X,null))}}const Y=({environment:e,children:t})=>{const i=n.useRef((0,T.I)(l.m.getConfig(e.has(x.U.Flag.isAppleSystem)?"mac":"windows")));return n.createElement(D.Q,{remSize:v.of(16),setter:e=>o.u.setRootCssVar(document.documentElement,e)},n.createElement(x.U.Context.Provider,{value:e},n.createElement(s.a.Context.Provider,{value:e},n.createElement(T.S.Context.Provider,{value:i.current.sidebar},n.createElement(l.m.Context.Provider,{value:i.current.denali},n.createElement(b.TG.ContextMock,null,n.createElement(r.G.DefaultProvider,null,n.createElement(K,null,t))))))))},K=({children:e})=>n.createElement(n.Fragment,null,n.createElement(N.o,{"data-grammarly-part":"gdocs-sidebar",className:G.wrapper},e),n.createElement(O.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}))},4976:(e,t,i)=>{i.d(t,{CV:()=>B,hp:()=>H,k9:()=>O});var n=i(90023),a=i(39953),r=i(51007),s=i(68717),o=i(36355),l=i(79256),c=i(68545),d=i(59179),u=i(20161),p=i(29479),g=i(77400),h=i(66878),m=i(36344),f=i(32734),v=i(84714),b=i(64271),w=i(954),S=i(78129),y=i(90572),E=i(24666),C=i(10883),k=i(91089),_=i(53976),A=i(79159),I=i(9057),x=i(74703),T=i(49857),M=i(93167),R=i(9761),P=i(13391),L=i(58303),F=i(52303),D=i(70932);class U{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=D.Y.create("SidebarAlignmentViewModelImpl")}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:n},r){return l.P((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:n}))).pipe(c.oA,d.U((i=>(0,a.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(M.j.Features.showLabel),L.G(i),"cardContentTop"),L.Uo))),c.oA,u.w((i=>this._cardPositions.setCardPosition(e,t.has(M.j.Features.showLabel),!0,i.top))),p.h(g.PU),h.K((e=>(this._log.error("Cannot align card to mark",e),m.E))),f.B())}alignMarkTo(e,t,i,n){return l.P((()=>v.of((0,a.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(M.j.Features.showLabel),L.G(i),"cardContentTop"),L.Uo)).pipe(c.oA))).pipe(u.w((i=>b.T(this._markPositions.moveAlertHighlightInViewport(t,x.r.FromWindowTop.ISO.modify(x.L.concatC(i.contentOffset))(i.top),r.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(M.j.Features.showLabel),!0,i.top)))),p.h(g.PU),h.K((e=>(this._log.error("Cannot align mark to suggested position",e),m.E))),f.B())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:n},s,o=L.YP){return l.P((()=>v.of((0,a.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(M.j.Features.showLabel),o,"cardContentTop"),L.Uo)).pipe(c.oA))).pipe(u.w((a=>b.T(this._markPositions.moveAlertHighlightInViewport({alert:n,highlightIndex:i},x.r.FromWindowTop.ISO.modify(x.L.concatC(a.contentOffset))(a.top),r.uq.initial),this._cardPositions.setCardPosition(e,t.has(M.j.Features.showLabel),!0,a.top)))),p.h(g.PU),h.K((e=>(this._log.error("Cannot align mark to card",e),m.E))),f.B())}alignCardTo(e,t,i){const n=i!==A.v.Animation.NO_ANIMATION;return l.P((()=>v.of((0,a.zG)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(M.j.Features.showLabel),L.G(t),"cardTop"),L.Uo)).pipe(c.oA))).pipe(u.w((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(M.j.Features.showLabel),n,t.top))),p.h(g.PU),h.K((e=>(this._log.error("Cannot align card to required top",e),m.E))),f.B())}}const H=(e,t,i,n,a,r)=>new U(I.eZ.getSuperScrollMapper(e,n,P.h.create(16)),I.UC.getMapper(t,a,r));var B;!function(e){e.skip="skip"}(B||(B={}));const O=(e,t,i,r,l,c=g.b2.rafScheduler)=>{const h=(e,i,n,a)=>{if(n===s.l$.text)return t.alignCardToMark(e,i?A.v.Animation.ANIMATE_ALL:A.v.Animation.NO_ANIMATION,!0);if(n===R.h8.forceText)return t.alignCardToMark(e,A.v.Animation.NO_ANIMATION,!1);{const r=n===s.l$.sidebar;return t.alignMarkToCard(e,r?i?A.v.Animation.ANIMATE_ALL:A.v.Animation.ANIMATE_MARK:A.v.Animation.NO_ANIMATION,a)}},f=b.T(e.view(R.nL.mapper((({currentLens:e,alertSource:t})=>L.G({currentLens:e,alertSource:t})))).pipe(w.O(L.YP),d.U(L.UI((e=>e.currentLens.id))),S.G(),y.h((([e,t])=>(0,a.zG)(F.vB(((e,t)=>e!==t))(e,t),L.Gg(n.yR)))),p.h(L.YP)),e.view(R.nL.mapper((({currentLens:e,alertSource:t})=>L.G({currentLens:e,alertSource:t})))).pipe(y.h(L.Gg((({currentLens:e})=>(0,T.Bk)(l)(e)))),d.U(L.tS((({currentLens:e,alertSource:t})=>(0,a.zG)(r(e),L.hX(l.isValidToAlign),L.UI((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(E.x((0,n.ls)(F.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),L.Gg(n.yR))),w.O(L.YP),S.G(),d.U((([e,t])=>(0,a.zG)(t,L.UI((i=>({item:i.item,source:i.source,animate:(0,a.zG)(e,F.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,a.zG)(e,L.hX((e=>!l.isScheduledToDispose(e.item))),L.tS((e=>(0,a.zG)(t,L.UI((t=>[e.item,t.item]))))),L.hX((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),L.UI((([e,t])=>x.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),u.w(L.g_((()=>m.E),c)),C.M(i),u.w((([{item:e,source:t,animate:n,suggestedPosition:r},s])=>(0,a.zG)(s,L.g_((()=>h(e,n,t,r)),(t=>(i.set(L.YP),t===B.skip?k.C:h(e,n,t,r))))))));return{id:"alignmentSideEffect",when:o.R.isWithAlertsId,what:R.nL.Effect.Applicator.create(f.pipe(_.c(k.C)))}}},35604:(e,t,i)=>{if(i.d(t,{C:()=>s}),3075==i.j)var n=i(31391);if(3075==i.j)var a=i(34821);if(3075==i.j)var r=i(32315);class s{constructor(e,t,i){this._cardsViewModel=e,this._gnar=t,this._getAlertById=i,this._subs=new n.w.Keeper,this.subscribeToSidebarCardActions()}subscribeToSidebarCardActions(){this._subs.push(r.g.createSubscription(this._cardsViewModel.actionEvents,this._gnar,this._getAlertById),(0,a.t)(this._cardsViewModel.actionEvents,this._gnar,"gdocs"))}dispose(){this._subs.dispose()}}},49083:(e,t,i)=>{i.d(t,{A7:()=>k,CH:()=>I,Ng:()=>A,uo:()=>_});var n=i(90023),a=i(36355),r=i(68717),s=i(8794),o=i(20161),l=i(36344),c=i(84714),d=i(90572),u=i(10883),p=i(59179);if(3075==i.j)var g=i(24666);if(3075==i.j)var h=i(53976);if(3075==i.j)var m=i(91089);if(3075==i.j)var f=i(18827);if(3075==i.j)var v=i(31403);if(3075==i.j)var b=i(78129);var w=i(9761);if(3075==i.j)var S=i(8080);if(3075==i.j)var y=i(13391);var E=i(58303);if(3075==i.j)var C=i(52303);function k(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:n.W8,what:w.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(s.T(1),o.w(E.g_((()=>l.E),c.of)),d.h((e=>!i||e.alert.lensId!==a.R.SpecialId.Premium)),u.M(t.pipe(d.h(w.nL.hasCards),p.U((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),p.U((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:r.l$.text,options:{lensId:i,order:"textOrder"}})))))}}function _(e,t){return{id:"connectionManager",when:()=>!0,what:w.nL.Effect.SwitchAlert.create(e.pipe(p.U((e=>e.online)),g.x(),o.w((e=>e?l.E:t.enqueue("offline",{reconnectTime:y.h.create(10)}))),h.c(m.C)))}}function A(e,t,i){const n=e.getLens(a.R.SpecialId.Premium).pipe(p.U((e=>e.count>0)),g.x());return{id:"autoSwitchToPremiumLensSideEffect",when:e=>e===a.R.SpecialId.AllAlerts,what:w.nL.Effect.SwitchLens.create(t.pipe(p.U(S.v.WithSuccess.State.isInSuccess(i)),g.x(),f.g(1),v.a(n),d.h((([e,t])=>e&&t)),p.U((()=>({lensId:a.R.SpecialId.Premium,alertSource:r.l$.sidebar,options:{toFocus:w.nL.Effect.FocusBehavior.noFocus}})))))}}function I(e,t){const i=e.getLens(a.R.SpecialId.AllAlerts).pipe(p.U((e=>e.count>0)),g.x());return{id:"autoSwitchFromPremiumLensSideEffect",when:n.W8,what:w.nL.Effect.SwitchLens.create(t.pipe(p.U((e=>e.currentLens.id)),g.x(),b.G(),d.h((([e,t])=>t===a.R.SpecialId.Premium)),p.U((([e,t])=>e)),v.a(i),p.U((([e,t])=>e===a.R.SpecialId.AllAlerts&&t?E.G(a.R.SpecialId.AllAlerts):E.YP)),d.h(E.pC),p.U(C.MH),p.U((e=>({lensId:e,alertSource:r.l$.sidebar,options:{toFocus:w.nL.Effect.FocusBehavior.noFocus}})))))}}},49933:(e,t,i)=>{i.d(t,{D:()=>n});var n,a=i(39953),r=i(94444),s=i(58303),o=i(91817);!function(e){e.updateCitationStyle=(e,t)=>i=>{const n=(0,a.zG)(e.defaultContext.get(),s.fS((()=>r.R$.defaultContextFallback))),l=(0,a.zG)(e.context.get(),r.R$.OutcomeContext.withCitationStyle(i));(0,a.zG)(l,e.updateContext)&&t.goalsFormSuccess((0,a.zG)(l.domain,s.fS((()=>n.domain))),(0,a.zG)(l.goals,s.fS((()=>n.goals)),(e=>Array.from(e))),"essayDetectionCard",(0,a.zG)(l.outcomeContext,s.UI((0,o.ei)("type")),s.FS),void 0,(0,a.zG)(l.outcomeContext,s.UI((0,o.ei)("citation")),s.FS),void 0)}}(n||(n={}))},37128:(e,t,i)=>{if(i.d(t,{G:()=>Se}),3075==i.j)var n=i(90023);if(3075==i.j)var a=i(39953);if(3075==i.j)var r=i(27360);if(3075==i.j)var s=i(5733);if(3075==i.j)var o=i(68717);if(3075==i.j)var l=i(36355);if(3075==i.j)var c=i(77326);if(3075==i.j)var d=i(44622);if(3075==i.j)var u=i(3714);if(3075==i.j)var p=i(77400);if(3075==i.j)var g=i(84714);if(3075==i.j)var h=i(59179);if(3075==i.j)var m=i(90572);if(3075==i.j)var f=i(64271);if(3075==i.j)var v=i(68545);if(3075==i.j)var b=i(84178);if(3075==i.j)var w=i(954);if(3075==i.j)var S=i(8794);if(3075==i.j)var y=i(63532);if(3075==i.j)var E=i(84308);if(3075==i.j)var C=i(29479);if(3075==i.j)var k=i(24666);if(3075==i.j)var _=i(20161);if(3075==i.j)var A=i(36344);if(3075==i.j)var I=i(33069);if(3075==i.j)var x=i(98800);if(3075==i.j)var T=i(80836);if(3075==i.j)var M=i(90818);if(3075==i.j)var R=i(81917);if(3075==i.j)var P=i(19103);if(3075==i.j)var L=i(96030);if(3075==i.j)var F=i(30008);if(3075==i.j)var D=i(70930);if(3075==i.j)var U=i(73358);if(3075==i.j)var H=i(93167);if(3075==i.j)var B=i(9761);if(3075==i.j)var O=i(8080);if(3075==i.j)var N=i(50278);if(3075==i.j)var G=i(80936);if(3075==i.j)var V=i(5961);if(3075==i.j)var z=i(60970);if(3075==i.j)var j=i(90155);if(3075==i.j)var W=i(66299);if(3075==i.j)var q=i(13391);var Y=i(19813);if(3075==i.j)var K=i(58303);if(3075==i.j)var Z=i(52303);if(3075==i.j)var $=i(12518);if(3075==i.j)var X=i(4025);var J=i(5876);if(3075==i.j)var Q=i(4603);if(3075==i.j)var ee=i(66813);if(3075==i.j)var te=i(27804);if(3075==i.j)var ie=i(97982);if(3075==i.j)var ne=i(87653);if(3075==i.j)var ae=i(45411);if(3075==i.j)var re=i(2509);if(3075==i.j)var se=i(35604);if(3075==i.j)var oe=i(49933);if(3075==i.j)var le=i(5039);if(3075==i.j)var ce=i(19798);if(3075==i.j)var de=i(95486);if(3075==i.j)var ue=i(66042);if(3075==i.j)var pe=i(4798);if(3075==i.j)var ge=i(68970);if(3075==i.j)var he=i(62549);if(3075==i.j)var me=i(89795);if(3075==i.j)var fe=i(4976);if(3075==i.j)var ve=i(49083);if(3075==i.j)var be=i(16873);if(3075==i.j)var we=i(14372);const Se=(e,t,i,Se,ye,Ee,Ce,ke,_e,Ae,Ie,xe,Te,Me,Re)=>{const Pe=Y.C8.Logging.getLogger("view_models"),Le=q.h.create(c.A.defaultState),Fe=q.h.create(!1),De=x.t.create(x.t.defaultLensFilters,x.t.defaultTextFilters),Ue=e.alertsList.state.pipe((t=>c.A.get(t,e.alertsList.lensesScores,De))).subscribe(p.wW(Le)),He=new be.t(Le.view("lenses"),De,e.sessionModel.scoreStatus),Be=(0,R.$y)((0,me.a)(t).getContents),Oe={features:(()=>{const e=new Set;return e.add(F.IG.Features.showCardLabelInOutcomes),e})(),cardLayoutDensityMode:H.j.Density.compact,shouldAnimateAlertApply:n.jv,cardVisualMode:q.h.create(H.j.CardVisualMode.RegularLightMode)},Ne=(0,F.Ls)(Be,e.alertsReader,Oe,(()=>g.of(K.YP)),e.mutingAlertsReader),Ge=P.R.ItemFactory.create(Be,e.mutingAlertsReader,Oe,(()=>g.of(K.YP))),Ve=ne.O.getCapabilities(Ne,Ge,e.alertsReader,Be),ze=new z.gi(ne.O.equatable.structEq,ne.O.defaultOrd),je=(0,z.is)(Ne,Ve),We=N.v.createWithInitialAlerts(ze,je,De,(0,n.ff)(o.bZ.isMuted),Ve),qe=new T.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,De.alertCanBeDisplayed),Ye=new V.oq(e.alertsList.state,e.alertsReader,Le.view("lenses"),qe,He,We,je,Ve,De),Ke=l.R.SpecialId.AllAlerts,Ze=q.h.create(Ye.emptyState(Ke)),$e=Ze.pipe(h.U((e=>e.currentLens.id)),m.h(te.U.SelectedLens.filter)).subscribe((e=>ke.set(e))),Xe=(0,L.u0)((()=>t.getCursor().index),Ye),Je=new de.x(e.alertsList,Ze,5,Re,ye),Qe=new ue.r(e.alertsList,Ze),et=xe.isGateEnabled(pe.K.StudentsOFEGdocs)||xe.isGateEnabled(pe.K.StudentsOFEInternal),tt=new r.EQ(new we.o(e.sessionModel,Je,Ee.isPremium,ye,et)),it=new ce.$(Ze,He,i,tt,t,ye),nt=new M.Xx({flush:()=>t.flushChanges()},it.events,Ne,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,a.zG)(e.mutedAlertsCategoriesModel,K.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,ge.Um)().suggestionsSettings)})))),K.YP,(()=>!1),ne.O.getActiveItemWithAlert,Ve,new ae.C((0,Q.nD)()),{bufferTransitions:!0,showGbPrompt:!1},oe.D.updateCitationStyle(e.sessionModel,ye)),at=new se.C(nt,ye,(t=>e.alertsReader.getById(t))),rt=he.n.isFree(Ce.get()),st=(0,a.zG)(Te?e=>f.T(Je.advancedAlerts.pipe(v.oA,h.U((e=>({kind:d.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}}))),b.q(1),w.O({kind:d.n.State.minimized,alertsCount:0})),(0,u.d)(Je.advancedAlerts)(e).pipe(S.T(1))):(0,u.d)(Je.advancedAlerts),J.Z.extendActions(y.b((e=>{e.key===d.n.State.minimized&&"onClick"===e.action.action&&rt&&Fe.set(!0),e.key===d.n.State.expanded&&"collapse"===e.action.kind&&Fe.set(!1),e.key===d.n.State.expanded&&"upgrade"===e.action.kind&&(Je.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"}),Je.openUpgradeUrl(de.L.Place.gdocsSidebarCardList)),e.key===d.n.State.expanded&&"onUpgradeButtonMount"===e.action.kind&&Je.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebar"})})))),ot=E.a([Fe,Me]).pipe(C.h(p.PU)),lt=Qe.freeAlerts.pipe(h.U((e=>{var t;return!(null===(t=(0,a.zG)(e,Z.Fc))||void 0===t?void 0:t.count)&&rt})),k.x()).subscribe(p.wW(Fe)),ct=(0,le.xl)(Ze,De,ot,Fe,q.h.create(!1)),dt=E.a(ct,Me).pipe(h.U((([e,t])=>t?n.jv:e))),ut=new le.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Ze,dt,ne.O.getActiveItemWithAlert,Fe,_e,!1),pt=new D.o((()=>$.right(void 0))),gt=(0,fe.hp)(Ze,ut,q.h.create(16),pt,t,Pe),ht=Ze.view(B.nL.getActiveAlertHighlight(ne.O.getActiveItemWithAlert)),mt=new I.mN(t,ut,e.alertsReader,ht,Ze.view((e=>e.currentLens.meta.filter))),ft=new s.y(q.h.create([]),re.I.createFactory(),3,5e3),vt=[M.dv.changeAlertEffect(Ze,nt,Ne,ne.O.getActiveItemWithAlert,e.alertsReader,K.G(gt),Xe,Pe.getLogger("CardsViewModelEffects.changeAlertEffect")),...nt.getApplicatorEffects(),U.R7(Ze,pt,Ve,(0,n.MZ)(nt.actionEvents),{cardsAroundActive:25,cardsBeyondViewport:25}),ve.A7(mt,Ze,rt),(0,fe.k9)(Ze,gt,q.h.create(K.YP),ne.O.getActiveAlignableItem,Ve),U.XU(Ze,pt,Ve),j.EQ.focusMarkByActiveAlert(Ze,ut,e.alertsReader,ne.O.getActiveFocusableItem,Pe.getLogger("MarksEffects.focusMarkByActiveAlert")),ve.uo(Se,ft),M.dv.createSendActiveAlertFeedbacksEffect(Ze,ne.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,Pe.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),ve.Ng(He,Ze,Ve),ve.CH(He,Ze),it.lensChangeEffect],bt=q.h.create(l.R.SpecialId.AllAlerts),wt=(0,L.VC)(Ye,Xe,bt,Ve),St=q.h.create(!0),yt=L.Py.getStateTransformer(L.Py.getDefaultBehavior(ne.O.getActiveItemWithAlert,Ve),wt,e.alertsReader,Ve,(e=>St.get()&&"text"!==e.alertSource),n.Q1,bt),Et=O.v.Items.getItemsPositionsUpdateTransformer(Ve),Ct=(0,n.ls)(yt,X.L9(Et)),kt=new G.l(Ze,Ye,e.alertsReader,e.alertsService,vt,ne.O.getActiveItemWithAlert,Ct),_t=new W.L(Ze,e.sessionModel,n.Q1,Ve,K.YP,O.v.WithSuccess.State.isInSuccess(Ve),q.h.create(!1)),At=Ae.pipe(_.w(K.g_((()=>A.E),(t=>t.initCardActionsProcessing(nt.actionEvents,e.alertsReader,(0,ie.aU)(Ze),(0,ie.X5)(mt,Ze),Ze))))).subscribe(),It=nt.actionEvents.subscribe((0,n.ls)((0,ee.JH)(e.alertsReader,ee.SV.Source.sidebar),Z.bw((e=>Ie.next(e)))));return{lensState:Ze,lensStateManager:kt,cardsViewModel:nt,marksViewModel:ut,navigationViewModel:it,successLensViewModel:_t,alignmentViewModel:gt,lensPreviewViewModel:He,cardsListScrollManager:pt,notificationManager:ft,upgradeViewModel:Je,modalManager:tt,capabilities:Ve,upgradeHookFlow:st,dispose:()=>{It.unsubscribe(),ut.dispose(),$e.unsubscribe(),Ue.unsubscribe(),at.dispose(),At.unsubscribe(),lt.unsubscribe(),Qe.dispose()}}}},16873:(e,t,i)=>{i.d(t,{t:()=>v});var n=i(59833),a=i(38538),r=i(56164),s=i(90023),o=i(39953),l=i(70568),c=i(36355),d=i(11953),u=i(83821),p=i(17613),g=i(13391),h=i(97767),m=i(58303),f=i(2245);class v{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,h.HP)((function(e){switch(e){case c.R.SpecialId.AllAlerts:return this._lensesList.view(b(c.R.Info.allAlerts,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.AllAlerts)));case c.R.SpecialId.PredictionTakeaways:return this._lensesList.view(b(c.R.Info.predictionTakeaways,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionTakeaways)));case c.R.SpecialId.PredictionEmogenie:return this._lensesList.view(b(c.R.Info.predictionEmogenie,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.PredictionEmogenie)));case c.R.SpecialId.RealTimeProofit:return this._lensesList.view(b(c.R.Info.realTimeProofit,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.RealTimeProofit)));case c.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case c.R.SpecialId.Premium:return this._lensesList.view(b(c.R.Info.premium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.Premium)));case c.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(b(c.R.Info.freePremium,c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(c.R.SpecialId.FreePremiumAlerts)));case c.R.SpecialId.Correctness:case c.R.SpecialId.Clarity:case c.R.SpecialId.Engagement:case c.R.SpecialId.Delivery:case c.R.SpecialId.Vox:case c.R.SpecialId.KnowledgeHub:return this._lensesList.view(b(c.R.Info.createOutcome(e),c.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,p.vE)(e)}})),this._outcomes=[c.R.SpecialId.Correctness,c.R.SpecialId.Clarity,c.R.SpecialId.Engagement,c.R.SpecialId.Delivery],this._previews=(0,h.HP)((()=>a.uX((0,r.mL)(),n.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=g.h.create(!1),this._isFree=g.h.create(!1),this._outcomeStatusMask=g.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=u.x.IsDocumentEmpty),t&&(i|=u.x.IsFreeUser),i})),this._getPlagiarismLens=(0,s.ls)(b(c.R.Info.plagiarism,{...c.R.Meta.group.empty,percentile:d.T.MAX},this._alertsFilterService.getLensesFilter(c.R.SpecialId.Plagiarism)),c.R.WithAlerts.modifyMeta((e=>({...e,percentile:d.T.groupSum.concat(d.T.MAX,d.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,o.zG)(m.ij([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((t=>e(t.get())))),m.UI((e=>e.get().id)))}_getPreview(e){return{...c.R.Info.base,logo:m.YP,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,n=this._isFree.view((t=>t&&(e===c.R.SpecialId.Engagement||e===c.R.SpecialId.Delivery))),a=g.h.combine(t.view("count").view((e=>0===e)),n,((e,t)=>e&&!t)),{description:r,stateMessage:p}=(0,u.O)(e),h=g.h.combine(this._isDocumentEmpty,a,t.view("percentile"),((e,t,i)=>e?d.T.MIN:t?d.T.MAX:i)).view(d.g.fromRatio),f=g.h.create(!1),v=g.h.combine(this._scoreStatus.view((e=>(0,o.zG)(e,m.UI((e=>e===l.v0.ScoresStatus.SENSITIVE)),m.fS(s.jv)))),t,h,this._outcomeStatusMask,f,p);return{id:e,title:i,description:r,status:v,progress:h,isUnavailable:n}}get nonEmptyLensId(){return(0,o.zG)(m.ij([this.getLens(c.R.SpecialId.AllAlerts),this.getLens(c.R.SpecialId.Premium)].find((e=>e.get().count>0))),m.UI((e=>e.get().id)))}}function b(e,t,i){return n=>{return new c.R.LensImpl(e,(a=e.id,r=t,e=>(0,o.zG)(f.P5(c.R.Id.ord)(a,e),m.fS((()=>r))))(n),i);var a,r}}},5039:(e,t,i)=>{i.d(t,{gM:()=>Z,o$:()=>X,xl:()=>$});var n,a=i(90023),r=i(39953),s=i(36355),o=i(68717),l=i(77178),c=i(58578),d=i(27343),u=i(31391),p=i(77400),g=i(46387),h=i(41145),m=i(48922),f=i(9761),v=i(90155),b=i(59179),w=i(3199),S=i(84308),y=i(64271),E=i(90572),C=i(24666),k=i(10883),_=i(84714),A=i(74822),I=i(78129),x=i(66878),T=i(63532),M=i(3527),R=i(90517),P=i(17613),L=i(13391),F=i(97767),D=i(90490),U=i(19813),H=i(59833),B=i(58303),O=i(12518),N=i(52303),G=i(91817),V=i(1596),z=i(87653),j=i(94525),W=i(83895),q=i(64451),Y=i(57935),K=i(41767);!function(e){e.create=(e,t,i,n,a,r)=>(s,o)=>{const l=o.to.visualState===g.Bd.highlighted;return q.sO.Change.getCreateAction({range:s,capiAlertId:e,visualState:l?{type:q.sO.Change.VisualState.Type.highlighted,source:t()}:{type:q.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(s(),l),highlightDisappearOnHoverDelay:a,order:r})},e.update=(e,t,i,n,a,r)=>(s,o)=>{const l=o.to.visualState===g.Bd.highlighted;return q.sO.Change.getUpdateAction({range:s,capiAlertId:e,visualState:l?{type:q.sO.Change.VisualState.Type.highlighted,source:t()}:{type:q.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(s(),l),highlightDisappearOnHoverDelay:a,order:r})},e.remove=e=>t=>q.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(n||(n={}));const Z=(e,t)=>{const i=e.pipe(b.U(W.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),n=t.pipe(b.U((e=>e.cards)),w.R(((e,t)=>(0,r.zG)(t,D.vh.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),b.U((e=>(0,r.zG)(Array.from(e.values()),H.xH))),b.U((e=>new Set(e)))),a=t.pipe(b.U((e=>e.feedId===W.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),s=t.pipe(b.U((e=>e.feedId===W.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),o=t.pipe(b.U((e=>e.feedId===W.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),l=t.pipe(b.U((e=>e.feedId===W.D1.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return S.a([i,n,a,s,o,l]).pipe(b.U((([e,t,i,n,a,r])=>i||n?t=>!e.has(t.id):a||r?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))},$=(e,t,i,n=L.h.create(!1),a=L.h.create(!1))=>y.T(e.pipe(E.h((e=>e.currentLens.id!==s.R.SpecialId.Premium)),C.x(((e,t)=>e.currentLens.id===t.currentLens.id)),C.x()),i.pipe(k.M(e),b.U((([e,t])=>t)))).pipe(k.M(n,a),b.U((([e,i,n])=>i?(0,F.W9)(o.bZ.isPremium,o.bZ.isHidden):n?o.bZ.isPlagiarism:t.alertVisibleInText(e.currentLens.id))));class X{constructor(e,t,i,d,p,w,S,y,C,k=_.of(void 0),T=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=d,this._ded=p,this._lensState=w,this._filterChanges=S,this._getActiveItemWithAlert=y,this._showPremiumHighlights=C,this._readyObs=k,this._emulateAppliedAlertAnimation=T,this._highlightedAlert=B.YP,this._focusedAlert=B.YP,this._marksMap=new Map,this._subs=new u.w.Keeper,this.events=new A.x,this._alertStateDiff=this._alertList.state.pipe(I.G(),b.U((([e,t])=>c.p.diff(e,t))),E.h((0,F.ff)(D.vh.isEmpty))),this._alertsFilter=L.h.create(a.jv),this._filteredAlerts=L.h.create(B.YP),this._ready=!1,this._log=U.C8.Logging.getLogger("marks_view_model"),this.unhighlightAlertHighlight=()=>{throw new Error("Method not implemented.")},this.getMarkByAlert=e=>(0,r.zG)(this._marksMap.get(e.alert.id),B.ij,B.tS((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,r.zG)(this._alertsReader.getRegistered(l.P.fromRangeIdToAlertId(e.id)),B.tS((t=>(0,r.zG)(v.$A.getHighlightIndex(t,e.range()),O.map((e=>({alert:m.$.fromModel(t),highlightIndex:e}))),B.Uo)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,r.zG)(this.getMarkByAlert(e),B.g_((()=>_.of(O.left(new Error("getMarkByAlert returned O.none")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(b.U(O.right),x.K((e=>_.of(O.left(e)))))))),this._createMA=e=>{const t=N.MH(e.rawId),{impact:i,cardLayout:{outcome:c},extra_properties:d}=e.toRawAlert(),u=V.M.getHighlightColor({inline:e.inline,outcome:j.DD.createOutcomeType(c),impact:i,extraProperties:d,patternName:e.patternName,isPremium:o.bZ.isPremium(e),isHidden:o.bZ.isHidden(e)},!0,!1,!1,K.N1.get(),K.e9.get()),p=this._lensState.view(f.nL.getActiveItem(z.O.getActiveItemWithAlert)).view((0,a.ls)(B.hX((t=>t.activeAlert.id===e.id)),B.UI((e=>e.activeHighlightIndex)),B.fS((()=>0)))),b=e=>(t,i)=>{const n=l.x.isEnclosingView(t),a=e.getHighlightRanges().some(l.x.isEnclosingView),s=l.x.isMainView(t),c=l.x.isMainStartView(t),d=e.getHighlightRanges(),u=(0,r.zG)(d,H.cx((e=>e.start===t.start&&e.end===t.end)),B.fS((()=>0)))===p.get(),g=o.bZ.isSuperAlert(e);return V.M.getHighlightDisplayFormat({isEnclosing:n,isEnclosed:a,isMain:s,isMainStart:c,isActive:u,belongsToActiveAlert:i,belongsToSuperAlert:g})},w=s.R.getSortOrder(e.lensType),S=new h.v((t=>(0,r.zG)(this._alertsReader.getById(e.id),B.wp((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),B.G(e)))),B.UI(m.$.fromModel),N.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),n.create(t,(()=>q.sO.Change.VisualState.Source.api),u,b(e),null,w),n.update(t,(()=>J.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),u,b(e),null,w),n.remove(t),(t=>{t.to.visualState===g.Bd.applied&&(this.events.next({type:v.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,S),S},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(g.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>o.bZ.isRegistered(e)&&!o.bZ.isMuted(e)?(0,r.zG)(B.ij(this._marksMap.get(e.id)),B.g_((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),g.Oe.isOrWillBe(g.Bd.success)(e)&&e.scheduleApply(g.Bd.highlighted),e)))):(0,r.zG)(B.ij(this._marksMap.get(e.id)),B.g_((()=>{}),(t=>(e.allowUpdate&&o.bZ.isCapiDone(e)&&o.bZ.isRated(e)&&g.Oe.isOrWillBe(g.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(g.Bd.success)):(t.scheduleApply(g.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}getPlagiarismAlertsEditingTracker(){return e=>this._alertList.state.pipe(E.h((0,a.ls)(d.v.iso.get,(e=>e.latestChangeDiff),D.vh.filter(a.jv,((e,t)=>t.alert.lensType===s.R.Type.Plagiarism&&t.state.type===o.bZ.State.Type.REMOVED&&(t.state.reason===o.bZ.State.Removed.Reason.capiDone||t.state.reason===o.bZ.State.Removed.Reason.textChange)),a.jv),(0,F.ff)(D.vh.isEmpty))),T.b((()=>e())))}focusAlertHighlight(e){return this._ready?(0,r.zG)(this._marksMap.get(e.alert.id),B.ij,B.UI((t=>{this._focusedAlert=B.G(e.alert.id),t.scheduleApply(g.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),O.fromOption((()=>new Error("Unknown alert"))),O.map((()=>({dispose:()=>{B.Gg((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=B.YP),(0,r.zG)(this._marksMap.get(e.alert.id),B.ij,B.hX((()=>!(0,r.zG)(this._highlightedAlert,B.Gg((t=>t===e.alert.id))))),B.UI((e=>{e.scheduleApply(g.Bd.visible),e.apply()})))}})))):O.left(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,r.zG)(this._marksMap.get(e.id),B.ij,B.UI((t=>{this._highlightedAlert=B.G(e.id),t.scheduleApply(g.Bd.highlighted),t.apply()})),O.fromOption((()=>new Error("Unknown alert"))),O.map((()=>({dispose:()=>{B.Gg((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=B.YP),(0,r.zG)(this._marksMap.get(e.id),B.ij,B.hX((()=>!(0,r.zG)(this._focusedAlert,B.Gg((t=>t===e.id))))),B.UI((e=>{e.scheduleApply(g.Bd.visible),e.apply()})))}})))):O.left(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,r.zG)(this._marksMap.get(e.alert.id),B.ij,B.tS((t=>t.markByIndex(e.highlightIndex))),B.tS((e=>B.Uo(e.range()))),B.g_((()=>O.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:n}=this._ded.getCursor();if(0===n&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,r.zG)(this._ded.setCursor(i,0),O.orElse(O.left))}return O.right(void 0)}))):O.left(new Error("marks view model is not ready yet"))}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return y.T(this._filteredAlerts.pipe(M.cp((({visible:t,hidden:i})=>_.of(e({activeAlerts:(0,G.qo)(t),removedAlerts:(0,G.qo)(i)}))))),this._alertStateDiff.pipe(k.M(this._alertsFilter),b.U((([t,i])=>(0,r.zG)(t,D.vh.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(o.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(k.M(this._showPremiumHighlights),b.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:n},a])=>{let r=[];return r=r.concat(e.filter((0,F.W9)((0,F.Kg)((e=>a&&o.bZ.isPremium(e)&&o.bZ.isHidden(e)||o.bZ.isLocked(e)||o.bZ.isLockedUIUphook(e)),(0,F.ff)(o.bZ.isPremium)),(e=>B.pC(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{n.forEach((e=>{this.events.next({type:v.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,Y.Xd)(20)),r=r.concat(this._handleRemovedAlerts(t.concat(n).filter((e=>this._marksMap.has(e.id))))),r=r.concat(this._handleAlertUpdate(i)),r}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(R.j("changed"),b.U((e=>e.filter((e=>l.P.is(e)&&l.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),E.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,r.zG)(this._alertsReader.getById(t.meta.alertId),B.tS((e=>this._alertsReader.getRegistered(e.id))),B.tS((e=>B.ij(this._marksMap.get(e.id)))),N.bw((t=>e.set(t.alert.id,t))),(0,a.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{p.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(k.M(this._alertList.state),b.U((([e,t])=>(0,r.zG)(t,c.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&o.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>B.G(e)))))).subscribe(p.wW(this._filteredAlerts))}}var J;!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case o.l$.text:case f.h8.forceText:return q.sO.Change.VisualState.Source.text;case o.l$.sidebar:case f.h8.forceSidebar:return q.sO.Change.VisualState.Source.sidebar;case o.l$.api:return q.sO.Change.VisualState.Source.api;default:return(0,P.vE)(e)}},e.getAlertSource=(t,i,n)=>f.nL.hasCards(i)?(0,r.zG)(n(i.currentLens),B.g_((()=>q.sO.Change.VisualState.Source.api),(n=>n.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):q.sO.Change.VisualState.Source.api))):q.sO.Change.VisualState.Source.api}(J||(J={}))},14372:(e,t,i)=>{i.d(t,{o:()=>S});var n=i(90023),a=i(27360),r=i(83277),s=i(36344),o=i(17613),l=i(58849),c=i(39953),d=i(37537),u=i(97767),p=i(94444),g=i(52303),h=i(58303),m=i(91817),f=i(21448),v=i(95486),b=i(99836);function w({documentModel:e,features:t,gnar:i,modalOperations:n,upgradeVM:a,source:r}){return(0,d.k)(e,function(e,t,i){return{goalsPopupShow:t=>{e.goalsPopupShow(t),(0,f.nE)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,b.Tb)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},getPremiumButtonClick:()=>{(0,f.Qi)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,b.Tb)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},goalsFormSuccess:(n,a)=>{const r=()=>g.FX("academic")(n.domain)&&t;return e.goalsFormSuccess((0,c.zG)(n.domain,h.fS((()=>a.domain))),(0,c.zG)(n.goals,h.UI((e=>r()?[]:e)),h.fS((()=>a.goals)),(e=>Array.from(e))),i,(0,c.zG)(n.outcomeContext,h.hX(r),h.UI((0,m.ei)("type")),h.FS),(0,c.zG)(n.audience,h.hX((0,u.ff)(r)),h.FS),(0,c.zG)(n.outcomeContext,h.hX(r),h.UI((0,m.ei)("citation")),h.FS),(0,c.zG)(n.style,h.hX((0,u.ff)(r)),h.FS))}}}(i,t.isStudentsOFE,r),n,r,p.R$.defaultContextFallback,t,(()=>a.openUpgradeUrl(v.L.Place.gdocsGoals)),!1)}class S{constructor(e,t,i,n,a=!1){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=n,this._isStudentsOFE=a}load(e){switch(e.type){case a.dC.SetGoals:return this._loadSetGoals(e.source);case a.dC.Performance:return Promise.resolve((()=>({instance:{type:a.dC.Performance},component:l.UI.mount(l.UI.Node.empty,(()=>s.E))})));default:return(0,o.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=w({features:{demoMode:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE,isEligibleForFreeTrial:!1,assignToFreeTrialEuUkExperiment:n.Q1,isEligibleForFreeTrialEuUk:!1,isEligibleForPro:!1,assignToProVsPremiumExperiment:n.Q1},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:a.dC.SetGoals,source:e},component:l.UI.mount(r.R.Modal,i)}}))}}},19798:(e,t,i)=>{if(i.d(t,{$:()=>y}),3075==i.j)var n=i(90023);if(3075==i.j)var a=i(27360);if(3075==i.j)var r=i(68717);if(3075==i.j)var s=i(36355);if(3075==i.j)var o=i(74822);if(3075==i.j)var l=i(31391);if(3075==i.j)var c=i(10883);if(3075==i.j)var d=i(59179);if(3075==i.j)var u=i(90572);if(3075==i.j)var p=i(20161);if(3075==i.j)var g=i(36344);if(3075==i.j)var h=i(93167);if(3075==i.j)var m=i(9761);if(3075==i.j)var f=i(92374);if(3075==i.j)var v=i(17613);if(3075==i.j)var b=i(13391);if(3075==i.j)var w=i(58303);if(3075==i.j)var S=i(68338);class y{constructor(e,t,i,a,p,g){this._state=e,this._lensPreviewVM=t,this._sidebarEvents=i,this._modalManager=a,this._ded=p,this._gnar=g,this.isUphooksRedesign=!1,this.popover=b.h.create(w.YP),this.events=new o.x,this.activeLensId=this._state.view("currentLens","id"),this.documentActions=b.h.create({proofit:f.Bo.proofitDisabled(f.TV.NotAvailable),plagiarism:f.Bo.plagiarismDisabled(f.eh.NotAvailable),cheetah:f.Bo.cheetahDisabled(f.Sh.NotAvailable)}),this.showMuteControl=b.h.create(!1),this._subs=new l.w.Keeper,this._lensSwitch=new o.x,this.lensTitleType=f.Bo.LensTitleType.default,this.lensChangeEffect={id:"lensChangeEffect",when:n.W8,what:m.nL.Effect.SwitchLens.create(this._lensSwitch.pipe(c.M(this._state.pipe(d.U((e=>e.currentLens.id)))),u.h((([{lensId:e},t])=>e!==t)),d.U((([{lensId:e,focusFirst:t}])=>({lensId:e,alertSource:r.l$.sidebar,options:{order:"lensOrder",toFocus:t?m.nL.Effect.FocusBehavior.focusFirst:m.nL.Effect.FocusBehavior.noFocus}})))))},this.cardVisualMode=b.h.create(h.j.CardVisualMode.RegularLightMode),this._listenNavigationEvent();const v=[s.R.SpecialId.Correctness,s.R.SpecialId.Clarity,s.R.SpecialId.Engagement,s.R.SpecialId.Delivery].reduce(((e,t)=>(e[t]=this._lensPreviewVM.lensPreviews[t],e)),{});this.lensPreviews=v,this.a11yContrast=!1}dispose(){this._subs.dispose()}_listenNavigationEvent(){this._subs.push(this.events.pipe(p.w((e=>{switch(e.type){case"toggleSidebar":return this._sidebarEvents.next({kind:S.R.Close}),g.E;case"switchToLens":return this._lensSwitch.next({lensId:e.id,focusFirst:e.focusFirst}),this._gnar.gdocsSidebarOpenLensButtonClick(e.id),g.E;case"setGoals":return this._modalManager.show(a.Iy.setGoals("user"));case"performance":return this._modalManager.show(a.Iy.performance);case"switchToCritical":case"switchToAdvanced":case"preferences":case"switchToAll":return g.E;default:return(0,v.vE)(e)}}))).subscribe())}}},94340:(e,t,i)=>{if(i.d(t,{W:()=>s}),3075==i.j)var n=i(13391);if(3075==i.j)var a=i(52303);if(3075==i.j)var r=i(58303);class s{constructor(e){this._plagiarismVM=e,this.activeSidebarPage=n.h.create("Default"),this.isShouldShowPlagiarismButton=n.h.create(!1)}showGeneralFeed(){return this.activeSidebarPage.view((e=>"Default"===e))}showPlagiarismPage(){return this.activeSidebarPage.view((e=>"Plagiarism"===e))}setActivePage(e){this.activeSidebarPage.set(e)}openPlagiarismPage(){this.setActivePage("Plagiarism"),a.MH(this._plagiarismVM).openPlagiarismPage()}closePlagiarismPage(){this.setActivePage("Default"),a.MH(this._plagiarismVM).closePlagiarismPage()}setPlagiarismVM(e){this._plagiarismVM=r.G(e)}setShowPlagiarismButton(e){this.isShouldShowPlagiarismButton.set(e)}unsafeGetPlagiarismVM(){return a.MH(this._plagiarismVM)}}},95486:(e,t,i)=>{i.d(t,{L:()=>n,x:()=>E});var n,a=i(39953),r=i(68717),s=i(97145),o=i(58578),l=i(84308),c=i(59179),d=i(94592),u=i(13391),p=i(97767),g=i(19813),h=i(58303),m=i(4025),f=i(12518),v=i(21448),b=i(4603),w=i(60022),S=i(99836),y=i(91778);!function(e){let t;!function(e){e.gdocsSidebarCardList="gdocsSidebarCardList",e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant",e.toneSuggestion="toneSuggestion"}(t=e.Place||(e.Place={}))}(n||(n={}));class E{constructor(e,t,i,n,a){this._alertsList=e,this._lensState=t,this._maxAlertCategories=i,this.getCheckingService=n,this.gnar=a,this._log=g.C8.Logging.getLogger("UpgradeViewModel"),this._advancedAlerts=u.h.create([]),this.advancedAlerts=this._advancedAlerts.view((e=>e.length>0?h.G({count:e.length,alerts:()=>this._formatLiteAlerts(E._getGroupedLiteAlerts(e))}):h.YP)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(p.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"",bundleInfo:h.YP}]:t},this._connectionId=y._.createWithRandomId("sidebar"),l.a([this._lensState.view("currentLens").view("id").view((()=>e=>r.bZ.isRegistered(e)&&r.bZ.isPremium(e))),this._alertsList.state]).pipe(c.U((([e,t])=>o.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t)))).subscribe(d.wW(this._advancedAlerts))}openSignupUrl(){}trackUpgradeButtonShow(e){var t,i;const n=this._advancedAlerts.get();(0,v.nE)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),this.gnar.assistantExpandedUpgradeHookShow(n.length,100),(0,S.Tb)().upgradeHooks.showUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}trackUpgradeButtonClick(e){var t,i;const n=this._advancedAlerts.get();(0,v.Qi)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),(0,S.Tb)().upgradeHooks.clickUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}openUpgradeUrl(e){(0,a.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),utmCampaign:e})})),f.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}openUpgradeUrlWithOverride(e,t){t?(0,a.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),overrideUrl:t,utmCampaign:e})})),f.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e)))):this.openUpgradeUrl(e)}_getCapiAlerts(){return this._advancedAlerts.get().map((e=>(0,w.IM)(E._toRawAlertWithPossibleWrongId(e),y.Q.create(this._connectionId,0))))}static _getGroupedLiteAlerts(e){return s.Q.group(e.map((e=>e.toLiteAlert())))}static _toRawAlertWithPossibleWrongId(e){return{...e.toRawAlert(),id:(0,a.zG)(e.rawId,h.fS((()=>e.id)))}}}},66042:(e,t,i)=>{if(i.d(t,{r:()=>p}),3075==i.j)var n=i(97145);if(3075==i.j)var a=i(68717);if(3075==i.j)var r=i(58578);if(3075==i.j)var s=i(32073);if(3075==i.j)var o=i(84308);if(3075==i.j)var l=i(59179);if(3075==i.j)var c=i(24666);if(3075==i.j)var d=i(13391);if(3075==i.j)var u=i(58303);class p{constructor(e,t){this._alertsList=e,this._lensState=t,this._sub=new s.w0,this._freeAlerts=d.h.create([]),this.freeAlerts=this._freeAlerts.view((e=>e.length>0?u.G({count:e.length,alerts:()=>function(e){return n.Q.group(e.map((e=>e.toLiteAlert())))}(e)}):u.YP)),this._sub.add(o.a([this._lensState.view("currentLens").view("id").view((()=>e=>a.bZ.isRegistered(e)&&!a.bZ.isHidden(e)&&!a.bZ.isPremium(e))),this._alertsList.state]).pipe(l.U((([e,t])=>r.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t))),c.x()).subscribe((e=>{this._freeAlerts.set(e)})))}dispose(){this._sub.unsubscribe()}}},89193:(e,t,i)=>{i.d(t,{U:()=>d});var n=i(57536);function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function r(e,t){return e<<t|e>>>32-t}const s=3432918353,o=461845907;class l{getHash(e,t=0){const i=(new TextEncoder).encode(e),n=i.length%4,l=i.length-n;let c,d=t,u=0;for(c=0;c<l;c+=4)d=a(r(d^a(r(a(i[c]|i[c+1]<<8|i[c+2]<<16|i[c+3]<<24,s),15),o),13),5)+3864292196;switch(u=0,n){case 3:u^=i[c+2]<<16;case 2:u^=i[c+1]<<8;case 1:u^=i[c],d^=a(r(a(u,s),15),o)}return p=a((p=d^i.length)^p>>>16,2246822507),((p=a(p^p>>>13,3266489909))^p>>>16)>>>0;var p}}var c;!function(e){e.preferred=l}(c||(c={}));const d=(e,t)=>{const i=(0,n.bk)(e,-1,(e=>e.nodeName)),a=`${t},${e.nodeName},${i.join()}`;return(new c.preferred).getHash(a).toString()}},82935:(e,t,i)=>{i.d(t,{J:()=>a});var n=i(6986);const a=new Proxy({},{get:(e,t)=>(...e)=>(0,n.OB)().bgRpc.api.trackGnar(t,e)})},54089:(e,t,i)=>{i.d(t,{d:()=>s});var n=i(49231),a=i(72779),r=i(48667);const s=n.forwardRef((function({children:e,onClickAway:t,additionalEventSources:i},s){const o=n.useRef(null),l=n.useCallback((e=>{if(!o.current)return;const i=(0,a.Me)(o.current);e.target instanceof Node&&(!i.documentElement||!i.documentElement.contains(e.target)||e.composedPath().some((e=>{var t;return e instanceof Node&&(null===(t=o.current)||void 0===t?void 0:t.contains(e))})))||t(e)}),[t,o]);n.useEffect((()=>{var e,t;const n=[...new Set([...i||[],null!==(t=null===(e=null==o?void 0:o.current)||void 0===e?void 0:e.ownerDocument)&&void 0!==t?t:document])];return n.forEach((e=>e.addEventListener("click",l))),()=>{n.forEach((e=>e.removeEventListener("click",l)))}}),[l,o]);const c={ref:(0,r.l)([s,o,...(0,r.O)(e)?[e.ref]:[]])};return n.cloneElement(e,c)}))},50956:(e,t,i)=>{i.d(t,{Dg:()=>c,IQ:()=>p,e8:()=>d,fW:()=>u});var n=i(49231),a=i(63532),r=i(84714),s=i(90517),o=i(90107),l=i(9843);const c=n.createContext({state:r.of(l.h.create()),onMount:()=>{}});function d(){return n.useContext(c).onMount}function u(){const e=n.useContext(c).state,[t,i]=n.useState(l.h.create());return(0,o.A)(e.pipe((0,a.b)((e=>i(e))))),t}function p(){return n.useContext(c).state.pipe(s.j("dragging"))}},9843:(e,t,i)=>{var n;i.d(t,{h:()=>n}),function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(n||(n={}))},54961:(e,t,i)=>{i.d(t,{_:()=>R});var n=i(49231),a=i(63532),r=i(26573),s=i(90107),o=i(48667),l=i(9843),c=i(50956),d=i(90023),u=i(62552),p=i(84308),g=i(59179),h=i(90572),m=i(74081),f=i(92242),v=i(84714),b=i(55341),w=i(32734),S=i(24666),y=i(20161),E=i(44071),C=i(44045),k=i(84908),_=i(10883),A=i(17610),I=i(3199),x=i(72779),T=i(79992);function M(e=v.of((e=>e)),t){const i=n.useRef(new b.t(1)),r=n.useRef(i.current.pipe(function(e=v.of(d.yR),t=(()=>!0)){return(0,d.ls)(h.h(T.fQ),S.x(),y.w((i=>E.R(i,"mousedown").pipe(h.h((e=>!e.button)),h.h((e=>t(e))),a.b((e=>e.preventDefault())),g.U((e=>({element:i,startPos:{x:e.clientX,y:e.clientY}}))),y.w((t=>E.R((0,x.Jj)(t.element),"mousemove").pipe(C.R(E.R((0,x.Jj)(t.element),"mouseup",{capture:!0})),k.p(10),g.U((({clientX:e,clientY:i})=>({kind:"dragInProgress",element:t.element,startPos:t.startPos,delta:{x:e-t.startPos.x,y:i-t.startPos.y}}))),_.M(e),g.U((([e,t])=>({...e,delta:t(e.delta)}))),A.l({kind:"dragDone"}))))))),I.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),l.h.create()))}(e,t),w.B())),s=n.useCallback((e=>i.current.next(e)),[i.current]);return[r.current,s]}const R=n.forwardRef((function({children:e,hasDragHandle:t,bounds:i,dragEventFilter:v,onChangeDragState:b},w){const S=n.useRef(null),y=(0,r.K)(i),[E,C]=function(e,t,i){const r=n.useRef(null),o=n.useRef(new u.X(null)),l=n.useRef(p.a([e,o.current]).pipe(g.U((([e,t])=>t&&e?(0,f.N)(t,e):d.yR)))),[c,v]=M(l.current,i);(0,s.A)(c.pipe(h.h((e=>e.dragStart)),a.b((()=>b())))),n.useEffect((()=>{var e;return t.current&&(null===(e=r.current)||void 0===e||e.disconnect(),r.current=m.N.getResizeObserver(b),r.current.observe(t.current)),()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.disconnect()}}),[t.current]);const b=()=>{t.current&&o.current.next(t.current.getBoundingClientRect())};return[c,v]}(y,S,v),[k,_]=n.useState(l.h.create()),A=n.useRef({state:E,onMount:C});(0,s.A)(E.pipe((0,a.b)((e=>{_(e),null==b||b(e)}))));const I={ref:(0,o.l)([w,S,...(0,o.O)(e)?[e.ref]:[]],t?void 0:C)};return n.createElement(c.Dg.Provider,{value:A.current},n.cloneElement("function"==typeof e?e(k):e,I))}))},92242:(e,t,i)=>{function n(e,t){const i=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,n=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return{...e,left:i,top:n}}function a(e,t){return i=>{const a=n({left:e.left+i.x,top:e.top+i.y,width:e.width,height:e.height},t);return{x:a.left-e.left,y:a.top-e.top}}}i.d(t,{N:()=>a,m:()=>n})},51354:(e,t,i)=>{i.d(t,{Hz:()=>r,O0:()=>s,OR:()=>o,QO:()=>a,uU:()=>n,wl:()=>l});const n=["Alt","AltGraph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift"],a=["Fn","FnLock","Hyper","Super","Symbol","SymbolLock"],r={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}}},s='[data-grammarly-part="assistant-draggable-wrapper"],[data-grammarly-part="assistant-static-wrapper"]',o='[data-focus-id="empty-state"], button[data-name^="button:"]',l="button, [href], input, select, textarea"},76271:(e,t,i)=>{i.d(t,{e:()=>r});var n=i(6986),a=i(51354);function r(e){return a.Hz[e][(0,n.nD)()?"mac":"other"]}},49100:(e,t,i)=>{i.d(t,{$:()=>s});const n=["Control","Alt","Shift","Meta","CapsLock","NumLock","ScrollLock","AltGraph"],a=/^Digit\d$/,r=/^Key[A-Z]$/;function s(e,t){const i=n.filter((t=>e.modifiers.includes(t))).map((e=>function(e,t){if(t){if("Meta"===e)return"Command";if("Alt"===e)return"Option"}return e}(e,t)));return e.key&&i.push(function(e){if(a.test(e)||r.test(e))return e.slice(-1);return e}(e.key)),i.join(" ")}},76517:(e,t,i)=>{i.d(t,{KC:()=>d,Y4:()=>u,sX:()=>p});var n=i(49231),a=i(62552),r=i(24666),s=i(48667),o=i(74081),l=i(84714),c=i(87110);const d={top:-1e4,left:-1e4,flippedHorizontal:!1,flippedVertical:!1,width:0,height:0},u=n.createContext(l.of(d)),p=n.forwardRef((({children:e,anchorRect:t,anchorOrigin:i={vertical:"bottom",horizontal:"left"},elementOrigin:l={vertical:"top",horizontal:"left"},offset:p={horizontal:0,vertical:0},postRepositioningOffset:g,repositioning:h={horizontal:"translate",vertical:"flip"},anchorMargin:m={top:0,left:0,bottom:0,right:0},viewportMargin:f=16,viewportRect:v=(0,c.C7)(),stickToTarget:b=!0,onChangePosition:w},S)=>{const y=n.useRef(null),E=n.useRef(null),C=n.useRef(new a.X(d)),[k,_]=n.useState(C.current.value),A=[v.top,v.left,v.width,v.height,t.top,t.left,t.width,t.height,i.horizontal,i.vertical,l.horizontal,l.vertical,p.horizontal,p.vertical,null==g?void 0:g.horizontal,null==g?void 0:g.vertical,m.top,m.right,m.bottom,m.left,f,b];n.useEffect((()=>{const e=C.current.pipe((0,r.x)(((e,t)=>function(e,t){return Math.floor(e.top)===Math.floor(t.top)&&Math.floor(e.left)===Math.floor(t.left)&&Math.floor(e.width)===Math.floor(t.width)&&Math.floor(e.height)===Math.floor(t.height)}(e,t)))).subscribe((e=>{_(e),null==w||w(e)}));return()=>e.unsubscribe()}),[]);const I=()=>{var e,n;const a=null===(e=y.current)||void 0===e?void 0:e.clientWidth,r=null===(n=y.current)||void 0===n?void 0:n.clientHeight,s=(0,c.C7)();if(a&&r){const e=(0,c.kl)(a,r,s,t,i,l,m,{top:f,bottom:f,left:f,right:f},p,g,h,b);C.current.next({...e,width:a,height:r})}};n.useEffect((()=>{var e;return y&&y.current&&(null===(e=E.current)||void 0===e||e.disconnect(),E.current=o.N.getResizeObserver(I),E.current.observe(y.current)),()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.disconnect()}}),[y.current,...A]),n.useLayoutEffect((()=>{I()}),A);const x={ref:(0,s.l)([S,y,...(0,s.O)(e)?[e.ref]:[]])};return n.createElement(u.Provider,{value:C.current},n.cloneElement("function"==typeof e?e(k):e,x))}));p.displayName="Positioner"},80458:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(49231),a=i(37213),r=i(78617);const s=({kind:e="inline",onClick:t,dataPartName:i="card",marginBottom:s,children:o})=>n.createElement("div",{"data-grammarly-part":i,...(0,a.Sh)(r.card,["inline","inline-fixed-width","inline-fit-content"].includes(e)?r.cardInline:null,"inline"===e?r.cardInlineRegular:null,"inline-fixed-width"===e?r.cardInlineFixedWidth:null,"inline-fit-content"===e?r.cardInlineFitContent:null,["assistant-priority-lens","assistant-all-lens"].includes(e)?r.cardAssistant:null,"assistant-all-lens"===e?r.cardAssistantAllLens:null,t?r.cardClickable:null),onClick:t,style:{marginBottom:s}},o)},25668:(e,t,i)=>{i.d(t,{C:()=>s});var n=i(49231),a=i(37213),r=i(76491);const s=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:i,boldTitle:s=!1,className:o,...l})=>n.createElement("div",{"data-grammarly-part":t,...(0,a.Sh)(r.badge,o,"primary"===e?r.badgePrimary:null,"success"===e?r.badgeSuccess:null,"gold"===e?r.badgeGold:null,"error"===e?r.badgeError:null,l.rounded?r.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:r.badgeRoundedSmall,l.rounded&&"medium"===l.size?r.badgeRoundedMedium:null,l.rounded&&"large"===l.size?r.badgeRoundedLarge:null)},n.createElement("div",{...(0,a.Sh)(r.badgeTitle,s?r.badgeTitleBold:null)},i))},12990:(e,t,i)=>{i.d(t,{z:()=>o});var n=i(49231),a=i(37213),r=i(75201),s=i.n(r);const o=n.forwardRef(((e,t)=>{const{kind:i="primary",size:r="medium",includePadding:o=!0,round:l=!1,dataGrammarlyPart:c="ui-kit-button",className:d,...u}=e;return n.createElement("button",{...(0,a.Sh)(s().button,"primary"===i?s().buttonPrimary:null,"success"===i?s().buttonSuccess:null,"link"===i?s().buttonLink:null,"outlined"===i?s().buttonOutlined:null,"transparent"===i||"transparent-hoverable"===i?s().buttonTransparent:null,"transparent-hoverable"===i?s().buttonTransparentHoverable:null,"dark"===i?s().buttonDark:null,"neutral"===i?s().buttonNeutral:null,"neutral-white"===i?s().buttonNeutralWhite:null,"premium"===i?s().buttonPremium:null,"small"===r?s().buttonSmall:null,"medium"===r?s().buttonMedium:null,o?s().buttonWithPadding:null,l?s().buttonRound:null,u.disabled?s().buttonDisabled:s().buttonEnabled,d),ref:t,"data-grammarly-part":c,...u})}));o.displayName="Button";n.forwardRef((function(e,t){return n.createElement("span",{...e,...(0,a.Sh)(e.className,s().secondaryText),ref:t})}))},90298:(e,t,i)=>{i.d(t,{P:()=>d});var n=i(49231),a=i(37213),r=i(50899),s=i(86016),o=i(51320),l=i(68399),c=i.n(l);const d=({size:e="medium",color:t="dark",tooltipMessage:i,...l})=>n.createElement(o.u,{message:i,showDelay:r.gk,disabled:!i},n.createElement(s.h,{"aria-label":"Close",...l},n.createElement("div",{...(0,a.Sh)("small"===e?c().closeButtonSmallIcon:null,"medium"===e?c().closeButtonMediumIcon:null,"white"===t?c().closeButtonWhiteIcon:null)})))},86016:(e,t,i)=>{i.d(t,{h:()=>r});var n=i(49231),a=i(12990);const r=n.forwardRef((function({kind:e="transparent-hoverable",...t},i){return n.createElement(a.z,{...t,kind:e,includePadding:!1,ref:i})}))},28479:(e,t,i)=>{i.d(t,{l:()=>d});var n=i(49231),a=i(50899),r=i(86016),s=i(51320),o=i(37213),l=i(46922),c=i.n(l);const d=({enableTooltip:e=!1,size:t="medium",...i})=>n.createElement(s.u,{message:"Settings",showDelay:a.gk,disabled:!e},n.createElement(r.h,{...i},n.createElement("div",{...(0,o.Sh)("small"===t?c().settingsButtonSmallIcon:null,"medium"===t?c().settingsButtonMediumIcon:null)})))},44637:(e,t,i)=>{i.d(t,{J:()=>d});var n=i(90023),a=i(49231),r=i(49225),s=i(3527),o=i(63532),l=i(37213),c=i(14482);const d=({onChange:e,labelId:t,className:i,checkboxClassName:d,labelClassName:u,checked:p,children:g,disabled:h,useDS:m,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:v=0,onMount:b=n.Q1})=>{const[w,S]=a.useState(null!=p&&p);a.useEffect((()=>{S(Boolean(p))}),[p]);const y=t=>{t.preventDefault(),t.stopPropagation(),S(!w),null==e||e(!w)},{ref:E,onMount:C}=r.P.useElWatcher();return a.useEffect((()=>{const e=E.pipe(s.oA,o.b(b)).subscribe();return()=>e.unsubscribe()}),[]),a.createElement("div",{"data-grammarly-part":f,...(0,l.Sh)(c.checkboxContainer,i)},a.createElement("div",{...(0,l.Sh)(c.checkbox,d,w?c.checkboxChecked:null,m?c.checkboxDS:null),role:"checkbox","aria-checked":w,tabIndex:v,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:h?n.Q1:y,ref:C},w?a.createElement("div",{className:c.checkboxCheckmark}):null),a.createElement("label",{id:t,onClick:y,className:u},g))}},41455:(e,t,i)=>{i.d(t,{Uq:()=>o,dy:()=>c,gT:()=>l});var n=i(49231),a=i(68823),r=i(37213),s=i(45134);const o=e=>[...e].map((e=>{var t,i;return null!==(i=null===(t=e.codePointAt(0))||void 0===t?void 0:t.toString(16))&&void 0!==i?i:""})).filter((e=>"fe0f"!==e.toLowerCase())),l=e=>`${a.g}${e.join("-")}.svg`,c=({size:e="small",unicodeHexArray:t,unicodeLiteral:i,className:a})=>{const[c,u]=n.useState(!1),[p,g]=n.useState(""),[h,m]=n.useState("");n.useEffect((()=>{if(u(!1),m(l(t||o(i))),t&&!i)try{g((e=>String.fromCodePoint(...e.map((e=>parseInt(e,16)))))(t))}catch(e){g("Invalid")}else g(i)}),[t,i]);const f=(0,r.Sh)(s.emoji,c?s.emojiAlt:null,a),v=d(e);return c?n.createElement("span",{...f,style:{fontSize:v},"data-grammarly-part":"ui-kit-emoji"},p):h?n.createElement("img",{onError:()=>u(!0),alt:p,src:h,...f,style:{width:v,height:v},"data-grammarly-part":"ui-kit-emoji"}):null},d=(e="small")=>{switch(e){case"extra-small":return"12px";case"small":return"16px";case"small-medium":return"20px";case"small-gbutton":return"22px";case"medium":return"24px";case"large":return"32px";case"extra-large":return"64px";default:return`${e}px`}}},77365:(e,t,i)=>{i.d(t,{o:()=>s});var n=i(49231),a=i(37213),r=i(7987);const s=n.forwardRef((function({children:e,className:t,...i},s){return n.createElement("div",{...i,...(0,a.Sh)(r.fontWrapper,t),ref:s},e)}))},21740:(e,t,i)=>{i.d(t,{p:()=>r});var n=i(49231),a=i(4028);const r=({thin:e=!1,thinItalic:t=!1,extraLight:i=!1,extraLightItalic:r=!1,light:s=!1,lightItalic:o=!1,regular:l=!1,italic:c=!1,medium:d=!1,mediumItalic:u=!1,semiBold:p=!1,semiBoldItalic:g=!1,bold:h=!1,boldItalic:m=!1,extraBold:f=!1,extraBoldItalic:v=!1,black:b=!1,blackItalic:w=!1})=>n.createElement("div",{"data-grammarly-part":"fonts-preloader",className:a.fontsPreloader},e?n.createElement("span",{className:a.interThin}):null,t?n.createElement("span",{className:a.interThinItalic}):null,i?n.createElement("span",{className:a.interExtraLight}):null,r?n.createElement("span",{className:a.interExtraLightItalic}):null,s?n.createElement("span",{className:a.interLight}):null,o?n.createElement("span",{className:a.interLightItalic}):null,l?n.createElement("span",{className:a.interRegular}):null,c?n.createElement("span",{className:a.interItalic}):null,d?n.createElement("span",{className:a.interMedium}):null,u?n.createElement("span",{className:a.interMediumItalic}):null,p?n.createElement("span",{className:a.interSemiBold}):null,g?n.createElement("span",{className:a.interSemiBoldItalic}):null,h?n.createElement("span",{className:a.interBold}):null,m?n.createElement("span",{className:a.interBoldItalic}):null,f?n.createElement("span",{className:a.interExtraBold}):null,v?n.createElement("span",{className:a.interExtraBoldItalic}):null,b?n.createElement("span",{className:a.interBlack}):null,w?n.createElement("span",{className:a.interBlackItalic}):null)},77634:(e,t,i)=>{i.d(t,{X:()=>d});var n=i(49231),a=i(90298),r=i(37213),s=i(29357),o=i(34208),l=i(53397),c=i.n(l);const d=n.forwardRef((function({headerIcon:e,headerContent:t,mainContent:i,onClose:s,size:o="large",includeMainContentPadding:l=!0,style:d,className:g,attributes:h,headerStyle:m,headerContentStyle:f,theme:v="light",dataGrammarlyPart:b="ui-kit-pane",closeButton:w=(e=>n.createElement(a.P,{onClick:e}))},S){const y=p(e);return n.createElement("div",{"data-grammarly-part":b,...(0,r.Sh)(c().pane,g,"small"===o?c().paneSmall:null,"medium"===o?c().paneMedium:null,"large"===o?c().paneLarge:null,"extra-large"===o?c().paneExtraLarge:null,u(v)),ref:S,style:d,...h},y||t||Boolean(s)?n.createElement("div",{...(0,r.Sh)(c().paneHeaderContentContainer,s?c().paneHeaderContentContainerWithCloseButton:null),style:m},s?w(s):null,y||t?n.createElement("div",{className:c().paneHeaderContent,style:f},y,t):null):null,n.createElement("div",{...(0,r.Sh)(c().paneMainContent,l?null:c().paneMainContentWithoutPadding)},i))})),u=e=>"dark"===e?c().paneDark:"darkDS"===e?c().paneDarkDS:null,p=e=>e?"logo"===e?n.createElement(s.T,{type:"mini",className:c().paneHeaderContentIcon}):"logo-with-name"===e?n.createElement(s.T,{className:c().paneHeaderContentIcon}):"logo-error"===e?n.createElement(o.e,{level:"error",className:c().paneHeaderContentIcon}):n.createElement("div",{...(0,r.Sh)(c().paneHeaderContentIcon,"notification-ok"===e?c().paneHeaderContentIconNotificationOK:null,"notification-warning"===e?c().paneHeaderContentIconNotificationWarning:null)}):null},47453:(e,t,i)=>{i.d(t,{J:()=>p});var n=i(49231),a=i(19232),r=i(54089),s=i(90298),o=i(77634),l=i(37213),c=i(72098),d=i(85445),u=i(29918);const p=({headerIcon:e,headerContent:t,mainContent:i,show:p=!1,placement:g="auto",showArrow:h=!0,onClose:m,size:f="large",includeMainContentPadding:v=!0,style:b,referenceElementStyle:w,boundaryAreaPadding:S,theme:y="light",distanceFromReferenceElement:E=("lightDS"===y?c.uy:8),dataGrammarlyPart:C="ui-kit-popover",disablePositionUpdates:k=!1,clickAwayOptions:_,closeButton:A=(e=>n.createElement(s.P,{onClick:e})),...I})=>{var x,T,M,R;const[P,L]=n.useState(null),[F,D]=n.useState(null),[U,H]=n.useState(null),{styles:B,attributes:O,state:N}=(0,a.D)(I.isOutsideReferenceElement?I.outsideReferenceElement:P,F,{placement:g,modifiers:[{name:"offset",options:{offset:[0,E]}},{name:"arrow",options:{element:U,padding:E}},...k?[{name:"eventListeners",enabled:!1}]:[],...S?[{name:"preventOverflow",options:{padding:S}}]:[]]}),G=n.createElement(n.Fragment,null,I.isOutsideReferenceElement?null:n.createElement("div",{className:u.popoverReferenceElement,style:{...w},ref:L},I.children),p?n.createElement(o.X,{dataGrammarlyPart:C,headerIcon:e,headerContent:t,closeButton:A,mainContent:n.createElement(n.Fragment,null,i,h?"lightDS"===y?n.createElement(c.QH,{ref:H,style:B.arrow,placement:null==N?void 0:N.placement}):n.createElement("div",{...(0,l.Sh)(d.popoverArrowElement,"dark"===y?d.popoverArrowElementDark:"darkDS"===y?d.popoverArrowElementDarkDS:null,(null===(x=null==N?void 0:N.placement)||void 0===x?void 0:x.startsWith("bottom"))?d.popoverArrowElementBottom:null,(null===(T=null==N?void 0:N.placement)||void 0===T?void 0:T.startsWith("top"))?d.popoverArrowElementTop:null,(null===(M=null==N?void 0:N.placement)||void 0===M?void 0:M.startsWith("right"))?d.popoverArrowElementRight:null,(null===(R=null==N?void 0:N.placement)||void 0===R?void 0:R.startsWith("left"))?d.popoverArrowElementLeft:null),ref:H,style:B.arrow}):null),ref:D,style:{...b,...B.popper,..."lightDS"===y&&h?{boxShadow:"none"}:{}},className:"lightDS"===y&&h?u.lightDSPopover:void 0,attributes:O.popper,includeMainContentPadding:v,size:f,onClose:m,theme:y}):null);return _&&p?n.createElement(r.d,{onClickAway:_.onClickAway,additionalEventSources:_.additionalEventSources},n.createElement("div",null,G)):G}},72098:(e,t,i)=>{i.d(t,{QH:()=>r,uy:()=>a});var n=i(49231);const a=12,r=n.forwardRef((function({placement:e,style:t},i){return n.createElement("div",{ref:i,style:{width:33}},n.createElement("svg",{width:33,height:12,viewBox:"0 0 33 12.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{position:"absolute",...t,transform:`${(null==t?void 0:t.transform)||""} rotate(${s(e)}deg)`.trimStart(),...o(e)}},n.createElement("path",{d:"M0.5 3.41877e-07C3.5 3.41877e-07 29.5 3.41877e-07 32.5 3.41877e-07C28.5 3.41877e-07 26.4111 0.903505 24.1814 3.69994L17.5562 11.4728C16.957 12.1757 15.8652 12.1757 15.2661 11.4728L8.64084 3.69994C6.41113 0.903505 4.5 3.41877e-07 0.5 3.41877e-07Z",fill:"white"})))}));function s(e){return(null==e?void 0:e.startsWith("right"))?90:(null==e?void 0:e.startsWith("bottom"))?180:(null==e?void 0:e.startsWith("left"))?270:0}function o(e){return(null==e?void 0:e.startsWith("bottom"))?{top:-12}:(null==e?void 0:e.startsWith("top"))?{bottom:-12}:(null==e?void 0:e.startsWith("right"))?{transformOrigin:"top left",top:-16.5,left:0}:(null==e?void 0:e.startsWith("left"))?{transformOrigin:"top right",top:-16.5,right:0}:{}}},63418:(e,t,i)=>{i.d(t,{m:()=>g});var n=i(90023),a=i(49231),r=i(51320),s=i(47453),o=i(49225),l=i(3527),c=i(63532),d=i(37213),u=i(14074),p=i.n(u);const g=({ariaMenuId:e,ariaMenuLabel:t,sections:i,trigger:u={action:"click"},placement:g,onToggle:h,children:m,referenceElementStyle:f,size:v="small",theme:b,style:w,distanceFromReferenceElement:S,dataGrammarlyPart:y="ui-kit-popover-menu",onItemMount:E})=>{const C=a.useRef(null),k=[],_=a.useRef(null),A=`trigger-element-id-${e}`,[I,x]=a.useState(!1),[T,M]=a.useState(null),R=a.useRef(null),P=a.useRef(null),L=i.flatMap((e=>e.items)),F=L.some((e=>Boolean(e.icon))),D=a.useCallback((()=>{"click"===(null==u?void 0:u.action)&&x(!I)}),[u,I]),U=a.useCallback((()=>{"hover"===(null==u?void 0:u.action)&&(I&&null!==P.current?(self.clearTimeout(P.current),P.current=null):I||(u.delay?(null!==R.current&&self.clearTimeout(R.current),R.current=self.setTimeout((()=>{x(!0),R.current=null}),u.delay)):x(!0)))}),[u,I]),H=a.useCallback((()=>{"hover"===(null==u?void 0:u.action)&&(I||null===R.current?I&&(null!==P.current&&self.clearTimeout(P.current),P.current=self.setTimeout((()=>{x(!1),P.current=null}),500)):(self.clearTimeout(R.current),R.current=null))}),[u,I]),B=a.useCallback((()=>{"hover"===(null==u?void 0:u.action)&&null!==P.current&&(self.clearTimeout(P.current),P.current=null)}),[u]),O=a.useCallback((()=>{"hover"===(null==u?void 0:u.action)&&(null!==P.current&&self.clearTimeout(P.current),P.current=self.setTimeout((()=>{x(!1),P.current=null}),500))}),[u]),N=()=>{I||x(!0),M(0)},G=()=>{I||x(!0),M(L.length-1)},V=()=>{var e;null===(e=_.current)||void 0===e||e.focus(),x(!1)},z=e=>{e.disabled||e.onClick(),V()};a.useEffect((()=>{null!==T&&setTimeout((()=>{var e;return null===(e=k[T])||void 0===e?void 0:e.focus()}),0)}),[T]),a.useEffect((()=>{I||M(null),null==h||h(I)}),[I]),a.useEffect((()=>()=>{null!==P.current?self.clearTimeout(P.current):null!==R.current&&self.clearTimeout(R.current)}),[]);const j=a.useCallback((e=>{var t,i;const n=e.composedPath()[0],a=n instanceof Node&&(null===(t=_.current)||void 0===t?void 0:t.contains(n)),r=n instanceof Node&&(null===(i=C.current)||void 0===i?void 0:i.contains(n));!I||a||r||x(!1)}),[I]);a.useEffect((()=>(I?self.addEventListener("mousedown",j):self.removeEventListener("mousedown",j),()=>self.removeEventListener("mousedown",j))),[I]);const W=({item:e,children:t})=>e.disabled&&e.tooltip?a.createElement(r.u,{withCenteredGrammarlyIcon:!0,message:e.tooltip,showDelay:0},t):t,{ref:q,onMount:Y}=o.P.useElWatcher();a.useEffect((()=>{const e=q.pipe(l.oA,c.b((e=>null==E?void 0:E(e.getAttribute("id")||"item-id",e)))).subscribe();return()=>e.unsubscribe()}),[]);const K=a.createElement("dl",{id:e,"aria-labelledby":A,role:"menu",ref:C,...(0,d.Sh)(p().popoverMenu,"lightDS"===b?p().popoverMenuLightDS:null),onKeyDown:e=>{let t=!1;"ArrowUp"===e.key?((()=>{let e=(T||0)-1;e<0&&(e=L.length-1),M(e)})(),t=!0):"ArrowDown"===e.key?((()=>{let e=(T||0)+1;e>=L.length&&(e=0),M(e)})(),t=!0):"Home"===e.key?(N(),t=!0):"End"===e.key?(G(),t=!0):"Escape"===e.key?(V(),t=!0):"Tab"===e.key&&x(!1),t&&(e.stopPropagation(),e.preventDefault())},onMouseEnter:B,onMouseLeave:O},i.map(((e,t)=>(0,n.zG)(e.items.map(((e,i)=>{var n;const r=null!==(n=e.id)&&void 0!==n?n:`popover-menu-item-${t}-${i}`,s=`${r}-label`;return a.createElement(W,{key:r,item:e},a.createElement("dd",{id:r,"aria-labelledby":s,role:"menuitem",tabIndex:-1,...(0,d.Sh)(p().popoverMenuItem,"lightDS"===b?p().popoverMenuItemLightDS:null,e.disabled?p().disabledPopoverMenuItem:null),onClick:()=>z(e),onKeyDown:t=>{let i=!1;" "===t.key||"Enter"===t.key?(z(e),i=!0):"Escape"===t.key&&(V(),i=!0),i&&(t.stopPropagation(),t.preventDefault())},ref:e=>{Y(e),k.push(e)}},a.createElement("div",{...(0,d.Sh)(p().popoverMenuItemLabel,F?p().popoverMenuItemLabelWithIcon:null)},F?a.createElement("div",{className:p().popoverMenuItemLabelIcon},e.icon):null,a.createElement("span",{id:s},e.label))))})),(i=>{var n;return"lightDS"===b?a.createElement("div",{key:`popover-menu-section-${t}`,...(0,d.Sh)(p().popoverMenuSectionLightDS,t>0?p().popoverMenuSectionSeparatorLightDS:null)},a.createElement("dt",null),i):a.createElement(a.Fragment,{key:`popover-menu-section-${t}`},a.createElement("dt",{...(0,d.Sh)(e.title?p().popoverMenuSectionTitle:null,!e.title&&t>0?p().popoverMenuSectionSeparator:null)},null!==(n=e.title)&&void 0!==n?n:""),i)})))));return a.createElement(s.J,{dataGrammarlyPart:y,isOutsideReferenceElement:!1,mainContent:K,show:I,placement:g,showArrow:!1,size:v,includeMainContentPadding:!1,referenceElementStyle:f,distanceFromReferenceElement:S,style:{...w,..."lightDS"===b?{borderRadius:4}:{}}},a.createElement("div",{id:A,"aria-label":t,"aria-haspopup":"true","aria-controls":e,"aria-expanded":I,tabIndex:0,role:"button",className:p().popoverMenuTriggerElement,style:f,ref:_,onClick:D,onMouseEnter:U,onMouseLeave:H,onKeyDown:e=>{let t=!1;"click"===(null==u?void 0:u.action)&&(" "===e.key||"Enter"===e.key)||"ArrowDown"===e.key?(N(),t=!0):"ArrowUp"===e.key?(G(),t=!0):"Escape"===e.key?(V(),t=!0):"Tab"===e.key&&x(!1),t&&(e.stopPropagation(),e.preventDefault())}},a.cloneElement(m,{tabIndex:-1})))}},96130:(e,t,i)=>{i.d(t,{E:()=>s});var n=i(49231),a=i(37213),r=i(17345);const s=({options:e,onChange:t=(()=>null),ariaLabel:i,className:s})=>{const o=[],[l,c]=n.useState(null);n.useEffect((()=>{var i;null!==l&&(null===(i=o[l])||void 0===i||i.focus()),t(null!==l?e[l].value:null)}),[l]);const d=null!==l?e[l]:null;return n.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:s},n.createElement("div",{className:r.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||d){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();c(((l||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(l||0)-1;c(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),c(0)}},e.map(((e,t)=>{const i=(null==d?void 0:d.value)===e.value,s=0===t;return n.createElement("div",{key:e.value,...(0,a.Sh)(r.radioGroupOption,i?r.radioGroupOptionSelected:null),role:"radio",tabIndex:i||s&&!d?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),c(t)},ref:e=>o.push(e)},e.render())}))))}},21136:(e,t,i)=>{i.d(t,{z:()=>p});var n=i(49231),a=i(64151);const r=({children:e,style:t,dataGrammarlyPart:i="ui-kit-iframe",...r})=>{const[s,o]=n.useState(null),l=n.useCallback((e=>{var t,i;let n=null;"contentDocument"in e.target&&(n=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),o(n),n&&(n.style.margin="0",n.style.height="100vh",n.style.overflowY="hidden")}),[]);return n.createElement("iframe",{...r,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i},s&&(0,a.createPortal)(e,s))};var s=i(1208),o=i(70632),l=i.n(o),c=i(6986),d=i(4798);const u=({placeholder:e,ariaLabel:t,onChange:i})=>{const[a,r]=n.useState("");return n.useEffect((()=>{i(a)}),[a]),n.createElement(n.Fragment,null,n.createElement(s.b,null,l().__css),n.createElement("div",{role:"textbox",className:l().textBox,contentEditable:!0,onInput:e=>{r(e.target.innerText)},"data-placeholder":e,"aria-placeholder":e,"aria-label":t}))},p=({placeholder:e,onChange:t,ariaLabel:i,iframeTitle:a,className:s})=>(0,c.OB)().experimentClient.isGateEnabled(d.K.CentralizeStopEventPropagation)?n.createElement("div",{className:s,style:{width:"100%",height:"128px",maxHeight:"inherit"}},n.createElement(u,{onChange:t,ariaLabel:i,placeholder:e})):n.createElement(r,{dataGrammarlyPart:"ui-kit-textbox",className:s,style:{width:"100%",height:"100%"},title:a},n.createElement(u,{onChange:t,ariaLabel:i,placeholder:e}))},73583:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(49231),a=i(79299);const r=({color:e=a.Z.neutral50})=>n.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8.98288 15.5197L6.48108 15.5197L5.85461 13.1078L15.9148 7.0713L18.2119 15.5197L13.2741 15.5197M8.98288 15.5197L13.2741 15.5197M8.98288 15.5197L9.13596 16.1335C9.35814 17.0244 10.1584 17.6496 11.0765 17.6496L11.5272 17.6496C12.651 17.6496 13.494 16.6218 13.2741 15.5197V15.5197",stroke:e,strokeLinejoin:"round"}))},22315:(e,t,i)=>{i.d(t,{K:()=>s});var n=i(49231),a=i(58877),r=i(29357);const s=({color:e,className:t="",size:i=18,invert:s=!1,type:o="mini"})=>n.createElement(r.T,{className:t,size:i,type:o,backgroundColor:s?a.Z.White:e,arrowColor:s?e:a.Z.White})},23619:(e,t,i)=>{i.d(t,{Y:()=>c});var n=i(49231),a=i(87118),r=i(79026),s=i(37213),o=i(29844),l=i.n(o);const c=({onClick:e,cta:t="Get Pro",dataGrammarlyPart:i="unlock-premium-button",className:o})=>n.createElement(a.z,{variant:"pro",onClick:e,"data-grammarly-part":i,iconStart:r.R,...(0,s.Sh)(l().premiumButton,o),text:t})},12333:(e,t,i)=>{i.d(t,{Q:()=>o});var n=i(49231),a=i(79992),r=i(97683);const s=e=>{if(e.reason===r.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${r.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${r.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return e.reason===r.rS.NOT_ENOUGH_WORDS?{message:`Your email must be at least ${r.fy} words (currently ${e.meta.wordsCount}).`}:e.reason===r.rS.TOO_MANY_WORDS?{message:`Your email must be under ${r.Vw} words (currently ${e.meta.wordsCount}).`}:(e=>{switch(e){case r.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case r.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case r.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case r.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case r.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,a.vE)(e)}})(e.reason)},o=({info:e,includeTitle:t})=>{const i=s(e);return n.createElement(n.Fragment,null,t?n.createElement(n.Fragment,null,i.title?n.createElement("b",null,i.title):n.createElement("b",null,"Get expert writing help"),n.createElement("br",null)):null,i.message)};o.defaultProps={includeTitle:!1}},1208:(e,t,i)=>{i.d(t,{b:()=>a});var n=i(49231);const a=({children:e})=>{const t="string"==typeof e?e:"";return t?n.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},4721:(e,t,i)=>{i.d(t,{q:()=>f});var n=i(49231),a=i(4798),r=i(80882),s=i(12990),o=i(96130),l=i(21136),c=i(44637),d=i(37213),u=i(63039),p=i(45321),g=i(29221),h=i(78225);const m=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,...a})=>{var r;const m=[g.B.bad,g.B.ok,g.B.good],[f,v]=n.useState(null),[b,w]=n.useState(""),[S,y]=n.useState(!1),[E,C]=n.useState(!1);let k;return k=E&&!1!==a.showPostSubmitScreen?n.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,d.Sh)(u.feedbackFormContainer,u.feedbackFormContainerAlignCenter)},n.createElement("div",{className:u.feedbackFormSuccessMessageTextContainer},n.createElement("div",{className:u.feedbackFormSuccessMessageIcon}),n.createElement("div",{className:u.feedbackFormSuccessMessageTitle},"Thank you!"),n.createElement("div",{className:u.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),n.createElement(s.z,{className:u.feedbackFormSubmitButton,kind:"success",type:"submit",onClick:a.onClose},"Done"),i?n.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},n.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null):n.createElement("div",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,d.Sh)(u.feedbackFormContainer,"center"===t?u.feedbackFormContainerAlignCenter:null)},n.createElement("div",{className:u.feedbackFormFields},n.createElement(h.V,{isEnabled:!e}),a.hideTitle?null:n.createElement("div",{...(0,d.Sh)(u.feedbackFormTitle,a.compactDisplay?u.compact:null)},a.title||n.createElement("span",null,"How do you like ",n.createElement("br",null)," Grammarly?")),a.withScore?n.createElement(n.Fragment,null,n.createElement(o.E,{ariaLabel:"Feedback Score",options:m.map((e=>({value:e,render(){let t,i;return e===g.B.bad?(t=p.feedbackFormOptionIconDisheartening,i="I dislike it"):e===g.B.ok?(t=p.feedbackFormOptionIconNeutral,i="It’s OK"):(t=t=p.feedbackFormOptionIconSmiling,i="I like it"),n.createElement("div",{className:p.feedbackFormOption},n.createElement("div",{...(0,d.Sh)(p.feedbackFormOptionIcon,t)}),n.createElement("div",null,i))}}))),onChange:v,...(0,d.Sh)(u.feedbackFormScore,a.compactDisplay?u.compact:null)}),a.hideTextBoxTitle?null:n.createElement("div",{className:u.feedbackFormTextBoxTitle},"Anything we can improve?")):null,n.createElement(l.z,{onChange:w,placeholder:a.placeholderText||"Your thoughts here",ariaLabel:"Feedback Text",...(0,d.Sh)(u.feedbackFormTextBox,a.compactDisplay?u.compact:null)}),a.domain?n.createElement(n.Fragment,null,a.hideDomainHelpText?null:n.createElement("div",{className:u.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),n.createElement(c.J,{labelId:"feedback-form-share-domain-checkbox",onChange:y,className:u.feedbackFormShareDomainCheckbox},"Include the domain ",n.createElement("b",null,a.domain)," with my feedback")):null),n.createElement(s.z,{className:u.feedbackFormSubmitButton,kind:null!==(r=a.submitButtonKind)&&void 0!==r?r:"success",type:"submit",disabled:a.withScore?!f:!b,onClick:()=>{var e,t;a.withScore&&f?(null===(e=a.onSubmit)||void 0===e||e.call(a,{score:f,text:b,domain:S?a.domain:void 0}),C(!0)):!a.withScore&&b&&(null===(t=a.onSubmit)||void 0===t||t.call(a,{text:b,domain:S?a.domain:void 0}),C(!0))}},"Submit"),i?n.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPadding},n.createElement("div",{className:u.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null),n.createElement("div",{style:a.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback"},k)},f=({experimentClient:e,...t})=>e.isGateEnabled(a.K.ExtensionA11yKeyboardNavigation)?n.createElement(r.b,{...t}):n.createElement(m,{...t})},78225:(e,t,i)=>{i.d(t,{V:()=>s});var n=i(49231),a=i(63039),r=i(29357);const s=e=>e.isEnabled?n.createElement(r.T,{type:"mini",size:26,className:a.feedbackFormLogoLine}):null},80882:(e,t,i)=>{i.d(t,{b:()=>C});var n=i(49231),a=i(37213),r=i(12990),s=i(63039);const o=({fixSubmitButtonOverflowBottomPadding:e,className:t,...i})=>n.createElement(n.Fragment,null,n.createElement(r.z,{...i,className:null!=t?t:s.feedbackFormSubmitButton},i.children),n.createElement(l,{isEnabled:e})),l=e=>e.isEnabled?n.createElement("div",{className:s.feedbackFormSubmitButtonFixOverflowBottomPadding},n.createElement("div",{className:s.feedbackFormSubmitButtonFixOverflowBottomPaddingChild})):null,c=e=>n.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,a.Sh)(s.feedbackFormContainer,s.feedbackFormContainerAlignCenter)},n.createElement("div",{className:s.feedbackFormSuccessMessageTextContainer},n.createElement("div",{className:s.feedbackFormSuccessMessageIcon}),n.createElement("div",{className:s.feedbackFormSuccessMessageTitle},"Thank you!"),n.createElement("div",{className:s.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),n.createElement(o,{type:"button",kind:"success",onClick:e.onClose},"Done"));var d=i(21136),u=i(44637);const p=e=>e.domain?n.createElement(n.Fragment,null,e.withHelpText&&n.createElement("div",{className:s.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),n.createElement(u.J,{checked:e.checked,labelId:"feedback-form-share-domain-checkbox",onChange:e.onChange,className:s.feedbackFormShareDomainCheckbox},"Include the domain ",n.createElement("b",null,e.domain)," with my feedback")):null;var g=i(78225);const h=e=>{var t;if(!e.isEnabled)return null;const i=null!==(t=e.title)&&void 0!==t?t:n.createElement("span",null,"How do you like ",n.createElement("br",null)," Grammarly?");return n.createElement("h3",{...(0,a.Sh)(s.feedbackFormTitle,e.isCompact&&s.compact)},i)};var m=i(79992),f=i(96130),v=i(29221),b=i(45321);const w=e=>{const t=[v.B.bad,v.B.ok,v.B.good];return e.isEnabled?n.createElement(n.Fragment,null,n.createElement(f.E,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render:()=>n.createElement("div",{className:b.feedbackFormOption},n.createElement("div",{...(0,a.Sh)(b.feedbackFormOptionIcon,S(e))}),n.createElement("div",null,function(e){switch(e){case v.B.bad:return"I dislike it";case v.B.ok:return"It’s OK";case v.B.good:return"I like it";default:(0,m.vE)(e)}}(e)))}))),onChange:e.onChange,...(0,a.Sh)(s.feedbackFormScore,e.compactDisplay&&s.compact)}),!e.hideTextBoxTitle&&n.createElement("div",{className:s.feedbackFormTextBoxTitle},"Anything we can improve?")):null};function S(e){switch(e){case v.B.bad:return b.feedbackFormOptionIconDisheartening;case v.B.ok:return b.feedbackFormOptionIconNeutral;case v.B.good:return b.feedbackFormOptionIconSmiling;default:(0,m.vE)(e)}}const y=e=>{var t,i,r,l;const[c,u]=n.useState(null),[m,f]=n.useState(""),[v,b]=n.useState(null!==(t=e.domainSharedByDefault)&&void 0!==t&&t);return n.createElement("form",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,a.Sh)(s.feedbackFormContainer,"center"===e.align&&s.feedbackFormContainerAlignCenter)},n.createElement("div",{className:s.feedbackFormFields},n.createElement(g.V,{isEnabled:!e.hideLogo}),n.createElement(h,{isEnabled:!e.hideTitle,title:e.title,isCompact:null!==(i=e.compactDisplay)&&void 0!==i&&i}),n.createElement(w,{isEnabled:e.withScore,compactDisplay:e.compactDisplay,hideTextBoxTitle:e.hideTextBoxTitle,onChange:u}),n.createElement(d.z,{onChange:f,placeholder:null!==(r=e.placeholderText)&&void 0!==r?r:"Your thoughts here",ariaLabel:"Feedback Text",iframeTitle:"Feedback text field",...(0,a.Sh)(s.feedbackFormTextBox,e.compactDisplay&&s.compact)}),n.createElement(p,{domain:e.domain,checked:e.domainSharedByDefault,withHelpText:!e.hideDomainHelpText,onChange:b})),n.createElement(o,{type:"submit",kind:null!==(l=e.submitButtonKind)&&void 0!==l?l:"success",disabled:e.withScore?!c:!m,fixSubmitButtonOverflowBottomPadding:e.fixSubmitButtonOverflowBottomPadding,onClick:t=>{t.preventDefault();const i=v?e.domain:void 0;e.withScore&&c?e.onSubmit({score:c,text:m,domain:i}):!e.withScore&&m&&e.onSubmit({text:m,domain:i})}},"Submit"))};var E=i(84602);const C=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,showPostSubmitScreen:a=!0,...r})=>{const[s,o]=n.useState(!1),l=s&&a;return n.createElement("div",{style:r.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback","aria-live":"polite"},l?n.createElement(c,{fixSubmitButtonOverflowBottomPadding:i,onClose:r.onClose}):n.createElement(y,{...r,hideLogo:e,align:t,fixSubmitButtonOverflowBottomPadding:i,onSubmit:e=>{r.withScore?((0,E.n8)(e),r.onSubmit(e)):((0,E.TY)(e),r.onSubmit(e)),o(!0)}}))}},29221:(e,t,i)=>{var n;i.d(t,{B:()=>n}),function(e){e.bad="bad",e.ok="ok",e.good="good"}(n||(n={}))},84602:(e,t,i)=>{function n(e){return"score"in e}function a(e){if(!n(e))throw new Error("Received unexpected feedback form data without score")}function r(e){if(n(e))throw new Error("Received unexpected feedback form data with score")}i.d(t,{TY:()=>r,dK:()=>n,n8:()=>a})},58877:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(57129);const a={...n,BrandGreen60:"#018374",BrandGreen80:n.Green80}},79299:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(57129);const a={neutral0:n.White,neutral20:n.Blue0,neutral40:n.BlueGray35,neutral50:n.BlueGray60,neutral90:n.BlueGray100,blue40:n.Blue40,blue50:n.Blue40,green50:n.Green40,red40:n.Red40,red50:n.Red60,yellow20:n.Gold20,yellow50:n.Gold40,yellow60:n.Gold40,yellow80:n.Gold90,purple40:n.Purple40}},87110:(e,t,i)=>{i.d(t,{C7:()=>h,jJ:()=>g,kl:()=>o});var n=i(4798),a=i(79992),r=i(6986),s=i(92242);function o(e,t,i,n,a,r,s,o,d,u,p,g){const h={top:i.top+o.top,left:i.left+o.left,width:i.width-o.left-o.right,height:i.height-o.top-o.bottom},b=function(e,t,i,n,a,r,s,o,l){const c=v(e,t,i,n,l,r,s);return[{...c,flippedHorizontal:!1,flippedVertical:!1}].concat((Array.isArray(a)?a:[a]).map((a=>({...v(e,f(t,a),f(i,a),m(n,c.overlap,a,r,s,o),l,r,s),flippedHorizontal:"flip"===a.horizontal,flippedVertical:"flip"===a.vertical}))))}({top:n.top-s.top,left:n.left-s.left,width:n.width+s.left+s.right,height:n.height+s.top+s.bottom},a,r,d,p,e,t,g,h),w=b.reduce(((e,t)=>e.overlap.vertical<=t.overlap.vertical?e:t)),S=b.reduce(((e,t)=>e.overlap.horizontal<=t.overlap.horizontal?e:t)),y=c({top:w.position.top,left:S.position.left,flippedHorizontal:S.flippedHorizontal,flippedVertical:w.flippedVertical},u,i,e,t);return l(y,e,t,h)}const l=(e,t,i,n)=>{const{top:a,left:r}=(0,s.m)({top:e.top,left:e.left,width:t,height:i},n);return{...e,top:a,left:r}},c=(e,t,i,n,a)=>{if(void 0===t)return e;const r=m(t,d(u({top:e.top+t.vertical,left:e.left+t.horizontal,width:n,height:a},i)),{horizontal:"translate",vertical:"translate"},n,a,!1);return{...e,top:e.top+r.vertical,left:e.left+r.horizontal}};function d(e){const t=Math.abs(Math.min(e.left,0)),i=Math.abs(Math.min(e.right,0)),n=Math.abs(Math.min(e.top,0)),a=Math.abs(Math.min(e.bottom,0));return{horizontal:t+i,vertical:n+a,top:n,bottom:a,left:t,right:i}}function u(e,t){return{top:e.top-t.top,bottom:t.top+t.height-(e.top+e.height),left:e.left-t.left,right:t.left+t.width-(e.left+e.width)}}const p=(0,a.Vo)((()=>(0,r.OB)().experimentClient.isGateEnabled(n.K.UseBodyToGetViewportDimentions)));function g(e=document){return!e.doctype&&p.get()?{top:e.body.scrollTop,left:e.body.scrollLeft,height:e.body.clientHeight,width:e.body.clientWidth}:{top:e.documentElement.scrollTop,left:e.documentElement.scrollLeft,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function h(e=document){return{top:0,left:0,height:!e.doctype&&p.get()?e.body.clientHeight:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function m(e,t,i,n,a,r){const s=t.left&&t.right?0:0!==t.left?Math.min(t.left,r?n:1/0):-Math.min(t.right,r?n:1/0),o=t.top&&t.bottom?0:0!==t.top?Math.min(t.top,r?a:1/0):-Math.min(t.bottom,r?a:1/0);return{horizontal:"translate"===i.horizontal?e.horizontal+s:-e.horizontal,vertical:"translate"===i.vertical?e.vertical+o:-e.vertical}}function f(e,t){return{vertical:"translate"===t.vertical?e.vertical:"top"===e.vertical?"bottom":"top",horizontal:"translate"===t.horizontal?e.horizontal:"left"===e.horizontal?"right":"left"}}function v(e,t,i,n,a,r,s){const{top:o,left:l}=function(e,t,i,n,a){return{top:e.top+a.vertical+("bottom"===i.vertical?e.height:"center"===i.vertical?e.height/2:0)-("bottom"===n.vertical?t.height:"center"===n.vertical?t.height/2:0),left:e.left+a.horizontal+("right"===i.horizontal?e.width:"center"===i.horizontal?e.width/2:0)-("right"===n.horizontal?t.width:"center"===n.horizontal?t.width/2:0)}}(e,{width:r,height:s},t,i,n);return{position:{top:o,left:l},overlap:d(u({top:o,left:l,width:r,height:s},a))}}},91795:(e,t,i)=>{i.d(t,{x:()=>n});var n,a=i(49601),r=i(8867),s=i(32734),o=i(37108),l=i(8065),c=i(59179);!function(e){function t(e,t){return i(e,t).pipe((0,s.B)(),(0,o.Q)(a.E))}function i(e,t){return new r.y((i=>{const n=new MutationObserver((e=>i.next(e)));return n.observe(e,t),()=>n.disconnect()}))}e.create=t,e.createUnsafe=i,e.createFlattenHot=function(e,t){return i(e,t).pipe((0,l.b)((e=>e)),(0,s.B)())},e.observeAttribute=function(e,i){return t(e,{attributes:!0,attributeFilter:[i],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.getAttribute(i))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe((0,c.U)((t=>e.childNodes)))}}(n||(n={}))},74081:(e,t,i)=>{i.d(t,{N:()=>n});var n,a=i(49601),r=i(8867),s=i(32734),o=i(37108),l=i(17705),c=i(954),d=i(70874),u=i(91795);!function(e){function t(e){return function(e){return new r.y((t=>{const n=i((()=>t.next(void 0)));return e.forEach((e=>n.observe(e))),()=>n.disconnect()}))}(e).pipe((0,s.B)(),(0,o.Q)(a.E))}function i(e){return new n(e)}e.observeSizeChanges=function(e){return t(e)},e.getResizeObserver=i;class n{constructor(e){this._af=null,this._callbackWasInvoked=!1;const t=()=>{this._callbackWasInvoked?(null!==this._af&&cancelAnimationFrame(this._af),this._af=requestAnimationFrame((()=>{e()}))):(e(),this._callbackWasInvoked=!0)};try{this._resizeObserver=new ResizeObserver(t)}catch(e){this._resizeObserver=new p(t)}}observe(e){this._clearAnimationFrame(),this._resizeObserver.observe(e)}unobserve(e){this._resizeObserver.unobserve(e),this._clearAnimationFrame()}disconnect(){this._resizeObserver.disconnect(),this._clearAnimationFrame()}_clearAnimationFrame(){this._af&&(cancelAnimationFrame(this._af),this._af=null),this._callbackWasInvoked=!1}}class p{constructor(e){this._callback=e,this._sub=null}observe(e){this._sub=u.x.create(e,{attributes:!0,childList:!0,subtree:!0}).pipe((0,l.T)(d.S.hz4),(0,c.O)(null)).subscribe((()=>{this._callback()}))}unobserve(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}disconnect(){this.unobserve()}}}(n||(n={}))},40840:(e,t,i)=>{i.d(t,{Wb:()=>o,mp:()=>l,rX:()=>c});var n=i(39953),a=i(27145),r=i(12518),s=i(52979);function o(e){return{x:e.left,y:e.top,top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.top+e.height,right:e.left+e.width,toJSON:()=>e}}function l(e){return(0,n.zG)(e(),r.fold((e=>e),(e=>e)))}function c(e,t){const i=a.bv.is(e)?e.meta:{};return s.NC.expandIfNeeded({start:e.start,end:e.end,...i},t)}},64451:(e,t,i)=>{i.d(t,{Fd:()=>m,sO:()=>a});var n,a,r=i(51505),s=i(39953),o=i(84714),l=i(27145),c=i(70416),d=i(40920),u=i(12518),p=i(30033),g=i(87234),h=i(40840);class m{constructor(e,t,i,n,a){this._highlightId=e,this._markChange=t,this._highlights=i,this._getBaseRect=n,this._getBaseScroll=a}get id(){return this._markChange.id}get highlightId(){return this._highlightId}get range(){const e=this._markChange.meta.range();return l.SV.isEmpty(e)?r.t$(e):r.F2(e)}getRect(){const e=this._highlights.getGeometryByHighlightId(this._highlightId);if(!e||!e.rects||0===e.rects.length)return u.left(new Error);const t=e.rects,i=this._getBaseRect(),n=t[0],a=1===t.length?n:t[t.length-1],r=this._getBaseScroll(),s=e=>(0,h.Wb)(p.UL.setPosition(g.Ir.fromOffsetPoint(e,i,r),e));return u.right({rootClientRect:i,clientRects:[s(n),s(a)]})}fromMarkEvent(e){return(0,o.of)(u.left(new Error("not implemented")))}static getMarkRect(e){return(0,s.zG)(e.getRect(),u.map(c.n.relativeToViewport),u.fold((()=>u.left(new Error("Mark is collapsed"))),(e=>u.right({top:Math.round(e.top),bottom:Math.round(e.bottom),left:Math.round(e.left),right:Math.round(e.right)}))))}}!function(e){let t;!function(e){let t;!function(e){e.full="full",e.partial="partial"}(t=e.RemoveType||(e.RemoveType={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e,i=t.full){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:{range:e.range,removeType:i}})}}(t=e.Change||(e.Change={}))}(n||(n={})),function(e){let t;!function(e){let t;!function(e){let t,i;!function(e){e.visible="visible",e.highlighted="highlighted"}(t=e.Type||(e.Type={})),function(e){e.api="api",e.sidebar="sidebar",e.text="text"}(i=e.Source||(e.Source={}))}(t=e.VisualState||(e.VisualState={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:e})}}(t=e.Change||(e.Change={}))}(a||(a={}))},36540:(e,t,i)=>{i.d(t,{a7:()=>re});var n=i(49231),a=i(45966),r=i(96314),s=i(32080),o=i(2516),l=i(21428),c=i(33798),d=i(30302),u=i(87118),p=i(43832),g=i(26278),h=i(9318),m=i(94480),f=i(88640),v=i(24676),b=i(9339),w=i(31382),S=i(91577),y=i(92203),E=i(41108),C=i(82478),k=i(29375),_=i(86025),A=i(69976),I=i(76271),x=i(4798),T=i(68970),M=i(99836),R=i(88613),P=i(62549),L=i(92147),F=i(46036),D=i(26698),U=i(6986),H=i(48021),B=i(46715),O=i(82713),N=i(42765),G=i(96006),V=i(85417),z=i(57737),j=i(83508),W=i(33303),q=i(24146),Y=i(47654);const K=()=>n.createElement("div",{className:q.separator}),Z=e=>n.createElement("div",{className:Y.sessionTimeoutWrapper},n.createElement("div",{className:Y.sessionTimeoutDiv},n.createElement("div",{className:Y.sessionTimeoutTextAndIcon},n.createElement("div",null,n.createElement(F.K,{className:Y.sessionTimeoutPopupIcon,width:"32",height:"32"})),n.createElement("div",{className:Y.sesstionTimeoutText},n.createElement("span",null,"Company policy expires your session in 1 hour.",n.createElement(a.i,{href:"#",onClick:()=>{const t=(0,U.OB)().browserApi;t.beginOAuth?t.beginOAuth():e.openUrl((0,R.s7)("signinHook","toolbarMenu",!0))}},n.createElement("span",{className:Y.signinLink},"Sign in")),"to avoid interruption.")))),n.createElement(K,null)),$=e=>n.createElement(r.r,{label:e.isAutoApplySupported?"Correct text automatically":"Correct spelling automatically",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-autocorrect"}),X=e=>n.createElement(r.r,{isSelected:!e.enabled,label:"Check text with browser extension",helperMessage:e.enabled?"Grammarly's browser extension was deactivated since you're using Grammarly's desktop application":void 0,onChange:t=>{e.toggle(!t)},"data-grammarly-part":"disableDesktopIntegrationToggle"}),J=e=>n.createElement(O.Z,{label:"Show phrasal predictions",isSelected:e.enabled,onChange:e.toggle}),Q=e=>n.createElement(r.r,{label:"Show emoji for detected tones",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-show-emoji-for-detected-tones"}),ee=e=>n.createElement(r.r,{label:"Show Knowledge Share",isSelected:e.enabled,onChange:e.toggle}),te=e=>n.createElement(s.k,{direction:"column",gap:2,className:q.section},n.createElement(s.k,{gap:2,justify:"start",className:q.heading},"Accessibility",n.createElement(o.V,{label:"Beta",variant:"addition"})),n.createElement(r.r,{label:"Turn on enhanced screen reader support",isSelected:e.enabled,onChange:e.toggle})),ie=e=>n.createElement(N.Z,{label:`Show “Get citation” button on ${e.domain}`,isSelected:e.enabled,onChange:e.toggle},"Show “Get citation” button on"," ",n.createElement(l.x,{as:"span",variant:"text-small",weight:"semibold",color:"base-default",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},e.domain)),ne=e=>n.createElement(O.Z,{label:e.label,isSelected:e.enabled,isDisabled:e.disabled,onChange:e.toggle,helperMessage:e.helperMessage}),ae=({showReportBugButton:e,...t})=>{var i,a,v;const b=t.advancedHistoryLoggerEnabledUntil?Math.ceil((t.advancedHistoryLoggerEnabledUntil-Date.now())/6e4):0;return n.createElement(c.x,{"data-grammarly-part":"debugMenu"},n.createElement(K,null),n.createElement(c.x,{className:q.debugMenu},n.createElement(s.k,{direction:"column",gap:3},n.createElement(d.X,{as:"h3",className:q.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Debug Menu"),t.showHideButton&&n.createElement(u.z,{variant:"ghost",text:"Hide","data-grammarly-part":"debugMenuHideBtn",onClick:()=>{(0,U.OB)().bgRpc.api.toggleDebugMenu(!1)}})),n.createElement(r.r,{label:"Logging",onChange:e=>{e?(0,U.OB)().bgRpc.api.enableHistoryLoggerUntil(-1):(0,U.OB)().bgRpc.api.disableHistoryLogger()},"data-grammarly-part":"debugMenuLoggingToggle",isSelected:t.isEnabled}),n.createElement(K,null),n.createElement(N.Z,{label:`Advanced Logging (${b} minutes left)`,isSelected:t.isAdvancedEnabled,isDisabled:!t.isEnabled,onChange:()=>{t.isAdvancedEnabled?(0,U.OB)().bgRpc.api.disableAdvancedHistoryLogger():(0,U.OB)().bgRpc.api.enableAdvancedHistoryLoggerUntil(Date.now()+36e5)}},"Advanced Logging"," ",t.isAdvancedEnabled&&null!==t.advancedHistoryLoggerEnabledUntil&&t.advancedHistoryLoggerEnabledUntil>0&&n.createElement(o.V,{label:`${b} mins left`,inline:!0})),n.createElement(K,null)),n.createElement(d.X,{as:"h4",className:q.heading},n.createElement(u.z,{variant:"ghost",text:"Download Logs",className:q.downloadBtn,isDisabled:!t.isEnabled,onClick:t.downloadDebugReports,"data-grammarly-part":"debugMenuDownloadLogBtn"}),!0===e.enabled&&n.createElement(p.r,{href:"#",underline:"hover",weight:"bold",className:q.downloadBtn,"data-grammarly-part":"debugMenuReportBugBtn",onClick:()=>{e.onClick()}},n.createElement(s.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"Report a bug"),n.createElement(g.J,{icon:h.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),t.showDebugPage&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(d.X,{as:"h4",className:q.heading},n.createElement(p.r,{href:"#",underline:"hover",weight:"bold",className:q.downloadBtn,"data-grammarly-part":"debugMenuDebugPageBtn",onClick:t.openDebugPage},n.createElement(s.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"View debug page"),n.createElement(g.J,{icon:h.n,accessibilityLabel:"",size:"small",variant:"inherit"}))))),null!=t.gOSDebugSettings?n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(c.x,{className:q.gOSMenu},n.createElement(s.k,{direction:"column",gap:3},n.createElement(d.X,{as:"h3",className:q.heading,color:"base-default"},"gOS Developer Settings"),n.createElement(r.r,{label:"Debugger",isSelected:t.gOSDebugSettings.debuggerEnabled,onChange:null===(i=t.gOSDebugSettings)||void 0===i?void 0:i.toggleDebugger,"data-grammarly-part":"gOSDebuggerToggle"}),n.createElement(K,null)),n.createElement(s.k,{className:q.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Applet Channel"),n.createElement("div",{style:{width:"106px"}},n.createElement(m.P,{id:"gos-applet-channel",value:null!==(a=t.gOSDebugSettings.appletChannel)&&void 0!==a?a:"stable",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAppletChannel(e)},label:"Applet Channel",labelDisplay:"hidden"},n.createElement(m.P.Option,{value:"dev",label:"dev"}),n.createElement(m.P.Option,{value:"preview",label:"preview"}),n.createElement(m.P.Option,{value:"stable",label:"stable"}),n.createElement(m.P.Option,{value:"qa",label:"qa"})))),n.createElement(K,null),n.createElement(s.k,{className:q.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Assistant URL"),n.createElement("div",{style:{width:"190px"}},n.createElement(f.n,{labelDisplay:"hidden",label:"Assistant URL",id:"gos-assistant-applet-url",type:"url",placeholder:"e.g. http://localhost:3000/",value:null!==(v=t.gOSDebugSettings.assistantAppletUrl)&&void 0!==v?v:"",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAssistantAppletUrl(e)}}))))):null))},re=e=>{var t,i,a,r,o,u,m,f,R,F,O,N,re,se,oe;const{actions:le,activeTab:ce,config:de,settings:ue,dapi:pe,user:ge,sessionTimeoutValue:he,siteCategory:me,placement:fe,dynamicConfig:ve,enableRenderingHack:be=!1,showDockedAssistantToggle:we=!1,showCitationBuilderToggle:Se=!0,citationBuilderSessionId:ye,isCitationBuilderManualInvocationEnabled:Ee=!1,isKnowledgeHubSupported:Ce=!1,isTouchTypistSupported:ke=!1,isIndianEnglishDialectSupported:_e=!1,isCheetahSupported:Ae=!1,showSerengetiFeatureToggle:Ie=!1,isReportBugFeatureAllowed:xe,isAutoApplySupported:Te=!1,className:Me,downloadDebugReports:Re,isHumanWritingReportSupported:Pe=!1,isEnhancedScreenReaderUXSupported:Le=!1}=e,Fe=(0,U.OB)().experimentClient;be&&n.useEffect((()=>{(0,T.CB)()&&(self.screenLeft<0||self.screenTop<0||self.screenLeft>self.screen.width||self.screenTop>self.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{anonymous:De}=ge,Ue=(P.n.isGrammarlyEmployee(ge)||P.n.isTestUser(ge))&&xe,He=(0,T.i7)()&&P.n.isGrammarlyEmployee(ge),Be=P.n.isGrammarlyEmployee(ge)&&(0,y.V)(Fe),Oe=Fe.isGateEnabled(x.K.KeyboardShortcut),{dialectSettings:Ne}=ue,Ge=(null==Ne?void 0:Ne.dialect)||pe.dialectStrong,Ve=["british","american","australian","canadian",..._e?["indian"]:[]],ze=e.siteSwitcherChecked||{checked:!!ue.enabled,update:t=>{const{siteCategory:i}=e;le.toggleSite(t,de.domain),B.J.checkingToggleClick("toolbar",i,t?"on":"off",de.domain),(0,M.Tb)().toggleExtension(t,"toolbar",(0,L.Cg)(de.domain))}},je=n.useCallback((e=>{const t=ce&&new URL(ce.url).pathname;le.toggleCitationBuilderForDomain({domain:de.domain,enabled:e,pathName:t,inAllowList:ce&&(0,w.eC)(new URL(ce.url),ve)}),e||B.J.citePopupButtonDisable(de.domain,"permanent",ye||"","toolbar",Ee&&!0===(0,w.gO)(de.domain,ue))}),[null==ce?void 0:ce.url,de.domain,ye]);return n.createElement(c.x,{className:(0,k.cs)(q.settingsContent,Me),"data-grammarly-part":"settings"},(()=>{const{customSessionTimeoutInfo:e}=ge;return!!(0,H.Xv)(e,Fe)&&(0,H.dU)(he)})()&&n.createElement(Z,{openUrl:e.openUrl}),n.createElement(S.g,{url:null==ce?void 0:ce.url,domain:de.domain}),n.createElement(c.x,{className:Y.popupSettings},n.createElement(s.k,{direction:"column",gap:3,marginBottom:ue.isDebugMenuVisible||Ue?3:void 0},n.createElement(d.X,{as:"h4",variant:"heading-large",className:q.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Quick Settings"),n.createElement(p.r,{href:"#",underline:"hover",weight:"bold",onClick:()=>{e.openUrl((0,T.Um)().allSettings),B.J.allSettingsButtonClick(fe)}},n.createElement(s.k,{className:q.allSettings},n.createElement(l.x,{as:"span",variant:"text-small"},"All Settings"),n.createElement(g.J,{icon:h.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),A.q.showSettingPopupToggle(pe,ue,ve,null==ce?void 0:ce.url)&&n.createElement(n.Fragment,null,n.createElement(X,{toggle:e=>{le.setDesktopIntegration(e),B.J.desktopIntegrationToggleClick(e?"on":"off")},enabled:ue.isDesktopIntegrationEnabled}),n.createElement(K,null)),n.createElement(W.w,{domain:de.domain,enabledInConfig:null!==(t=de.enabled)&&void 0!==t&&t,siteSwitcherChecked:ze,favicon:null==ce?void 0:ce.favIconUrl,siteCategory:me}),ke&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(C.F,{settings:ue.touchTypistSettings,isMac:(0,U.nD)(),actions:le,gnar:B.J})),n.createElement(K,null),Oe&&n.createElement(n.Fragment,null,n.createElement(j.Z,{isMac:(0,U.nD)(),currentOpenShortcut:null!==(a=null===(i=ue.keyboardShortcuts)||void 0===i?void 0:i.openAssistant)&&void 0!==a?a:(0,I.e)("openAssistant"),currentCloseShortcut:null!==(o=null===(r=ue.keyboardShortcuts)||void 0===r?void 0:r.closeAssistant)&&void 0!==o?o:(0,I.e)("closeAssistant"),onSetShortcut:(e,t)=>{le.setKeyboardShortcut(e,t)}}),n.createElement(K,null)),Ae&&n.createElement(n.Fragment,null,n.createElement(G.Z,{openCheetahSettings:()=>e.openUrl((0,T.Um)().featuresSettings),cheetahSettings:ue.cheetah,cheetahToggleInlineQuickReply:le.cheetahToggleInlineQuickReply,cheetahToggleInlineRewrite:le.cheetahToggleInlineRewrite,showSerengetiFeatureToggle:Ie,showDockedAssistantToggle:we,dockedAssistantToggle:le.toggleAlwaysAvailableAssistant,dockedAssistantEnabled:null!==(m=null===(u=ue.alwaysAvailableAssistantSettings)||void 0===u?void 0:u.enabled)&&void 0!==m&&m,serengetiEnabled:"disabled"!==pe.serengetiState,serengetiToggle:e=>{le.setSerengetiState(!0===e?"enabled":"disabled")}}),n.createElement(K,null)),Se&&(0,w.r4)(de.domain,ve,Ee)&&n.createElement(n.Fragment,null,n.createElement(ie,{enabled:(0,w.Td)(de.domain,ve,Ee,ue),domain:de.domain,toggle:je}),n.createElement(K,null)),Ce&&n.createElement(n.Fragment,null,n.createElement(ee,{enabled:null===(R=null===(f=ue.knowledgeHubSettings)||void 0===f?void 0:f.enabled)||void 0===R||R,toggle:e=>{le.toggleKnowledgeHub(e),B.J.knowledgeHubFeatureToggleClick("popup",E.JJ.fromDomain(de.domain),e?E.L5.on:E.L5.off),(0,M.Tb)().knowledgeHub.featureToggleClick(E.JJ.fromDomain(de.domain),e?E.L5.on:E.L5.off)}}),n.createElement(K,null)),n.createElement(V.Z,{disabled:De,enabledDefs:ue.enabledDefs,toggleDefs:le.toggleDefs}),(0,b.c)()&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement($,{enabled:ue.autocorrectEnabled||!1,isAutoApplySupported:Te,toggle:e=>{le.toggleAutocorrect(e);const t=e?"on":"off";B.J.autocorrectToggleClick("popup",t),(0,M.Tb)().autoFix.featureToggleClick(t,"popup")}})),(0,_.f)()&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(J,{enabled:ue.autocompleteEnabled||!1,toggle:e=>{le.toggleAutocomplete(e),B.J.autocompleteFeatureToggleClick("popup",e?"on":"off")}})),(!Ae||!1===(null===(O=null===(F=ue.cheetah)||void 0===F?void 0:F.status)||void 0===O?void 0:O.cheetahEnabled))&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(Q,{enabled:"hide"!==pe.emogenieEmojiState,toggle:e=>{le.setEmogenieEmojiState(!0===e?"show":"hide"),B.J.settingsShowEmojiForDetectedTonesToggleClick(de.domain,!0===e?"on":"off")}})),Pe&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(ne,{label:"Grammarly Authorship",enabled:"enabled"===(null===(N=ue.humanWritingReport)||void 0===N?void 0:N.kind),disabled:!1,toggle:e=>le.hwrSetEnabled(e),helperMessage:"Prove where your words come from by recording what you type and which sources you use. You choose how to share your information."})),n.createElement(K,null),n.createElement(z.m,{dialects:Ve,changeStrongDialect:le.changeStrongDialect,dialectStrong:Ge,dialectWeak:pe.dialectWeak,dropdownOnTop:!0,disabled:De,lock:{isLocked:Boolean(null==Ne?void 0:Ne.dialectLockedByInstitution),message:"Locked by your organization"}})),Le&&n.createElement(n.Fragment,null,n.createElement(K,null),n.createElement(te,{enabled:ue.isEnhancedScreenReaderUXSupported,toggle:le.toggleEnhancedScreenReaderUXSupport})),(ue.isDebugMenuVisible||Ue)&&n.createElement(ae,{isAdvancedEnabled:ue.advancedHistoryLoggerEnabled,isEnabled:ue.historyLoggerEnabled,advancedHistoryLoggerEnabledUntil:ue.advancedHistoryLoggerEnabledUntil,showDebugPage:He,openDebugPage:e.openDebugPage,showReportBugButton:Ue?{enabled:!0,onClick:()=>{e.openReportBugForm(D.ZD({domain:de.domain,userType:D.Ng(ge),version:(0,T.bo)(),systemInfo:v.Rd().systemInfo}))}}:{enabled:!1},showHideButton:!Ue,downloadDebugReports:Re,gOSDebugSettings:Be?{debuggerEnabled:null!==(re=ue.gOSDebuggerEnabled)&&void 0!==re&&re,toggleDebugger:le.toggleGOSDebugger,appletChannel:null!==(se=ue.gOSAppletChannel)&&void 0!==se?se:null,setAppletChannel:le.setGOSAppletChannel,assistantAppletUrl:null!==(oe=ue.gOSAssistantAppletUrl)&&void 0!==oe?oe:null,setAssistantAppletUrl:le.setGOSAssistantAppletUrl}:void 0})))}},39679:(e,t,i)=>{i.d(t,{R:()=>d});var n=i(49231),a=i(66661),r=i(52574),s=i(51320),o=i(86210),l=i(31933),c=i(45844);const d=({lock:e={message:"",isLocked:!1},dialect:t})=>n.createElement("div",{className:c.label},e.isLocked&&n.createElement(s.u,{message:e.message},n.createElement("div",{className:c.lockIconWrapper},n.createElement(a.N,null))),n.createElement(r.zx.White,{name:"dialect.box",style:{padding:"0"},disabled:e.isLocked},n.createElement("div",{className:`${c.selected} ${e.isLocked?c.disabled:""}`},n.createElement(l.G,{dialect:t,className:c.option}),n.createElement(o.pL,null))))},31933:(e,t,i)=>{i.d(t,{G:()=>l});var n=i(49231),a=i(84242),r=i(86210),s=i(37926);const o={american:n.createElement(r.UE,null),australian:n.createElement(r.aE,null),british:n.createElement(r.M8,null),canadian:n.createElement(r._P,null),indian:n.createElement(r.kj,null)},l=({dialect:e,className:t})=>n.createElement(n.Fragment,null,o[e],n.createElement("span",{"data-test-attr":`dialect_${e}`,className:`${s.option} ${null!=t?t:""}`},(0,a.kC)(e)+" English"))},35393:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(49231),a=i(23464),r=i(33798),s=i(32080),o=i(21428),l=i(87118),c=i(67968),d=i(88640),u=i(22389),p=i(22303),g=i(48666),h=i(51354),m=i(49100);const f=({label:e,isMac:t,currentShortcut:i,onEdit:a,shouldAutofocusEditButton:r})=>n.createElement(s.k,{justify:"space-between",align:"center",flex:"2",height:32,gap:1},n.createElement(o.x,{as:"p",variant:"text-small"},(0,m.$)(i,t)),n.createElement(s.k,null,n.createElement(l.z,{text:"Edit","aria-label":`Edit ${e} shortcut`,onClick:a,autoFocus:r,variant:"ghost"}))),v=({label:e,isMac:t,currentShortcut:i,onSetShortcut:a,ariaDescribedBy:r,onExit:o})=>{const[l,f]=n.useState(i),[v,b]=n.useState(!0),[w,S]=n.useState(void 0),y=`${e.replace(/ /g,"-").toLowerCase()}-shortcut-description-id`;return n.createElement(n.Fragment,null,n.createElement(c.u,{id:y},"Type a shortcut to configure the ",e," shortcut. Press tab for actions."),n.createElement(d.n,{label:`${e} shortcut`,value:(0,m.$)(l,t),labelDisplay:"hidden",errorMessage:w,onKeyDown:e=>{if(["Tab","Enter","CapsLock","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Insert","Delete","Backspace"].includes(e.code))b(!0);else{if(e.preventDefault(),h.uU.includes(e.key))if(v)f({key:void 0,modifiers:[e.key]});else{const t=l.modifiers;t.includes(e.key)||f({key:l.key,modifiers:[...t,e.key]})}else f(v?{key:e.code,modifiers:[]}:{key:e.code,modifiers:l.modifiers});b(!1)}},onKeyUp:()=>{b(!0)},autoFocus:!0,style:{backgroundColor:"var(--white)"},"aria-describedby":r?`${y} ${r}`:y}),n.createElement(s.k,{gap:1},n.createElement(u.h,{icon:p.L,accessibilityLabel:`Save ${(0,m.$)(l,t)} as ${e} shortcut`,tooltipContentProps:{children:"Save shortcut"},onClick:()=>{!function(e){return void 0!==e.key}(l)?S("Invalid shortcut. Must use at least one non-modifier key."):(a(l),o())}}),n.createElement(u.h,{icon:g.V,accessibilityLabel:"Cancel edits",onClick:o,variant:"tertiary"})))};const b=({label:e,isMac:t,currentShortcut:i,onSetShortcut:l,ariaDescribedBy:c})=>{const[d,u]=n.useState(!1),[p,g]=n.useState(!1);n.useEffect((()=>{d&&g(!0)}),[d]);const h=d?n.createElement(v,{label:e,isMac:t,currentShortcut:i,onSetShortcut:i=>{l(i),a.E.announce(`Shortcut to ${e} is ${(0,m.$)(i,t)}`)},onExit:()=>u(!1),ariaDescribedBy:c}):n.createElement(f,{label:e,isMac:t,currentShortcut:i,onEdit:()=>u(!0),shouldAutofocusEditButton:p});return n.createElement(r.x,{bgColor:d?"background-base-subdued":"background-base-default",marginLeft:-2,marginRight:-2,padding:2,borderRadius:3},n.createElement(s.k,{gap:1,direction:"column"},n.createElement(o.x,{as:"p",weight:"semibold",variant:"text-small"},e),n.createElement(s.k,{gap:3,flex:"2"},h)))}},82713:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(49231),a=i(2516),r=i(42765);const s=e=>n.createElement(a.V,{label:e.label||"Beta",variant:"addition",inline:!0}),o=({label:e,betaLabel:t,...i})=>n.createElement(r.Z,{label:`${e} (${t||"Beta"})`,...i},e," ",n.createElement(s,{label:t}))},42765:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(49231),a=i(32080),r=i(21428),s=i(96314);const o=({label:e,children:t,onChange:i,alignCenter:o,labelDisplay:l,...c})=>n.createElement(a.k,{justify:"space-between",align:o?"center":void 0},n.createElement(a.k,{direction:"column",gap:1},n.createElement(r.x,{as:"span",onClick:()=>{c.isDisabled||i(!c.isSelected)},variant:"text-small",weight:"medium",color:"base-default",style:{cursor:c.isDisabled?"not-allowed":"pointer"},"aria-hidden":!0},t),c.helperMessage&&n.createElement(r.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},c.helperMessage)),n.createElement(s.r,{label:e,labelDisplay:"hidden",onChange:i,...c}))},51769:(e,t,i)=>{i.d(t,{X:()=>c});var n=i(49231),a=i(52574),r=i(50094),s=i(39679),o=i(65063),l=i(31933);class c extends n.Component{render(){var e;const t=this.props.dropdownOnTop?{customPosition:{top:`-${32*(this.props.dialects.length-1)+4}px`,left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return(null===(e=this.props.lock)||void 0===e?void 0:e.isLocked)?n.createElement(s.R,{lock:this.props.lock,dialect:this.props.dialect}):n.createElement(r.L,{...t,showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:n.createElement(s.R,{dialect:this.props.dialect})},this.props.dialects.filter((e=>e!==this.props.dialect)).map((e=>n.createElement(a.zx.Flat,{name:e,key:e,onClick:t=>(null==t?void 0:t.isTrusted)&&this.props.onSetDialect(e)},n.createElement("div",{className:o.option},n.createElement(l.G,{className:o.label,dialect:e}))))))}}},86210:(e,t,i)=>{i.d(t,{M8:()=>l,UE:()=>s,_P:()=>c,aE:()=>o,kj:()=>d,pL:()=>r});var n=i(49231),a=i(69112);const r=()=>n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"})),s=()=>n.createElement("div",{className:a.american,role:"presentation"}),o=()=>n.createElement("div",{className:a.australian,role:"presentation"}),l=()=>n.createElement("div",{className:a.british,role:"presentation"}),c=()=>n.createElement("div",{className:a.canadian,role:"presentation"}),d=()=>n.createElement("div",{className:a.indian,role:"presentation"})},8338:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(49231),a=i(33798),r=i(79992),s=i(51320),o=i(7635);const l=({children:e,blocked:t,wrapperClassName:i,disabledText:l="Sign in to use this feature"})=>t?n.createElement(s.u,{message:l,position:"top"},n.createElement(a.x,{className:i},n.createElement("div",{className:o.hover_blocker,onClick:r.EI,onDoubleClick:r.EI},e))):n.createElement(n.Fragment,null,e)},96006:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(49231),a=i(32080),r=i(30302),s=i(87118),o=i(21428),l=i(96314),c=i(82713);function d(e){var t,i,d,u,p,g,h,m,f,v,b,w,S,y;return n.createElement(a.k,{direction:"column",gap:2},n.createElement(a.k,{direction:"column"},n.createElement(a.k,{justify:"space-between",align:"center"},n.createElement(r.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Generative AI"),n.createElement(s.z,{variant:"ghost",text:"Manage","data-grammarly-part":"cheetahManageBtn",onClick:()=>{e.openCheetahSettings()}})),n.createElement(o.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},"Brainstorm, write, and rewrite with Grammarly's generative AI assistance.")),e.showDockedAssistantToggle&&n.createElement(c.Z,{label:"Use docked chat launcher",isSelected:e.dockedAssistantEnabled,onChange:e.dockedAssistantToggle,betaLabel:"Beta",helperMessage:"Replace the widget in text fields with our new AI chat sidebar."}),n.createElement(l.r,{label:"Show on text selection",isSelected:!1!==(null===(i=null===(t=e.cheetahSettings)||void 0===t?void 0:t.status)||void 0===i?void 0:i.cheetahEnabled)&&!1!==(null===(p=null===(u=null===(d=e.cheetahSettings)||void 0===d?void 0:d.status)||void 0===u?void 0:u.entryPointsConfig)||void 0===p?void 0:p.inlineRewriteEnabled),disabled:!1===(null===(h=null===(g=e.cheetahSettings)||void 0===g?void 0:g.status)||void 0===h?void 0:h.cheetahEnabled),onChange:t=>e.cheetahToggleInlineRewrite(t)}),n.createElement(l.r,{label:"Show for quick replies",isSelected:!1!==(null===(f=null===(m=e.cheetahSettings)||void 0===m?void 0:m.status)||void 0===f?void 0:f.cheetahEnabled)&&!1!==(null===(w=null===(b=null===(v=e.cheetahSettings)||void 0===v?void 0:v.status)||void 0===b?void 0:b.entryPointsConfig)||void 0===w?void 0:w.inlineQuickReplyEnabled),disabled:!1===(null===(y=null===(S=e.cheetahSettings)||void 0===S?void 0:S.status)||void 0===y?void 0:y.cheetahEnabled),onChange:t=>e.cheetahToggleInlineQuickReply(t)}),e.showSerengetiFeatureToggle&&n.createElement(c.Z,{label:"Use organizational context",isSelected:e.serengetiEnabled,onChange:e.serengetiToggle,betaLabel:"Internal"}))}},85417:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(49231),a=i(96314),r=i(99836),s=i(46715);function o(e){return n.createElement(a.r,{label:"Show definitions and synonyms via double clicks (all sites)",isSelected:e.enabledDefs,onChange:t=>{const{toggleDefs:i}=e;i(t),s.J.definitionToggleClick(t?"on":"off"),(0,r.Tb)().toggleExtensionDefs(t)},isDisabled:e.disabled,"data-grammarly-part":"definitionAndSynonymsSwitcher"})}},57737:(e,t,i)=>{i.d(t,{m:()=>c});var n=i(49231),a=i(32080),r=i(21428),s=i(51769),o=i(8338),l=i(46715);class c extends n.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const n=e+"English";l.J.languageSettingUpdate(n,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return n.createElement(a.k,{align:"center",justify:"space-between"},n.createElement(r.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default"},"I write in"),n.createElement(o.w,{blocked:this.props.disabled},n.createElement(s.X,{dialect:e,dialects:this.props.dialects,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop,lock:this.props.lock})))}}},83508:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(49231),a=i(32080),r=i(30302),s=i(21428),o=i(46715),l=i(35393);const c=({currentOpenShortcut:e,currentCloseShortcut:t,onSetShortcut:i,isMac:c})=>{const d="keyboard-shortcut-setting-description";return n.createElement(a.k,{direction:"column"},n.createElement(r.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Shortcuts"),n.createElement(s.x,{as:"p",variant:"text-xsmall",color:"base-subdued",id:d},"Use any keys in shortcuts, except for tab, enter, caps lock, home, end, page up, page down, delete, backspace, insert, and arrow keys."),n.createElement(a.k,{gap:1,direction:"column",color:"base-default"},n.createElement(l.Z,{label:"Open Grammarly",isMac:c,currentShortcut:e,onSetShortcut:e=>{i("openAssistant",e),o.J.keyboardShortcutShortcutKeysChanged("openAssistant")},ariaDescribedBy:d}),n.createElement(l.Z,{label:"Close Grammarly",isMac:c,currentShortcut:t,onSetShortcut:e=>{i("closeAssistant",e),o.J.keyboardShortcutShortcutKeysChanged("closeAssistant")},ariaDescribedBy:d})))}},33303:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(49231),a=i(21428),r=i(33798),s=i(42765),o=i(47654);const l=e=>{const t="docs.google.com"===e.domain?"Google Docs":e.domain,{enabledInConfig:i,siteSwitcherChecked:l,favicon:c}=e,d=l.checked&&i,u=i?"Check for writing suggestions":"Checking is not supported";return n.createElement(s.Z,{label:`${u} on ${t}`,isSelected:d,isDisabled:!i,onChange:()=>{l.update(!d)},alignCenter:e.centeredToggle,"data-grammarly-part":"siteSwitcher"},n.createElement(a.x,{as:"span",variant:"text-small","data-test-attr":"siteControlsLabelText"},u," ",n.createElement("br",null),n.createElement(a.x,{as:"span",variant:"text-small",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},"on"," ",n.createElement(a.x,{as:"span",variant:"text-small",weight:"semibold"},c&&n.createElement(r.x,{className:o.favicon},n.createElement("img",{width:"16px",height:"16px",src:c,alt:""})),t))))}},48641:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(58303),a=i(90023),r=i(49231),s=i(44071),o=i(90572),l=i(14969),c=i(21428),d=i(37213),u=i(99836),p=i(29919),g=i(21448),h=i(23619),m=i(68970),f=i(46715),v=i(19416);const b=({user:e,isAssistant:t,openSubscriptionDialog:i,hasInProductDiscountSpecialOffer:b,assignInProductDiscountExperiment:w,hasUphookHubTestTreatment:S,uphookConfiguration:y,trackUphookHubEvent:E})=>{const{registrationDate:C,anonymous:k,premium:_}=e,A=(0,p.p6)(C);if(k||_)return null;const I=(0,a.zG)(b,n.tS((e=>e&&w()?n.G("discountPro"):n.G("pro")))),x=()=>{E("show",y),(0,a.zG)(I,n.UI((e=>{(0,g.nE)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e}),(0,u.Tb)().upgradeHooks.showUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)})))};r.useEffect((()=>{if((0,m.G6)()){const e=(0,s.R)(document,"visibilitychange").pipe((0,o.h)((()=>"visible"===document.visibilityState))).subscribe((()=>{x()}));return()=>e.unsubscribe()}return x(),()=>{}}),[]);const T=r.useCallback((()=>{S?y.pipe((0,o.h)(n.pC),(0,l.P)()).subscribe((e=>{i({overrideUrl:e.value.content.ctaUrl,utmCampaign:"extensionSettingsToolbar"})})):i({utmCampaign:"extensionSettingsToolbar"}),E("click",y),(0,a.zG)(I,n.UI((e=>{(0,g.Qi)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e}),(0,u.Tb)().upgradeHooks.clickUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)}))),(0,u.Tb)().userUpgradeClick("settingsToolbar")}),[]),M=A?r.createElement(c.x,{as:"span",variant:"text-small","data-test-attr":"checked_since",color:"base-default"},"Grammarly has been correcting your text since ",A,"."):null;return r.createElement("div",{className:t?v.borderTop:void 0},r.createElement("div",{...(0,d.Sh)(v.content,t?void 0:v.borderBottom)},M,r.createElement(h.Y,{onClick:T,className:v.premiumButton,dataGrammarlyPart:"settings-upgrade-button",cta:S?(0,a.zG)(y.get(),n.UI((e=>e.content.ctaCopy)),n.fS((()=>"Get Pro"))):(0,a.zG)(b,n.tS((e=>e&&w()?n.G("Get 50% off Pro"):n.YP)),n.fS((()=>"Get Pro")))})))}},46715:(e,t,i)=>{i.d(t,{J:()=>a});var n=i(6986);const a=new Proxy({},{get:(e,t)=>(...e)=>(0,n.OB)().bgRpc.api.trackGnar(t,e)})},29375:(e,t,i)=>{i.d(t,{Jt:()=>r,Ku:()=>l,Ne:()=>o,cs:()=>c,k3:()=>s,og:()=>a,rR:()=>d});var n=i(28186);function a(e,t,i){t?function(e,t){if(e){if(-1===t.indexOf(" "))return e.classList.add(t);{const i=t.split(" ");for(let t=0;t<i.length;t++)e.classList.add(i[t])}}}(e,i):function(e,t){if(e&&e.classList)e.classList.remove(t)}(e,i)}function r(e,t){let i=e.parentNode;for(;null!==i;){if(l(i,t))return i;i=i.parentNode}return!1}function s(e){let t=e.parentNode;for(;null!==t;){if(o(t))return t;t=t.parentNode}return!1}function o(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function l(e,t){if(!e)return!1;const i=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!i&&i.apply(e,[t])}function c(...e){return e.reduce(((e,t)=>e.concat((0,n.Kn)(t)?Object.keys(t).filter((e=>t[e])):t)),[]).filter((e=>Boolean(e))).join(" ")}function d(e=document){if(void 0===e.body.style.transform){if(void 0!==e.body.style.WebkitTransform)return"WebkitTransform";if(void 0!==e.body.style.MozTransform)return"MozTransform"}return"transform"}},21978:(e,t,i)=>{i.d(t,{T:()=>o,q:()=>s});var n=i(90023),a=i(58303),r=i(59060);const s=e=>(0,n.zG)(e,a.tS((e=>r.ab.findFirst(e.content,"nativeInlineCardContent",r.ab.TreeTraversal.PreOrder)))),o=(0,n.ls)(s,a.pC)},72415:(e,t,i)=>{i.d(t,{M:()=>a});var n=i(49231);class a extends n.Component{constructor(){super(...arguments),this.handleClick=e=>{e&&(e.isTrusted||this.props.skipTrustedCheck)&&(e.stopPropagation(),e.stopImmediatePropagation(),this.props.clickHandler(e))}}componentDidMount(){this.wrapperRef&&this.wrapperRef.addEventListener("click",this.handleClick)}componentWillUnmount(){this.wrapperRef&&this.wrapperRef.removeEventListener("click",this.handleClick)}render(){return n.createElement("div",{ref:e=>this.wrapperRef=e,style:this.props.style||{display:"initial"},className:this.props.className,"data-grammarly-part":this.props.dataGrammarlyPart},this.props.children)}}},98785:(e,t,i)=>{var n,a;i.d(t,{B:()=>n,I:()=>a}),function(e){let t;!function(e){e.disableOnTab="disableOnTab",e.reloadTab="reloadTab",e.showOnboardingDialog="showOnboardingDialog",e.hideGdocsSigninPopupMessage="hideGdocsSigninPopupMessage",e.sendCsLogsToPopup="sendCsLogsToPopup",e.downloadDebugReportsFromCS="downloadDebugReportsFromCS"}(t=e.Kind||(e.Kind={}))}(n||(n={})),function(e){let t;!function(e){e.sendCsLogs="sendCsLogs"}(t=e.Kind||(e.Kind={}))}(a||(a={}))},95446:(e,t,i)=>{var n;i.d(t,{y:()=>n}),function(e){e.gdocs="gdocs",e.other="other"}(n||(n={}))},58438:(e,t,i)=>{i.d(t,{m:()=>a,u:()=>r});var n=i(49231);const a=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"29.714",height:"26.286",x:"2.286",y:"8",fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",rx:"3.333"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M2.286 11.333A3.333 3.333 0 0 1 5.619 8h23.048A3.333 3.333 0 0 1 32 11.333v2.953H2.286v-2.953Z"}),n.createElement("ellipse",{cx:"5.86",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"7.794",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"9.728",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M8.264 21.143h17.583M8.264 27.067h17.583"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M38.518 13.857c0 5.572-4.517 10.09-10.09 10.09-5.572 0-10.089-4.518-10.089-10.09s4.517-10.09 10.09-10.09c5.572 0 10.089 4.518 10.089 10.09Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.182 7.076a.336.336 0 0 1 .582 0l6.014 10.415a.336.336 0 0 1-.291.505H22.46a.336.336 0 0 1-.291-.505l6.013-10.415Z"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.61 10.389v4.034M28.61 15.428v.968"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"})))),r=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"23.771",height:"21.029",x:"1.829",y:"6.4",fill:"#fff",stroke:"#1C1C1C",rx:"2.667"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",d:"M1.829 9.067A2.667 2.667 0 0 1 4.495 6.4h18.438A2.667 2.667 0 0 1 25.6 9.067v2.361H1.829V9.067Z"}),n.createElement("ellipse",{cx:"4.688",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"6.235",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"7.783",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("path",{stroke:"#1C1C1C",d:"M6.61 16.914h14.067M6.61 21.654h14.067"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",d:"M30.814 11.086a8.071 8.071 0 1 1-16.143 0 8.071 8.071 0 0 1 16.143 0Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",d:"M22.546 5.66a.269.269 0 0 1 .465 0l4.811 8.333a.269.269 0 0 1-.233.403h-9.621a.269.269 0 0 1-.233-.403l4.81-8.332Z"}),n.createElement("path",{stroke:"#1C1C1C",d:"M22.888 8.311v3.228M22.888 12.343v.774"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h32v32H0z"}))))},29357:(e,t,i)=>{i.d(t,{T:()=>s});var n=i(49231),a=i(52467),r=i(98471);const s=n.memo((function(e){var t,i,s;const o=(0,a.hj)(e.size)?e.size:r.np,l="mini"===e.type?r.np:r.v5,c="mini"===e.type?o:r.v5*(o/r.np),d=null!==(t=e.backgroundColor)&&void 0!==t?t:r.bd.green,u=null!==(i=e.arrowColor)&&void 0!==i?i:r.bd.white,p=null!==(s=e.textColor)&&void 0!==s?s:r.bd.black;return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:c,height:o,fill:"none",className:e.className,viewBox:`0 0 ${l} ${r.np}`,"data-grammarly-part":e.dataGrammarlyPart,"aria-label":e.ariaLabel,"aria-hidden":e.ariaHidden},"mini"!==e.type&&n.createElement("path",{fill:p,d:"M47.94 7.305v.765a3.23 3.23 0 0 0-2.286-.942c-2.009 0-3.549 1.663-3.549 3.724s1.54 3.695 3.549 3.695c.894 0 1.685-.354 2.286-.942v.765h1.437V7.305zm-.327 4.675c-.686 1.097-1.983 1.426-3.014.777-1.03-.65-1.306-1.953-.62-3.05s1.99-1.44 3.021-.79 1.298 1.966.613 3.063m31.098-4.675v.765a3.23 3.23 0 0 0-2.287-.942c-2.008 0-3.548 1.663-3.548 3.724s1.54 3.695 3.548 3.695c.895 0 1.686-.354 2.287-.942v.765h1.437V7.305zm-.327 4.675c-.686 1.097-1.983 1.426-3.013.777-1.03-.65-1.306-1.953-.62-3.05s1.99-1.44 3.02-.79 1.299 1.966.613 3.063m-23.319-1.823c0-.662-.146-.986-.366-1.222-.22-.235-.557-.368-.924-.368s-.703.133-.924.368c-.22.236-.366.56-.366 1.222v4.21H50.99V7.3h1.407v.5a2.24 2.24 0 0 1 1.627-.676c.806 0 1.525.382 1.979.97a2.7 2.7 0 0 1 2.096-.97c.865 0 1.54.382 2.009 1 .322.442.527 1.001.527 1.9v4.341H59.14v-4.209c0-.662-.147-.986-.367-1.222-.22-.235-.557-.368-.923-.368-.367 0-.704.133-.924.368-.22.236-.367.56-.367 1.222v4.21h-1.495zm11.181 0c0-.662-.147-.986-.367-1.222-.22-.235-.557-.368-.924-.368-.366 0-.703.133-.923.368-.22.236-.367.56-.367 1.222v4.21H62.17V7.3h1.407v.5a2.24 2.24 0 0 1 1.627-.676c.806 0 1.525.382 1.98.97a2.7 2.7 0 0 1 2.096-.97c.865 0 1.54.382 2.008 1 .322.442.527 1.001.527 1.9v4.341H70.32v-4.209c0-.662-.146-.986-.366-1.222-.22-.235-.557-.368-.924-.368s-.704.133-.924.368c-.22.236-.366.56-.366 1.222v4.21h-1.495v-4.21m21.003-7.238h1.495v11.451h-1.495zM33.969 7.305v.765a3.23 3.23 0 0 0-2.287-.942c-2.008 0-3.548 1.634-3.548 3.695s1.54 3.724 3.548 3.724a3.2 3.2 0 0 0 2.257-.913v.736c0 1.208-.749 2.118-1.866 2.267-.873.116-1.832-.135-2.443-.64a2 2 0 0 1-.204-.193l-.785 1.283.057.05c.775.639 1.862 1.001 2.946 1.001q.313 0 .621-.04c1.85-.246 3.14-1.78 3.14-3.728V7.305zm-2.14 5.799c-1.217 0-2.14-.986-2.14-2.281s.923-2.253 2.14-2.253c1.216 0 2.14.971 2.14 2.267s-.924 2.267-2.14 2.267M95.482 7.28l-2.216 5.046-2.043-5.046h-1.5l2.763 6.824-1.743 3.97h1.518l.953-2.171.78-1.777L97 7.28zm-53.892.196c-.518-.23-1.089-.325-1.648-.21a2.6 2.6 0 0 0-1.517.946V7.3h-1.407v7.065h1.495v-3.518c0-.824.206-1.296.542-1.634a1.93 1.93 0 0 1 1.393-.56c.173 0 .62.05 1.103.364l.711-1.162a4 4 0 0 0-.672-.38m43.096-.22a2.6 2.6 0 0 0-1.312.71c-.074.075-.147.148-.206.236v-.913h-1.407v7.065h1.496v-3.518c0-.824.205-1.295.542-1.633a1.93 1.93 0 0 1 1.393-.56c.173 0 .584.004 1.099.205V7.449c-.507-.216-1.061-.307-1.605-.195"}),n.createElement("path",{d:"M0 10.5C0 4.69993 4.68161 -0.000488281 10.4585 -0.000488281C16.2353 -0.000488281 20.916 4.69993 20.916 10.5C20.916 15.5743 17.333 19.8069 12.5675 20.7868C11.8868 20.927 11.1814 20.9995 10.4614 20.9995H0V10.4995V10.5Z",fill:d}),n.createElement("path",{d:"M17.6952 9.50538H12.9825L11.8727 11.4355H15.7587C15.1497 14.7924 11.4315 17.0778 7.7157 15.1448C6.91668 14.7296 6.26603 14.0875 5.84567 13.2853C3.70801 9.19919 6.6282 5.08827 10.4817 5.08827C12.0705 5.08827 13.5013 5.78681 14.4841 6.89425L15.4799 5.16226C14.0613 3.81386 12.103 3.02867 9.96778 3.17958C6.33245 3.43125 3.38511 6.45663 3.20814 10.11C3.00645 14.3046 6.34603 17.7798 10.4793 17.7798C14.6125 17.7798 17.7606 14.4993 17.7606 10.4687C17.7606 10.1411 17.7359 9.81984 17.6947 9.50538H17.6952Z",fill:u}))}))},34208:(e,t,i)=>{i.d(t,{e:()=>s});var n=i(49231),a=i(52467),r=i(98471);const s=n.memo((function(e){const{level:t="warning",size:i}=e,s=(0,a.hj)(i)?i:r.lk,o="warning"===t?r.bd.yellow:r.bd.red,l=s*r.Kj/r.lk;return n.createElement("svg",{width:l,height:s,viewBox:`0 0 ${r.Kj} ${r.lk}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e.className},n.createElement("path",{d:"M13 .625C6.166.625.626 6.165.626 13v12.375h12.379c.851 0 1.686-.085 2.492-.25 5.64-1.156 9.88-6.144 9.88-12.124C25.375 6.165 19.835.625 13 .625Z",fill:r.bd.green,stroke:"white"}),n.createElement("path",{d:"M21.305 11.864h-5.408l-1.273 2.206h4.459c-.7 3.836-4.966 6.448-9.23 4.239a5.02 5.02 0 0 1-2.145-2.125c-2.453-4.67.898-9.368 5.32-9.368 1.822 0 3.464.798 4.592 2.064l1.143-1.98a8.31 8.31 0 0 0-6.325-2.266c-4.172.288-7.554 3.746-7.757 7.92-.231 4.795 3.6 8.766 8.344 8.766 4.742 0 8.355-3.749 8.355-8.355a8.48 8.48 0 0 0-.076-1.101ZM26 14.166l5.052 9.625H20.948L26 14.166Z",fill:r.bd.white}),n.createElement("path",{d:"m24.404 13.88.436.245-.436-.245-5.22 9.281c-.693 1.23.16 2.808 1.595 2.808h10.442c1.436 0 2.288-1.577 1.596-2.808l-5.221-9.281a1.823 1.823 0 0 0-3.192 0ZM26 17.219a.32.32 0 0 1 .32.32v2.734a.32.32 0 1 1-.64 0V17.54a.32.32 0 0 1 .32-.32Zm.32 5.789a.32.32 0 1 1-.64 0 .32.32 0 0 1 .64 0Z",fill:o,stroke:r.bd.white}))}))},46036:(e,t,i)=>{i.d(t,{K:()=>a});var n=i(49231);const a=n.memo((function(e){return n.createElement("svg",{className:e.className,width:e.width,height:e.height,viewBox:"0 0 34 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M20.6126 4.92236H4.92251C2.75616 4.92236 1 6.67852 1 8.84486V27.9672C1 30.1335 2.75616 31.8897 4.92251 31.8897H20.6126C22.779 31.8897 24.5351 30.1335 24.5351 27.9672V8.84486C24.5351 6.67852 22.779 4.92236 20.6126 4.92236Z",fill:"white",stroke:"#1C1C1C",strokeLinecap:"round"}),n.createElement("path",{d:"M5.90625 18.1616H12.7706",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M5.90625 24.0454H19.6351",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M32.8704 10.8248C32.8704 16.2173 28.4585 20.6126 23.0456 20.6126C21.0065 20.6126 19.1898 20.0216 17.6327 18.9505C15.0004 17.2146 13.2578 14.1859 13.2578 10.7878C13.2578 5.39529 17.6698 1 23.0827 1C28.4956 1 32.8704 5.3953 32.8704 10.8248Z",fill:"#FFDC85",stroke:"#1C1C1C",strokeMiterlimit:"10"}),n.createElement("path",{d:"M23.0625 5.16846V10.8071H27.2302",stroke:"#1C1C1C",strokeLinecap:"round"}))}))},98471:(e,t,i)=>{i.d(t,{Kj:()=>o,bd:()=>a,lk:()=>l,np:()=>r,v5:()=>s});var n=i(57129);const a={green:n.Green60,white:n.White,grey:n.BlueGray60,red:n.Red60,yellow:n.Gold60,black:"#1C1C1C"},r=21,s=97,o=34,l=27;a.green,a.white,a.grey,a.black,a.white,a.black,a.white,a.black},50443:(e,t,i)=>{i.d(t,{X:()=>n});i(97767);const n=(...e)=>{}},13593:(e,t,i)=>{i.d(t,{E:()=>n});var n,a=i(44071),r=i(90572),s=i(50782),o=i(57935),l=i(70932),c=i(32701),d=i(6986);!function(e){const t=l.Y.create("Reports");function i(e){var t;const i=null===(t=self.document)||void 0===t?void 0:t.createElement("a");i.href="data:application/octet-stream,"+encodeURIComponent(function(e){const t=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};return[["Level","Logger","Timestamp","Message"].join("\t"),...e.map((e=>{const i=[e.level,e.loggerName,new Date(e.timestamp).toISOString(),e.message];return e.data&&i.push(t(e.data)),e.exception&&i.push(t(e.exception)),i.join("\t")}))].join("\n")}(e)),i.target="_blank",i.download="grammarly-logs.tsv",i.click()}async function n(e){if(t.debug("start download debug reports"),!(0,d.OB)().historyLogsService.isHistoryEnabled())return t.debug("debug reports feature is not enabled"),alert("Logging is not enabled");if(!self.confirm(c.o1))return;t.debug("confirm download debug reports");const n=[];e.sort((e=>e.envName===(0,d.OB)().context?1:-1));try{await(0,s.Fb)(o.E0,u())}catch(e){t.warn("cannot get latest app state",e)}for(const t of e){const e=await t.getLogs();n.push(...null!=e?e:[])}n.sort(((e,t)=>e.timestamp-t.timestamp)),i(n)}async function u(){t.info("latest experiments state",await(0,d.OB)().bgRpc.api.getExperimentTreatment()),t.info("latest storage state",await(0,d.OB)().browserApi.preferences.getAll()),t.info("browser info",(0,d.OB)().browserApi.getBrowserInfo())}e.download=n,e.initKeyboardShortcutHandler=function(e){return(0,a.R)(self,"keydown").pipe((0,r.h)((e=>"KeyS"===e.code&&e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)))).subscribe((()=>{n(e)}))},e.logLatestState=u}(n||(n={}))},26698:(e,t,i)=>{i.d(t,{Ng:()=>r,WY:()=>o,ZD:()=>s});var n=i(68970),a=i(62549);const r=e=>{const t=a.n.getType(e);return"registered"===t?"free":t},s=e=>{return{clientVersion:e.version,platformVersion:"",application:e.domain,browser:e.systemInfo.browser.name,os:(t=e.systemInfo.os,t.isWindows?"windows":t.isMac?"mac":t.isChromeOS?"chromeos":"other"),userType:e.userType,team:"browserextensions"};var t},o=e=>{const t=new URL((0,n.Um)().grammarlyEmployeesBugReportsUrl);return Object.entries(e).forEach((([e,i])=>{i&&t.searchParams.set(e,i)})),t.toString()}},48021:(e,t,i)=>{i.d(t,{GH:()=>l,Xv:()=>o,dU:()=>c,hG:()=>d,n1:()=>s});var n=i(96991),a=i(4603),r=i(4798);const s=2147483647;function o(e={enabled:!1},t){const i=t||(0,a.OB)().experimentClient;return e.enabled&&(null==i?void 0:i.isGateEnabled(r.K.SessionTimeout))}function l(e){try{return JSON.parse(e).refresh_token_expires_at}catch(e){return}}function c(e){if(!e)return!1;return e-Date.now()<=n.p7}function d(e){return e-Date.now()-n.p7}},98544:(e,t,i)=>{var n=i(42663),a=i(2963)(n);a.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),a.locals={textBox:"_z3YOv-textBox"},e.exports=a},18471:e=>{e.exports={ideateButton:"_ErYR",ideateButtonIcon:"i8HXG",spin:"CSZH1"}},38587:e=>{e.exports={heading:"RDHDg",labelsFont:"ChkL9"}},62210:e=>{e.exports={viewAnnouncer:"I0c5l"}},40591:e=>{e.exports={link:"QgFSd",externalLink:"oGmOe",icon:"i3roU",gmail:"h0anR",outlook:"NM8XU",gdocs:"Y9XfU",spin:"YUQEk"}},29121:e=>{e.exports={progressBarBg:"Hz_iW",progressBar:"JxiOG"}},39435:e=>{e.exports={singleCardAssistant:"XPx7S",singleCardAssistantNativeContentWithPadding:"He99k"}},29595:e=>{e.exports={getStartedChecklist:"QE3tb",logo:"DOz7G",title:"CzlXc",progressCaption:"TKilD"}},77690:e=>{e.exports={getStartedUseCases:"V1X0D",copyContainer:"AN8Cu",title:"jjHIP",subtitle:"gjGEx",ctaContainer:"s7nMi",ctaCaption:"BJWKo",ctaButtons:"SWGns",externalLink:"JLzQ9",icon:"DhhQ7",gmail:"hRR0U",outlook:"lnWHG",gdocs:"b0ty6",word:"eHkAg",slack:"OppdY",teams:"Hfv16",linkedIn:"hc5LW"}},94839:e=>{e.exports={cardList:"O6x_6",cardListFooterDynamic:"NzU4C",cardListFooterStatic:"kdk1x",cardListFooterAnimate:"CUEf1",upgradeHookWrapper:"fpqSf",assistant:"ziFUs",dragging:"dl2Z_",mainView:"OfKqp"}},12732:e=>{e.exports={emogenieViewOverlayHeader:"saNAB",emogenieViewOverlayHeaderBetaBadge:"J16CK"}},11838:e=>{e.exports={footerButton:"j5lp5",feedbackButton:"_i7kC"}},64150:e=>{e.exports={actions_hovered:"FONqd",header:"uDOFr",draggableWrapper:"rjQy5",draggable:"P3jaK",headerActions:"Xtr7I",headerActionBtnProofitIcon:"b5yo3",headerActionBtnGoalsIcon:"pl7ek",logoscore_fadein:"tUJui",fadein:"AQJV1",logoscore_fadeout:"chyj0",fadeout:"ooxFJ",logo_score:"RLHcp",spin:"g0xkj"}},51980:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},36555:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},90738:e=>{e.exports={relatedSuggestionsTitle:"AP_Yd"}},36998:e=>{e.exports={viewOverlay:"CpaDC",content:"BWu_L",footer:"Nfocm",viewOverlayGoBack:"EBOfD",defaultViewOverlayPanel:"TFghg",gradientViewOverlayPanel:"a2q6L",proofitViewOverlayPanel:"vCO8v",defaultViewOverlayHeader:"U8zS8",defaultViewOverlayContent:"Z9WSl",gradientViewOverlayContent:"sxmDB",proofitViewOverlayContent:"_nDhb",logo:"OtV3S",proofitViewOverlayHeader:"HuIOP",proofitViewOverlayHeaderBetaBadge:"PUb7a"}},12444:e=>{e.exports={viewOverlay:"snX4b",content:"fSzZu",footer:"Y8cpA",viewOverlayGoBack:"yEi_t",defaultViewOverlayPanel:"aPyGs",gradientViewOverlayPanel:"gbwcW",settingsViewOverlayPanel:"Rudrm",defaultViewOverlayHeader:"_tUap",defaultViewOverlayContent:"Cs_VJ",gradientViewOverlayContent:"c4WjP",settingsViewOverlayContent:"ZtK1f",logo:"_kPSX",settingsViewDoneButton:"xVshA"}},92999:e=>{e.exports={viewOverlay:"Gsb9P",content:"_HIip",footer:"EZP9j",viewOverlayGoBack:"oEefg",defaultViewOverlayPanel:"jAeU3",gradientViewOverlayPanel:"rIqVr",defaultViewOverlayHeader:"h1FQ0",defaultViewOverlayContent:"YsrUq",gradientViewOverlayContent:"Nc28X",logo:"cMPwC"}},79390:e=>{e.exports={compactSuccessLens:"lP637",compactSuccessLensContainer:"FK4Ma"}},97855:e=>{e.exports={priority:"Eg8pv",emoji:"Ls_xS",cardEmoji:"ZVWqH",emojiButtonWrapper:"cenoh",emojiContainer:"Bg2tI",emojiButtonShow:"C3ro0",emojiButtonHide:"nul4w"}},1127:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},43420:e=>{e.exports={cardList:"gV0cS"}},95627:e=>{e.exports={premiumLens:"TFbap"}},542:e=>{e.exports={successLens:"_NLHO"}},5706:e=>{e.exports={footer:"nFy3z",plagiarismButton:"o_JYq",counterWrapper:"mOddw",counter:"csO1n",counterCheckmarkIcon:"cBKjm"}},41927:e=>{e.exports={defaultHeader:"DTiYT",defaultHeaderWithLenses:"YBSd6",priorityLensHeader:"sHAVn",head:"TGEx5",headerGroup:"oSvN_",logoIcon:"_4cQZf",headerButton:"PpuRF",setGoalsButton:"UuSZX",divider:"NPZsq",lensNavigation:"dBaZB",disabledLensNavigation:"hr85r",prioritySwitchWrapper:"iqdfL",prioritySwitchFlatWrapper:"LUmRC"}},63376:e=>{e.exports={wrapper:"QzCRj"}},22873:e=>{e.exports={container:"qfD5D",baseGrid:"iPCw8",bottomLeft:"PuuHv",bottomRight:"r_Ycp",top:"qu1VK",notificationWrapper:"cSTPv"}},44094:e=>{e.exports={sidebarContainer:"OUOwE",sidebarContent:"etRrJ"}},96714:e=>{e.exports={learnMore:"Z_tYK",learnMoreTitle:"wCofj",learnMoreExample:"YSZy0",learnMoreExampleIconAndTitle:"W3Msk",learnMoreExampleIcon:"q0k69",learnMoreExampleCorrectIcon:"TsvDV",learnMoreExampleIncorrectIcon:"DBJgs",learnMoreExampleTitle:"_5iVIT",learnMoreExampleTextItalic:"o84Ep",learnMoreExampleTextMarginLeft:"cTK8V",spin:"DHpIM"}},5945:e=>{e.exports={container:"qAay9"}},59808:e=>{e.exports={singleCardAssistant:"bJPRn",singleCardAssistantHeader:"Zoc_S",singleCardAssistantHeaderDraggable:"ZX00_",singleCardAssistantContent:"p9dQN",singleCardAssistantContentWithPadding:"UAH4K",singleCardAssistantFooter:"VnTOq",singleCardAssistantFooterText:"BgeT4",singleCardAssistantFooterButtonIcon:"kBU3t",spin:"HCSMj"}},78617:e=>{e.exports={card:"SD4B_",cardInline:"lDTYf",cardInlineRegular:"I8fWz",cardInlineFixedWidth:"zFjOi",cardInlineFitContent:"SzLk5",cardAssistant:"SsdZ1",cardAssistantAllLens:"OYPRO",cardClickable:"FxoHS"}},3931:e=>{e.exports={emogenieReport:"IPEgR",emogenieReportHeader:"ugGrL",emogenieReportHeaderTitle:"x3FcP",emogenieReportItems:"SwRPf",emogenieReportToneSuggestionInfo:"vLVNY",emogenieReportToneSuggestionInfoEmojiAndTitle:"VinN1",emogenieReportToneSuggestionInfoEmoji:"gmfaf"}},26149:e=>{e.exports={emogenieBrandToneInfoIcon:"pcprF",emogenieReportItem:"LXjD_",emogenieBrandToneInfoIconOn:"KIvz3",emogenieBrandToneInfoIconOff:"NDatF",emogenieReportItemEmotion:"AjVJZ",emogenieReportItemEmotionEmojiAndName:"cIE8j",emogenieReportItemEmotionEmoji:"oZZpB",emogenieReportItemEmotionName:"QWYxt",emogenieReportItemEmotionBadgeOrIntensity:"jw4RJ",emogenieReportItemEmotionIntensity:"Ixu7L",emogenieReportItemEmotionIntensityDot:"aFcXw",emogenieReportItemEmotionIntensityDotActive:"xUxza",emogenieReportItemEmotionActionsMenuButton:"q4wIy",emogenieReportItemEmotionActionsMenuIcon:"V5KFq",emogenieReportItemEmootionActionsMenuThumsUpIcon:"UAfpn",emogenieReportItemEmootionActionsMenuThumsDownIcon:"CoUgw",spin:"tmqUv"}},76491:e=>{e.exports={badge:"stkrr",badgePrimary:"XTtJC",badgeSuccess:"VlXa2",badgeGold:"TvgjE",badgeError:"elqes",badgeRounded:"rI61B",badgeRoundedSmall:"j0sDJ",badgeRoundedMedium:"mJWU1",badgeRoundedLarge:"VhQJY",badgeTitle:"yHBKc",badgeTitleBold:"CZLBe"}},75201:e=>{e.exports={button:"Xv6nu",buttonRound:"wsrpG",buttonWithPadding:"aaYpW",buttonSmall:"zi_ja",buttonMedium:"KumoA",buttonTransparent:"uQ7bn",buttonOutlined:"v1SWt",buttonLink:"XiP1W",buttonEnabled:"FfbwC",buttonPrimary:"u8dZN",buttonSuccess:"bx7Ao",buttonTransparentHoverable:"QJ7SS",buttonDark:"R0C6b",buttonNeutral:"Glsdy",buttonNeutralWhite:"Xxwoy",buttonPremium:"FyfT4",buttonDisabled:"VMMkP",secondaryText:"xYKB9"}},68399:e=>{e.exports={closeButtonMediumIcon:"xMSt8",closeButtonSmallIcon:"KJIVs",closeButtonWhiteIcon:"vwkk7",spin:"DgOJb"}},46922:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},14482:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},45134:e=>{e.exports={emoji:"goatt",emojiAlt:"cUc93"}},7987:e=>{e.exports={fontWrapper:"amkYk"}},53397:e=>{e.exports={pane:"Rktrz",paneDark:"Iackh",paneDarkDS:"Egf_e",paneSmall:"Zglu8",paneMedium:"KDiTE",paneLarge:"Ut6iQ",paneExtraLarge:"JyayS",paneHeaderContentContainer:"w7cHF",paneHeaderContentContainerWithCloseButton:"sJfMe",paneHeaderContent:"cRXvV",paneHeaderContentIcon:"mYqjL",paneHeaderContentIconNotificationOK:"D98fm",paneHeaderContentIconNotificationWarning:"y9R1h",paneMainContent:"lafeo",paneMainContentWithoutPadding:"M2ZM4",spin:"IMGhE"}},85445:e=>{e.exports={popoverArrowElement:"m0jPP",popoverArrowElementBottom:"X6ecE",popoverArrowElementDark:"m12bb",popoverArrowElementDarkDS:"EKEQa",popoverArrowElementTop:"NsYpj",popoverArrowElementRight:"IQwgo",popoverArrowElementLeft:"k4czK"}},29918:e=>{e.exports={popoverReferenceElement:"WEkke",lightDSPopover:"IjZe9"}},14074:e=>{e.exports={popoverMenuTriggerElement:"nURov",popoverMenu:"Ij6SI",popoverMenuLightDS:"O_T5O",popoverMenuSectionTitle:"EF47u",popoverMenuSectionSeparator:"hiFzz",popoverMenuSectionSeparatorLightDS:"AFz96",popoverMenuSectionLightDS:"G04S7",popoverMenuItem:"wt6uR",popoverMenuItemLightDS:"ct1Rs",disabledPopoverMenuItem:"hJmoX",popoverMenuItemLabel:"jgsgt",popoverMenuItemLabelWithIcon:"l6_mK",popoverMenuItemLabelIcon:"DD9ET"}},30507:e=>{e.exports={popoverNotificationMessage:"p0k9e"}},17345:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},29844:e=>{e.exports={premiumButton:"QpA64"}},3873:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"IrY6A",spin:"m9t2y"}},60775:e=>{e.exports={proofitHowItWorksSteps:"Unehy",proofitHowItWorksStep:"zMEEz",proofitHowItWorksStepNumberContainer:"EfoqG",proofitHowItWorksStepNumber:"XIDZQ",proofitHowItWorksStepOne:"K5qs8",proofitHowItWorksStepOneNumberContainer:"e4ae6",proofitHowItWorksStepTwo:"P3h_J",proofitHowItWorksStepTwoNumberContainer:"YejA_",proofitHowItWorksStepThree:"FYGwC",proofitHowItWorksStepThreeNumberContainer:"YFsfV"}},34649:e=>{e.exports={proofitRequestForm:"QVI6h",proofitRequestFormImg:"wKuXo",proofitRequestFormTitle:"yNxb3",proofitRequestFormDescription:"vLSn1",proofitRequestFormCostAndTime:"b2RwJ",proofitRequestFormTime:"Bo3xu",proofitRequestFormCostAndTimeTitle:"Cu_3T",proofitRequestFormCostAndTimeSubtitle:"NFy21",proofitRequestFormRequestBtn:"beQX2",proofitRequestFormUnavailableMsg:"JDvub",proofitRequestFormFootnote:"S33xD",proofitRequestFormFootnoteFreeTrial:"SflIX",proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:"HUrVJ",proofitRequestFormPrivacyInfoTitle:"ymDqL",proofitRequestFormPrivacyInfoDescription:"ZqcFq",proofitRequestFormPrivacyInfoDescriptionItem:"iv8f1",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"Duc32"}},58141:e=>{e.exports={proofitReviewForm:"SNt2d",proofitReviewFormTitle:"iMzY2",proofitReviewFormDescription:"jvfyf",proofitFeedbackForm:"eY729",proofitDoneButton:"CTbuu"}},51658:e=>{e.exports={scoreRing:"xlRHm",loading:"A_cJy",rotation:"srLo5",scoreText:"KIWW8"}},63039:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogoLine:"osGQI",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormSubmitButton:"tYYGU",feedbackFormSubmitButtonFixOverflowBottomPadding:"Opd8X",feedbackFormSubmitButtonFixOverflowBottomPaddingChild:"QKLT7",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},45321:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}},45844:e=>{e.exports={label:"cLK4q",selected:"hbRki",option:"UytwF",disabled:"mTk5j",lockIconWrapper:"o4NOU"}},37926:e=>{e.exports={option:"XNQPo"}},65063:e=>{e.exports={option:"dRYWx"}},69112:e=>{e.exports={american:"JRPow",australian:"FZNcB",british:"MzB3a",canadian:"_fn3J",indian:"eqgex"}},7635:e=>{e.exports={hover_blocker:"np9cY"}},24146:e=>{e.exports={settingsContent:"C3SN4",fullWidth:"dRfoN",heading:"_HqAa",allSettings:"pUfgB",separator:"vlSkx",section:"v01UR",settingsLink:"d_ohh",debugMenu:"iovEn",downloadBtn:"u6BF0",timer:"DQHsO",gOSMenu:"dhG16",menuItem:"COwmJ","gds-select-container":"Cmf7Q"}},47654:e=>{e.exports={windows:"ScRGR",setting_item:"byTue",fixing:"tGQgu",thin_text:"Zw2iF",footer:"VarAw",gr_popup_settings:"sCOqq",iOS:"xw90P",footer_btn:"dFcxY",short_border:"GPdi3",top:"a8_HB",content:"eJi6K",my_grammarly:"TPdm3",new_document:"b5rRu",unsupported_site:"FV6cP",unsupported_item:"kI6Es",unsupported_title:"TvJkj",domain:"mbOuw",domain_in_details:"HyZRA",unsupported_temporary:"aeiHl",unsupported_permanently:"e63AG",unsupported_grammarly:"SK755",diamond:"z0724",userPanel:"bG2GY",email:"U4qfE",link:"Vrj67",blue:"Dstaa",edc_stripe:"GEFvM",line:"_o71L",not_supported:"Z9hzt",site_switcher:"LXeMc",upgrade:"BAl_v",favicon:"L5Hrq",centered:"T0qTK",summary:"tuG8u",upgrade_title:"KRcNq",settingsContentWrapper:"OeKpx",settingsContent:"AwQr3",sessionTimeoutWrapper:"BErLl",sessionTimeoutDiv:"rekSD",sessionTimeoutTextAndIcon:"ihkdF",sessionTimeoutPopupIcon:"xYrMw",sesstionTimeoutText:"I7MlK",signinLink:"n7A2H",popupSettings:"wBa4V",withBackground:"JRZMC",llamaTitle:"WnzAW",llamaDescription:"dDIsV",cheetahLabelAndButton:"WwKRI",cheetahLabel:"aMCQq",cheetahManageButton:"hfCbo",hwrDescription:"KqA2M",nobr:"wae8U"}},19416:e=>{e.exports={content:"IJam9",borderTop:"oKEr5",borderBottom:"lZ1ZL",premiumButton:"bvxiF"}},4028:e=>{e.exports={fontsPreloader:"NRIwa",interThin:"yEioX",interThinItalic:"qcX4v",interExtraLight:"zVlKD",interExtraLightItalic:"G5uFu",interLight:"ss65s",interLightItalic:"BAp6C",interRegular:"TsKuT",interItalic:"zaGJf",interMedium:"m1asa",interMediumItalic:"OrxoJ",interSemiBold:"DZkXF",interSemiBoldItalic:"nIB5t",interBold:"fcnMV",interBoldItalic:"sxDQt",interExtraBold:"PWSxT",interExtraBoldItalic:"NWlff",interBlack:"CDNOZ",interBlackItalic:"ZeE9p"}}}]);