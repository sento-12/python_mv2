import{B as T,S as D,p as d,h as k,a4 as v,n as f,q as E,l as x,A as y,G as h,a5 as w,u as A}from"./start-C5OgI2kj.js";import{c as u}from"./RemoteEntity-CN-1WB86-yD3y8ldD.js";function C(e,t){return g(e,t,{kind:"none"})}function G(e,t,r){return g(e,t,{kind:"some",value:r})}function L(e,t){return S(e,t)}function j(e,t){return S(e,t,()=>e.getValue())}function g(e,t,r){const n=r.kind==="some"?new T(r.value):new D;return d(e.resolveEntity(t,{entity:{next:i=>y(n.next(i)),error:i=>y(n.error(i)),complete:()=>y(n.complete())}}),k(({entity:i,connection:a})=>({...n instanceof T?{getValue:()=>n.value}:void 0,subscribe:l=>{const o=new DisposableStack,s=n.subscribe(l),c=v(),b=new AbortController;return o.defer(()=>b.abort()),a.addEventListener("abort",()=>n.complete(),{once:!0,signal:b.signal}),o.defer(()=>{s.unsubscribe(),a.aborted||d(i.unsubscribe(c),f(E(p=>x.error("Error unsubscribing entity",p))))}),d(i.subscribe(c),f(E(p=>n.error(p)))),o}})))}function S(e,t,r){const{entity:n,connection:i}=t,a=new DisposableStack,l=new AbortController;a.defer(()=>l.abort());const o=new Map;return a.defer(()=>{o.forEach(s=>s[Symbol.dispose]()),o.clear()}),i.addEventListener("abort",()=>a.dispose(),{signal:l.signal}),{entity:{subscribe:s=>{if(a.disposed)return h(new w("The subscription is disposed"));r&&m("next",n.next(r()));const c=o.get(s);return c&&c[Symbol.dispose](),o.set(s,e.subscribe({next:b=>m("next",n.next(b)),error:b=>m("error",n.error(b)),complete:()=>m("complete",n.complete())})),y()},unsubscribe:s=>A(async()=>{const c=o.get(s);c==null||c[Symbol.dispose](),o.delete(s)})},disposable:a}}function m(e,t){d(t,f(E(r=>x.error("'Unexpected error calling client.".concat(e,"()'"),r))))}const I=u("ActiveDocumentIdEntity"),U=u("TextDocumentHasFocusEntity"),B=u("TextDocumentLastFocusAtEntity"),H=u("TextDocumentGeometryEntity"),W=u("TextChangeEntity"),q=u("TextDocumentGeometryWillChangeEntity"),M=u("TextDocumentSelectionEntity");export{I as A,U as T,B as a,H as b,L as c,W as d,M as e,q as f,j as g,G as h,C as i};
//# sourceMappingURL=TextDocumentEntities-Cun58Ax6.js.map
