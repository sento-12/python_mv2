/*!
 * 
 *     MCAFEE RESTRICTED CONFIDENTIAL
 *     Copyright (c) 2024 McAfee, LLC
 *
 *     The source code contained or described herein and all documents related
 *     to the source code ("Material") are owned by McAfee or its
 *     suppliers or licensors. Title to the Material remains with McAfee
 *     or its suppliers and licensors. The Material contains trade
 *     secrets and proprietary and confidential information of McAfee or its
 *     suppliers and licensors. The Material is protected by worldwide copyright
 *     and trade secret laws and treaty provisions. No part of the Material may
 *     be used, copied, reproduced, modified, published, uploaded, posted,
 *     transmitted, distributed, or disclosed in any way without McAfee's prior
 *     express written permission.
 *
 *     No license under any patent, copyright, trade secret or other intellectual
 *     property right is granted to or conferred upon you by disclosure or
 *     delivery of the Materials, either expressly, by implication, inducement,
 *     estoppel or otherwise. Any license under such intellectual property rights
 *     must be expressed and approved by McAfee in writing.
 *
 */(()=>{"use strict";const e="SHOW_MB_ACTIVATE_BANNER",t="PING_CONTENT_MB_VIDEO_CHECK",n="ACTIVATE_BANNER",o="PAGE_BANNER";const r=0,s="PRINT_IN_BACKGROUND",a={NONE:0,INFO:1,ERROR:2,WARN:3,DEBUG:4,ALL_IN_BACKGROUND:99},l=1,c=2,i=3,d=4,u={BACKGROUND:"BACKGROUND",CONTENT:"CONTENT",TELEMETRY:"TELEMETRY"},g={DEFAULT:"color: #000000; font-weight: normal; font-style:normal; background: #FFFFFF;",BACKGROUND:"color: #8D0DBA; font-weight: bold; background: #FFFFFF;",CONTENT:"color: #F54A26; font-weight: bold; background: #FFFFFF;",TELEMETRY:"color: #147831; font-weight: bold; background: #FFFFFF;"};const h=new class{constructor(){this.storageChecked=!1,this.logLevel=null,this.queue=[];const e="MCLOGLEVEL";chrome?.storage?.local.get([e]).then((t=>{const n=Object.values(a).includes(t[e]);this.logLevel=n?t[e]:r,this.logLevel!==a.NONE&&this.queue.forEach((({callback:e,message:t,processType:n})=>{e(t,n)})),this.queue=[],this.storageChecked=!0}))}log(e,t=null){this.storageChecked?this.processLog(e,l,t,this.logLevel):this.queue.push({callback:this.log.bind(this),message:e,processType:t})}error(e,t=null){this.storageChecked?this.processLog(e,c,t,this.logLevel):this.queue.push({callback:this.error.bind(this),message:e,processType:t})}warn(e,t=null){this.storageChecked?this.processLog(e,i,t,this.logLevel):this.queue.push({callback:this.warn.bind(this),message:e,processType:t})}debug(e,t=null){this.storageChecked?this.processLog(e,d,t,this.logLevel):this.queue.push({callback:this.debug.bind(this),message:e,processType:t})}processLog(e,t,n,o){if(o===a.NONE)return;let r="chrome-extension:"===location.protocol?u.BACKGROUND:u.CONTENT;n&&u[n]&&(r=n);const l=new Date,i=t===c?e:`%c[${r} ${l.toLocaleString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0})}]: %c${e}`;r===u.CONTENT&&this.logLevel===a.ALL_IN_BACKGROUND&&chrome.runtime.sendMessage({command:s,logMessage:i,processType:r,logType:t,logLevel:o}),this.printLog(i,r,t,o)}printLog(e,t,n,o){const r=g.DEFAULT,s=g[t]||r;if(o>=a.ERROR&&n===c&&console.error(e),o>=a.INFO&&n===l&&console.log(e,s,r),o>=a.WARN&&n===i){const t="color: #FFA500; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cWARN - ${e}`,t,s,r)}if(o>=a.DEBUG&&n===d){const t="color: #FF33D7; font-family: sans-serif; font-weight: bolder; text-shadow: #000 1px 1px;";console.log(`%cDEBUG - ${e}`,t,s,r)}}};class m{constructor(e){this.pingCommand=e,this.basePingListener(),this.addIdentifier()}basePingListener(e=null){((e,t=null,n)=>{"function"==typeof n?chrome.runtime.onMessage.addListener(((o,r,s)=>{if(r.id===chrome.runtime.id&&"object"==typeof o&&!Array.isArray(o)&&o?.ipcId===e)return n({promises:t,request:o,sender:r,sendResponse:s})})):h.error("Provided with invalid callback function")})("WA",null,(({request:t,sendResponse:n})=>{const{command:o}=t;if(o===this.pingCommand)return h.debug(`File Injection [pinged]: Received ${o} command`),n({content:!0}),"function"==typeof e&&e(),!0}))}addIdentifier(){var e;e=()=>{const e=document.createElement("span");e.id=this.pingCommand,e.style.cssText="display:none",document.body.appendChild(e)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e():document.addEventListener("DOMContentLoaded",e))}}const p=async(e,t,n,o)=>{try{chrome.tabs.sendMessage(o,{ipcId:e,command:t,...n},{},(()=>{chrome.runtime.lastError}))}catch(e){h.warn(`[broadcast] Unexpected error when calling command: "${t}", err: ${e.message}`)}},E=(e,t,n,o,r=null)=>{if(!chrome.tabs)throw new Error('"tabs" permission not set in manifest.');const s={};return"number"==typeof r&&(s.frameId=r),chrome.tabs.sendMessage(o,{ipcId:e,command:t,...n},s)},b=(e,t={},n)=>(async(e,t,n={},o={})=>{try{if(o?.tabId){const{tabId:r,frameId:s}=o;return await E(e,t,n,r,s)}if(o?.broadcast){const r=await chrome.tabs.query({}),{broadcastIgnoreId:s=[]}=o;return r.filter((({id:e})=>!s.includes(e))).forEach((({id:o})=>{p(e,t,n,o)})),!0}return await chrome.runtime.sendMessage({ipcId:e,command:t,...n})}catch(e){return h.warn(`Unexpected error when calling command: "${t}", err: ${e.message}`),null}})("WA",e,t,n),f={NONE:0,LINKEDIN:1,INSTAGRAM:2,YOUTUBE:4,FACEBOOK:8,TWITTER:16,REDDIT:32},N=(Object.values(f).reduce(((e,t)=>e+t)),{NONE:"NONE",ONLY_SECURE_SEARCH:"ONLY_SECURE_SEARCH",ALL:"ALL",*[Symbol.iterator](){for(const e of Object.keys(this))yield e}}),{NONE:L,...T}=f,y={name:"FINGER_PRINT",type:"number"},R={name:"FIRST_PARTY",type:"number"},A={name:"THIRD_PARTY",type:"number"},C=chrome,F=(Symbol.iterator,C.runtime.getURL(""),y.name,R.name,A.name,"wa-mb"),O="wa_mb_video",w={dataCollector:null,dictionaryMapper:null,eventManager:null,datasetManager:null,eventHandler:null,profiles:null,rulesManager:null,storage:new Map,engine:null,url:null,externalLogger:{log:null,error:null,warn:null,debug:null}},I="EXTN_TELEMETRY",_="#036C5C";class v{static log(e){"function"!=typeof w.externalLogger.log?console.log(`log: ${e}`):w.externalLogger.log(e,I,_)}static error(e){"function"!=typeof w.externalLogger.error?console.log(`error: ${e}`):w.externalLogger.error(e,I,_)}static warn(e){"function"!=typeof w.externalLogger.warn?console.log(`warn: ${e}`):w.externalLogger.warn(e,I,_)}static debug(e){"function"!=typeof w.externalLogger.debug?console.log(`debug: ${e}`):w.externalLogger.debug(e,I,_)}static logRawTrack(){}static logAutomationError(){}}const D=720;const B=new class extends m{constructor(){super(t),this.bannerTriggered=!1}main(){try{const e=document.querySelectorAll("video");if(0===e.length)return;e.forEach((t=>{["play","playing"].forEach((n=>{t.addEventListener(n,(({currentTarget:t})=>{this.showBanner(t,e.length)})),this.isPlaying(t)&&this.showBanner(t,e.length)}))}))}catch(e){v.error(e)}}showBanner(t,r){if(!this.bannerTriggered){if(this.bannerTriggered=!0,1===r&&t.offsetWidth>=D)return t.setAttribute(F,O),void b(e,{bannerType:n});b(e,{bannerType:o})}}isPlaying(e){return!(e.paused||e.ended||!(e.readyState>2))}};var M;M=()=>{setTimeout((()=>{B.main()}),2e3)},"undefined"!=typeof document&&null!==document&&("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?M():document.addEventListener("DOMContentLoaded",M))})();
//# sourceMappingURL=../sourceMap/chrome/scripts/content_mb_video_check.js.map